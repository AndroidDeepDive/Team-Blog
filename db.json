{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/icarus/source/css/cyberpunk.styl","path":"css/cyberpunk.styl","modified":1,"renderable":1},{"_id":"themes/icarus/source/css/default.styl","path":"css/default.styl","modified":1,"renderable":1},{"_id":"themes/icarus/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/avatar.png","path":"img/avatar.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/favicon.svg","path":"img/favicon.svg","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/logo.png","path":"img/logo.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/logo.svg","path":"img/logo.svg","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/og_image.png","path":"img/og_image.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/razor-bottom-black.svg","path":"img/razor-bottom-black.svg","modified":1,"renderable":1},{"_id":"themes/icarus/source/img/razor-top-black.svg","path":"img/razor-top-black.svg","modified":1,"renderable":1},{"_id":"themes/icarus/source/js/animation.js","path":"js/animation.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/js/back_to_top.js","path":"js/back_to_top.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/js/column.js","path":"js/column.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"source/images/cover_image_library.png","path":"images/cover_image_library.png","modified":1,"renderable":0},{"_id":"source/images/cover_ksp.png","path":"images/cover_ksp.png","modified":1,"renderable":0},{"_id":"source/images/cover_jepack_compose.png","path":"images/cover_jepack_compose.png","modified":1,"renderable":0},{"_id":"source/images/cover_system_ui.png","path":"images/cover_system_ui.png","modified":1,"renderable":0},{"_id":"source/images/cover_ui_rendering.png","path":"images/cover_ui_rendering.png","modified":1,"renderable":0}],"Cache":[{"_id":"source/.DS_Store","hash":"f3059fcbc25d06eacefd31e7fa4c39bfb7730e9d","modified":1628863785076},{"_id":"source/images/cover_image_library.png","hash":"9d10dac56e57d04551477524caf9214157925393","modified":1627219643652},{"_id":"source/images/cover_jepack_compose.png","hash":"0f17f71dd25d58a7b9220a5d88354d247249e695","modified":1627195390393},{"_id":"source/images/cover_system_ui.png","hash":"fb20cd5f11731675f596caf148535970f950fe9b","modified":1628753259181},{"_id":"source/_posts/.DS_Store","hash":"403b28003a2f10f891f4785004353708d3648a2c","modified":1628863810925},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1.md","hash":"1f3006f1a7703fc988b29b67537d29a61059fb0f","modified":1627195703351},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2.md","hash":"bed0bb57d955697851e51dda1535d2e85ba8c550","modified":1627197372124},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1.md","hash":"7d3be4ca6c447b99490e222c213eb55079fbf211","modified":1627219700235},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 3.md","hash":"a3ad0cadca8cf18eb6953ec12e687a4d5989525c","modified":1627197522912},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2.md","hash":"8303d8e786e4cd86e0bbe11ca732d0be9250c4ab","modified":1627219704789},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1.md","hash":"625ca9e43d4886bafa53ff6bab00ec5c3ca2ea7f","modified":1627219746334},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 2.md","hash":"04a75717b87a5e86742d991872d26e4981a8962c","modified":1627219750314},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3.md","hash":"1bb598a94e6e07abae4da3240feb1fc4802b2b06","modified":1627219708008},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3.md","hash":"de901bc74271426fdef7bd6b516457286f99abce","modified":1627219755183},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 2.md","hash":"b0e2fc994441106745b67f5e3b06b890cf462204","modified":1628865608375},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 1.md","hash":"2ba72fe9341141cd5807650fe9bfa6f42f1052e5","modified":1628865608375},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 3.md","hash":"41bcc183f019c357b7680e8082fd1e6b86b55747","modified":1628865608375},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/WprDTs1.png","hash":"1e7a9e83f70a8a888576c9414310dc2c5ecd42b6","modified":1627192041705},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/aO6Jlsg.png","hash":"cb2a6385373460ed62d557f5fd6857b9add5154b","modified":1627192007543},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1627197393446},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_5RZOM7sWV0sXctJtTPdshQ.png","hash":"ffe02f83fee60952e843f6851f901bea72ce9dca","modified":1627196858090},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_T9Pww7JyPMPhCJ_6yU8fyQ.png","hash":"54f618490e46ada03f3a75d198acc1c7ddc0f321","modified":1627196899753},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_9IA2k2s5hAS9pSyzpmQ6Pw.png","hash":"2b7af6d2978089bb374422102202071ab277d7b0","modified":1627196844240},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_UoLVl1dbUjKh9kd4uY0ROA.png","hash":"11b60f2e071153fcbe560e89aaef163a87ad142e","modified":1627196977774},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_XVvr-CB2pn88Te7Gg52GPA.png","hash":"fc39b18462260b52dc5a6bab6f2cc387b257ede9","modified":1627196828869},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_m7mSalYCza-SoJjmlYeWdA.png","hash":"d5d4958f6e2304ad94f4dc38104c99b9173376b5","modified":1627196954517},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_bSyX8yT7H2HevBNw9fbyYw.png","hash":"dffd3bbd66021f82170b9067b5826289b15bd4cb","modified":1627196887978},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_tPAf-Akf2IpDRrrZo1f1dg.png","hash":"67bb69909c81fcebf26ce429115685c0c0aa3bae","modified":1627196938353},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/add_002_001.png","hash":"7c35a0d3efc17ff4a8f4eb8a1d8c3a589dac2db3","modified":1627197004745},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_wFM4jF71V5aJog3lALaRKQ.png","hash":"7cc0b73358aa886719fb51ccb88413fa740b38e9","modified":1627196925904},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1/EzHZMUm.png","hash":"e3dcee986a1f76c3c2ea0ccc1c9eecc1214d67a3","modified":1627202405453},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1/UntitledDiagram.png","hash":"b68cd0059aaaecf07dbab3022d520f09f06738e2","modified":1627202456572},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1/qu5Mr6x.png","hash":"594c20fd4933bcb82a65637f0e8339456277d9eb","modified":1627202422049},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/4.png","hash":"b370fb9f3328a259420945173c0830594f008bba","modified":1627202925466},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/7990Bf0.png","hash":"855bcdec520ce2b85ad119ff869059c006a7f89d","modified":1627202792984},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/image.png","hash":"05307b5c204033dfb679b0da0b35eb93d03e5127","modified":1627202814031},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/image-1.png","hash":"59da23e7f344900920338920b9be39158ea8c03e","modified":1627202904486},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/gpu_profile.png","hash":"92eb4ea0978a9a2f8d392e2e6e1c0a08845704dd","modified":1627204852970},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/graph_color.png","hash":"4e5e3364237d63abb0e2593176d88ac774fa84ca","modified":1627204884765},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/image.png","hash":"05307b5c204033dfb679b0da0b35eb93d03e5127","modified":1627204828551},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_2.png","hash":"9b070bf77d97d74b4986c838cebb375872d9d748","modified":1627205089107},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_3.png","hash":"8d7bca48042bd3de4bcf2385d024791e77297b81","modified":1627205095602},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_1.png","hash":"8463613a962832bb022985971c157193e1d421da","modified":1627205083776},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_4.png","hash":"d872a7e885a2cb8433beadcdcaf9a4257cce9fcb","modified":1627205100103},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/Screenshot_1623775512.png","hash":"52bb418f744f4cc1d98be5488aaf32f030369f0d","modified":1627217984734},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 2/image.png","hash":"115dd7645f37ff98157ae2b4b63223eabcecaafb","modified":1627218996223},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/BntHJ2Y-1.png","hash":"ec4826ed266043b069bba5c8692f0e3266be756f","modified":1627219180158},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/QafKUB1.png","hash":"853b656381d79fa28df6cac3ec0f54983328045d","modified":1627219280720},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/BntHJ2Y.png","hash":"ec4826ed266043b069bba5c8692f0e3266be756f","modified":1627219156535},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/m7itaqy.png","hash":"a775273c03df6f608be713464615885fe06f677d","modified":1627219117622},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/TIrybR8.png","hash":"80e2e2f9b0ee58a857ac5a69ca110ca217107d58","modified":1627219243151},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 3/0HScWJk.png","hash":"410d0c6d93c29e9eed8fc3d5648401683cb76cc5","modified":1628865608376},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 3/HyjEy1l.png","hash":"4da24729f65cbed64944db8960654cdfc5312c39","modified":1628865608377},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 3/rcWvgv0.png","hash":"d7f53e4ff16ee13f19f30f00ca699afa2e68af0c","modified":1628865608378},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 3/NjWXyw6.png","hash":"e6626f172649dcb0fa248b0d62b887e4ad28e8b4","modified":1628865608378},{"_id":"source/images/cover_ui_rendering.png","hash":"ba9275bcac22bc1d658d52e72486ddd04817ec12","modified":1627219643621},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/VLTxB8C.png","hash":"d37822b0cf3b0a6c6092faa237fb50b917a291c7","modified":1627192230337},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/1_5gfrQWfxyEC7Oq6b2xlJ9w.png","hash":"4612b82b8aaeb87d65092177d8a8179943c08ced","modified":1627191371716},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/qgQ6oY4.png","hash":"7de89cfdcd8b8c0c88f0247648b9d5979d61f737","modified":1627192071727},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1/image.png","hash":"0ddca9ebe8f1b2f638a69ea59e35fc4a9e250a3e","modified":1627202549416},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/example1.png","hash":"46c035f09667529176804fea518a1187985510c2","modified":1627205321782},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/example2.png","hash":"57a32b74b701e2c7456aadcec8ea6f7db7e06a08","modified":1627205353571},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/coil_heap_dump.png","hash":"5075bd3f0e7d141e1eafda7543992bd32a6cf794","modified":1627218461169},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/glide_heap_dump.png","hash":"4843c8a41b204b8038ca97b58a13f7095a928624","modified":1627218393226},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/heap_dump.png","hash":"c58604ef40d3acc6c3e573f33bcd5861217ff15e","modified":1627218240318},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/JNfYVx7.png","hash":"5ec4cd78e27b85ce7513f3afbe8ab1648876fc93","modified":1627202734691},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/after_merge.png","hash":"bab66dea17776ea6ce52d510794b4fe01db1d5a0","modified":1627205282181},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/gpu_rendering_profile_1.png","hash":"d605385d5c363bdc0c9500ae892d852936fc8b46","modified":1627204912586},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/gpu_rendering_profile_2.png","hash":"2f7dce54e2b42c7c6a33e8b3d319b908593e6d0e","modified":1627204967987},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/0oDUU69.png","hash":"c2a367ee700f8e4bf56244ea8ef1e4987188ba81","modified":1627219228956},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/rb1bMMt.png","hash":"1aa58cbd1e91b335ef9023f5b58cd3754a1c6a5a","modified":1627219212364},{"_id":"themes/icarus/layout/comment/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626871710183},{"_id":"themes/icarus/layout/donate/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626871710187},{"_id":"themes/icarus/layout/misc/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626871710188},{"_id":"themes/icarus/layout/search/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626871710189},{"_id":"themes/icarus/layout/share/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626871710190},{"_id":"themes/icarus/include/schema/comment/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626871710170},{"_id":"themes/icarus/include/schema/misc/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626871710173},{"_id":"themes/icarus/include/schema/donate/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626871710173},{"_id":"themes/icarus/include/schema/share/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626871710174},{"_id":"themes/icarus/include/schema/search/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1626871710174},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/ha7Eriy.png","hash":"215f5dd7c94d383974afc86a7c97e6e94b4a5ca5","modified":1627202858060},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/before_merge.png","hash":"33ddb5b572f4683762679075bd76caa3e1f2209f","modified":1627205232204},{"_id":"themes/icarus/.eslintrc.json","hash":"43c7740158c8690242720b4ff7fa11426fc20c79","modified":1626871710164},{"_id":"themes/icarus/.DS_Store","hash":"c16e31ab96d11a9d5523f6539d4b162123962ddf","modified":1627059163641},{"_id":"themes/icarus/.eslintignore","hash":"5410a1bef9807f666cd92a0d2020f700e67e4096","modified":1626871710164},{"_id":"themes/icarus/.gitignore","hash":"36084c0851a22bfd393933abb8e262562ffc6802","modified":1626873230442},{"_id":"themes/icarus/.npmignore","hash":"42242c8da7a020a3295e7dd3d18bf022cb08b661","modified":1626871710168},{"_id":"themes/icarus/README.md","hash":"247ec8047ee3105d31099dd8e6ca498b6bff1336","modified":1626871710169},{"_id":"themes/icarus/CONTRIBUTING.md","hash":"70254c6778c1e41bb2ff222bbf3a70b2239b9bc1","modified":1626871710168},{"_id":"themes/icarus/package.json","hash":"b87737dd30d2eaa5b240b196c55cc8d52ffba75c","modified":1626871710191},{"_id":"themes/icarus/LICENSE","hash":"86037e5335a49321fa73b7815cab542057fac944","modified":1626871710169},{"_id":"themes/icarus/include/config.js","hash":"1ff0f174e9670074ad2bee890d5b6da486800c9a","modified":1626871710169},{"_id":"themes/icarus/include/dependency.js","hash":"d30dbcefd58619f6705d6369b644bc7ba44d2421","modified":1626871710169},{"_id":"themes/icarus/include/register.js","hash":"a974b56a1fbb254f1ae048cc2221363faaccec25","modified":1626871710170},{"_id":"themes/icarus/languages/de.yml","hash":"01d9c27c3c9224d8c58b1cf7099ef008b9411a45","modified":1626871710178},{"_id":"themes/icarus/languages/es.yml","hash":"48fe3d7d304239b5e5e93f63600093700d6f0fed","modified":1626871710178},{"_id":"themes/icarus/languages/en.yml","hash":"1bdb74288808c4d306b46630860e586a1fcd88a7","modified":1626871710178},{"_id":"themes/icarus/languages/fr.yml","hash":"14765cc6216b4af5a05341315c9f6ee54d636a78","modified":1626871710179},{"_id":"themes/icarus/languages/id.yml","hash":"c04fca89e536d539a8bf95980bff7dff79125ba3","modified":1626871710179},{"_id":"themes/icarus/languages/ja.yml","hash":"7568f246a21813527ccea8a1da72a9526aa2d233","modified":1626871710179},{"_id":"themes/icarus/languages/ko.yml","hash":"f2211a8ca1d73f05a1c931aa11accb4e34c483c4","modified":1626871710179},{"_id":"themes/icarus/languages/pl.yml","hash":"612639b0e0a15185c12eecfe3e8913b629ecdfdf","modified":1626871710180},{"_id":"themes/icarus/languages/pt-BR.yml","hash":"531b22c71fab8aae60ddc7599aaa5f46140cf2c1","modified":1626871710180},{"_id":"themes/icarus/languages/ru.yml","hash":"bf784c6f31e8fb7ed78509468bddecd447c3b73b","modified":1626871710180},{"_id":"themes/icarus/languages/tk.yml","hash":"e5b9b369bbcf90c199a65a877eb75fba05cd7f90","modified":1626871710180},{"_id":"themes/icarus/languages/tr.yml","hash":"96d94f7a5d56b2682ae2792f0808139d4b950704","modified":1626871710181},{"_id":"themes/icarus/languages/vn.yml","hash":"64307bfa16d851334e2f37a29a84d644624c2060","modified":1626871710181},{"_id":"themes/icarus/languages/zh-TW.yml","hash":"92f8cf599ad06bb14f79f4806ac4c695f60044d7","modified":1626871710182},{"_id":"themes/icarus/languages/zh-CN.yml","hash":"82ff607b1671b88d259d10b6ce8ca1bb05b2cff4","modified":1626871710181},{"_id":"themes/icarus/layout/archive.jsx","hash":"05677e93d4a43f417dbbf0d63ca37a99e6349e3b","modified":1626871710182},{"_id":"themes/icarus/layout/categories.jsx","hash":"b8ad43e28a4990d222bfbb95b032f88555492347","modified":1626871710183},{"_id":"themes/icarus/layout/category.jsx","hash":"fd15e4eac32de9ac8687aeb3dbe179ab61375700","modified":1626871710183},{"_id":"themes/icarus/layout/page.jsx","hash":"d26c2db57e5a88d6483a03aeb51cda9d191d8cea","modified":1626871710188},{"_id":"themes/icarus/layout/index.jsx","hash":"0a84a2348394fa9fc5080dd396bd28d357594f47","modified":1626871710187},{"_id":"themes/icarus/layout/layout.jsx","hash":"27dcef37bb2986ba7baf869ef4886ebe9917dabf","modified":1627045299033},{"_id":"themes/icarus/layout/post.jsx","hash":"d26c2db57e5a88d6483a03aeb51cda9d191d8cea","modified":1626871710189},{"_id":"themes/icarus/layout/tag.jsx","hash":"d2f18cac32ca2725d34ccff3f2051c623be6c892","modified":1626871710190},{"_id":"themes/icarus/layout/tags.jsx","hash":"2c42cb64778235dd220c563a27a92108ddc50cc4","modified":1626871710190},{"_id":"themes/icarus/scripts/index.js","hash":"0c666db6fcb4ffc4d300f4e108c00ee42b1cbbe6","modified":1626871710191},{"_id":"themes/icarus/source/.DS_Store","hash":"ae53dfd2a20622619f81b0f3718694cc25286ff8","modified":1627059174203},{"_id":"themes/icarus/include/migration/head.js","hash":"269ba172013cbd2f10b9bc51af0496628081329b","modified":1626871710169},{"_id":"themes/icarus/include/migration/v3_v4.js","hash":"9faf2184d7fe87debfbe007f3fc9079dcbcafcfe","modified":1626871710170},{"_id":"themes/icarus/include/migration/v2_v3.js","hash":"3ccb2d2ce11018bebd7172da66faecc3983bff00","modified":1626871710170},{"_id":"themes/icarus/include/schema/config.json","hash":"ac633f9d349bca4f089d59d2c3738b57376f1b31","modified":1626871710173},{"_id":"themes/icarus/include/style/card.styl","hash":"f78674422eb408cd17c17bbdc3ee1ebe4a453e05","modified":1626871710176},{"_id":"themes/icarus/include/style/donate.styl","hash":"8d0af00628c13134b5f30a558608e7bebf18c2ec","modified":1626871710176},{"_id":"themes/icarus/include/style/base.styl","hash":"2bca6ad099949d52236c87db8db1002ffb99774c","modified":1626871710175},{"_id":"themes/icarus/include/style/article.styl","hash":"580b1e9bd356ed6781c32ccc49c6fa3486b94620","modified":1626973290439},{"_id":"themes/icarus/include/style/button.styl","hash":"0fb35b4786be1b387c751fa2849bc71523fcedd4","modified":1626871710175},{"_id":"themes/icarus/include/style/footer.styl","hash":"a4ad715dee38b249538ac6cce94efc9b355a904b","modified":1626871710176},{"_id":"themes/icarus/include/style/codeblock.styl","hash":"30bee4cf6792e9665eb648cc20b352d9eaff1207","modified":1626871710176},{"_id":"themes/icarus/include/style/helper.styl","hash":"9f3393e6122cc9f351091bfab960674e962da343","modified":1626871710176},{"_id":"themes/icarus/include/style/navbar.styl","hash":"ecc73c8ad504c0fa4bb910eb51500c14e0a8d662","modified":1626871710177},{"_id":"themes/icarus/include/style/pagination.styl","hash":"b81bcd7ff915b4e9299533addc01bc4575ec35e3","modified":1626871710177},{"_id":"themes/icarus/include/style/responsive.styl","hash":"207083fe287612cddee6608b541861b14ac8de81","modified":1626972686487},{"_id":"themes/icarus/include/style/plugin.styl","hash":"679b61b5fc5b3281735a21c37aeb64229d9c51ea","modified":1626871710177},{"_id":"themes/icarus/include/style/search.styl","hash":"416737e1da4e7e907bd03609b0fee9e2aacfe56c","modified":1626871710177},{"_id":"themes/icarus/include/style/timeline.styl","hash":"ea61798a09bffdda07efb93c2ff800b63bddc4c4","modified":1626871710177},{"_id":"themes/icarus/include/util/console.js","hash":"59cf9d277d3ac85a496689bd811b1c316001641d","modified":1626871710178},{"_id":"themes/icarus/include/style/widget.styl","hash":"c746902251136544eb3fe523235b3183f4189460","modified":1626871710178},{"_id":"themes/icarus/layout/common/comment.jsx","hash":"427089c33002707b76e2f38709459a6824fd0f9b","modified":1626871710184},{"_id":"themes/icarus/layout/common/article.jsx","hash":"16513ab1745533d0f4cdbdee323339ebab6d02c1","modified":1626871710184},{"_id":"themes/icarus/layout/common/donates.jsx","hash":"889fb0a7ccc502f0a43b4a18eb330e351e50493c","modified":1626871710184},{"_id":"themes/icarus/layout/common/footer.jsx","hash":"baa8e40e036a3ec0114d96893b708435104b4ba9","modified":1626871710185},{"_id":"themes/icarus/layout/common/head.jsx","hash":"37f2f2efcb102c706e2460dc9cdeaa302366d318","modified":1626871710185},{"_id":"themes/icarus/layout/common/plugins.jsx","hash":"f6826c1a5f5f59f4a0aa00c63bdb0ad4ff4eab69","modified":1626871710186},{"_id":"themes/icarus/layout/common/navbar.jsx","hash":"fcd9fd4624dee49207ef09ea2a1c63f524f3710c","modified":1626871710185},{"_id":"themes/icarus/layout/common/scripts.jsx","hash":"0fe1fddab431fb9f63906d8c480d5cd6b33abc32","modified":1626871710186},{"_id":"themes/icarus/layout/common/search.jsx","hash":"6f244a37293031670a2964fe424ecd062e591d7b","modified":1626871710186},{"_id":"themes/icarus/layout/common/share.jsx","hash":"c9fb0319ad5e5a10ad3636b26a6c2afed14c590f","modified":1626871710186},{"_id":"themes/icarus/layout/common/widgets.jsx","hash":"689cf4a6b79337b11d1d56afa9dda09223a809a1","modified":1626871710187},{"_id":"themes/icarus/layout/plugin/animejs.jsx","hash":"e2aa27c3501a58ef1e91e511557b77395c2c02aa","modified":1626871710188},{"_id":"themes/icarus/layout/plugin/back_to_top.jsx","hash":"7fc0c5aaabd7d0eaff04cb68ec139442dc3414e8","modified":1626871710189},{"_id":"themes/icarus/layout/widget/profile.jsx","hash":"0d3a7fd922c12cc45d2c8d26a8f4d3a9a6ed0ae0","modified":1626964877654},{"_id":"themes/icarus/source/css/cyberpunk.styl","hash":"ae17d3528df0c3f089df14a06b7bd82f1bc5fed9","modified":1626871710192},{"_id":"themes/icarus/source/css/default.styl","hash":"b01da3028e5a1267a40aaae5c86a11187a2259e3","modified":1626871710192},{"_id":"themes/icarus/source/css/style.styl","hash":"5b9815586e993a6ccbe8cdcfc0c65ea38fc315ac","modified":1626871710192},{"_id":"themes/icarus/source/img/avatar.png","hash":"5f294e72d6b2385e2f7f946ded9f06ca9f3cf6c6","modified":1627059137118},{"_id":"themes/icarus/source/img/favicon.png","hash":"11c336162b4b87962f1e58c06e6d1c1b23eb5d45","modified":1627059457976},{"_id":"themes/icarus/source/img/favicon.svg","hash":"16fd847265845063a16596761cddb32926073dd2","modified":1626871710193},{"_id":"themes/icarus/source/img/logo.png","hash":"be05b47728f1276b913de1191bd7df1929cfbf5d","modified":1626970438413},{"_id":"themes/icarus/source/img/logo.svg","hash":"e9b5c1438ddb576693a15d0713b2a1d9ceda4be9","modified":1626871710193},{"_id":"themes/icarus/source/img/razor-bottom-black.svg","hash":"a3eda07b1c605b456da9cdf335a1075db5e5d72c","modified":1626871710194},{"_id":"themes/icarus/source/js/.eslintrc.json","hash":"6bf0641cb69dffac97f69baea192d7fa3ab612cb","modified":1626871710195},{"_id":"themes/icarus/source/img/og_image.png","hash":"b03f163096ca9c350ec962feee9836277b5c2509","modified":1626871710194},{"_id":"themes/icarus/source/img/razor-top-black.svg","hash":"201f1171a43ce667a39091fe47c0f278857f18f0","modified":1626871710194},{"_id":"themes/icarus/source/js/animation.js","hash":"12cedd5caaf9109eed97e50eeab8f883f6e49be3","modified":1626871710195},{"_id":"themes/icarus/source/js/back_to_top.js","hash":"d91f10c08c726135a13dfa1f422c49d8764ef03f","modified":1626871710195},{"_id":"themes/icarus/source/js/column.js","hash":"0baee024ab67474c073a4c41b495f3e7f0df4505","modified":1626871710195},{"_id":"themes/icarus/source/js/main.js","hash":"13e4b1c4fa287f3db61aae329ad093a81992f23d","modified":1626871710196},{"_id":"themes/icarus/include/schema/common/article.json","hash":"8d78149f44629d0848921c6fb9c008b03cef3116","modified":1626871710170},{"_id":"themes/icarus/include/schema/common/footer.json","hash":"09d706cbb94d6da9a0d15c719ce7139325cae1c7","modified":1626871710171},{"_id":"themes/icarus/include/schema/common/head.json","hash":"98889f059c635e6bdbd51effd04cf1cf44968a66","modified":1626871710171},{"_id":"themes/icarus/include/schema/common/donates.json","hash":"ae86e6f177bedf4afbe638502c12635027539305","modified":1626871710171},{"_id":"themes/icarus/include/schema/common/plugins.json","hash":"6036a805749816416850d944f7d64aaae62e5e75","modified":1626871710172},{"_id":"themes/icarus/include/schema/common/comment.json","hash":"7d744391a8abee9a2c450b6fdd36a3866a488025","modified":1626871710170},{"_id":"themes/icarus/include/schema/common/providers.json","hash":"97ec953d497fb53594227ae98acaef8a8baa91da","modified":1626871710172},{"_id":"themes/icarus/include/schema/common/navbar.json","hash":"6691e587284c4cf450e0288680d5ff0f3565f090","modified":1626871710171},{"_id":"themes/icarus/include/schema/common/search.json","hash":"985fbcbf47054af714ead1a124869d54f2a8b607","modified":1626871710172},{"_id":"themes/icarus/include/schema/common/share.json","hash":"cf4f9ff4fb27c3541b35f57db355c228fa6873e4","modified":1626871710172},{"_id":"themes/icarus/include/schema/common/sidebar.json","hash":"eb241beaec4c73e3085dfb3139ce72e827e20549","modified":1626871710172},{"_id":"themes/icarus/include/schema/common/widgets.json","hash":"d000b4d1d09bdd64756265aa4cd2ea980ab7ddc7","modified":1626871710173},{"_id":"themes/icarus/include/schema/plugin/animejs.json","hash":"e62ab6e20bd8862efa1ed32e7c0db0f8acbcfdec","modified":1626871710173},{"_id":"themes/icarus/include/schema/plugin/back_to_top.json","hash":"dc0febab7e7b67075d0ad3f80f5ec8b798b68dea","modified":1626871710174},{"_id":"themes/icarus/include/schema/widget/profile.json","hash":"e801d302e680b4256f89b35d9caff7c9a0b0d178","modified":1626965515768},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_ybDWG4W2bPYNq79vr1gE8w.png","hash":"6fe0ceafc9915691608eef8ec7e77e066d68ce2f","modified":1627195804776},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/cK00ybR.png","hash":"00568c975badabd8f3a34ed80010cb0c1dff7858","modified":1627202775772},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 2/Screenshot_1624078627.png","hash":"1bc61f65ecedd54e42b4e9b36b12b51d2dd7d31c","modified":1627218933198},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/1ZQEOg0.png","hash":"298ed70f7e45a45b535692f8cd0dc26e4ac203f2","modified":1627202879259},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/ptHtNno.png","hash":"050745bd3e63e9c93d3680c16bd8057257745665","modified":1627202690833},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 2/IMG_06A0242D2ABE-1.jpg","hash":"db9d640eb79429bbe63537a9698ced34b9d29741","modified":1627218968945},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 2/ClassDiagram.svg","hash":"61d495eb303ce426aa371518ff39e0118cc34f50","modified":1628753259178},{"_id":"source/images/cover_ksp.png","hash":"7e6e4981dc0112b925e9506dfd503ed95ce06637","modified":1628753259180},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/compose_animation.gif","hash":"3045c10cf0a91ce3907c24026a381134b0674f24","modified":1627100104526},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 3/add_002_002.png","hash":"b6c651b7403cc7c29e41fb3ba13177081c381621","modified":1627197460431},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1/7AGranC.png","hash":"efb008bffb6016c91d56c468680ea2c56272711b","modified":1627201959822},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 1/processing_rounds.png","hash":"90aa4c057fb520245e4db67310ab93d84b2401d2","modified":1628753259177},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/IMG_8FF7402ED110-1.jpg","hash":"0e35a673de5a4bbd788adcbec13325c3d127b7a9","modified":1627218337563},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/coil_caching.gif","hash":"bde7beac3e050248aeded688e1c4f2dd6c918c37","modified":1627218420261},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/zw3H5pZ.png","hash":"380b169de9250a0f2f99ef1db243598b2dcf06f9","modified":1627205159509},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/IMG_9F5E046409C4-1.jpg","hash":"6cb839e17e7e42316078b7acde21e37486d61e3f","modified":1627218179234},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/picasso_caching.gif","hash":"a327e9dab98a059c81896074044ef8b940496d2e","modified":1627218074820},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/glide_caching.gif","hash":"eef2348b6b077d7e361fe3c22c6e72a50a5d1707","modified":1627218274604},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/n6fsbPA.png","hash":"e6ceac60a769b34ce7eb0f71929950ecae487020","modified":1627202847808},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/coil_test.gif","hash":"2f56dfb1f5dcb99bbd30f70c4ef1960c9e7c9feb","modified":1627218417539},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/glide_test.gif","hash":"a418ec06099fe9ed0ffeb48fe1a5c053e04f0a8e","modified":1627218272406},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/picasso_test.gif","hash":"82c5439dd99073b331626a6da8668bd1a56154ea","modified":1627218063932},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/glide_gif.gif","hash":"42ef9fa37a30979eecea95c255d39472a931e4a0","modified":1627218368838},{"_id":"public/js/algolia.js","hash":"a8df0c0abeeb4ee1d2d720161f3aea7339380704","modified":1628865618062},{"_id":"public/js/google_cse.js","hash":"1a9881669dfdeb2b3214074eee0d3e01e52db2c4","modified":1628865618062},{"_id":"public/js/insight.js","hash":"86bbdb7305d9bf19ad62d2ca2cf169fc8d9f9d31","modified":1628865618062},{"_id":"public/js/toc.js","hash":"da6fb757a1b083b8ed138bf29aad3a7bf8ec4f11","modified":1628865618062},{"_id":"public/content.json","hash":"de7bd4217142c1b4cc52f39c45d6d102dd44cdce","modified":1628865618062},{"_id":"public/manifest.json","hash":"e304ac116ed2377427b5d86fa1b011b9eaea0f10","modified":1628865618062},{"_id":"public/archives/page/2/index.html","hash":"1f297eed4a4157ef62070756cb3b2354fb9f5db7","modified":1628865618062},{"_id":"public/archives/2021/04/index.html","hash":"40b21cc16c90df6a6551a48e0424af104c8f33dc","modified":1628865618062},{"_id":"public/archives/2021/page/2/index.html","hash":"f97e34db2b3a4b111b484ae50b3829110e1a2158","modified":1628865618062},{"_id":"public/archives/2021/05/index.html","hash":"72ab350d4ff1a2b20adeeba0f7eeaf43e467f2e4","modified":1628865618062},{"_id":"public/archives/2021/06/index.html","hash":"6c269ee84e6178c33d862730abea4f48ab7063e1","modified":1628865618062},{"_id":"public/archives/2021/07/index.html","hash":"cfd68de2b5e0ff649f15efc9ec58f907e5d8b889","modified":1628865618062},{"_id":"public/2021/07/21/2021-07-21 Kotlin Symbol Processing Api Part 3/index.html","hash":"0e12bdde570f1c42a837418c7e31ec0fba179af5","modified":1628865618062},{"_id":"public/2021/07/21/2021-07-21 Kotlin Symbol Processing Api Part 1/index.html","hash":"a1487c09363b7879ae685550db83d5100d2aa0df","modified":1628865618062},{"_id":"public/2021/07/21/2021-07-21 Kotlin Symbol Processing Api Part 2/index.html","hash":"1324399ab2922840248410cd75035f96b6393763","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 3/index.html","hash":"1350ba99c9cc1b036331203b15b459bdada4a6b2","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/index.html","hash":"2608e22f71b720486cf36e87c9a8ab40f336617f","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 2/index.html","hash":"f52560035a43640872e2d1993b6247b067d39ea4","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/index.html","hash":"42e39d4d79ac15d6d4b7f131b8330d186ed76d17","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/index.html","hash":"9e081293481b296d88790f4db3c930b3f0bf3b2f","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 1/index.html","hash":"2585c170fa243568ebb512e15275d65bbf0d6543","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 3/index.html","hash":"7a95aa07cce095ecee03605e878542a5585024ee","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/index.html","hash":"2811aa3ad27e947391b3936964be9f2dd385a43e","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 1/index.html","hash":"b53447061c6f5a16f3113ddf45a628b4f9841a82","modified":1628865618062},{"_id":"public/archives/index.html","hash":"9caba5500135ad7a3d73c3e5b361db95ec3bce50","modified":1628865618062},{"_id":"public/archives/2021/index.html","hash":"43d174b85c979fc103717e711b14c8c2002e8e75","modified":1628865618062},{"_id":"public/categories/Jetpack-Compose/index.html","hash":"3ac841f4d8d7ef92fd89c509859372ab3fad1898","modified":1628865618062},{"_id":"public/categories/User-Interface/index.html","hash":"3d2def097e736202bea6d2b8f3a3dad61862837e","modified":1628865618062},{"_id":"public/categories/Image-Library/index.html","hash":"66ab7829dfc4bc4e1d71a3ca3b8fc17641fd0068","modified":1628865618062},{"_id":"public/categories/KSP/index.html","hash":"a7dd7aa8aaa2bc4767a4ce60346ca3e0384948a6","modified":1628865618062},{"_id":"public/index.html","hash":"62f607da83baa4698546bb66d51468dc189bbc42","modified":1628865618062},{"_id":"public/page/2/index.html","hash":"d402bbb17f5f3ddf14d292d939ce2ca2697e9e9e","modified":1628865618062},{"_id":"public/tags/Android/index.html","hash":"33a7a575c511144faa39d2e4ce2935b110331dc8","modified":1628865618062},{"_id":"public/tags/Compose/index.html","hash":"aaf616eded3b95c8e088d9156099b817f0452907","modified":1628865618062},{"_id":"public/tags/Jetpack/index.html","hash":"dd7797c4713cc114e49a4a72b09c6cc667f818c5","modified":1628865618062},{"_id":"public/tags/Rendering/index.html","hash":"bd045a1c505ce0fb57d7a5cf62a6f43057000b1d","modified":1628865618062},{"_id":"public/tags/Principle/index.html","hash":"ca8f0a8b46b23bea825b3f0f5c00a43143a2da80","modified":1628865618062},{"_id":"public/tags/Optimize/index.html","hash":"c9e13f0d9ee01388f6dc3aa26b39f1c357ddde9f","modified":1628865618062},{"_id":"public/tags/UI/index.html","hash":"11c9eae647415850c0fb461ab0fadcc91016075f","modified":1628865618062},{"_id":"public/tags/Image/index.html","hash":"8cd44d0d7b13faf24dbeb07b4ac7312f9062a797","modified":1628865618062},{"_id":"public/tags/Library/index.html","hash":"f05658c3caec8e267ff928f838ebb63aa81e8abf","modified":1628865618062},{"_id":"public/tags/KSP/index.html","hash":"0729826db7b2785c0efc6fd369ffe3e53c4c962e","modified":1628865618062},{"_id":"public/tags/Kotlin/index.html","hash":"acf43f0fba0d6b74dde98ae56ff2c413ac586247","modified":1628865618062},{"_id":"public/tags/Symbol/index.html","hash":"d2620e2b6f6bf3943bacc5ee36551c4cc8101598","modified":1628865618062},{"_id":"public/tags/Processing/index.html","hash":"ba1ae1d9ce2e9ea5c4a7f36768e76dcb9cf6db71","modified":1628865618062},{"_id":"public/tags/KAPT/index.html","hash":"b1d549f7e9033e5e7bc9d62b35df422308d17969","modified":1628865618062},{"_id":"public/tags/Annotation/index.html","hash":"03509f34b1cc478380f9dc60fc4d152e09a93ad1","modified":1628865618062},{"_id":"public/categories/index.html","hash":"3bc3febf368122d9c6a512a5f2d1b34e3db21571","modified":1628865618062},{"_id":"public/tags/index.html","hash":"ec8945437558a6cf16acb8d4d8b87be2824f812e","modified":1628865618062},{"_id":"public/img/avatar.png","hash":"5f294e72d6b2385e2f7f946ded9f06ca9f3cf6c6","modified":1628865618062},{"_id":"public/img/favicon.png","hash":"11c336162b4b87962f1e58c06e6d1c1b23eb5d45","modified":1628865618062},{"_id":"public/img/logo.png","hash":"be05b47728f1276b913de1191bd7df1929cfbf5d","modified":1628865618062},{"_id":"public/img/favicon.svg","hash":"16fd847265845063a16596761cddb32926073dd2","modified":1628865618062},{"_id":"public/img/logo.svg","hash":"e9b5c1438ddb576693a15d0713b2a1d9ceda4be9","modified":1628865618062},{"_id":"public/img/og_image.png","hash":"b03f163096ca9c350ec962feee9836277b5c2509","modified":1628865618062},{"_id":"public/img/razor-bottom-black.svg","hash":"a3eda07b1c605b456da9cdf335a1075db5e5d72c","modified":1628865618062},{"_id":"public/img/razor-top-black.svg","hash":"201f1171a43ce667a39091fe47c0f278857f18f0","modified":1628865618062},{"_id":"public/images/cover_image_library.png","hash":"9d10dac56e57d04551477524caf9214157925393","modified":1628865618062},{"_id":"public/images/cover_system_ui.png","hash":"fb20cd5f11731675f596caf148535970f950fe9b","modified":1628865618062},{"_id":"public/images/cover_jepack_compose.png","hash":"0f17f71dd25d58a7b9220a5d88354d247249e695","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 1/aO6Jlsg.png","hash":"cb2a6385373460ed62d557f5fd6857b9add5154b","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 1/WprDTs1.png","hash":"1e7a9e83f70a8a888576c9414310dc2c5ecd42b6","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/1_5RZOM7sWV0sXctJtTPdshQ.png","hash":"ffe02f83fee60952e843f6851f901bea72ce9dca","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/1_9IA2k2s5hAS9pSyzpmQ6Pw.png","hash":"2b7af6d2978089bb374422102202071ab277d7b0","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/1_UoLVl1dbUjKh9kd4uY0ROA.png","hash":"11b60f2e071153fcbe560e89aaef163a87ad142e","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/1_T9Pww7JyPMPhCJ_6yU8fyQ.png","hash":"54f618490e46ada03f3a75d198acc1c7ddc0f321","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/1_XVvr-CB2pn88Te7Gg52GPA.png","hash":"fc39b18462260b52dc5a6bab6f2cc387b257ede9","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/1_m7mSalYCza-SoJjmlYeWdA.png","hash":"d5d4958f6e2304ad94f4dc38104c99b9173376b5","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/1_bSyX8yT7H2HevBNw9fbyYw.png","hash":"dffd3bbd66021f82170b9067b5826289b15bd4cb","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/1_tPAf-Akf2IpDRrrZo1f1dg.png","hash":"67bb69909c81fcebf26ce429115685c0c0aa3bae","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/1_wFM4jF71V5aJog3lALaRKQ.png","hash":"7cc0b73358aa886719fb51ccb88413fa740b38e9","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/add_002_001.png","hash":"7c35a0d3efc17ff4a8f4eb8a1d8c3a589dac2db3","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 1/EzHZMUm.png","hash":"e3dcee986a1f76c3c2ea0ccc1c9eecc1214d67a3","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 1/UntitledDiagram.png","hash":"b68cd0059aaaecf07dbab3022d520f09f06738e2","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 1/qu5Mr6x.png","hash":"594c20fd4933bcb82a65637f0e8339456277d9eb","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/4.png","hash":"b370fb9f3328a259420945173c0830594f008bba","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/7990Bf0.png","hash":"855bcdec520ce2b85ad119ff869059c006a7f89d","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/image-1.png","hash":"59da23e7f344900920338920b9be39158ea8c03e","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/image.png","hash":"05307b5c204033dfb679b0da0b35eb93d03e5127","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/gpu_profile.png","hash":"92eb4ea0978a9a2f8d392e2e6e1c0a08845704dd","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/graph_color.png","hash":"4e5e3364237d63abb0e2593176d88ac774fa84ca","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/image.png","hash":"05307b5c204033dfb679b0da0b35eb93d03e5127","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_1.png","hash":"8463613a962832bb022985971c157193e1d421da","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_2.png","hash":"9b070bf77d97d74b4986c838cebb375872d9d748","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_3.png","hash":"8d7bca48042bd3de4bcf2385d024791e77297b81","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_4.png","hash":"d872a7e885a2cb8433beadcdcaf9a4257cce9fcb","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 2/image.png","hash":"115dd7645f37ff98157ae2b4b63223eabcecaafb","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/Screenshot_1623775512.png","hash":"52bb418f744f4cc1d98be5488aaf32f030369f0d","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 3/BntHJ2Y-1.png","hash":"ec4826ed266043b069bba5c8692f0e3266be756f","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 3/QafKUB1.png","hash":"853b656381d79fa28df6cac3ec0f54983328045d","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 3/BntHJ2Y.png","hash":"ec4826ed266043b069bba5c8692f0e3266be756f","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 3/TIrybR8.png","hash":"80e2e2f9b0ee58a857ac5a69ca110ca217107d58","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 3/m7itaqy.png","hash":"a775273c03df6f608be713464615885fe06f677d","modified":1628865618062},{"_id":"public/2021/07/21/2021-07-21 Kotlin Symbol Processing Api Part 3/HyjEy1l.png","hash":"4da24729f65cbed64944db8960654cdfc5312c39","modified":1628865618062},{"_id":"public/2021/07/21/2021-07-21 Kotlin Symbol Processing Api Part 3/0HScWJk.png","hash":"410d0c6d93c29e9eed8fc3d5648401683cb76cc5","modified":1628865618062},{"_id":"public/2021/07/21/2021-07-21 Kotlin Symbol Processing Api Part 3/NjWXyw6.png","hash":"e6626f172649dcb0fa248b0d62b887e4ad28e8b4","modified":1628865618062},{"_id":"public/2021/07/21/2021-07-21 Kotlin Symbol Processing Api Part 3/rcWvgv0.png","hash":"d7f53e4ff16ee13f19f30f00ca699afa2e68af0c","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 1/1_5gfrQWfxyEC7Oq6b2xlJ9w.png","hash":"4612b82b8aaeb87d65092177d8a8179943c08ced","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 1/VLTxB8C.png","hash":"d37822b0cf3b0a6c6092faa237fb50b917a291c7","modified":1628865618062},{"_id":"public/images/cover_ui_rendering.png","hash":"ba9275bcac22bc1d658d52e72486ddd04817ec12","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 1/qgQ6oY4.png","hash":"7de89cfdcd8b8c0c88f0247648b9d5979d61f737","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 1/image.png","hash":"0ddca9ebe8f1b2f638a69ea59e35fc4a9e250a3e","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/example1.png","hash":"46c035f09667529176804fea518a1187985510c2","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/example2.png","hash":"57a32b74b701e2c7456aadcec8ea6f7db7e06a08","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/coil_heap_dump.png","hash":"5075bd3f0e7d141e1eafda7543992bd32a6cf794","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/glide_heap_dump.png","hash":"4843c8a41b204b8038ca97b58a13f7095a928624","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/heap_dump.png","hash":"c58604ef40d3acc6c3e573f33bcd5861217ff15e","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/JNfYVx7.png","hash":"5ec4cd78e27b85ce7513f3afbe8ab1648876fc93","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/after_merge.png","hash":"bab66dea17776ea6ce52d510794b4fe01db1d5a0","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/gpu_rendering_profile_1.png","hash":"d605385d5c363bdc0c9500ae892d852936fc8b46","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/gpu_rendering_profile_2.png","hash":"2f7dce54e2b42c7c6a33e8b3d319b908593e6d0e","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 3/0oDUU69.png","hash":"c2a367ee700f8e4bf56244ea8ef1e4987188ba81","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 3/rb1bMMt.png","hash":"1aa58cbd1e91b335ef9023f5b58cd3754a1c6a5a","modified":1628865618062},{"_id":"public/js/animation.js","hash":"12cedd5caaf9109eed97e50eeab8f883f6e49be3","modified":1628865618062},{"_id":"public/js/column.js","hash":"0baee024ab67474c073a4c41b495f3e7f0df4505","modified":1628865618062},{"_id":"public/js/main.js","hash":"13e4b1c4fa287f3db61aae329ad093a81992f23d","modified":1628865618062},{"_id":"public/js/back_to_top.js","hash":"d91f10c08c726135a13dfa1f422c49d8764ef03f","modified":1628865618062},{"_id":"public/css/cyberpunk.css","hash":"33cb6e6c54af1717a2447f527d0ccf1a06502cb1","modified":1628865618062},{"_id":"public/css/default.css","hash":"d1be246b56d96525ef38324dd769a4d70b932124","modified":1628865618062},{"_id":"public/css/style.css","hash":"d1be246b56d96525ef38324dd769a4d70b932124","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/ha7Eriy.png","hash":"215f5dd7c94d383974afc86a7c97e6e94b4a5ca5","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/before_merge.png","hash":"33ddb5b572f4683762679075bd76caa3e1f2209f","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 2/1_ybDWG4W2bPYNq79vr1gE8w.png","hash":"6fe0ceafc9915691608eef8ec7e77e066d68ce2f","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/cK00ybR.png","hash":"00568c975badabd8f3a34ed80010cb0c1dff7858","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 2/Screenshot_1624078627.png","hash":"1bc61f65ecedd54e42b4e9b36b12b51d2dd7d31c","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/1ZQEOg0.png","hash":"298ed70f7e45a45b535692f8cd0dc26e4ac203f2","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/ptHtNno.png","hash":"050745bd3e63e9c93d3680c16bd8057257745665","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 2/IMG_06A0242D2ABE-1.jpg","hash":"db9d640eb79429bbe63537a9698ced34b9d29741","modified":1628865618062},{"_id":"public/2021/07/21/2021-07-21 Kotlin Symbol Processing Api Part 2/ClassDiagram.svg","hash":"61d495eb303ce426aa371518ff39e0118cc34f50","modified":1628865618062},{"_id":"public/images/cover_ksp.png","hash":"7e6e4981dc0112b925e9506dfd503ed95ce06637","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 3/add_002_002.png","hash":"b6c651b7403cc7c29e41fb3ba13177081c381621","modified":1628865618062},{"_id":"public/2021/04/07/2021-04-07 Jetpack Compose Part 1/compose_animation.gif","hash":"3045c10cf0a91ce3907c24026a381134b0674f24","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 1/7AGranC.png","hash":"efb008bffb6016c91d56c468680ea2c56272711b","modified":1628865618062},{"_id":"public/2021/07/21/2021-07-21 Kotlin Symbol Processing Api Part 1/processing_rounds.png","hash":"90aa4c057fb520245e4db67310ab93d84b2401d2","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/IMG_8FF7402ED110-1.jpg","hash":"0e35a673de5a4bbd788adcbec13325c3d127b7a9","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/coil_caching.gif","hash":"bde7beac3e050248aeded688e1c4f2dd6c918c37","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 3/zw3H5pZ.png","hash":"380b169de9250a0f2f99ef1db243598b2dcf06f9","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/picasso_caching.gif","hash":"a327e9dab98a059c81896074044ef8b940496d2e","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/IMG_9F5E046409C4-1.jpg","hash":"6cb839e17e7e42316078b7acde21e37486d61e3f","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/glide_caching.gif","hash":"eef2348b6b077d7e361fe3c22c6e72a50a5d1707","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/coil_test.gif","hash":"2f56dfb1f5dcb99bbd30f70c4ef1960c9e7c9feb","modified":1628865618062},{"_id":"public/2021/05/19/2021-05-19 Android UI Rendering Optimization Part 2/n6fsbPA.png","hash":"e6ceac60a769b34ce7eb0f71929950ecae487020","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/glide_test.gif","hash":"a418ec06099fe9ed0ffeb48fe1a5c053e04f0a8e","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/picasso_test.gif","hash":"82c5439dd99073b331626a6da8668bd1a56154ea","modified":1628865618062},{"_id":"public/2021/06/24/2021-06-24 Image Loading and Caching Library Part 1/glide_gif.gif","hash":"42ef9fa37a30979eecea95c255d39472a931e4a0","modified":1628865618062}],"Category":[{"name":"Jetpack Compose","_id":"cksagj7ku00023lredvpg7r2d"},{"name":"User Interface","_id":"cksagj7l7000d3lre98av44g2"},{"name":"Image Library","_id":"cksagj7lv001t3lre61by7gxv"},{"name":"KSP","_id":"cksagj7m100253lre15wh1kot"}],"Data":[],"Page":[],"Post":[{"title":"Jetpack Compose Part 1 - Compose    ","date":"2021-04-06T16:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_jepack_compose.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n\n## Jetpack Compose ?\n\n{% asset_img compose_animation.gif [compose_animation] %}\n\n> **** [Android Developers#Jetpack Compse](https://developer.android.com/jetpack/compose)\n\nCompose Native UI      . \n\n     Compose          .\n\n   .\n\n```kotlin\n@Composable\nfun Greeting(name: String) {\n\tText(\"Hello $name\")\n}\n```\n\n  UI       State     .\n\n    .\n\n{% youtube U5BwfqBpiWU %}\n\n### Compose 4 \n\n  Compose       .\n\n- `Less Code` -  \n  -                  .\n- `Intuitive` - \n  - UI   Compose .    UI  .\n- `Accelerate Development` -   \n  -           .     Android      .\n- `Powerful` -  \n  - Android  API    ,  ,         .\n\n         ,   Android      .\n\n## Codelab - Jetpack Compose basics\n\n### 1. \n\nCompose      Android Studio Canary      .\n\n1. Android Studio Canary \n\nCanary      .\n\n> [Android Studio Preview](https://developer.android.com/studio/preview)\n\n2.   Kotlin plugin \n\n```groovy\next.kotlin_version = '1.4.31'\n```\n\n3. buildFeatures  composeOption \n\n```groovy\nandroid {\n    ...\n    buildFeatures {\n        compose true\n    }\n    composeOptions {\n        kotlinCompilerExtensionVersion 1.0.0-beta02\n    }\n}\n\ndependencies {\n    ...\n    implementation \"androidx.compose.ui:ui:1.0.0-beta02\"\n    implementation \"androidx.activity:activity-compose:1.3.0-alpha03\"\n    implementation \"androidx.compose.material:material:1.0.0-beta02\"\n    implementation \"androidx.compose.ui:ui-tooling:1.0.0-beta02\"\n    ...\n}\n```\n\n### 2. Empty Compose  \n\n[File] - [New] - [New Project]     (Preview) Empty Compose Activity  .\n\n{% asset_img 1_5gfrQWfxyEC7Oq6b2xlJ9w.png [1_5gfrQWfxyEC7Oq6b2xlJ9w] %}\n\n  Next , Compose     API  21 .\n\n    app/build.gradle         .\n\n```groovy\nandroid {\n    ...\n    kotlinOptions {\n        jvmTarget = '1.8'\n        useIR = true\n    }\n    buildFeatures {\n        compose true\n    }\n    composeOptions {\n        kotlinCompilerExtensionVersion compose_version\n    }\n}\n\ndependencies {\n    ...\n    implementation \"androidx.compose.ui:ui:$compose_version\"\n    implementation \"androidx.activity:activity-compose:1.3.0-alpha03\"\n    implementation \"androidx.compose.material:material:$compose_version\"\n    implementation \"androidx.compose.ui:ui-tooling:$compose_version\"\n    ...\n}\n```\n\n composeOptions  kotlinCompilerVersion   compose      .\n\n      .\n\n**MainActivity.kt**\n```kotlin\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContent {\n            MyFirstComposeApplicationTheme {\n                // A surface container using the 'background' color from the theme\n                Surface(color = MaterialTheme.colors.background) {\n                    Greeting(\"Android\")\n                }\n            }\n        }\n    }\n}\n\n@Composable\nfun Greeting(name: String) {\n    Text(text = \"Hello $name!\")\n}\n\n@Preview(showBackground = true)\n@Composable\nfun DefaultPreview() {\n    MyFirstComposeApplicationTheme {\n        Greeting(\"Android\")\n    }\n}\n```\n\n**ui/theme/Theme.kt**\n```kotlin\nprivate val DarkColorPalette = darkColors(\n    primary = Purple200,\n    primaryVariant = Purple700,\n    secondary = Teal200\n)\n\nprivate val LightColorPalette = lightColors(\n    primary = Purple500,\n    primaryVariant = Purple700,\n    secondary = Teal200*\n\n    /* Other default colors to override\n    background = Color.White,\n    surface = Color.White,\n    onPrimary = Color.White,\n    onSecondary = Color.Black,\n    onBackground = Color.Black,\n    onSurface = Color.Black,\n    */\n)\n\n@Composable\nfun MyFirstComposeApplicationTheme(darkTheme: Boolean = isSystemInDarkTheme(), content: @Composable () -> Unit) {\n    val colors = if (darkTheme) {\n        DarkColorPalette*\n    } else {\n        LightColorPalette*\n    }\n\n    MaterialTheme(\n        colors = colors,\n        typography = Typography,\n        shapes = Shapes,\n        content = content\n    )\n}\n```\n\n    , Compose  3       .\n\n1.   Composable \n2. Preview   Preview Composable \n3. setContent      \n\n   Activity   `onCreate()`   `setContentView(Int)`   `setContent()`      .\n\n### 3. Composable Function\n\nComposable Function   .  `@Composable`          .   .\n\n```kotlin\n@Composable\nfun Greeting(names: List<String>) {\n    for (name in names) {\n        Text(\"Hello $name\")\n    }\n}\n```\n\n  Text  ,   UI    .   text       .\n\n### 4. TextView \n\n    Hello  TextView   .\n\n```kotlin\nsetContent {\n  BasicsCodelabTheme {\n    // A surface container using the 'background' color from the theme\n    Surface(color = MaterialTheme.colors.background) {\n      Greeting(\"Android\")\n    }\n  }\n}\n```\n\n{% asset_img aO6Jlsg.png [aO6Jlsg] %}\n\n### 5. `@Preview`\n\n    IDE Preview  .    @Preview       .\n\n```kotlin\n@Preview(\"Greeting Preview\")\n@Composable\nfun GreetingPreview() {\n    BasicsCodelabTheme {\n        Surface(color = MaterialTheme.colors.background) {\n            Greeting(\"Android\")\n        }\n    }\n}\n```\n\n{% asset_img WprDTs1.png [WprDTs1] %}\n\n### 6. setContent / Theme / Surface\n\n```kotlin\nsetContent {\n  BasicsCodelabTheme {\n    // A surface container using the 'background' color from the theme\n    Surface(color = MaterialTheme.colors.background) {\n      Greeting(\"Android\")\n    }\n  }\n}\n```\n\n onCreate      \n\n- **setContent** : Activity setContentView      . , setContent  (@Composable) -> Unit   UI .\n\n- **XXXTheme** : Theme .   Theme.kt     ,  UI    .\n\n```kotlin\nprivate val DarkColorPalette = darkColors(\n    primary = purple200,\n    primaryVariant = purple700,\n    secondary = teal200\n)\n\nprivate val LightColorPalette = lightColors(\n    primary = purple500,\n    primaryVariant = purple700,\n    secondary = teal200\n\n    /* Other default colors to override\n    background = Color.White,\n    surface = Color.White,\n    onPrimary = Color.White,\n    onSecondary = Color.Black,\n    onBackground = Color.Black,\n    onSurface = Color.Black,\n    */\n)\n\n@Composable\nfun BasicsCodelabTheme(\n    darkTheme: Boolean = isSystemInDarkTheme(),\n    content: @Composable () -> Unit\n) {\n    val colors = if (darkTheme) {\n        DarkColorPalette\n    } else {\n        LightColorPalette\n    }\n\n    MaterialTheme(\n        colors = colors,\n        typography = typography,\n        shapes = shapes,\n        content = content\n    )\n}\n```\n\n- **Surface** : Greeting   .    , background   .   .   Paramter `color`     .  \n\n```kotlin\n@Composable\nfun Surface(\n    modifier: Modifier = Modifier,\n    shape: Shape = RectangleShape,\n    color: Color = MaterialTheme.colors.surface,\n    contentColor: Color = contentColorFor(color),\n    border: BorderStroke? = null,\n    elevation: Dp = 0.dp,\n    content: @Composable () -> Unit\n) {\n    val elevationPx = with(LocalDensity.current) { elevation.toPx() }\n    val elevationOverlay = LocalElevationOverlay.current\n    val absoluteElevation = LocalAbsoluteElevation.current + elevation\n    val backgroundColor = if (color == MaterialTheme.colors.surface && elevationOverlay != null) {\n        elevationOverlay.apply(color, absoluteElevation)\n    } else {\n        color\n    }\n    CompositionLocalProvider(\n        LocalContentColor provides contentColor,\n        LocalAbsoluteElevation provides absoluteElevation\n    ) {\n        Box(\n            modifier.graphicsLayer(shadowElevation = elevationPx, shape = shape)\n                .then(if (border != null) Modifier.border(border, shape) else Modifier)\n                .background(\n                    color = backgroundColor,\n                    shape = shape\n                )\n                .clip(shape),\n            propagateMinConstraints = true\n        ) {\n            content()\n        }\n    }\n}\n```\n\n### 7. Declarative UI -  UI\n\n    TextView . , Greeting Modifier   Padding .     .\n\n```kotlin\nBasicsCodelabTheme {\n  // A surface container using the 'background' color from the theme\n  Surface(color = Color.Yellow) {\n    Greeting(\"Android\")\n  }\n}\n```\n\n```kotlin\n@Composable\nfun Greeting(name: String) {\n    var isSelected by remember { mutableStateOf(false) }\n    val backgroundColor by animateColorAsState(if (isSelected) Color.Red else Color.Transparent)\n\n    Text(\n        text = \"Hello $name!\",\n        modifier = Modifier\n            .padding(24.dp)\n            .background(color = backgroundColor)\n            .clickable(onClick = { isSelected = !isSelected })\n    )\n}\n```\n\n{% asset_img qgQ6oY4.png [qgQ6oY4] %}\n\n UI     UI      .    On/Off      ,        .\n\n\n### 8. \n\nCompose     , XML  include      ,      .\n\n  Compose    `@Composable`   .\n\n### 9. Container \n\nMyApp          Composable .  Container        `@Composable () -> Unit`    .\n\n```kotlin\n@Composable\nfun MyApp(content: @Composable () -> Unit) {\n    BasicsCodelabTheme {\n        Surface(color = Color.Yellow) {\n            content()\n        }\n    }\n}\n```\n\n         Container        .\n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n  override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContent {\n      MyApp {\n        Greeting(\"Android\")\n      }\n    }\n    ...\n  }\n```\n\n### 10.   Compose function  \n\n    ,    .\n\n```kotlin\n@Composable\nfun MyScreenContent() {\n    Column {\n        Greeting(\"Android\")\n        Divider(color = Color.Black)\n        Greeting(\"there\")\n    }\n}\n```\n\n `Column`   `Greeting`  ,    `Divider`    .\n\n{% asset_img VLTxB8C.png [VLTxB8C] %}\n\n     ,    .\n\n- Column :     .\n- Divider :    Compose .\n\n    .\n\n```kotlin\n@Composable\nfun MyColumnScreen(names: List<String> = listOf(\"Line One\", \"Line Two\")) {\n    Column {\n        names.forEach {\n            Greeting(name = it)\n            Divider(color = Color.Black)\n        }\n    }\n}\n```\n\n### 11. State in Compose - Compose  \n\n\n         .\n\n```kotlin\n@Composable\nfun MyColumnScreen(names: List<String> = listOf(\"Line One\", \"Line Two\")) {\n    val counterState = remember { mutableStateOf(0) } // \n\n    Column {\n        names.forEach {\n            Greeting(name = it)\n            Divider(color = Color.Black)\n        }\n        Counter(\n            count = counterState.value,\n            updateCount = { newCount ->\n                counterState.value = newCount\n            }\n        )\n    }\n}\n```\n\nremember          . \n\n`remember`   .\n\n```kotlin\n/**\n * Remember the value produced by [calculation]. [calculation] will only be evaluated during the composition.\n * Recomposition will always return the value produced by composition.\n */\n@OptIn(ComposeCompilerApi::class)\n@Composable\ninline fun <T> remember(calculation: @DisallowComposableCalls () -> T): T =\n    currentComposer.cache(false, calculation)\n```\n\n  Recomposition()         . @Composable       ,       .\n\n,  Counter  Button     .\n\n```kotlin\n@Composable\nfun Counter(count: Int, updateCount: (Int) -> Unit) {\n    Button(\n        onClick = { updateCount(count + 1) },\n        colors = ButtonDefaults.buttonColors(\n            backgroundColor = if (count > 5) Color.Green else Color.White\n        )\n    ) {\n        Text(\"I've been clicked $count times\")\n    }\n}\n```\n\n`updateCount(Int)`      ,   counterState       .\n\n  ,  . Count 5   .\n\n{% asset_img Ju6BSg2.gif [Ju6BSg2] %}\n\n        .    [Codelabs](https://developer.android.com/codelabs/jetpack-compose-basics)    ,  setContent    .\n\n### 12. Activity View   \n\nCompose    Activity, Fragment  contentView .     .\n\n```java\n/**\n* Set the activity content from a layout resource.  The resource will be\n* inflated, adding all top-level views to the activity.\n*\n* @param layoutResID Resource ID to be inflated.\n*\n* @see #setContentView(android.view.View)\n* @see #setContentView(android.view.View, android.view.ViewGroup.LayoutParams)\n*/\npublic void setContentView(@LayoutRes int layoutResID) {\n  getWindow().setContentView(layoutResID);\n  initWindowDecorActionBar();\n}\n```\n\nUI      Window  Layout Resource Id    Layout XML    ,        ViewGroup, View   .\n\n`PhoneWindow`     , Window  setContentView         `installDecor()`   mContentParent(   ViewGroup) ,   .\n\n    ,  Compose `setContent()`     .\n\n```kotlin\n/**\n * Composes the given composable into the given activity. The [content] will become the root view\n * of the given activity.\n *\n * This is roughly equivalent to calling [ComponentActivity.setContentView] with a [ComposeView]\n * i.e.:\n *\n * ```\n * setContentView(\n *   ComposeView(this).apply {\n *     setContent {\n *       MyComposableContent()\n *     }\n *   }\n * )\n * ```\n *\n * @param parent The parent composition reference to coordinate scheduling of composition updates\n * @param content A `@Composable` function declaring the UI contents\n */\npublic fun ComponentActivity.setContent(\n    parent: CompositionContext? = null,\n    content: @Composable () -> Unit\n) {\n    val existingComposeView = window.decorView\n        .findViewById<ViewGroup>(android.R.id.content)\n        .getChildAt(0) as? ComposeView\n\n    if (existingComposeView != null) with(existingComposeView) {\n        setParentCompositionContext(parent)\n        setContent(content)\n    } else ComposeView(this).apply {\n        // Set content and parent **before** setContentView\n        // to have ComposeView create the composition on attach\n        setParentCompositionContext(parent)\n        setContent(content)\n        // Set the view tree owners before setting the content view so that the inflation process\n        // and attach listeners will see them already present\n        setOwners()\n        setContentView(this, DefaultActivityContentLayoutParams)\n    }\n}\n```\n\n  `window.decorView.findViewById<ViewGroup>(android.R.id.content)`    decorView .  compose     ,  inflator ViewGroup, View    `setContent()` => window Activity/Fragment  `createComposition()`    `ensureCompsositionCreated()`  .   `ViewGroup.setContent()`   ,     .     ViewGroup   ,   ViewGroup  View, ViewGroup Composable      AndroidComposeView      .\n\n```kotlin\n/**\n * Composes the given composable into the given view.\n *\n * The new composition can be logically \"linked\" to an existing one, by providing a\n * [parent]. This will ensure that invalidations and CompositionLocals will flow through\n * the two compositions as if they were not separate.\n *\n * Note that this [ViewGroup] should have an unique id for the saved instance state mechanism to\n * be able to save and restore the values used within the composition. See [View.setId].\n *\n * @param parent The [Recomposer] or parent composition reference.\n * @param content Composable that will be the content of the view.\n */\ninternal fun ViewGroup.setContent(\n    parent: CompositionContext,\n    content: @Composable () -> Unit\n): Composition {\n    GlobalSnapshotManager.ensureStarted()\n    val composeView =\n        if (childCount > 0) {\n            getChildAt(0) as? AndroidComposeView\n        } else {\n            removeAllViews(); null\n        } ?: AndroidComposeView(context).also { addView(it.view, DefaultLayoutParams) }\n    return doSetContent(composeView, parent, content)\n}\n```\n\n\n\n , ComposeView `setContent()`   .\n\n```kotlin\n/**\n * A [android.view.View] that can host Jetpack Compose UI content.\n * Use [setContent] to supply the content composable function for the view.\n *\n * This [android.view.View] requires that the window it is attached to contains a\n * [ViewTreeLifecycleOwner]. This [androidx.lifecycle.LifecycleOwner] is used to\n * [dispose][androidx.compose.runtime.Composition.dispose] of the underlying composition\n * when the host [Lifecycle] is destroyed, permitting the view to be attached and\n * detached repeatedly while preserving the composition. Call [disposeComposition]\n * to dispose of the underlying composition earlier, or if the view is never initially\n * attached to a window. (The requirement to dispose of the composition explicitly\n * in the event that the view is never (re)attached is temporary.)\n */\nclass ComposeView @JvmOverloads constructor(\n    context: Context,\n    attrs: AttributeSet? = null,\n    defStyleAttr: Int = 0\n) : AbstractComposeView(context, attrs, defStyleAttr) {\n\n    private val content = mutableStateOf<(@Composable () -> Unit)?>(null)\n\n    @Suppress(\"RedundantVisibilityModifier\")\n    protected override var shouldCreateCompositionOnAttachedToWindow: Boolean = false\n        private set\n\n    @Composable\n    override fun Content() {\n        content.value?.invoke()\n    }\n\n    /**\n     * Set the Jetpack Compose UI content for this view.\n     * Initial composition will occur when the view becomes attached to a window or when\n     * [createComposition] is called, whichever comes first.\n     */\n    fun setContent(content: @Composable () -> Unit) {\n        shouldCreateCompositionOnAttachedToWindow = true\n        this.content.value = content\n        if (isAttachedToWindow) {\n            createComposition()\n        }\n    }\n}\n```\n\n `AbstractComposeView`   ViewGroup  ,  composable        .\n\n`setContent()`    ,  `Content`  .   , `createComposition()`     ,    .   `ensureCompsositionCreated()`  tree ComposeView  ,   Content .\n\n```kotlin\n@Suppress(\"DEPRECATION\") // Still using ViewGroup.setContent for now\n    private fun ensureCompositionCreated() {\n        if (composition == null) {\n            try {\n                creatingComposition = true\n                composition = setContent(\n                    parentContext ?: findViewTreeCompositionContext() ?: windowRecomposer\n                ) {\n                    Content() //    window   .\n                }\n            } finally {\n                creatingComposition = false\n            }\n        }\n    }\n```\n\n  `ComposeView`   Content ,   View UI  Content .\n\n```kotlin\n/**\n* The Jetpack Compose UI content for this view.\n* Subclasses must implement this method to provide content. Initial composition will\n* occur when the view becomes attached to a window or when [createComposition] is called,\n* whichever comes first.\n*/\n@Composable\nabstract fun Content()\n```\n\nContent    `createComposition()`    View Window    .\n\n `ComponentActivity.setContent(CompositionContext?, @Composable () -> Unit)`   ComposeView  ContentLayout widht/height wrapContent  ContentView Set .\n\n```kotlin\n/**\n * Composes the given composable into the given activity. The [content] will become the root view\n * of the given activity.\n *\n * This is roughly equivalent to calling [ComponentActivity.setContentView] with a [ComposeView]\n * i.e.:\n *\n * ```\n * setContentView(\n *   ComposeView(this).apply {\n *     setContent {\n *       MyComposableContent()\n *     }\n *   }\n * )\n * ```\n *\n * @param parent The parent composition reference to coordinate scheduling of composition updates\n * @param content A `@Composable` function declaring the UI contents\n */\npublic fun ComponentActivity.setContent(\n    parent: CompositionContext? = null,\n    content: @Composable () -> Unit\n) {\n  \t...\n\t\telse ComposeView(this).apply {\n        // Set content and parent **before** setContentView\n        // to have ComposeView create the composition on attach\n        setParentCompositionContext(parent)\n        setContent(content)\n        // Set the view tree owners before setting the content view so that the inflation process\n        // and attach listeners will see them already present\n        setOwners()\n        setContentView(this, DefaultActivityContentLayoutParams)\n    }\n}\n```\n\n### 13. ComposeView\n\nandroid.view.View  Jetpack Compose UI     . setContent   composable function content     .\n\nCompose     . ComposeView   androidx.compose.materia      Composable function    .\n\n```\nkotlin.Any\n  android.view.View\n    android.view.ViewGroup\n      androidx.compose.ui.platform.AbstractComposeView\n        androidx.compose.ui.platform.ComposeView\n```\n\n### 14. Compose Compiler / Compose Runtime\n\nCompose Compiler  `@Composable`    Composable function         .\n\nCompose Runtime Compose    ,  Compose         .\n\n\n```koltin\n@Composable\nfun Greeting(name: String) {\n    var greet by remember { mutableStateOf(\"Hello $name\") }\n    Text(text = greet, color = Color.Red)\n}\n```\n\n  Compose Compiler  `@Composeable`   .\n\n```kotlin\nfun Greeting(\n  $composer: Composer,\n  $static: Int,\n  name: String\n) {\n  $composer.start(123)\n  var greet by remember { mutableStateOf(\"Hello $name\") }\n  Text(text = greet, color = Color.Red)\n  $composer.end()\n}\n```\n\nCompose  `composer.start`     ,  Compose  state       Compose   .\n\nstatic  (state)        , `composer.start`  `composer.end`  UI    .\n\n    UI     Recomposition  .","source":"_posts/2021-04-07 Jetpack Compose Part 1.md","raw":"---\ntitle: Jetpack Compose Part 1 - Compose    \ndate: 2021-04-07 01:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_jepack_compose.png\ncategories:\n- Jetpack Compose\ntags:\n- Android\n- Jetpack\n- Compose\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n\n## Jetpack Compose ?\n\n{% asset_img compose_animation.gif [compose_animation] %}\n\n> **** [Android Developers#Jetpack Compse](https://developer.android.com/jetpack/compose)\n\nCompose Native UI      . \n\n     Compose          .\n\n   .\n\n```kotlin\n@Composable\nfun Greeting(name: String) {\n\tText(\"Hello $name\")\n}\n```\n\n  UI       State     .\n\n    .\n\n{% youtube U5BwfqBpiWU %}\n\n### Compose 4 \n\n  Compose       .\n\n- `Less Code` -  \n  -                  .\n- `Intuitive` - \n  - UI   Compose .    UI  .\n- `Accelerate Development` -   \n  -           .     Android      .\n- `Powerful` -  \n  - Android  API    ,  ,         .\n\n         ,   Android      .\n\n## Codelab - Jetpack Compose basics\n\n### 1. \n\nCompose      Android Studio Canary      .\n\n1. Android Studio Canary \n\nCanary      .\n\n> [Android Studio Preview](https://developer.android.com/studio/preview)\n\n2.   Kotlin plugin \n\n```groovy\next.kotlin_version = '1.4.31'\n```\n\n3. buildFeatures  composeOption \n\n```groovy\nandroid {\n    ...\n    buildFeatures {\n        compose true\n    }\n    composeOptions {\n        kotlinCompilerExtensionVersion 1.0.0-beta02\n    }\n}\n\ndependencies {\n    ...\n    implementation \"androidx.compose.ui:ui:1.0.0-beta02\"\n    implementation \"androidx.activity:activity-compose:1.3.0-alpha03\"\n    implementation \"androidx.compose.material:material:1.0.0-beta02\"\n    implementation \"androidx.compose.ui:ui-tooling:1.0.0-beta02\"\n    ...\n}\n```\n\n### 2. Empty Compose  \n\n[File] - [New] - [New Project]     (Preview) Empty Compose Activity  .\n\n{% asset_img 1_5gfrQWfxyEC7Oq6b2xlJ9w.png [1_5gfrQWfxyEC7Oq6b2xlJ9w] %}\n\n  Next , Compose     API  21 .\n\n    app/build.gradle         .\n\n```groovy\nandroid {\n    ...\n    kotlinOptions {\n        jvmTarget = '1.8'\n        useIR = true\n    }\n    buildFeatures {\n        compose true\n    }\n    composeOptions {\n        kotlinCompilerExtensionVersion compose_version\n    }\n}\n\ndependencies {\n    ...\n    implementation \"androidx.compose.ui:ui:$compose_version\"\n    implementation \"androidx.activity:activity-compose:1.3.0-alpha03\"\n    implementation \"androidx.compose.material:material:$compose_version\"\n    implementation \"androidx.compose.ui:ui-tooling:$compose_version\"\n    ...\n}\n```\n\n composeOptions  kotlinCompilerVersion   compose      .\n\n      .\n\n**MainActivity.kt**\n```kotlin\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContent {\n            MyFirstComposeApplicationTheme {\n                // A surface container using the 'background' color from the theme\n                Surface(color = MaterialTheme.colors.background) {\n                    Greeting(\"Android\")\n                }\n            }\n        }\n    }\n}\n\n@Composable\nfun Greeting(name: String) {\n    Text(text = \"Hello $name!\")\n}\n\n@Preview(showBackground = true)\n@Composable\nfun DefaultPreview() {\n    MyFirstComposeApplicationTheme {\n        Greeting(\"Android\")\n    }\n}\n```\n\n**ui/theme/Theme.kt**\n```kotlin\nprivate val DarkColorPalette = darkColors(\n    primary = Purple200,\n    primaryVariant = Purple700,\n    secondary = Teal200\n)\n\nprivate val LightColorPalette = lightColors(\n    primary = Purple500,\n    primaryVariant = Purple700,\n    secondary = Teal200*\n\n    /* Other default colors to override\n    background = Color.White,\n    surface = Color.White,\n    onPrimary = Color.White,\n    onSecondary = Color.Black,\n    onBackground = Color.Black,\n    onSurface = Color.Black,\n    */\n)\n\n@Composable\nfun MyFirstComposeApplicationTheme(darkTheme: Boolean = isSystemInDarkTheme(), content: @Composable () -> Unit) {\n    val colors = if (darkTheme) {\n        DarkColorPalette*\n    } else {\n        LightColorPalette*\n    }\n\n    MaterialTheme(\n        colors = colors,\n        typography = Typography,\n        shapes = Shapes,\n        content = content\n    )\n}\n```\n\n    , Compose  3       .\n\n1.   Composable \n2. Preview   Preview Composable \n3. setContent      \n\n   Activity   `onCreate()`   `setContentView(Int)`   `setContent()`      .\n\n### 3. Composable Function\n\nComposable Function   .  `@Composable`          .   .\n\n```kotlin\n@Composable\nfun Greeting(names: List<String>) {\n    for (name in names) {\n        Text(\"Hello $name\")\n    }\n}\n```\n\n  Text  ,   UI    .   text       .\n\n### 4. TextView \n\n    Hello  TextView   .\n\n```kotlin\nsetContent {\n  BasicsCodelabTheme {\n    // A surface container using the 'background' color from the theme\n    Surface(color = MaterialTheme.colors.background) {\n      Greeting(\"Android\")\n    }\n  }\n}\n```\n\n{% asset_img aO6Jlsg.png [aO6Jlsg] %}\n\n### 5. `@Preview`\n\n    IDE Preview  .    @Preview       .\n\n```kotlin\n@Preview(\"Greeting Preview\")\n@Composable\nfun GreetingPreview() {\n    BasicsCodelabTheme {\n        Surface(color = MaterialTheme.colors.background) {\n            Greeting(\"Android\")\n        }\n    }\n}\n```\n\n{% asset_img WprDTs1.png [WprDTs1] %}\n\n### 6. setContent / Theme / Surface\n\n```kotlin\nsetContent {\n  BasicsCodelabTheme {\n    // A surface container using the 'background' color from the theme\n    Surface(color = MaterialTheme.colors.background) {\n      Greeting(\"Android\")\n    }\n  }\n}\n```\n\n onCreate      \n\n- **setContent** : Activity setContentView      . , setContent  (@Composable) -> Unit   UI .\n\n- **XXXTheme** : Theme .   Theme.kt     ,  UI    .\n\n```kotlin\nprivate val DarkColorPalette = darkColors(\n    primary = purple200,\n    primaryVariant = purple700,\n    secondary = teal200\n)\n\nprivate val LightColorPalette = lightColors(\n    primary = purple500,\n    primaryVariant = purple700,\n    secondary = teal200\n\n    /* Other default colors to override\n    background = Color.White,\n    surface = Color.White,\n    onPrimary = Color.White,\n    onSecondary = Color.Black,\n    onBackground = Color.Black,\n    onSurface = Color.Black,\n    */\n)\n\n@Composable\nfun BasicsCodelabTheme(\n    darkTheme: Boolean = isSystemInDarkTheme(),\n    content: @Composable () -> Unit\n) {\n    val colors = if (darkTheme) {\n        DarkColorPalette\n    } else {\n        LightColorPalette\n    }\n\n    MaterialTheme(\n        colors = colors,\n        typography = typography,\n        shapes = shapes,\n        content = content\n    )\n}\n```\n\n- **Surface** : Greeting   .    , background   .   .   Paramter `color`     .  \n\n```kotlin\n@Composable\nfun Surface(\n    modifier: Modifier = Modifier,\n    shape: Shape = RectangleShape,\n    color: Color = MaterialTheme.colors.surface,\n    contentColor: Color = contentColorFor(color),\n    border: BorderStroke? = null,\n    elevation: Dp = 0.dp,\n    content: @Composable () -> Unit\n) {\n    val elevationPx = with(LocalDensity.current) { elevation.toPx() }\n    val elevationOverlay = LocalElevationOverlay.current\n    val absoluteElevation = LocalAbsoluteElevation.current + elevation\n    val backgroundColor = if (color == MaterialTheme.colors.surface && elevationOverlay != null) {\n        elevationOverlay.apply(color, absoluteElevation)\n    } else {\n        color\n    }\n    CompositionLocalProvider(\n        LocalContentColor provides contentColor,\n        LocalAbsoluteElevation provides absoluteElevation\n    ) {\n        Box(\n            modifier.graphicsLayer(shadowElevation = elevationPx, shape = shape)\n                .then(if (border != null) Modifier.border(border, shape) else Modifier)\n                .background(\n                    color = backgroundColor,\n                    shape = shape\n                )\n                .clip(shape),\n            propagateMinConstraints = true\n        ) {\n            content()\n        }\n    }\n}\n```\n\n### 7. Declarative UI -  UI\n\n    TextView . , Greeting Modifier   Padding .     .\n\n```kotlin\nBasicsCodelabTheme {\n  // A surface container using the 'background' color from the theme\n  Surface(color = Color.Yellow) {\n    Greeting(\"Android\")\n  }\n}\n```\n\n```kotlin\n@Composable\nfun Greeting(name: String) {\n    var isSelected by remember { mutableStateOf(false) }\n    val backgroundColor by animateColorAsState(if (isSelected) Color.Red else Color.Transparent)\n\n    Text(\n        text = \"Hello $name!\",\n        modifier = Modifier\n            .padding(24.dp)\n            .background(color = backgroundColor)\n            .clickable(onClick = { isSelected = !isSelected })\n    )\n}\n```\n\n{% asset_img qgQ6oY4.png [qgQ6oY4] %}\n\n UI     UI      .    On/Off      ,        .\n\n\n### 8. \n\nCompose     , XML  include      ,      .\n\n  Compose    `@Composable`   .\n\n### 9. Container \n\nMyApp          Composable .  Container        `@Composable () -> Unit`    .\n\n```kotlin\n@Composable\nfun MyApp(content: @Composable () -> Unit) {\n    BasicsCodelabTheme {\n        Surface(color = Color.Yellow) {\n            content()\n        }\n    }\n}\n```\n\n         Container        .\n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n  override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContent {\n      MyApp {\n        Greeting(\"Android\")\n      }\n    }\n    ...\n  }\n```\n\n### 10.   Compose function  \n\n    ,    .\n\n```kotlin\n@Composable\nfun MyScreenContent() {\n    Column {\n        Greeting(\"Android\")\n        Divider(color = Color.Black)\n        Greeting(\"there\")\n    }\n}\n```\n\n `Column`   `Greeting`  ,    `Divider`    .\n\n{% asset_img VLTxB8C.png [VLTxB8C] %}\n\n     ,    .\n\n- Column :     .\n- Divider :    Compose .\n\n    .\n\n```kotlin\n@Composable\nfun MyColumnScreen(names: List<String> = listOf(\"Line One\", \"Line Two\")) {\n    Column {\n        names.forEach {\n            Greeting(name = it)\n            Divider(color = Color.Black)\n        }\n    }\n}\n```\n\n### 11. State in Compose - Compose  \n\n\n         .\n\n```kotlin\n@Composable\nfun MyColumnScreen(names: List<String> = listOf(\"Line One\", \"Line Two\")) {\n    val counterState = remember { mutableStateOf(0) } // \n\n    Column {\n        names.forEach {\n            Greeting(name = it)\n            Divider(color = Color.Black)\n        }\n        Counter(\n            count = counterState.value,\n            updateCount = { newCount ->\n                counterState.value = newCount\n            }\n        )\n    }\n}\n```\n\nremember          . \n\n`remember`   .\n\n```kotlin\n/**\n * Remember the value produced by [calculation]. [calculation] will only be evaluated during the composition.\n * Recomposition will always return the value produced by composition.\n */\n@OptIn(ComposeCompilerApi::class)\n@Composable\ninline fun <T> remember(calculation: @DisallowComposableCalls () -> T): T =\n    currentComposer.cache(false, calculation)\n```\n\n  Recomposition()         . @Composable       ,       .\n\n,  Counter  Button     .\n\n```kotlin\n@Composable\nfun Counter(count: Int, updateCount: (Int) -> Unit) {\n    Button(\n        onClick = { updateCount(count + 1) },\n        colors = ButtonDefaults.buttonColors(\n            backgroundColor = if (count > 5) Color.Green else Color.White\n        )\n    ) {\n        Text(\"I've been clicked $count times\")\n    }\n}\n```\n\n`updateCount(Int)`      ,   counterState       .\n\n  ,  . Count 5   .\n\n{% asset_img Ju6BSg2.gif [Ju6BSg2] %}\n\n        .    [Codelabs](https://developer.android.com/codelabs/jetpack-compose-basics)    ,  setContent    .\n\n### 12. Activity View   \n\nCompose    Activity, Fragment  contentView .     .\n\n```java\n/**\n* Set the activity content from a layout resource.  The resource will be\n* inflated, adding all top-level views to the activity.\n*\n* @param layoutResID Resource ID to be inflated.\n*\n* @see #setContentView(android.view.View)\n* @see #setContentView(android.view.View, android.view.ViewGroup.LayoutParams)\n*/\npublic void setContentView(@LayoutRes int layoutResID) {\n  getWindow().setContentView(layoutResID);\n  initWindowDecorActionBar();\n}\n```\n\nUI      Window  Layout Resource Id    Layout XML    ,        ViewGroup, View   .\n\n`PhoneWindow`     , Window  setContentView         `installDecor()`   mContentParent(   ViewGroup) ,   .\n\n    ,  Compose `setContent()`     .\n\n```kotlin\n/**\n * Composes the given composable into the given activity. The [content] will become the root view\n * of the given activity.\n *\n * This is roughly equivalent to calling [ComponentActivity.setContentView] with a [ComposeView]\n * i.e.:\n *\n * ```\n * setContentView(\n *   ComposeView(this).apply {\n *     setContent {\n *       MyComposableContent()\n *     }\n *   }\n * )\n * ```\n *\n * @param parent The parent composition reference to coordinate scheduling of composition updates\n * @param content A `@Composable` function declaring the UI contents\n */\npublic fun ComponentActivity.setContent(\n    parent: CompositionContext? = null,\n    content: @Composable () -> Unit\n) {\n    val existingComposeView = window.decorView\n        .findViewById<ViewGroup>(android.R.id.content)\n        .getChildAt(0) as? ComposeView\n\n    if (existingComposeView != null) with(existingComposeView) {\n        setParentCompositionContext(parent)\n        setContent(content)\n    } else ComposeView(this).apply {\n        // Set content and parent **before** setContentView\n        // to have ComposeView create the composition on attach\n        setParentCompositionContext(parent)\n        setContent(content)\n        // Set the view tree owners before setting the content view so that the inflation process\n        // and attach listeners will see them already present\n        setOwners()\n        setContentView(this, DefaultActivityContentLayoutParams)\n    }\n}\n```\n\n  `window.decorView.findViewById<ViewGroup>(android.R.id.content)`    decorView .  compose     ,  inflator ViewGroup, View    `setContent()` => window Activity/Fragment  `createComposition()`    `ensureCompsositionCreated()`  .   `ViewGroup.setContent()`   ,     .     ViewGroup   ,   ViewGroup  View, ViewGroup Composable      AndroidComposeView      .\n\n```kotlin\n/**\n * Composes the given composable into the given view.\n *\n * The new composition can be logically \"linked\" to an existing one, by providing a\n * [parent]. This will ensure that invalidations and CompositionLocals will flow through\n * the two compositions as if they were not separate.\n *\n * Note that this [ViewGroup] should have an unique id for the saved instance state mechanism to\n * be able to save and restore the values used within the composition. See [View.setId].\n *\n * @param parent The [Recomposer] or parent composition reference.\n * @param content Composable that will be the content of the view.\n */\ninternal fun ViewGroup.setContent(\n    parent: CompositionContext,\n    content: @Composable () -> Unit\n): Composition {\n    GlobalSnapshotManager.ensureStarted()\n    val composeView =\n        if (childCount > 0) {\n            getChildAt(0) as? AndroidComposeView\n        } else {\n            removeAllViews(); null\n        } ?: AndroidComposeView(context).also { addView(it.view, DefaultLayoutParams) }\n    return doSetContent(composeView, parent, content)\n}\n```\n\n\n\n , ComposeView `setContent()`   .\n\n```kotlin\n/**\n * A [android.view.View] that can host Jetpack Compose UI content.\n * Use [setContent] to supply the content composable function for the view.\n *\n * This [android.view.View] requires that the window it is attached to contains a\n * [ViewTreeLifecycleOwner]. This [androidx.lifecycle.LifecycleOwner] is used to\n * [dispose][androidx.compose.runtime.Composition.dispose] of the underlying composition\n * when the host [Lifecycle] is destroyed, permitting the view to be attached and\n * detached repeatedly while preserving the composition. Call [disposeComposition]\n * to dispose of the underlying composition earlier, or if the view is never initially\n * attached to a window. (The requirement to dispose of the composition explicitly\n * in the event that the view is never (re)attached is temporary.)\n */\nclass ComposeView @JvmOverloads constructor(\n    context: Context,\n    attrs: AttributeSet? = null,\n    defStyleAttr: Int = 0\n) : AbstractComposeView(context, attrs, defStyleAttr) {\n\n    private val content = mutableStateOf<(@Composable () -> Unit)?>(null)\n\n    @Suppress(\"RedundantVisibilityModifier\")\n    protected override var shouldCreateCompositionOnAttachedToWindow: Boolean = false\n        private set\n\n    @Composable\n    override fun Content() {\n        content.value?.invoke()\n    }\n\n    /**\n     * Set the Jetpack Compose UI content for this view.\n     * Initial composition will occur when the view becomes attached to a window or when\n     * [createComposition] is called, whichever comes first.\n     */\n    fun setContent(content: @Composable () -> Unit) {\n        shouldCreateCompositionOnAttachedToWindow = true\n        this.content.value = content\n        if (isAttachedToWindow) {\n            createComposition()\n        }\n    }\n}\n```\n\n `AbstractComposeView`   ViewGroup  ,  composable        .\n\n`setContent()`    ,  `Content`  .   , `createComposition()`     ,    .   `ensureCompsositionCreated()`  tree ComposeView  ,   Content .\n\n```kotlin\n@Suppress(\"DEPRECATION\") // Still using ViewGroup.setContent for now\n    private fun ensureCompositionCreated() {\n        if (composition == null) {\n            try {\n                creatingComposition = true\n                composition = setContent(\n                    parentContext ?: findViewTreeCompositionContext() ?: windowRecomposer\n                ) {\n                    Content() //    window   .\n                }\n            } finally {\n                creatingComposition = false\n            }\n        }\n    }\n```\n\n  `ComposeView`   Content ,   View UI  Content .\n\n```kotlin\n/**\n* The Jetpack Compose UI content for this view.\n* Subclasses must implement this method to provide content. Initial composition will\n* occur when the view becomes attached to a window or when [createComposition] is called,\n* whichever comes first.\n*/\n@Composable\nabstract fun Content()\n```\n\nContent    `createComposition()`    View Window    .\n\n `ComponentActivity.setContent(CompositionContext?, @Composable () -> Unit)`   ComposeView  ContentLayout widht/height wrapContent  ContentView Set .\n\n```kotlin\n/**\n * Composes the given composable into the given activity. The [content] will become the root view\n * of the given activity.\n *\n * This is roughly equivalent to calling [ComponentActivity.setContentView] with a [ComposeView]\n * i.e.:\n *\n * ```\n * setContentView(\n *   ComposeView(this).apply {\n *     setContent {\n *       MyComposableContent()\n *     }\n *   }\n * )\n * ```\n *\n * @param parent The parent composition reference to coordinate scheduling of composition updates\n * @param content A `@Composable` function declaring the UI contents\n */\npublic fun ComponentActivity.setContent(\n    parent: CompositionContext? = null,\n    content: @Composable () -> Unit\n) {\n  \t...\n\t\telse ComposeView(this).apply {\n        // Set content and parent **before** setContentView\n        // to have ComposeView create the composition on attach\n        setParentCompositionContext(parent)\n        setContent(content)\n        // Set the view tree owners before setting the content view so that the inflation process\n        // and attach listeners will see them already present\n        setOwners()\n        setContentView(this, DefaultActivityContentLayoutParams)\n    }\n}\n```\n\n### 13. ComposeView\n\nandroid.view.View  Jetpack Compose UI     . setContent   composable function content     .\n\nCompose     . ComposeView   androidx.compose.materia      Composable function    .\n\n```\nkotlin.Any\n  android.view.View\n    android.view.ViewGroup\n      androidx.compose.ui.platform.AbstractComposeView\n        androidx.compose.ui.platform.ComposeView\n```\n\n### 14. Compose Compiler / Compose Runtime\n\nCompose Compiler  `@Composable`    Composable function         .\n\nCompose Runtime Compose    ,  Compose         .\n\n\n```koltin\n@Composable\nfun Greeting(name: String) {\n    var greet by remember { mutableStateOf(\"Hello $name\") }\n    Text(text = greet, color = Color.Red)\n}\n```\n\n  Compose Compiler  `@Composeable`   .\n\n```kotlin\nfun Greeting(\n  $composer: Composer,\n  $static: Int,\n  name: String\n) {\n  $composer.start(123)\n  var greet by remember { mutableStateOf(\"Hello $name\") }\n  Text(text = greet, color = Color.Red)\n  $composer.end()\n}\n```\n\nCompose  `composer.start`     ,  Compose  state       Compose   .\n\nstatic  (state)        , `composer.start`  `composer.end`  UI    .\n\n    UI     Recomposition  .","slug":"2021-04-07 Jetpack Compose Part 1","published":1,"updated":"2021-07-25T06:48:23.351Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7km00003lre8y9f5bri","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<span id=\"more\"></span>\n\n<h2 id=\"Jetpack-Compose-\"><a href=\"#Jetpack-Compose-\" class=\"headerlink\" title=\"Jetpack Compose ?\"></a>Jetpack Compose ?</h2><img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/compose_animation.gif\" class=\"\" title=\"[compose_animation]\">\n\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/jetpack/compose\">Android Developers#Jetpack Compse</a></p>\n</blockquote>\n<p>Compose Native UI      . </p>\n<p>     Compose          .</p>\n<p>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(name: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">\tText(<span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  UI       State     .</p>\n<p>    .</p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/U5BwfqBpiWU\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h3 id=\"Compose-4-\"><a href=\"#Compose-4-\" class=\"headerlink\" title=\"Compose 4 \"></a>Compose 4 </h3><p>  Compose       .</p>\n<ul>\n<li><code>Less Code</code> -  <ul>\n<li>                 .</li>\n</ul>\n</li>\n<li><code>Intuitive</code> - <ul>\n<li>UI   Compose .    UI  .</li>\n</ul>\n</li>\n<li><code>Accelerate Development</code> -   <ul>\n<li>          .     Android      .</li>\n</ul>\n</li>\n<li><code>Powerful</code> -  <ul>\n<li>Android  API    ,  ,         .</li>\n</ul>\n</li>\n</ul>\n<p>         ,   Android      .</p>\n<h2 id=\"Codelab-Jetpack-Compose-basics\"><a href=\"#Codelab-Jetpack-Compose-basics\" class=\"headerlink\" title=\"Codelab - Jetpack Compose basics\"></a>Codelab - Jetpack Compose basics</h2><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>Compose      Android Studio Canary      .</p>\n<ol>\n<li>Android Studio Canary </li>\n</ol>\n<p>Canary      .</p>\n<blockquote>\n<p><a href=\"https://developer.android.com/studio/preview\">Android Studio Preview</a></p>\n</blockquote>\n<ol start=\"2\">\n<li>  Kotlin plugin </li>\n</ol>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ext.kotlin_version = <span class=\"string\">&#x27;1.4.31&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>buildFeatures  composeOption </li>\n</ol>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    buildFeatures &#123;</span><br><span class=\"line\">        compose <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    composeOptions &#123;</span><br><span class=\"line\">        kotlinCompilerExtensionVersion <span class=\"number\">1.0</span><span class=\"number\">.0</span>-beta02</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.ui:ui:1.0.0-beta02&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.activity:activity-compose:1.3.0-alpha03&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.material:material:1.0.0-beta02&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.ui:ui-tooling:1.0.0-beta02&quot;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Empty-Compose--\"><a href=\"#2-Empty-Compose--\" class=\"headerlink\" title=\"2. Empty Compose  \"></a>2. Empty Compose  </h3><p>[File] - [New] - [New Project]     (Preview) Empty Compose Activity  .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/1_5gfrQWfxyEC7Oq6b2xlJ9w.png\" class=\"\" title=\"[1_5gfrQWfxyEC7Oq6b2xlJ9w]\">\n\n<p>  Next , Compose     API  21 .</p>\n<p>    app/build.gradle         .</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    kotlinOptions &#123;</span><br><span class=\"line\">        jvmTarget = <span class=\"string\">&#x27;1.8&#x27;</span></span><br><span class=\"line\">        useIR = <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    buildFeatures &#123;</span><br><span class=\"line\">        compose <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    composeOptions &#123;</span><br><span class=\"line\">        kotlinCompilerExtensionVersion compose_version</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.ui:ui:$compose_version&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.activity:activity-compose:1.3.0-alpha03&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.material:material:$compose_version&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.ui:ui-tooling:$compose_version&quot;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> composeOptions  kotlinCompilerVersion   compose      .</p>\n<p>      .</p>\n<p><strong>MainActivity.kt</strong></p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> : <span class=\"type\">AppCompatActivity</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContent &#123;</span><br><span class=\"line\">            MyFirstComposeApplicationTheme &#123;</span><br><span class=\"line\">                <span class=\"comment\">// A surface container using the &#x27;background&#x27; color from the theme</span></span><br><span class=\"line\">                Surface(color = MaterialTheme.colors.background) &#123;</span><br><span class=\"line\">                    Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(name: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">    Text(text = <span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>!&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Preview(showBackground = true)</span></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">DefaultPreview</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    MyFirstComposeApplicationTheme &#123;</span><br><span class=\"line\">        Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ui/theme/Theme.kt</strong></p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> DarkColorPalette = darkColors(</span><br><span class=\"line\">    primary = Purple200,</span><br><span class=\"line\">    primaryVariant = Purple700,</span><br><span class=\"line\">    secondary = Teal200</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> LightColorPalette = lightColors(</span><br><span class=\"line\">    primary = Purple500,</span><br><span class=\"line\">    primaryVariant = Purple700,</span><br><span class=\"line\">    secondary = Teal200*</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* Other default colors to override</span></span><br><span class=\"line\"><span class=\"comment\">    background = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    surface = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    onPrimary = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    onSecondary = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    onBackground = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    onSurface = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">MyFirstComposeApplicationTheme</span><span class=\"params\">(darkTheme: <span class=\"type\">Boolean</span> = isSystemInDarkTheme()</span></span>, content: <span class=\"meta\">@Composable</span> () -&gt; <span class=\"built_in\">Unit</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> colors = <span class=\"keyword\">if</span> (darkTheme) &#123;</span><br><span class=\"line\">        DarkColorPalette*</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        LightColorPalette*</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    MaterialTheme(</span><br><span class=\"line\">        colors = colors,</span><br><span class=\"line\">        typography = Typography,</span><br><span class=\"line\">        shapes = Shapes,</span><br><span class=\"line\">        content = content</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>    , Compose  3       .</p>\n<ol>\n<li>  Composable </li>\n<li>Preview   Preview Composable </li>\n<li>setContent      </li>\n</ol>\n<p>   Activity   <code>onCreate()</code>   <code>setContentView(Int)</code>   <code>setContent()</code>      .</p>\n<h3 id=\"3-Composable-Function\"><a href=\"#3-Composable-Function\" class=\"headerlink\" title=\"3. Composable Function\"></a>3. Composable Function</h3><p>Composable Function   .  <code>@Composable</code>          .   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(names: <span class=\"type\">List</span>&lt;<span class=\"type\">String</span>&gt;)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (name <span class=\"keyword\">in</span> names) &#123;</span><br><span class=\"line\">        Text(<span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  Text  ,   UI    .   text       .</p>\n<h3 id=\"4-TextView-\"><a href=\"#4-TextView-\" class=\"headerlink\" title=\"4. TextView \"></a>4. TextView </h3><p>    Hello  TextView   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setContent &#123;</span><br><span class=\"line\">  BasicsCodelabTheme &#123;</span><br><span class=\"line\">    <span class=\"comment\">// A surface container using the &#x27;background&#x27; color from the theme</span></span><br><span class=\"line\">    Surface(color = MaterialTheme.colors.background) &#123;</span><br><span class=\"line\">      Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/aO6Jlsg.png\" class=\"\" title=\"[aO6Jlsg]\">\n\n<h3 id=\"5-Preview\"><a href=\"#5-Preview\" class=\"headerlink\" title=\"5. @Preview\"></a>5. <code>@Preview</code></h3><p>    IDE Preview  .    @Preview       .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Preview(<span class=\"meta-string\">&quot;Greeting Preview&quot;</span>)</span></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">GreetingPreview</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    BasicsCodelabTheme &#123;</span><br><span class=\"line\">        Surface(color = MaterialTheme.colors.background) &#123;</span><br><span class=\"line\">            Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/WprDTs1.png\" class=\"\" title=\"[WprDTs1]\">\n\n<h3 id=\"6-setContent-Theme-Surface\"><a href=\"#6-setContent-Theme-Surface\" class=\"headerlink\" title=\"6. setContent / Theme / Surface\"></a>6. setContent / Theme / Surface</h3><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setContent &#123;</span><br><span class=\"line\">  BasicsCodelabTheme &#123;</span><br><span class=\"line\">    <span class=\"comment\">// A surface container using the &#x27;background&#x27; color from the theme</span></span><br><span class=\"line\">    Surface(color = MaterialTheme.colors.background) &#123;</span><br><span class=\"line\">      Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> onCreate      </p>\n<ul>\n<li><p><strong>setContent</strong> : Activity setContentView      . , setContent  (@Composable) -&gt; Unit   UI .</p>\n</li>\n<li><p><strong>XXXTheme</strong> : Theme .   Theme.kt     ,  UI    .</p>\n</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> DarkColorPalette = darkColors(</span><br><span class=\"line\">    primary = purple200,</span><br><span class=\"line\">    primaryVariant = purple700,</span><br><span class=\"line\">    secondary = teal200</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> LightColorPalette = lightColors(</span><br><span class=\"line\">    primary = purple500,</span><br><span class=\"line\">    primaryVariant = purple700,</span><br><span class=\"line\">    secondary = teal200</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* Other default colors to override</span></span><br><span class=\"line\"><span class=\"comment\">    background = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    surface = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    onPrimary = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    onSecondary = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    onBackground = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    onSurface = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">BasicsCodelabTheme</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    darkTheme: <span class=\"type\">Boolean</span> = isSystemInDarkTheme()</span></span>,</span><br><span class=\"line\">    content: <span class=\"meta\">@Composable</span> () -&gt; <span class=\"built_in\">Unit</span></span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> colors = <span class=\"keyword\">if</span> (darkTheme) &#123;</span><br><span class=\"line\">        DarkColorPalette</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        LightColorPalette</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    MaterialTheme(</span><br><span class=\"line\">        colors = colors,</span><br><span class=\"line\">        typography = typography,</span><br><span class=\"line\">        shapes = shapes,</span><br><span class=\"line\">        content = content</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Surface</strong> : Greeting   .    , background   .   .   Paramter <code>color</code>     .  </li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Surface</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    modifier: <span class=\"type\">Modifier</span> = Modifier,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    shape: <span class=\"type\">Shape</span> = RectangleShape,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    color: <span class=\"type\">Color</span> = MaterialTheme.colors.surface,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    contentColor: <span class=\"type\">Color</span> = contentColorFor(color)</span></span>,</span><br><span class=\"line\">    border: BorderStroke? = <span class=\"literal\">null</span>,</span><br><span class=\"line\">    elevation: Dp = <span class=\"number\">0.</span>dp,</span><br><span class=\"line\">    content: <span class=\"meta\">@Composable</span> () -&gt; <span class=\"built_in\">Unit</span></span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> elevationPx = with(LocalDensity.current) &#123; elevation.toPx() &#125;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> elevationOverlay = LocalElevationOverlay.current</span><br><span class=\"line\">    <span class=\"keyword\">val</span> absoluteElevation = LocalAbsoluteElevation.current + elevation</span><br><span class=\"line\">    <span class=\"keyword\">val</span> backgroundColor = <span class=\"keyword\">if</span> (color == MaterialTheme.colors.surface &amp;&amp; elevationOverlay != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        elevationOverlay.apply(color, absoluteElevation)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        color</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    CompositionLocalProvider(</span><br><span class=\"line\">        LocalContentColor provides contentColor,</span><br><span class=\"line\">        LocalAbsoluteElevation provides absoluteElevation</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">        Box(</span><br><span class=\"line\">            modifier.graphicsLayer(shadowElevation = elevationPx, shape = shape)</span><br><span class=\"line\">                .then(<span class=\"keyword\">if</span> (border != <span class=\"literal\">null</span>) Modifier.border(border, shape) <span class=\"keyword\">else</span> Modifier)</span><br><span class=\"line\">                .background(</span><br><span class=\"line\">                    color = backgroundColor,</span><br><span class=\"line\">                    shape = shape</span><br><span class=\"line\">                )</span><br><span class=\"line\">                .clip(shape),</span><br><span class=\"line\">            propagateMinConstraints = <span class=\"literal\">true</span></span><br><span class=\"line\">        ) &#123;</span><br><span class=\"line\">            content()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-Declarative-UI--UI\"><a href=\"#7-Declarative-UI--UI\" class=\"headerlink\" title=\"7. Declarative UI -  UI\"></a>7. Declarative UI -  UI</h3><p>    TextView . , Greeting Modifier   Padding .     .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BasicsCodelabTheme &#123;</span><br><span class=\"line\">  <span class=\"comment\">// A surface container using the &#x27;background&#x27; color from the theme</span></span><br><span class=\"line\">  Surface(color = Color.Yellow) &#123;</span><br><span class=\"line\">    Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(name: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> isSelected <span class=\"keyword\">by</span> remember &#123; mutableStateOf(<span class=\"literal\">false</span>) &#125;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> backgroundColor <span class=\"keyword\">by</span> animateColorAsState(<span class=\"keyword\">if</span> (isSelected) Color.Red <span class=\"keyword\">else</span> Color.Transparent)</span><br><span class=\"line\"></span><br><span class=\"line\">    Text(</span><br><span class=\"line\">        text = <span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>!&quot;</span>,</span><br><span class=\"line\">        modifier = Modifier</span><br><span class=\"line\">            .padding(<span class=\"number\">24.</span>dp)</span><br><span class=\"line\">            .background(color = backgroundColor)</span><br><span class=\"line\">            .clickable(onClick = &#123; isSelected = !isSelected &#125;)</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/qgQ6oY4.png\" class=\"\" title=\"[qgQ6oY4]\">\n\n<p> UI     UI      .    On/Off      ,        .</p>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8. \"></a>8. </h3><p>Compose     , XML  include      ,      .</p>\n<p>  Compose    <code>@Composable</code>   .</p>\n<h3 id=\"9-Container-\"><a href=\"#9-Container-\" class=\"headerlink\" title=\"9. Container \"></a>9. Container </h3><p>MyApp          Composable .  Container        <code>@Composable () -&gt; Unit</code>    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">MyApp</span><span class=\"params\">(content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">    BasicsCodelabTheme &#123;</span><br><span class=\"line\">        Surface(color = Color.Yellow) &#123;</span><br><span class=\"line\">            content()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>         Container        .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> : <span class=\"type\">AppCompatActivity</span></span>() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">    setContent &#123;</span><br><span class=\"line\">      MyApp &#123;</span><br><span class=\"line\">        Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10---Compose-function--\"><a href=\"#10---Compose-function--\" class=\"headerlink\" title=\"10.   Compose function  \"></a>10.   Compose function  </h3><p>    ,    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">MyScreenContent</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    Column &#123;</span><br><span class=\"line\">        Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">        Divider(color = Color.Black)</span><br><span class=\"line\">        Greeting(<span class=\"string\">&quot;there&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>Column</code>   <code>Greeting</code>  ,    <code>Divider</code>    .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/VLTxB8C.png\" class=\"\" title=\"[VLTxB8C]\">\n\n<p>     ,    .</p>\n<ul>\n<li>Column :     .</li>\n<li>Divider :    Compose .</li>\n</ul>\n<p>    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">MyColumnScreen</span><span class=\"params\">(names: <span class=\"type\">List</span>&lt;<span class=\"type\">String</span>&gt; = listOf(<span class=\"string\">&quot;Line One&quot;</span>, <span class=\"string\">&quot;Line Two&quot;</span>)</span></span>) &#123;</span><br><span class=\"line\">    Column &#123;</span><br><span class=\"line\">        names.forEach &#123;</span><br><span class=\"line\">            Greeting(name = it)</span><br><span class=\"line\">            Divider(color = Color.Black)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-State-in-Compose-Compose--\"><a href=\"#11-State-in-Compose-Compose--\" class=\"headerlink\" title=\"11. State in Compose - Compose  \"></a>11. State in Compose - Compose  </h3><p>         .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">MyColumnScreen</span><span class=\"params\">(names: <span class=\"type\">List</span>&lt;<span class=\"type\">String</span>&gt; = listOf(<span class=\"string\">&quot;Line One&quot;</span>, <span class=\"string\">&quot;Line Two&quot;</span>)</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> counterState = remember &#123; mutableStateOf(<span class=\"number\">0</span>) &#125; <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">    Column &#123;</span><br><span class=\"line\">        names.forEach &#123;</span><br><span class=\"line\">            Greeting(name = it)</span><br><span class=\"line\">            Divider(color = Color.Black)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Counter(</span><br><span class=\"line\">            count = counterState.value,</span><br><span class=\"line\">            updateCount = &#123; newCount -&gt;</span><br><span class=\"line\">                counterState.value = newCount</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>remember          . </p>\n<p><code>remember</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Remember the value produced by [calculation]. [calculation] will only be evaluated during the composition.</span></span><br><span class=\"line\"><span class=\"comment\"> * Recomposition will always return the value produced by composition.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@OptIn(ComposeCompilerApi::class)</span></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"keyword\">inline</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"type\">&lt;T&gt;</span> <span class=\"title\">remember</span><span class=\"params\">(calculation: @<span class=\"type\">DisallowComposableCalls</span> () -&gt; <span class=\"type\">T</span>)</span></span>: T =</span><br><span class=\"line\">    currentComposer.cache(<span class=\"literal\">false</span>, calculation)</span><br></pre></td></tr></table></figure>\n\n<p>  Recomposition()         . @Composable       ,       .</p>\n<p>,  Counter  Button     .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Counter</span><span class=\"params\">(count: <span class=\"type\">Int</span>, updateCount: (<span class=\"type\">Int</span>) -&gt; <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">    Button(</span><br><span class=\"line\">        onClick = &#123; updateCount(count + <span class=\"number\">1</span>) &#125;,</span><br><span class=\"line\">        colors = ButtonDefaults.buttonColors(</span><br><span class=\"line\">            backgroundColor = <span class=\"keyword\">if</span> (count &gt; <span class=\"number\">5</span>) Color.Green <span class=\"keyword\">else</span> Color.White</span><br><span class=\"line\">        )</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">        Text(<span class=\"string\">&quot;I&#x27;ve been clicked <span class=\"variable\">$count</span> times&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>updateCount(Int)</code>      ,   counterState       .</p>\n<p>  ,  . Count 5   .</p>\n\n\n<p>        .    <a href=\"https://developer.android.com/codelabs/jetpack-compose-basics\">Codelabs</a>    ,  setContent    .</p>\n<h3 id=\"12-Activity-View---\"><a href=\"#12-Activity-View---\" class=\"headerlink\" title=\"12. Activity View   \"></a>12. Activity View   </h3><p>Compose    Activity, Fragment  contentView .     .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* Set the activity content from a layout resource.  The resource will be</span></span><br><span class=\"line\"><span class=\"comment\">* inflated, adding all top-level views to the activity.</span></span><br><span class=\"line\"><span class=\"comment\">*</span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@param</span> layoutResID Resource ID to be inflated.</span></span><br><span class=\"line\"><span class=\"comment\">*</span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@see</span> #setContentView(android.view.View)</span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@see</span> #setContentView(android.view.View, android.view.ViewGroup.LayoutParams)</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setContentView</span><span class=\"params\">(<span class=\"meta\">@LayoutRes</span> <span class=\"keyword\">int</span> layoutResID)</span> </span>&#123;</span><br><span class=\"line\">  getWindow().setContentView(layoutResID);</span><br><span class=\"line\">  initWindowDecorActionBar();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>UI      Window  Layout Resource Id    Layout XML    ,        ViewGroup, View   .</p>\n<p><code>PhoneWindow</code>     , Window  setContentView         <code>installDecor()</code>   mContentParent(   ViewGroup) ,   .</p>\n<p>    ,  Compose <code>setContent()</code>     .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Composes the given composable into the given activity. The [content] will become the root view</span></span><br><span class=\"line\"><span class=\"comment\"> * of the given activity.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * This is roughly equivalent to calling [ComponentActivity.setContentView] with a [ComposeView]</span></span><br><span class=\"line\"><span class=\"comment\"> * i.e.:</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * ```</span></span><br><span class=\"line\"><span class=\"comment\"> * setContentView(</span></span><br><span class=\"line\"><span class=\"comment\"> *   ComposeView(this).apply &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     setContent &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *       MyComposableContent()</span></span><br><span class=\"line\"><span class=\"comment\"> *     &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *   &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * )</span></span><br><span class=\"line\"><span class=\"comment\"> * ```</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> parent The parent composition reference to coordinate scheduling of composition updates</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> content A `<span class=\"doctag\">@Composable</span>` function declaring the UI contents</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">fun</span> ComponentActivity.<span class=\"title\">setContent</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    parent: <span class=\"type\">CompositionContext</span>? = <span class=\"literal\">null</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> existingComposeView = window.decorView</span><br><span class=\"line\">        .findViewById&lt;ViewGroup&gt;(android.R.id.content)</span><br><span class=\"line\">        .getChildAt(<span class=\"number\">0</span>) <span class=\"keyword\">as</span>? ComposeView</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (existingComposeView != <span class=\"literal\">null</span>) with(existingComposeView) &#123;</span><br><span class=\"line\">        setParentCompositionContext(parent)</span><br><span class=\"line\">        setContent(content)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> ComposeView(<span class=\"keyword\">this</span>).apply &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Set content and parent **before** setContentView</span></span><br><span class=\"line\">        <span class=\"comment\">// to have ComposeView create the composition on attach</span></span><br><span class=\"line\">        setParentCompositionContext(parent)</span><br><span class=\"line\">        setContent(content)</span><br><span class=\"line\">        <span class=\"comment\">// Set the view tree owners before setting the content view so that the inflation process</span></span><br><span class=\"line\">        <span class=\"comment\">// and attach listeners will see them already present</span></span><br><span class=\"line\">        setOwners()</span><br><span class=\"line\">        setContentView(<span class=\"keyword\">this</span>, DefaultActivityContentLayoutParams)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>window.decorView.findViewById&lt;ViewGroup&gt;(android.R.id.content)</code>    decorView .  compose     ,  inflator ViewGroup, View    <code>setContent()</code> =&gt; window Activity/Fragment  <code>createComposition()</code>    <code>ensureCompsositionCreated()</code>  .   <code>ViewGroup.setContent()</code>   ,     .     ViewGroup   ,   ViewGroup  View, ViewGroup Composable      AndroidComposeView      .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Composes the given composable into the given view.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * The new composition can be logically &quot;linked&quot; to an existing one, by providing a</span></span><br><span class=\"line\"><span class=\"comment\"> * [parent]. This will ensure that invalidations and CompositionLocals will flow through</span></span><br><span class=\"line\"><span class=\"comment\"> * the two compositions as if they were not separate.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Note that this [ViewGroup] should have an unique id for the saved instance state mechanism to</span></span><br><span class=\"line\"><span class=\"comment\"> * be able to save and restore the values used within the composition. See [View.setId].</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> parent The [Recomposer] or parent composition reference.</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> content Composable that will be the content of the view.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">internal</span> <span class=\"function\"><span class=\"keyword\">fun</span> ViewGroup.<span class=\"title\">setContent</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    parent: <span class=\"type\">CompositionContext</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span>: Composition &#123;</span><br><span class=\"line\">    GlobalSnapshotManager.ensureStarted()</span><br><span class=\"line\">    <span class=\"keyword\">val</span> composeView =</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (childCount &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            getChildAt(<span class=\"number\">0</span>) <span class=\"keyword\">as</span>? AndroidComposeView</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            removeAllViews(); <span class=\"literal\">null</span></span><br><span class=\"line\">        &#125; ?: AndroidComposeView(context).also &#123; addView(it.view, DefaultLayoutParams) &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doSetContent(composeView, parent, content)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p> , ComposeView <code>setContent()</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * A [android.view.View] that can host Jetpack Compose UI content.</span></span><br><span class=\"line\"><span class=\"comment\"> * Use [setContent] to supply the content composable function for the view.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * This [android.view.View] requires that the window it is attached to contains a</span></span><br><span class=\"line\"><span class=\"comment\"> * [ViewTreeLifecycleOwner]. This [androidx.lifecycle.LifecycleOwner] is used to</span></span><br><span class=\"line\"><span class=\"comment\"> * [dispose][androidx.compose.runtime.Composition.dispose] of the underlying composition</span></span><br><span class=\"line\"><span class=\"comment\"> * when the host [Lifecycle] is destroyed, permitting the view to be attached and</span></span><br><span class=\"line\"><span class=\"comment\"> * detached repeatedly while preserving the composition. Call [disposeComposition]</span></span><br><span class=\"line\"><span class=\"comment\"> * to dispose of the underlying composition earlier, or if the view is never initially</span></span><br><span class=\"line\"><span class=\"comment\"> * attached to a window. (The requirement to dispose of the composition explicitly</span></span><br><span class=\"line\"><span class=\"comment\"> * in the event that the view is never (re)attached is temporary.)</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ComposeView</span> <span class=\"meta\">@JvmOverloads</span> <span class=\"keyword\">constructor</span></span>(</span><br><span class=\"line\">    context: Context,</span><br><span class=\"line\">    attrs: AttributeSet? = <span class=\"literal\">null</span>,</span><br><span class=\"line\">    defStyleAttr: <span class=\"built_in\">Int</span> = <span class=\"number\">0</span></span><br><span class=\"line\">) : AbstractComposeView(context, attrs, defStyleAttr) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> content = mutableStateOf&lt;(<span class=\"meta\">@Composable</span> () -&gt; <span class=\"built_in\">Unit</span>)?&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Suppress(<span class=\"meta-string\">&quot;RedundantVisibilityModifier&quot;</span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">override</span> <span class=\"keyword\">var</span> shouldCreateCompositionOnAttachedToWindow: <span class=\"built_in\">Boolean</span> = <span class=\"literal\">false</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">set</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Composable</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Content</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        content.value?.invoke()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Set the Jetpack Compose UI content for this view.</span></span><br><span class=\"line\"><span class=\"comment\">     * Initial composition will occur when the view becomes attached to a window or when</span></span><br><span class=\"line\"><span class=\"comment\">     * [createComposition] is called, whichever comes first.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setContent</span><span class=\"params\">(content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">        shouldCreateCompositionOnAttachedToWindow = <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.content.value = content</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isAttachedToWindow) &#123;</span><br><span class=\"line\">            createComposition()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>AbstractComposeView</code>   ViewGroup  ,  composable        .</p>\n<p><code>setContent()</code>    ,  <code>Content</code>  .   , <code>createComposition()</code>     ,    .   <code>ensureCompsositionCreated()</code>  tree ComposeView  ,   Content .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Suppress(<span class=\"meta-string\">&quot;DEPRECATION&quot;</span>)</span> <span class=\"comment\">// Still using ViewGroup.setContent for now</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ensureCompositionCreated</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (composition == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                creatingComposition = <span class=\"literal\">true</span></span><br><span class=\"line\">                composition = setContent(</span><br><span class=\"line\">                    parentContext ?: findViewTreeCompositionContext() ?: windowRecomposer</span><br><span class=\"line\">                ) &#123;</span><br><span class=\"line\">                    Content() <span class=\"comment\">//    window   .</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                creatingComposition = <span class=\"literal\">false</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>ComposeView</code>   Content ,   View UI  Content .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* The Jetpack Compose UI content for this view.</span></span><br><span class=\"line\"><span class=\"comment\">* Subclasses must implement this method to provide content. Initial composition will</span></span><br><span class=\"line\"><span class=\"comment\">* occur when the view becomes attached to a window or when [createComposition] is called,</span></span><br><span class=\"line\"><span class=\"comment\">* whichever comes first.</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Content</span><span class=\"params\">()</span></span></span><br></pre></td></tr></table></figure>\n\n<p>Content    <code>createComposition()</code>    View Window    .</p>\n<p> <code>ComponentActivity.setContent(CompositionContext?, @Composable () -&gt; Unit)</code>   ComposeView  ContentLayout widht/height wrapContent  ContentView Set .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Composes the given composable into the given activity. The [content] will become the root view</span></span><br><span class=\"line\"><span class=\"comment\"> * of the given activity.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * This is roughly equivalent to calling [ComponentActivity.setContentView] with a [ComposeView]</span></span><br><span class=\"line\"><span class=\"comment\"> * i.e.:</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * ```</span></span><br><span class=\"line\"><span class=\"comment\"> * setContentView(</span></span><br><span class=\"line\"><span class=\"comment\"> *   ComposeView(this).apply &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     setContent &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *       MyComposableContent()</span></span><br><span class=\"line\"><span class=\"comment\"> *     &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *   &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * )</span></span><br><span class=\"line\"><span class=\"comment\"> * ```</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> parent The parent composition reference to coordinate scheduling of composition updates</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> content A `<span class=\"doctag\">@Composable</span>` function declaring the UI contents</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">fun</span> ComponentActivity.<span class=\"title\">setContent</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    parent: <span class=\"type\">CompositionContext</span>? = <span class=\"literal\">null</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span> &#123;</span><br><span class=\"line\">  \t...</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> ComposeView(<span class=\"keyword\">this</span>).apply &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Set content and parent **before** setContentView</span></span><br><span class=\"line\">        <span class=\"comment\">// to have ComposeView create the composition on attach</span></span><br><span class=\"line\">        setParentCompositionContext(parent)</span><br><span class=\"line\">        setContent(content)</span><br><span class=\"line\">        <span class=\"comment\">// Set the view tree owners before setting the content view so that the inflation process</span></span><br><span class=\"line\">        <span class=\"comment\">// and attach listeners will see them already present</span></span><br><span class=\"line\">        setOwners()</span><br><span class=\"line\">        setContentView(<span class=\"keyword\">this</span>, DefaultActivityContentLayoutParams)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-ComposeView\"><a href=\"#13-ComposeView\" class=\"headerlink\" title=\"13. ComposeView\"></a>13. ComposeView</h3><p>android.view.View  Jetpack Compose UI     . setContent   composable function content     .</p>\n<p>Compose     . ComposeView   androidx.compose.materia      Composable function    .</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kotlin.Any</span><br><span class=\"line\">  android.view.View</span><br><span class=\"line\">    android.view.ViewGroup</span><br><span class=\"line\">      androidx.compose.ui.platform.AbstractComposeView</span><br><span class=\"line\">        androidx.compose.ui.platform.ComposeView</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-Compose-Compiler-Compose-Runtime\"><a href=\"#14-Compose-Compiler-Compose-Runtime\" class=\"headerlink\" title=\"14. Compose Compiler / Compose Runtime\"></a>14. Compose Compiler / Compose Runtime</h3><p>Compose Compiler  <code>@Composable</code>    Composable function         .</p>\n<p>Compose Runtime Compose    ,  Compose         .</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Composable</span><br><span class=\"line\">fun Greeting(name: String) &#123;</span><br><span class=\"line\">    var greet by remember &#123; mutableStateOf(&quot;Hello $name&quot;) &#125;</span><br><span class=\"line\">    Text(text = greet, color = Color.Red)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  Compose Compiler  <code>@Composeable</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">  $composer: <span class=\"type\">Composer</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">  $static: <span class=\"type\">Int</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">  name: <span class=\"type\">String</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span> &#123;</span><br><span class=\"line\">  $composer.start(<span class=\"number\">123</span>)</span><br><span class=\"line\">  <span class=\"keyword\">var</span> greet <span class=\"keyword\">by</span> remember &#123; mutableStateOf(<span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>&quot;</span>) &#125;</span><br><span class=\"line\">  Text(text = greet, color = Color.Red)</span><br><span class=\"line\">  $composer.end()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Compose  <code>composer.start</code>     ,  Compose  state       Compose   .</p>\n<p>static  (state)        , <code>composer.start</code>  <code>composer.end</code>  UI    .</p>\n<p>    UI     Recomposition  .</p>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<h2 id=\"Jetpack-Compose-\"><a href=\"#Jetpack-Compose-\" class=\"headerlink\" title=\"Jetpack Compose ?\"></a>Jetpack Compose ?</h2><img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/compose_animation.gif\" class=\"\" title=\"[compose_animation]\">\n\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/jetpack/compose\">Android Developers#Jetpack Compse</a></p>\n</blockquote>\n<p>Compose Native UI      . </p>\n<p>     Compose          .</p>\n<p>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(name: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">\tText(<span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  UI       State     .</p>\n<p>    .</p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/U5BwfqBpiWU\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h3 id=\"Compose-4-\"><a href=\"#Compose-4-\" class=\"headerlink\" title=\"Compose 4 \"></a>Compose 4 </h3><p>  Compose       .</p>\n<ul>\n<li><code>Less Code</code> -  <ul>\n<li>                 .</li>\n</ul>\n</li>\n<li><code>Intuitive</code> - <ul>\n<li>UI   Compose .    UI  .</li>\n</ul>\n</li>\n<li><code>Accelerate Development</code> -   <ul>\n<li>          .     Android      .</li>\n</ul>\n</li>\n<li><code>Powerful</code> -  <ul>\n<li>Android  API    ,  ,         .</li>\n</ul>\n</li>\n</ul>\n<p>         ,   Android      .</p>\n<h2 id=\"Codelab-Jetpack-Compose-basics\"><a href=\"#Codelab-Jetpack-Compose-basics\" class=\"headerlink\" title=\"Codelab - Jetpack Compose basics\"></a>Codelab - Jetpack Compose basics</h2><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>Compose      Android Studio Canary      .</p>\n<ol>\n<li>Android Studio Canary </li>\n</ol>\n<p>Canary      .</p>\n<blockquote>\n<p><a href=\"https://developer.android.com/studio/preview\">Android Studio Preview</a></p>\n</blockquote>\n<ol start=\"2\">\n<li>  Kotlin plugin </li>\n</ol>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ext.kotlin_version = <span class=\"string\">&#x27;1.4.31&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>buildFeatures  composeOption </li>\n</ol>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    buildFeatures &#123;</span><br><span class=\"line\">        compose <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    composeOptions &#123;</span><br><span class=\"line\">        kotlinCompilerExtensionVersion <span class=\"number\">1.0</span><span class=\"number\">.0</span>-beta02</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.ui:ui:1.0.0-beta02&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.activity:activity-compose:1.3.0-alpha03&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.material:material:1.0.0-beta02&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.ui:ui-tooling:1.0.0-beta02&quot;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Empty-Compose--\"><a href=\"#2-Empty-Compose--\" class=\"headerlink\" title=\"2. Empty Compose  \"></a>2. Empty Compose  </h3><p>[File] - [New] - [New Project]     (Preview) Empty Compose Activity  .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/1_5gfrQWfxyEC7Oq6b2xlJ9w.png\" class=\"\" title=\"[1_5gfrQWfxyEC7Oq6b2xlJ9w]\">\n\n<p>  Next , Compose     API  21 .</p>\n<p>    app/build.gradle         .</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    kotlinOptions &#123;</span><br><span class=\"line\">        jvmTarget = <span class=\"string\">&#x27;1.8&#x27;</span></span><br><span class=\"line\">        useIR = <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    buildFeatures &#123;</span><br><span class=\"line\">        compose <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    composeOptions &#123;</span><br><span class=\"line\">        kotlinCompilerExtensionVersion compose_version</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.ui:ui:$compose_version&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.activity:activity-compose:1.3.0-alpha03&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.material:material:$compose_version&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;androidx.compose.ui:ui-tooling:$compose_version&quot;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> composeOptions  kotlinCompilerVersion   compose      .</p>\n<p>      .</p>\n<p><strong>MainActivity.kt</strong></p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> : <span class=\"type\">AppCompatActivity</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContent &#123;</span><br><span class=\"line\">            MyFirstComposeApplicationTheme &#123;</span><br><span class=\"line\">                <span class=\"comment\">// A surface container using the &#x27;background&#x27; color from the theme</span></span><br><span class=\"line\">                Surface(color = MaterialTheme.colors.background) &#123;</span><br><span class=\"line\">                    Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(name: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">    Text(text = <span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>!&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Preview(showBackground = true)</span></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">DefaultPreview</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    MyFirstComposeApplicationTheme &#123;</span><br><span class=\"line\">        Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ui/theme/Theme.kt</strong></p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> DarkColorPalette = darkColors(</span><br><span class=\"line\">    primary = Purple200,</span><br><span class=\"line\">    primaryVariant = Purple700,</span><br><span class=\"line\">    secondary = Teal200</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> LightColorPalette = lightColors(</span><br><span class=\"line\">    primary = Purple500,</span><br><span class=\"line\">    primaryVariant = Purple700,</span><br><span class=\"line\">    secondary = Teal200*</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* Other default colors to override</span></span><br><span class=\"line\"><span class=\"comment\">    background = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    surface = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    onPrimary = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    onSecondary = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    onBackground = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    onSurface = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">MyFirstComposeApplicationTheme</span><span class=\"params\">(darkTheme: <span class=\"type\">Boolean</span> = isSystemInDarkTheme()</span></span>, content: <span class=\"meta\">@Composable</span> () -&gt; <span class=\"built_in\">Unit</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> colors = <span class=\"keyword\">if</span> (darkTheme) &#123;</span><br><span class=\"line\">        DarkColorPalette*</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        LightColorPalette*</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    MaterialTheme(</span><br><span class=\"line\">        colors = colors,</span><br><span class=\"line\">        typography = Typography,</span><br><span class=\"line\">        shapes = Shapes,</span><br><span class=\"line\">        content = content</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>    , Compose  3       .</p>\n<ol>\n<li>  Composable </li>\n<li>Preview   Preview Composable </li>\n<li>setContent      </li>\n</ol>\n<p>   Activity   <code>onCreate()</code>   <code>setContentView(Int)</code>   <code>setContent()</code>      .</p>\n<h3 id=\"3-Composable-Function\"><a href=\"#3-Composable-Function\" class=\"headerlink\" title=\"3. Composable Function\"></a>3. Composable Function</h3><p>Composable Function   .  <code>@Composable</code>          .   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(names: <span class=\"type\">List</span>&lt;<span class=\"type\">String</span>&gt;)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (name <span class=\"keyword\">in</span> names) &#123;</span><br><span class=\"line\">        Text(<span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  Text  ,   UI    .   text       .</p>\n<h3 id=\"4-TextView-\"><a href=\"#4-TextView-\" class=\"headerlink\" title=\"4. TextView \"></a>4. TextView </h3><p>    Hello  TextView   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setContent &#123;</span><br><span class=\"line\">  BasicsCodelabTheme &#123;</span><br><span class=\"line\">    <span class=\"comment\">// A surface container using the &#x27;background&#x27; color from the theme</span></span><br><span class=\"line\">    Surface(color = MaterialTheme.colors.background) &#123;</span><br><span class=\"line\">      Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/aO6Jlsg.png\" class=\"\" title=\"[aO6Jlsg]\">\n\n<h3 id=\"5-Preview\"><a href=\"#5-Preview\" class=\"headerlink\" title=\"5. @Preview\"></a>5. <code>@Preview</code></h3><p>    IDE Preview  .    @Preview       .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Preview(<span class=\"meta-string\">&quot;Greeting Preview&quot;</span>)</span></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">GreetingPreview</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    BasicsCodelabTheme &#123;</span><br><span class=\"line\">        Surface(color = MaterialTheme.colors.background) &#123;</span><br><span class=\"line\">            Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/WprDTs1.png\" class=\"\" title=\"[WprDTs1]\">\n\n<h3 id=\"6-setContent-Theme-Surface\"><a href=\"#6-setContent-Theme-Surface\" class=\"headerlink\" title=\"6. setContent / Theme / Surface\"></a>6. setContent / Theme / Surface</h3><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setContent &#123;</span><br><span class=\"line\">  BasicsCodelabTheme &#123;</span><br><span class=\"line\">    <span class=\"comment\">// A surface container using the &#x27;background&#x27; color from the theme</span></span><br><span class=\"line\">    Surface(color = MaterialTheme.colors.background) &#123;</span><br><span class=\"line\">      Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> onCreate      </p>\n<ul>\n<li><p><strong>setContent</strong> : Activity setContentView      . , setContent  (@Composable) -&gt; Unit   UI .</p>\n</li>\n<li><p><strong>XXXTheme</strong> : Theme .   Theme.kt     ,  UI    .</p>\n</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> DarkColorPalette = darkColors(</span><br><span class=\"line\">    primary = purple200,</span><br><span class=\"line\">    primaryVariant = purple700,</span><br><span class=\"line\">    secondary = teal200</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> LightColorPalette = lightColors(</span><br><span class=\"line\">    primary = purple500,</span><br><span class=\"line\">    primaryVariant = purple700,</span><br><span class=\"line\">    secondary = teal200</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* Other default colors to override</span></span><br><span class=\"line\"><span class=\"comment\">    background = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    surface = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    onPrimary = Color.White,</span></span><br><span class=\"line\"><span class=\"comment\">    onSecondary = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    onBackground = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    onSurface = Color.Black,</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">BasicsCodelabTheme</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    darkTheme: <span class=\"type\">Boolean</span> = isSystemInDarkTheme()</span></span>,</span><br><span class=\"line\">    content: <span class=\"meta\">@Composable</span> () -&gt; <span class=\"built_in\">Unit</span></span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> colors = <span class=\"keyword\">if</span> (darkTheme) &#123;</span><br><span class=\"line\">        DarkColorPalette</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        LightColorPalette</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    MaterialTheme(</span><br><span class=\"line\">        colors = colors,</span><br><span class=\"line\">        typography = typography,</span><br><span class=\"line\">        shapes = shapes,</span><br><span class=\"line\">        content = content</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Surface</strong> : Greeting   .    , background   .   .   Paramter <code>color</code>     .  </li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Surface</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    modifier: <span class=\"type\">Modifier</span> = Modifier,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    shape: <span class=\"type\">Shape</span> = RectangleShape,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    color: <span class=\"type\">Color</span> = MaterialTheme.colors.surface,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    contentColor: <span class=\"type\">Color</span> = contentColorFor(color)</span></span>,</span><br><span class=\"line\">    border: BorderStroke? = <span class=\"literal\">null</span>,</span><br><span class=\"line\">    elevation: Dp = <span class=\"number\">0.</span>dp,</span><br><span class=\"line\">    content: <span class=\"meta\">@Composable</span> () -&gt; <span class=\"built_in\">Unit</span></span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> elevationPx = with(LocalDensity.current) &#123; elevation.toPx() &#125;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> elevationOverlay = LocalElevationOverlay.current</span><br><span class=\"line\">    <span class=\"keyword\">val</span> absoluteElevation = LocalAbsoluteElevation.current + elevation</span><br><span class=\"line\">    <span class=\"keyword\">val</span> backgroundColor = <span class=\"keyword\">if</span> (color == MaterialTheme.colors.surface &amp;&amp; elevationOverlay != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        elevationOverlay.apply(color, absoluteElevation)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        color</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    CompositionLocalProvider(</span><br><span class=\"line\">        LocalContentColor provides contentColor,</span><br><span class=\"line\">        LocalAbsoluteElevation provides absoluteElevation</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">        Box(</span><br><span class=\"line\">            modifier.graphicsLayer(shadowElevation = elevationPx, shape = shape)</span><br><span class=\"line\">                .then(<span class=\"keyword\">if</span> (border != <span class=\"literal\">null</span>) Modifier.border(border, shape) <span class=\"keyword\">else</span> Modifier)</span><br><span class=\"line\">                .background(</span><br><span class=\"line\">                    color = backgroundColor,</span><br><span class=\"line\">                    shape = shape</span><br><span class=\"line\">                )</span><br><span class=\"line\">                .clip(shape),</span><br><span class=\"line\">            propagateMinConstraints = <span class=\"literal\">true</span></span><br><span class=\"line\">        ) &#123;</span><br><span class=\"line\">            content()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-Declarative-UI--UI\"><a href=\"#7-Declarative-UI--UI\" class=\"headerlink\" title=\"7. Declarative UI -  UI\"></a>7. Declarative UI -  UI</h3><p>    TextView . , Greeting Modifier   Padding .     .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BasicsCodelabTheme &#123;</span><br><span class=\"line\">  <span class=\"comment\">// A surface container using the &#x27;background&#x27; color from the theme</span></span><br><span class=\"line\">  Surface(color = Color.Yellow) &#123;</span><br><span class=\"line\">    Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(name: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> isSelected <span class=\"keyword\">by</span> remember &#123; mutableStateOf(<span class=\"literal\">false</span>) &#125;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> backgroundColor <span class=\"keyword\">by</span> animateColorAsState(<span class=\"keyword\">if</span> (isSelected) Color.Red <span class=\"keyword\">else</span> Color.Transparent)</span><br><span class=\"line\"></span><br><span class=\"line\">    Text(</span><br><span class=\"line\">        text = <span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>!&quot;</span>,</span><br><span class=\"line\">        modifier = Modifier</span><br><span class=\"line\">            .padding(<span class=\"number\">24.</span>dp)</span><br><span class=\"line\">            .background(color = backgroundColor)</span><br><span class=\"line\">            .clickable(onClick = &#123; isSelected = !isSelected &#125;)</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/qgQ6oY4.png\" class=\"\" title=\"[qgQ6oY4]\">\n\n<p> UI     UI      .    On/Off      ,        .</p>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8. \"></a>8. </h3><p>Compose     , XML  include      ,      .</p>\n<p>  Compose    <code>@Composable</code>   .</p>\n<h3 id=\"9-Container-\"><a href=\"#9-Container-\" class=\"headerlink\" title=\"9. Container \"></a>9. Container </h3><p>MyApp          Composable .  Container        <code>@Composable () -&gt; Unit</code>    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">MyApp</span><span class=\"params\">(content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">    BasicsCodelabTheme &#123;</span><br><span class=\"line\">        Surface(color = Color.Yellow) &#123;</span><br><span class=\"line\">            content()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>         Container        .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> : <span class=\"type\">AppCompatActivity</span></span>() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">    setContent &#123;</span><br><span class=\"line\">      MyApp &#123;</span><br><span class=\"line\">        Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10---Compose-function--\"><a href=\"#10---Compose-function--\" class=\"headerlink\" title=\"10.   Compose function  \"></a>10.   Compose function  </h3><p>    ,    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">MyScreenContent</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    Column &#123;</span><br><span class=\"line\">        Greeting(<span class=\"string\">&quot;Android&quot;</span>)</span><br><span class=\"line\">        Divider(color = Color.Black)</span><br><span class=\"line\">        Greeting(<span class=\"string\">&quot;there&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>Column</code>   <code>Greeting</code>  ,    <code>Divider</code>    .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%201/VLTxB8C.png\" class=\"\" title=\"[VLTxB8C]\">\n\n<p>     ,    .</p>\n<ul>\n<li>Column :     .</li>\n<li>Divider :    Compose .</li>\n</ul>\n<p>    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">MyColumnScreen</span><span class=\"params\">(names: <span class=\"type\">List</span>&lt;<span class=\"type\">String</span>&gt; = listOf(<span class=\"string\">&quot;Line One&quot;</span>, <span class=\"string\">&quot;Line Two&quot;</span>)</span></span>) &#123;</span><br><span class=\"line\">    Column &#123;</span><br><span class=\"line\">        names.forEach &#123;</span><br><span class=\"line\">            Greeting(name = it)</span><br><span class=\"line\">            Divider(color = Color.Black)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-State-in-Compose-Compose--\"><a href=\"#11-State-in-Compose-Compose--\" class=\"headerlink\" title=\"11. State in Compose - Compose  \"></a>11. State in Compose - Compose  </h3><p>         .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">MyColumnScreen</span><span class=\"params\">(names: <span class=\"type\">List</span>&lt;<span class=\"type\">String</span>&gt; = listOf(<span class=\"string\">&quot;Line One&quot;</span>, <span class=\"string\">&quot;Line Two&quot;</span>)</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> counterState = remember &#123; mutableStateOf(<span class=\"number\">0</span>) &#125; <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">    Column &#123;</span><br><span class=\"line\">        names.forEach &#123;</span><br><span class=\"line\">            Greeting(name = it)</span><br><span class=\"line\">            Divider(color = Color.Black)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Counter(</span><br><span class=\"line\">            count = counterState.value,</span><br><span class=\"line\">            updateCount = &#123; newCount -&gt;</span><br><span class=\"line\">                counterState.value = newCount</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>remember          . </p>\n<p><code>remember</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Remember the value produced by [calculation]. [calculation] will only be evaluated during the composition.</span></span><br><span class=\"line\"><span class=\"comment\"> * Recomposition will always return the value produced by composition.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@OptIn(ComposeCompilerApi::class)</span></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"keyword\">inline</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"type\">&lt;T&gt;</span> <span class=\"title\">remember</span><span class=\"params\">(calculation: @<span class=\"type\">DisallowComposableCalls</span> () -&gt; <span class=\"type\">T</span>)</span></span>: T =</span><br><span class=\"line\">    currentComposer.cache(<span class=\"literal\">false</span>, calculation)</span><br></pre></td></tr></table></figure>\n\n<p>  Recomposition()         . @Composable       ,       .</p>\n<p>,  Counter  Button     .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Counter</span><span class=\"params\">(count: <span class=\"type\">Int</span>, updateCount: (<span class=\"type\">Int</span>) -&gt; <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">    Button(</span><br><span class=\"line\">        onClick = &#123; updateCount(count + <span class=\"number\">1</span>) &#125;,</span><br><span class=\"line\">        colors = ButtonDefaults.buttonColors(</span><br><span class=\"line\">            backgroundColor = <span class=\"keyword\">if</span> (count &gt; <span class=\"number\">5</span>) Color.Green <span class=\"keyword\">else</span> Color.White</span><br><span class=\"line\">        )</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">        Text(<span class=\"string\">&quot;I&#x27;ve been clicked <span class=\"variable\">$count</span> times&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>updateCount(Int)</code>      ,   counterState       .</p>\n<p>  ,  . Count 5   .</p>\n\n\n<p>        .    <a href=\"https://developer.android.com/codelabs/jetpack-compose-basics\">Codelabs</a>    ,  setContent    .</p>\n<h3 id=\"12-Activity-View---\"><a href=\"#12-Activity-View---\" class=\"headerlink\" title=\"12. Activity View   \"></a>12. Activity View   </h3><p>Compose    Activity, Fragment  contentView .     .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* Set the activity content from a layout resource.  The resource will be</span></span><br><span class=\"line\"><span class=\"comment\">* inflated, adding all top-level views to the activity.</span></span><br><span class=\"line\"><span class=\"comment\">*</span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@param</span> layoutResID Resource ID to be inflated.</span></span><br><span class=\"line\"><span class=\"comment\">*</span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@see</span> #setContentView(android.view.View)</span></span><br><span class=\"line\"><span class=\"comment\">* <span class=\"doctag\">@see</span> #setContentView(android.view.View, android.view.ViewGroup.LayoutParams)</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setContentView</span><span class=\"params\">(<span class=\"meta\">@LayoutRes</span> <span class=\"keyword\">int</span> layoutResID)</span> </span>&#123;</span><br><span class=\"line\">  getWindow().setContentView(layoutResID);</span><br><span class=\"line\">  initWindowDecorActionBar();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>UI      Window  Layout Resource Id    Layout XML    ,        ViewGroup, View   .</p>\n<p><code>PhoneWindow</code>     , Window  setContentView         <code>installDecor()</code>   mContentParent(   ViewGroup) ,   .</p>\n<p>    ,  Compose <code>setContent()</code>     .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Composes the given composable into the given activity. The [content] will become the root view</span></span><br><span class=\"line\"><span class=\"comment\"> * of the given activity.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * This is roughly equivalent to calling [ComponentActivity.setContentView] with a [ComposeView]</span></span><br><span class=\"line\"><span class=\"comment\"> * i.e.:</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * ```</span></span><br><span class=\"line\"><span class=\"comment\"> * setContentView(</span></span><br><span class=\"line\"><span class=\"comment\"> *   ComposeView(this).apply &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     setContent &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *       MyComposableContent()</span></span><br><span class=\"line\"><span class=\"comment\"> *     &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *   &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * )</span></span><br><span class=\"line\"><span class=\"comment\"> * ```</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> parent The parent composition reference to coordinate scheduling of composition updates</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> content A `<span class=\"doctag\">@Composable</span>` function declaring the UI contents</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">fun</span> ComponentActivity.<span class=\"title\">setContent</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    parent: <span class=\"type\">CompositionContext</span>? = <span class=\"literal\">null</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> existingComposeView = window.decorView</span><br><span class=\"line\">        .findViewById&lt;ViewGroup&gt;(android.R.id.content)</span><br><span class=\"line\">        .getChildAt(<span class=\"number\">0</span>) <span class=\"keyword\">as</span>? ComposeView</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (existingComposeView != <span class=\"literal\">null</span>) with(existingComposeView) &#123;</span><br><span class=\"line\">        setParentCompositionContext(parent)</span><br><span class=\"line\">        setContent(content)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> ComposeView(<span class=\"keyword\">this</span>).apply &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Set content and parent **before** setContentView</span></span><br><span class=\"line\">        <span class=\"comment\">// to have ComposeView create the composition on attach</span></span><br><span class=\"line\">        setParentCompositionContext(parent)</span><br><span class=\"line\">        setContent(content)</span><br><span class=\"line\">        <span class=\"comment\">// Set the view tree owners before setting the content view so that the inflation process</span></span><br><span class=\"line\">        <span class=\"comment\">// and attach listeners will see them already present</span></span><br><span class=\"line\">        setOwners()</span><br><span class=\"line\">        setContentView(<span class=\"keyword\">this</span>, DefaultActivityContentLayoutParams)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>window.decorView.findViewById&lt;ViewGroup&gt;(android.R.id.content)</code>    decorView .  compose     ,  inflator ViewGroup, View    <code>setContent()</code> =&gt; window Activity/Fragment  <code>createComposition()</code>    <code>ensureCompsositionCreated()</code>  .   <code>ViewGroup.setContent()</code>   ,     .     ViewGroup   ,   ViewGroup  View, ViewGroup Composable      AndroidComposeView      .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Composes the given composable into the given view.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * The new composition can be logically &quot;linked&quot; to an existing one, by providing a</span></span><br><span class=\"line\"><span class=\"comment\"> * [parent]. This will ensure that invalidations and CompositionLocals will flow through</span></span><br><span class=\"line\"><span class=\"comment\"> * the two compositions as if they were not separate.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Note that this [ViewGroup] should have an unique id for the saved instance state mechanism to</span></span><br><span class=\"line\"><span class=\"comment\"> * be able to save and restore the values used within the composition. See [View.setId].</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> parent The [Recomposer] or parent composition reference.</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> content Composable that will be the content of the view.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">internal</span> <span class=\"function\"><span class=\"keyword\">fun</span> ViewGroup.<span class=\"title\">setContent</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    parent: <span class=\"type\">CompositionContext</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span>: Composition &#123;</span><br><span class=\"line\">    GlobalSnapshotManager.ensureStarted()</span><br><span class=\"line\">    <span class=\"keyword\">val</span> composeView =</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (childCount &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            getChildAt(<span class=\"number\">0</span>) <span class=\"keyword\">as</span>? AndroidComposeView</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            removeAllViews(); <span class=\"literal\">null</span></span><br><span class=\"line\">        &#125; ?: AndroidComposeView(context).also &#123; addView(it.view, DefaultLayoutParams) &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> doSetContent(composeView, parent, content)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p> , ComposeView <code>setContent()</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * A [android.view.View] that can host Jetpack Compose UI content.</span></span><br><span class=\"line\"><span class=\"comment\"> * Use [setContent] to supply the content composable function for the view.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * This [android.view.View] requires that the window it is attached to contains a</span></span><br><span class=\"line\"><span class=\"comment\"> * [ViewTreeLifecycleOwner]. This [androidx.lifecycle.LifecycleOwner] is used to</span></span><br><span class=\"line\"><span class=\"comment\"> * [dispose][androidx.compose.runtime.Composition.dispose] of the underlying composition</span></span><br><span class=\"line\"><span class=\"comment\"> * when the host [Lifecycle] is destroyed, permitting the view to be attached and</span></span><br><span class=\"line\"><span class=\"comment\"> * detached repeatedly while preserving the composition. Call [disposeComposition]</span></span><br><span class=\"line\"><span class=\"comment\"> * to dispose of the underlying composition earlier, or if the view is never initially</span></span><br><span class=\"line\"><span class=\"comment\"> * attached to a window. (The requirement to dispose of the composition explicitly</span></span><br><span class=\"line\"><span class=\"comment\"> * in the event that the view is never (re)attached is temporary.)</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ComposeView</span> <span class=\"meta\">@JvmOverloads</span> <span class=\"keyword\">constructor</span></span>(</span><br><span class=\"line\">    context: Context,</span><br><span class=\"line\">    attrs: AttributeSet? = <span class=\"literal\">null</span>,</span><br><span class=\"line\">    defStyleAttr: <span class=\"built_in\">Int</span> = <span class=\"number\">0</span></span><br><span class=\"line\">) : AbstractComposeView(context, attrs, defStyleAttr) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> content = mutableStateOf&lt;(<span class=\"meta\">@Composable</span> () -&gt; <span class=\"built_in\">Unit</span>)?&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Suppress(<span class=\"meta-string\">&quot;RedundantVisibilityModifier&quot;</span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">override</span> <span class=\"keyword\">var</span> shouldCreateCompositionOnAttachedToWindow: <span class=\"built_in\">Boolean</span> = <span class=\"literal\">false</span></span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">set</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Composable</span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Content</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        content.value?.invoke()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Set the Jetpack Compose UI content for this view.</span></span><br><span class=\"line\"><span class=\"comment\">     * Initial composition will occur when the view becomes attached to a window or when</span></span><br><span class=\"line\"><span class=\"comment\">     * [createComposition] is called, whichever comes first.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">setContent</span><span class=\"params\">(content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">        shouldCreateCompositionOnAttachedToWindow = <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.content.value = content</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isAttachedToWindow) &#123;</span><br><span class=\"line\">            createComposition()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>AbstractComposeView</code>   ViewGroup  ,  composable        .</p>\n<p><code>setContent()</code>    ,  <code>Content</code>  .   , <code>createComposition()</code>     ,    .   <code>ensureCompsositionCreated()</code>  tree ComposeView  ,   Content .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Suppress(<span class=\"meta-string\">&quot;DEPRECATION&quot;</span>)</span> <span class=\"comment\">// Still using ViewGroup.setContent for now</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ensureCompositionCreated</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (composition == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                creatingComposition = <span class=\"literal\">true</span></span><br><span class=\"line\">                composition = setContent(</span><br><span class=\"line\">                    parentContext ?: findViewTreeCompositionContext() ?: windowRecomposer</span><br><span class=\"line\">                ) &#123;</span><br><span class=\"line\">                    Content() <span class=\"comment\">//    window   .</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">                creatingComposition = <span class=\"literal\">false</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>ComposeView</code>   Content ,   View UI  Content .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* The Jetpack Compose UI content for this view.</span></span><br><span class=\"line\"><span class=\"comment\">* Subclasses must implement this method to provide content. Initial composition will</span></span><br><span class=\"line\"><span class=\"comment\">* occur when the view becomes attached to a window or when [createComposition] is called,</span></span><br><span class=\"line\"><span class=\"comment\">* whichever comes first.</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Content</span><span class=\"params\">()</span></span></span><br></pre></td></tr></table></figure>\n\n<p>Content    <code>createComposition()</code>    View Window    .</p>\n<p> <code>ComponentActivity.setContent(CompositionContext?, @Composable () -&gt; Unit)</code>   ComposeView  ContentLayout widht/height wrapContent  ContentView Set .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Composes the given composable into the given activity. The [content] will become the root view</span></span><br><span class=\"line\"><span class=\"comment\"> * of the given activity.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * This is roughly equivalent to calling [ComponentActivity.setContentView] with a [ComposeView]</span></span><br><span class=\"line\"><span class=\"comment\"> * i.e.:</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * ```</span></span><br><span class=\"line\"><span class=\"comment\"> * setContentView(</span></span><br><span class=\"line\"><span class=\"comment\"> *   ComposeView(this).apply &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     setContent &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *       MyComposableContent()</span></span><br><span class=\"line\"><span class=\"comment\"> *     &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *   &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * )</span></span><br><span class=\"line\"><span class=\"comment\"> * ```</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> parent The parent composition reference to coordinate scheduling of composition updates</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> content A `<span class=\"doctag\">@Composable</span>` function declaring the UI contents</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">fun</span> ComponentActivity.<span class=\"title\">setContent</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    parent: <span class=\"type\">CompositionContext</span>? = <span class=\"literal\">null</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span> &#123;</span><br><span class=\"line\">  \t...</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span> ComposeView(<span class=\"keyword\">this</span>).apply &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Set content and parent **before** setContentView</span></span><br><span class=\"line\">        <span class=\"comment\">// to have ComposeView create the composition on attach</span></span><br><span class=\"line\">        setParentCompositionContext(parent)</span><br><span class=\"line\">        setContent(content)</span><br><span class=\"line\">        <span class=\"comment\">// Set the view tree owners before setting the content view so that the inflation process</span></span><br><span class=\"line\">        <span class=\"comment\">// and attach listeners will see them already present</span></span><br><span class=\"line\">        setOwners()</span><br><span class=\"line\">        setContentView(<span class=\"keyword\">this</span>, DefaultActivityContentLayoutParams)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-ComposeView\"><a href=\"#13-ComposeView\" class=\"headerlink\" title=\"13. ComposeView\"></a>13. ComposeView</h3><p>android.view.View  Jetpack Compose UI     . setContent   composable function content     .</p>\n<p>Compose     . ComposeView   androidx.compose.materia      Composable function    .</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kotlin.Any</span><br><span class=\"line\">  android.view.View</span><br><span class=\"line\">    android.view.ViewGroup</span><br><span class=\"line\">      androidx.compose.ui.platform.AbstractComposeView</span><br><span class=\"line\">        androidx.compose.ui.platform.ComposeView</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-Compose-Compiler-Compose-Runtime\"><a href=\"#14-Compose-Compiler-Compose-Runtime\" class=\"headerlink\" title=\"14. Compose Compiler / Compose Runtime\"></a>14. Compose Compiler / Compose Runtime</h3><p>Compose Compiler  <code>@Composable</code>    Composable function         .</p>\n<p>Compose Runtime Compose    ,  Compose         .</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Composable</span><br><span class=\"line\">fun Greeting(name: String) &#123;</span><br><span class=\"line\">    var greet by remember &#123; mutableStateOf(&quot;Hello $name&quot;) &#125;</span><br><span class=\"line\">    Text(text = greet, color = Color.Red)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  Compose Compiler  <code>@Composeable</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">  $composer: <span class=\"type\">Composer</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">  $static: <span class=\"type\">Int</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">  name: <span class=\"type\">String</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span> &#123;</span><br><span class=\"line\">  $composer.start(<span class=\"number\">123</span>)</span><br><span class=\"line\">  <span class=\"keyword\">var</span> greet <span class=\"keyword\">by</span> remember &#123; mutableStateOf(<span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>&quot;</span>) &#125;</span><br><span class=\"line\">  Text(text = greet, color = Color.Red)</span><br><span class=\"line\">  $composer.end()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Compose  <code>composer.start</code>     ,  Compose  state       Compose   .</p>\n<p>static  (state)        , <code>composer.start</code>  <code>composer.end</code>  UI    .</p>\n<p>    UI     Recomposition  .</p>"},{"title":"Jetpack Compose Part 2 - Preview / Layout / Decompile","date":"2021-04-06T17:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_jepack_compose.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n\n## Android Studio Jetpack Compose\n\nAndroid Studio Preview  Compose  Preview      .\n\n   .\n\n### Preview \n\nPreview  Compose       .\n\n{% asset_img 1_ybDWG4W2bPYNq79vr1gE8w.png [1_ybDWG4W2bPYNq79vr1gE8w] %}\n\nSplit(design/code)          .\n\n{% asset_img 1_XVvr-CB2pn88Te7Gg52GPA.png [1_XVvr-CB2pn88Te7Gg52GPA] %}\n\n     . \n\n              .\n\n,      Context API      .\n\n>  interactive     .\n\n{% asset_img 1_9IA2k2s5hAS9pSyzpmQ6Pw.png [1_9IA2k2s5hAS9pSyzpmQ6Pw] %}\n\n         .\n\n{% asset_img 1_5RZOM7sWV0sXctJtTPdshQ.png [1_5RZOM7sWV0sXctJtTPdshQ] %}\n\n\n### `@Preview` Annotation \n\n  `@Preview`       Compose UI    .\n\n`@Preview`           .\n\n```kotlin\nannotation class Preview(\n    val name: String = \"\",\n    val group: String = \"\",\n    @IntRange(from = 1) val apiLevel: Int = -1,\n    // TODO(mount): Make this Dp when they are inline classes\n    val widthDp: Int = -1,\n    // TODO(mount): Make this Dp when they are inline classes\n    val heightDp: Int = -1,\n    val locale: String = \"\",\n    @FloatRange(from = 0.01) val fontScale: Float = 1f,\n    val showSystemUi: Boolean = false,\n    val showBackground: Boolean = false,\n    val backgroundColor: Long = 0,\n    @UiMode val uiMode: Int = 0,\n    @Device val device: String = Devices.DEFAULT\n)\n```\n\n- **name** : Preview   ,   function  .\n- **group** : Preview   ,   function  .\n- **apiLevel** : api level   Composable  .\n- **widthDp** : Preview   . (  dp)\n- **heightDp** : Preview   . (  dp)\n- **locale** :  locales    UI     .\n- **fontScale** :  density        .\n- **showSystemUi** : true   status bar  action bar  .\n- **showBackground** : true     .\n- **backgroundColor** :     , showBackground     .\n- **uiMode** : uiMode  .\n- **device** :     . Devices object       . (Devices.NEXUS_9)\n\n### Compose  \n\n- **Column** :   .\n\n```kotlin\n@Composable\nfun ComposeColumn() {\n    Column {\n        Text(text = \"My First Compose\")\n        Text(text = \"My First Compose\")\n    }\n}\n```\n\n{% asset_img 1_bSyX8yT7H2HevBNw9fbyYw.png [1_bSyX8yT7H2HevBNw9fbyYw] %}\n\n- **Row** :   .\n\n```kotlin\n@Composable\nfun ComposeRow() {\n    Row {\n        Text(text = \"My First Compose\")\n        Text(text = \"My First Compose\")\n    }\n}\n```\n\n{% asset_img 1_T9Pww7JyPMPhCJ_6yU8fyQ.png [1_T9Pww7JyPMPhCJ_6yU8fyQ] %}\n\n- **Box** :       .\n\n```kotlin\n@Composable\nfun ComposeBox() {\n    Box {\n        Text(text = \"My First Compose 1\")\n        Text(text = \"My First Compose 2\")\n    }\n}\n```\n\n{% asset_img 1_wFM4jF71V5aJog3lALaRKQ.png [1_wFM4jF71V5aJog3lALaRKQ] %}\n\n- **Modifier** :   ,          .\n\n```kotlin\n@Composable\nfun ComposeModifier() {\n    Box(modifier = Modifier\n        .padding(5.dp)\n    ) {\n        Text(text = \"Compose Modifier\")\n    }\n}\n```\n\n{% asset_img 1_tPAf-Akf2IpDRrrZo1f1dg.png [1_tPAf-Akf2IpDRrrZo1f1dg] %}\n\n- **LazyColumn / LazyRow** : Recyclerview      .    .\n\n```kotlin\n@Composable\nfun ComposeLazyColumn() {\n    val itemsList = (0..100).toList()\n\n    LazyColumn {\n        items(items = itemsList, itemContent = { item ->\n            Text(text = \"Item : $item\", style = TextStyle(fontSize = 80.sp))\n        })\n    }\n}\n```\n\n{% asset_img 1_m7mSalYCza-SoJjmlYeWdA.png [1_m7mSalYCza-SoJjmlYeWdA] %}\n\n- **ConstraintLayout** :  ContraintLayout         .\n `createRefs` / `createRefFor`    , constrainAs     .\n\n```kotlin\n@Composable\nfun ComposeConstraintLayout() {\n    ConstraintLayout(modifier = Modifier.size(100.dp, 200.dp)) {\n        val (text1, image, text3) = createRefs()\n\n        Text(\"Text Item 1\", Modifier.constrainAs(text1) {\n            top.linkTo(parent.top)\n            start.linkTo(parent.start)\n            end.linkTo(parent.end)\n        })\n\n        Image(\n            painterResource(R.drawable.ic_launcher_foreground),\n            contentDescription = \"\",\n            contentScale = ContentScale.Crop,\n            modifier = Modifier.fillMaxSize().constrainAs(image) {\n                top.linkTo(text1.bottom)\n                bottom.linkTo(text3.top)\n                start.linkTo(parent.start)\n                end.linkTo(parent.end)\n            }\n        )\n\n        Text(\"Text Item 3\", Modifier.constrainAs(text3) {\n            bottom.linkTo(parent.bottom)\n            start.linkTo(parent.start)\n            end.linkTo(parent.end)\n        })\n    }\n}\n```\n\nJetpack Compose  ConstraintLayout       .\n\n```groovy\nimplementation \"androidx.constraintlayout:constraintlayout-compose:1.0.0-alpha05\"\n```\n\n{% asset_img 1_UoLVl1dbUjKh9kd4uY0ROA.png [1_UoLVl1dbUjKh9kd4uY0ROA] %}\n\n### Jetpack Compose       \n\n##### 1.  \n\nCompose         .\n\n  Kotlin > Byte Code > Decompiled Java    .\n\nAndroid Studio Preview Empty Compose Activity         .\n\n    Hello World  .\n\n\n```kotlin\nclass MainActivity : ComponentActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContent {\n            HelloWorldTheme {\n                // A surface container using the 'background' color from the theme\n                Surface(color = MaterialTheme.colors.background) {\n                    Greeting(\"World\")\n                }\n            }\n        }\n    }\n}\n\n@Composable\nfun Greeting(name: String) {\n    Text(text = \"Hello $name!\")\n}\n\n@Preview(showBackground = true)\n@Composable\nfun DefaultPreview() {\n    HelloWorldTheme {\n        Greeting(\"World\")\n    }\n}\n```\n\n `src`   `ui.theme`   `Color.kt`, `Shape.kt`, `Theme.kt`, `Type.kt`  .\n\n      .\n\n  Preview    .\n\n{% asset_img add_002_001.png [add_002_001] %}\n\n##### 2. MainActivity \n\n```java\n@Metadata(\n   mv = {1, 4, 2},\n   bv = {1, 0, 3},\n   k = 2,\n   d1 = {\"...\"},\n   d2 = {\"DefaultPreview\", \"\", \"Greeting\", \"name\", \"\", \"app_debug\"}\n)\npublic final class MainActivityKt {\n    @Composable\n    public static final void Greeting(@NotNull String name) {\n        Intrinsics.checkNotNullParameter(name, \"name\");\n        TextKt.Text-Vh6c2nE$default(\"Hello \" + name + '!', \n            (Modifier)null, \n            0L, \n            0L, \n            (FontStyle)null, \n            (FontWeight)null, \n            (FontFamily)null, \n            0L, \n            (TextDecoration)null, \n            (TextAlign)null, \n            0L, \n            (TextOverflow)null, \n            false, \n            0, \n            (Function1)null, \n            (TextStyle)null, \n            65534, \n            (Object)null\n        );\n    }\n\n   @Composable\n   public static final void DefaultPreview() {\n      ThemeKt.HelloWorldTheme$default(false, (Function0)null.INSTANCE, 1, (Object)null);\n   }\n}\n\n// MainActivity.java\n@Metadata(\n   mv = {1, 4, 2},\n   bv = {1, 0, 3},\n   k = 1,\n   d1 = {\"...\"},\n   d2 = {\"...\"}\n)\npublic final class MainActivity extends ComponentActivity {\n   protected void onCreate(@Nullable Bundle savedInstanceState) {\n      super.onCreate(savedInstanceState);\n      ComponentActivityKt.setContent$default(this, (CompositionContext)null, (Function0)null.INSTANCE, 1, (Object)null);\n   }\n}\n```\n\n`ComponentActivityKt.setContent()`   .\n\n```kotlin\npublic fun ComponentActivity.setContent(\n    parent: CompositionContext? = null,\n    content: @Composable () -> Unit\n) {\n    val existingComposeView = window.decorView\n        .findViewById<ViewGroup>(android.R.id.content)\n        .getChildAt(0) as? ComposeView\n\n    if (existingComposeView != null) with(existingComposeView) {\n        setParentCompositionContext(parent)\n        setContent(content)\n    } else ComposeView(this).apply {\n        // Set content and parent **before** setContentView\n        // to have ComposeView create the composition on attach\n        setParentCompositionContext(parent)\n        setContent(content)\n        setContentView(this, DefaultActivityContentLayoutParams)\n    }\n}\n```\n\n`CompositionContext`  null  , `(Function0)null.INSTANCE, 1, (Object)null`   ,\n\n  `@Composable` Annotation .\n\n     **`@Composable`     `ComposeView`   `Activity` `setContentView()` .**  .\n\n\n##### 3. `@Composable`  \n\n`Composable` Annotaion    .\n\n```kotlin\n@MustBeDocumented\n@Retention(AnnotationRetention.BINARY)\n@Target(\n    // function declarations\n    // @Composable fun Foo() { ... }\n    // lambda expressions\n    // val foo = @Composable { ... }\n    AnnotationTarget.FUNCTION,\n\n    // type declarations\n    // var foo: @Composable () -> Unit = { ... }\n    // parameter types\n    // foo: @Composable () -> Unit\n    AnnotationTarget.TYPE,\n\n    // composable types inside of type signatures\n    // foo: (@Composable () -> Unit) -> Unit\n    AnnotationTarget.TYPE_PARAMETER,\n\n    // composable property getters and setters\n    // val foo: Int @Composable get() { ... }\n    // var bar: Int\n    //   @Composable get() { ... }\n    AnnotationTarget.PROPERTY_GETTER\n)\nannotation class Composable\n```\n\nAnnotationTarget   Lambda     , `View` `ViewGroup`        .\n\n  Flutter Widget, React Native Component   .","source":"_posts/2021-04-07 Jetpack Compose Part 2.md","raw":"---\ntitle: Jetpack Compose Part 2 - Preview / Layout / Decompile\ndate: 2021-04-07 02:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_jepack_compose.png\ncategories:\n- Jetpack Compose\ntags:\n- Android\n- Jetpack\n- Compose\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n\n## Android Studio Jetpack Compose\n\nAndroid Studio Preview  Compose  Preview      .\n\n   .\n\n### Preview \n\nPreview  Compose       .\n\n{% asset_img 1_ybDWG4W2bPYNq79vr1gE8w.png [1_ybDWG4W2bPYNq79vr1gE8w] %}\n\nSplit(design/code)          .\n\n{% asset_img 1_XVvr-CB2pn88Te7Gg52GPA.png [1_XVvr-CB2pn88Te7Gg52GPA] %}\n\n     . \n\n              .\n\n,      Context API      .\n\n>  interactive     .\n\n{% asset_img 1_9IA2k2s5hAS9pSyzpmQ6Pw.png [1_9IA2k2s5hAS9pSyzpmQ6Pw] %}\n\n         .\n\n{% asset_img 1_5RZOM7sWV0sXctJtTPdshQ.png [1_5RZOM7sWV0sXctJtTPdshQ] %}\n\n\n### `@Preview` Annotation \n\n  `@Preview`       Compose UI    .\n\n`@Preview`           .\n\n```kotlin\nannotation class Preview(\n    val name: String = \"\",\n    val group: String = \"\",\n    @IntRange(from = 1) val apiLevel: Int = -1,\n    // TODO(mount): Make this Dp when they are inline classes\n    val widthDp: Int = -1,\n    // TODO(mount): Make this Dp when they are inline classes\n    val heightDp: Int = -1,\n    val locale: String = \"\",\n    @FloatRange(from = 0.01) val fontScale: Float = 1f,\n    val showSystemUi: Boolean = false,\n    val showBackground: Boolean = false,\n    val backgroundColor: Long = 0,\n    @UiMode val uiMode: Int = 0,\n    @Device val device: String = Devices.DEFAULT\n)\n```\n\n- **name** : Preview   ,   function  .\n- **group** : Preview   ,   function  .\n- **apiLevel** : api level   Composable  .\n- **widthDp** : Preview   . (  dp)\n- **heightDp** : Preview   . (  dp)\n- **locale** :  locales    UI     .\n- **fontScale** :  density        .\n- **showSystemUi** : true   status bar  action bar  .\n- **showBackground** : true     .\n- **backgroundColor** :     , showBackground     .\n- **uiMode** : uiMode  .\n- **device** :     . Devices object       . (Devices.NEXUS_9)\n\n### Compose  \n\n- **Column** :   .\n\n```kotlin\n@Composable\nfun ComposeColumn() {\n    Column {\n        Text(text = \"My First Compose\")\n        Text(text = \"My First Compose\")\n    }\n}\n```\n\n{% asset_img 1_bSyX8yT7H2HevBNw9fbyYw.png [1_bSyX8yT7H2HevBNw9fbyYw] %}\n\n- **Row** :   .\n\n```kotlin\n@Composable\nfun ComposeRow() {\n    Row {\n        Text(text = \"My First Compose\")\n        Text(text = \"My First Compose\")\n    }\n}\n```\n\n{% asset_img 1_T9Pww7JyPMPhCJ_6yU8fyQ.png [1_T9Pww7JyPMPhCJ_6yU8fyQ] %}\n\n- **Box** :       .\n\n```kotlin\n@Composable\nfun ComposeBox() {\n    Box {\n        Text(text = \"My First Compose 1\")\n        Text(text = \"My First Compose 2\")\n    }\n}\n```\n\n{% asset_img 1_wFM4jF71V5aJog3lALaRKQ.png [1_wFM4jF71V5aJog3lALaRKQ] %}\n\n- **Modifier** :   ,          .\n\n```kotlin\n@Composable\nfun ComposeModifier() {\n    Box(modifier = Modifier\n        .padding(5.dp)\n    ) {\n        Text(text = \"Compose Modifier\")\n    }\n}\n```\n\n{% asset_img 1_tPAf-Akf2IpDRrrZo1f1dg.png [1_tPAf-Akf2IpDRrrZo1f1dg] %}\n\n- **LazyColumn / LazyRow** : Recyclerview      .    .\n\n```kotlin\n@Composable\nfun ComposeLazyColumn() {\n    val itemsList = (0..100).toList()\n\n    LazyColumn {\n        items(items = itemsList, itemContent = { item ->\n            Text(text = \"Item : $item\", style = TextStyle(fontSize = 80.sp))\n        })\n    }\n}\n```\n\n{% asset_img 1_m7mSalYCza-SoJjmlYeWdA.png [1_m7mSalYCza-SoJjmlYeWdA] %}\n\n- **ConstraintLayout** :  ContraintLayout         .\n `createRefs` / `createRefFor`    , constrainAs     .\n\n```kotlin\n@Composable\nfun ComposeConstraintLayout() {\n    ConstraintLayout(modifier = Modifier.size(100.dp, 200.dp)) {\n        val (text1, image, text3) = createRefs()\n\n        Text(\"Text Item 1\", Modifier.constrainAs(text1) {\n            top.linkTo(parent.top)\n            start.linkTo(parent.start)\n            end.linkTo(parent.end)\n        })\n\n        Image(\n            painterResource(R.drawable.ic_launcher_foreground),\n            contentDescription = \"\",\n            contentScale = ContentScale.Crop,\n            modifier = Modifier.fillMaxSize().constrainAs(image) {\n                top.linkTo(text1.bottom)\n                bottom.linkTo(text3.top)\n                start.linkTo(parent.start)\n                end.linkTo(parent.end)\n            }\n        )\n\n        Text(\"Text Item 3\", Modifier.constrainAs(text3) {\n            bottom.linkTo(parent.bottom)\n            start.linkTo(parent.start)\n            end.linkTo(parent.end)\n        })\n    }\n}\n```\n\nJetpack Compose  ConstraintLayout       .\n\n```groovy\nimplementation \"androidx.constraintlayout:constraintlayout-compose:1.0.0-alpha05\"\n```\n\n{% asset_img 1_UoLVl1dbUjKh9kd4uY0ROA.png [1_UoLVl1dbUjKh9kd4uY0ROA] %}\n\n### Jetpack Compose       \n\n##### 1.  \n\nCompose         .\n\n  Kotlin > Byte Code > Decompiled Java    .\n\nAndroid Studio Preview Empty Compose Activity         .\n\n    Hello World  .\n\n\n```kotlin\nclass MainActivity : ComponentActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContent {\n            HelloWorldTheme {\n                // A surface container using the 'background' color from the theme\n                Surface(color = MaterialTheme.colors.background) {\n                    Greeting(\"World\")\n                }\n            }\n        }\n    }\n}\n\n@Composable\nfun Greeting(name: String) {\n    Text(text = \"Hello $name!\")\n}\n\n@Preview(showBackground = true)\n@Composable\nfun DefaultPreview() {\n    HelloWorldTheme {\n        Greeting(\"World\")\n    }\n}\n```\n\n `src`   `ui.theme`   `Color.kt`, `Shape.kt`, `Theme.kt`, `Type.kt`  .\n\n      .\n\n  Preview    .\n\n{% asset_img add_002_001.png [add_002_001] %}\n\n##### 2. MainActivity \n\n```java\n@Metadata(\n   mv = {1, 4, 2},\n   bv = {1, 0, 3},\n   k = 2,\n   d1 = {\"...\"},\n   d2 = {\"DefaultPreview\", \"\", \"Greeting\", \"name\", \"\", \"app_debug\"}\n)\npublic final class MainActivityKt {\n    @Composable\n    public static final void Greeting(@NotNull String name) {\n        Intrinsics.checkNotNullParameter(name, \"name\");\n        TextKt.Text-Vh6c2nE$default(\"Hello \" + name + '!', \n            (Modifier)null, \n            0L, \n            0L, \n            (FontStyle)null, \n            (FontWeight)null, \n            (FontFamily)null, \n            0L, \n            (TextDecoration)null, \n            (TextAlign)null, \n            0L, \n            (TextOverflow)null, \n            false, \n            0, \n            (Function1)null, \n            (TextStyle)null, \n            65534, \n            (Object)null\n        );\n    }\n\n   @Composable\n   public static final void DefaultPreview() {\n      ThemeKt.HelloWorldTheme$default(false, (Function0)null.INSTANCE, 1, (Object)null);\n   }\n}\n\n// MainActivity.java\n@Metadata(\n   mv = {1, 4, 2},\n   bv = {1, 0, 3},\n   k = 1,\n   d1 = {\"...\"},\n   d2 = {\"...\"}\n)\npublic final class MainActivity extends ComponentActivity {\n   protected void onCreate(@Nullable Bundle savedInstanceState) {\n      super.onCreate(savedInstanceState);\n      ComponentActivityKt.setContent$default(this, (CompositionContext)null, (Function0)null.INSTANCE, 1, (Object)null);\n   }\n}\n```\n\n`ComponentActivityKt.setContent()`   .\n\n```kotlin\npublic fun ComponentActivity.setContent(\n    parent: CompositionContext? = null,\n    content: @Composable () -> Unit\n) {\n    val existingComposeView = window.decorView\n        .findViewById<ViewGroup>(android.R.id.content)\n        .getChildAt(0) as? ComposeView\n\n    if (existingComposeView != null) with(existingComposeView) {\n        setParentCompositionContext(parent)\n        setContent(content)\n    } else ComposeView(this).apply {\n        // Set content and parent **before** setContentView\n        // to have ComposeView create the composition on attach\n        setParentCompositionContext(parent)\n        setContent(content)\n        setContentView(this, DefaultActivityContentLayoutParams)\n    }\n}\n```\n\n`CompositionContext`  null  , `(Function0)null.INSTANCE, 1, (Object)null`   ,\n\n  `@Composable` Annotation .\n\n     **`@Composable`     `ComposeView`   `Activity` `setContentView()` .**  .\n\n\n##### 3. `@Composable`  \n\n`Composable` Annotaion    .\n\n```kotlin\n@MustBeDocumented\n@Retention(AnnotationRetention.BINARY)\n@Target(\n    // function declarations\n    // @Composable fun Foo() { ... }\n    // lambda expressions\n    // val foo = @Composable { ... }\n    AnnotationTarget.FUNCTION,\n\n    // type declarations\n    // var foo: @Composable () -> Unit = { ... }\n    // parameter types\n    // foo: @Composable () -> Unit\n    AnnotationTarget.TYPE,\n\n    // composable types inside of type signatures\n    // foo: (@Composable () -> Unit) -> Unit\n    AnnotationTarget.TYPE_PARAMETER,\n\n    // composable property getters and setters\n    // val foo: Int @Composable get() { ... }\n    // var bar: Int\n    //   @Composable get() { ... }\n    AnnotationTarget.PROPERTY_GETTER\n)\nannotation class Composable\n```\n\nAnnotationTarget   Lambda     , `View` `ViewGroup`        .\n\n  Flutter Widget, React Native Component   .","slug":"2021-04-07 Jetpack Compose Part 2","published":1,"updated":"2021-07-25T07:16:12.124Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7kt00013lree18reuhl","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<span id=\"more\"></span>\n\n<h2 id=\"Android-Studio-Jetpack-Compose\"><a href=\"#Android-Studio-Jetpack-Compose\" class=\"headerlink\" title=\"Android Studio Jetpack Compose\"></a>Android Studio Jetpack Compose</h2><p>Android Studio Preview  Compose  Preview      .</p>\n<p>   .</p>\n<h3 id=\"Preview-\"><a href=\"#Preview-\" class=\"headerlink\" title=\"Preview \"></a>Preview </h3><p>Preview  Compose       .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_ybDWG4W2bPYNq79vr1gE8w.png\" class=\"\" title=\"[1_ybDWG4W2bPYNq79vr1gE8w]\">\n\n<p>Split(design/code)          .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_XVvr-CB2pn88Te7Gg52GPA.png\" class=\"\" title=\"[1_XVvr-CB2pn88Te7Gg52GPA]\">\n\n<p>     . </p>\n<p>              .</p>\n<p>,      Context API      .</p>\n<blockquote>\n<p> interactive     .</p>\n</blockquote>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_9IA2k2s5hAS9pSyzpmQ6Pw.png\" class=\"\" title=\"[1_9IA2k2s5hAS9pSyzpmQ6Pw]\">\n\n<p>         .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_5RZOM7sWV0sXctJtTPdshQ.png\" class=\"\" title=\"[1_5RZOM7sWV0sXctJtTPdshQ]\">\n\n\n<h3 id=\"Preview-Annotation-\"><a href=\"#Preview-Annotation-\" class=\"headerlink\" title=\"@Preview Annotation \"></a><code>@Preview</code> Annotation </h3><p>  <code>@Preview</code>       Compose UI    .</p>\n<p><code>@Preview</code>           .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">annotation</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Preview</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">val</span> name: String = <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> group: String = <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    <span class=\"meta\">@IntRange(from = 1)</span> <span class=\"keyword\">val</span> apiLevel: <span class=\"built_in\">Int</span> = -<span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"comment\">// TODO(mount): Make this Dp when they are inline classes</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> widthDp: <span class=\"built_in\">Int</span> = -<span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"comment\">// TODO(mount): Make this Dp when they are inline classes</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> heightDp: <span class=\"built_in\">Int</span> = -<span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> locale: String = <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    <span class=\"meta\">@FloatRange(from = 0.01)</span> <span class=\"keyword\">val</span> fontScale: <span class=\"built_in\">Float</span> = <span class=\"number\">1f</span>,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> showSystemUi: <span class=\"built_in\">Boolean</span> = <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> showBackground: <span class=\"built_in\">Boolean</span> = <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> backgroundColor: <span class=\"built_in\">Long</span> = <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"meta\">@UiMode</span> <span class=\"keyword\">val</span> uiMode: <span class=\"built_in\">Int</span> = <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"meta\">@Device</span> <span class=\"keyword\">val</span> device: String = Devices.DEFAULT</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>name</strong> : Preview   ,   function  .</li>\n<li><strong>group</strong> : Preview   ,   function  .</li>\n<li><strong>apiLevel</strong> : api level   Composable  .</li>\n<li><strong>widthDp</strong> : Preview   . (  dp)</li>\n<li><strong>heightDp</strong> : Preview   . (  dp)</li>\n<li><strong>locale</strong> :  locales    UI     .</li>\n<li><strong>fontScale</strong> :  density        .</li>\n<li><strong>showSystemUi</strong> : true   status bar  action bar  .</li>\n<li><strong>showBackground</strong> : true     .</li>\n<li><strong>backgroundColor</strong> :     , showBackground     .</li>\n<li><strong>uiMode</strong> : uiMode  .</li>\n<li><strong>device</strong> :     . Devices object       . (Devices.NEXUS_9)</li>\n</ul>\n<h3 id=\"Compose--\"><a href=\"#Compose--\" class=\"headerlink\" title=\"Compose  \"></a>Compose  </h3><ul>\n<li><strong>Column</strong> :   .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeColumn</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    Column &#123;</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose&quot;</span>)</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_bSyX8yT7H2HevBNw9fbyYw.png\" class=\"\" title=\"[1_bSyX8yT7H2HevBNw9fbyYw]\">\n\n<ul>\n<li><strong>Row</strong> :   .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeRow</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    Row &#123;</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose&quot;</span>)</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_T9Pww7JyPMPhCJ_6yU8fyQ.png\" class=\"\" title=\"[1_T9Pww7JyPMPhCJ_6yU8fyQ]\">\n\n<ul>\n<li><strong>Box</strong> :       .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeBox</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    Box &#123;</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose 1&quot;</span>)</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose 2&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_wFM4jF71V5aJog3lALaRKQ.png\" class=\"\" title=\"[1_wFM4jF71V5aJog3lALaRKQ]\">\n\n<ul>\n<li><strong>Modifier</strong> :   ,          .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeModifier</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    Box(modifier = Modifier</span><br><span class=\"line\">        .padding(<span class=\"number\">5.</span>dp)</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;Compose Modifier&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_tPAf-Akf2IpDRrrZo1f1dg.png\" class=\"\" title=\"[1_tPAf-Akf2IpDRrrZo1f1dg]\">\n\n<ul>\n<li><strong>LazyColumn / LazyRow</strong> : Recyclerview      .    .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeLazyColumn</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> itemsList = (<span class=\"number\">0.</span><span class=\"number\">.100</span>).toList()</span><br><span class=\"line\"></span><br><span class=\"line\">    LazyColumn &#123;</span><br><span class=\"line\">        items(items = itemsList, itemContent = &#123; item -&gt;</span><br><span class=\"line\">            Text(text = <span class=\"string\">&quot;Item : <span class=\"variable\">$item</span>&quot;</span>, style = TextStyle(fontSize = <span class=\"number\">80.</span>sp))</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_m7mSalYCza-SoJjmlYeWdA.png\" class=\"\" title=\"[1_m7mSalYCza-SoJjmlYeWdA]\">\n\n<ul>\n<li><strong>ConstraintLayout</strong> :  ContraintLayout         .<br><code>createRefs</code> / <code>createRefFor</code>    , constrainAs     .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeConstraintLayout</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    ConstraintLayout(modifier = Modifier.size(<span class=\"number\">100.</span>dp, <span class=\"number\">200.</span>dp)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> (text1, image, text3) = createRefs()</span><br><span class=\"line\"></span><br><span class=\"line\">        Text(<span class=\"string\">&quot;Text Item 1&quot;</span>, Modifier.constrainAs(text1) &#123;</span><br><span class=\"line\">            top.linkTo(parent.top)</span><br><span class=\"line\">            start.linkTo(parent.start)</span><br><span class=\"line\">            end.linkTo(parent.end)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">        Image(</span><br><span class=\"line\">            painterResource(R.drawable.ic_launcher_foreground),</span><br><span class=\"line\">            contentDescription = <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">            contentScale = ContentScale.Crop,</span><br><span class=\"line\">            modifier = Modifier.fillMaxSize().constrainAs(image) &#123;</span><br><span class=\"line\">                top.linkTo(text1.bottom)</span><br><span class=\"line\">                bottom.linkTo(text3.top)</span><br><span class=\"line\">                start.linkTo(parent.start)</span><br><span class=\"line\">                end.linkTo(parent.end)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        Text(<span class=\"string\">&quot;Text Item 3&quot;</span>, Modifier.constrainAs(text3) &#123;</span><br><span class=\"line\">            bottom.linkTo(parent.bottom)</span><br><span class=\"line\">            start.linkTo(parent.start)</span><br><span class=\"line\">            end.linkTo(parent.end)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Jetpack Compose  ConstraintLayout       .</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">implementation <span class=\"string\">&quot;androidx.constraintlayout:constraintlayout-compose:1.0.0-alpha05&quot;</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_UoLVl1dbUjKh9kd4uY0ROA.png\" class=\"\" title=\"[1_UoLVl1dbUjKh9kd4uY0ROA]\">\n\n<h3 id=\"Jetpack-Compose-------\"><a href=\"#Jetpack-Compose-------\" class=\"headerlink\" title=\"Jetpack Compose       \"></a>Jetpack Compose       </h3><h5 id=\"1--\"><a href=\"#1--\" class=\"headerlink\" title=\"1.  \"></a>1.  </h5><p>Compose         .</p>\n<p>  Kotlin &gt; Byte Code &gt; Decompiled Java    .</p>\n<p>Android Studio Preview Empty Compose Activity         .</p>\n<p>    Hello World  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> : <span class=\"type\">ComponentActivity</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContent &#123;</span><br><span class=\"line\">            HelloWorldTheme &#123;</span><br><span class=\"line\">                <span class=\"comment\">// A surface container using the &#x27;background&#x27; color from the theme</span></span><br><span class=\"line\">                Surface(color = MaterialTheme.colors.background) &#123;</span><br><span class=\"line\">                    Greeting(<span class=\"string\">&quot;World&quot;</span>)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(name: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">    Text(text = <span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>!&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Preview(showBackground = true)</span></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">DefaultPreview</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    HelloWorldTheme &#123;</span><br><span class=\"line\">        Greeting(<span class=\"string\">&quot;World&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>src</code>   <code>ui.theme</code>   <code>Color.kt</code>, <code>Shape.kt</code>, <code>Theme.kt</code>, <code>Type.kt</code>  .</p>\n<p>      .</p>\n<p>  Preview    .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/add_002_001.png\" class=\"\" title=\"[add_002_001]\">\n\n<h5 id=\"2-MainActivity-\"><a href=\"#2-MainActivity-\" class=\"headerlink\" title=\"2. MainActivity \"></a>2. MainActivity </h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Metadata(</span></span><br><span class=\"line\"><span class=\"meta\">   mv = &#123;1, 4, 2&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   bv = &#123;1, 0, 3&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   k = 2,</span></span><br><span class=\"line\"><span class=\"meta\">   d1 = &#123;&quot;...&quot;&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   d2 = &#123;&quot;DefaultPreview&quot;, &quot;&quot;, &quot;Greeting&quot;, &quot;name&quot;, &quot;&quot;, &quot;app_debug&quot;&#125;</span></span><br><span class=\"line\"><span class=\"meta\">)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivityKt</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Composable</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">Greeting</span><span class=\"params\">(<span class=\"meta\">@NotNull</span> String name)</span> </span>&#123;</span><br><span class=\"line\">        Intrinsics.checkNotNullParameter(name, <span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">        TextKt.Text-Vh6c2nE$<span class=\"keyword\">default</span>(<span class=\"string\">&quot;Hello &quot;</span> + name + <span class=\"string\">&#x27;!&#x27;</span>, </span><br><span class=\"line\">            (Modifier)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            <span class=\"number\">0L</span>, </span><br><span class=\"line\">            <span class=\"number\">0L</span>, </span><br><span class=\"line\">            (FontStyle)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            (FontWeight)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            (FontFamily)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            <span class=\"number\">0L</span>, </span><br><span class=\"line\">            (TextDecoration)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            (TextAlign)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            <span class=\"number\">0L</span>, </span><br><span class=\"line\">            (TextOverflow)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            <span class=\"keyword\">false</span>, </span><br><span class=\"line\">            <span class=\"number\">0</span>, </span><br><span class=\"line\">            (Function1)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            (TextStyle)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            <span class=\"number\">65534</span>, </span><br><span class=\"line\">            (Object)<span class=\"keyword\">null</span></span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@Composable</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">DefaultPreview</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      ThemeKt.HelloWorldTheme$<span class=\"keyword\">default</span>(<span class=\"keyword\">false</span>, (Function0)<span class=\"keyword\">null</span>.INSTANCE, <span class=\"number\">1</span>, (Object)<span class=\"keyword\">null</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// MainActivity.java</span></span><br><span class=\"line\"><span class=\"meta\">@Metadata(</span></span><br><span class=\"line\"><span class=\"meta\">   mv = &#123;1, 4, 2&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   bv = &#123;1, 0, 3&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   k = 1,</span></span><br><span class=\"line\"><span class=\"meta\">   d1 = &#123;&quot;...&quot;&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   d2 = &#123;&quot;...&quot;&#125;</span></span><br><span class=\"line\"><span class=\"meta\">)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">ComponentActivity</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">      ComponentActivityKt.setContent$<span class=\"keyword\">default</span>(<span class=\"keyword\">this</span>, (CompositionContext)<span class=\"keyword\">null</span>, (Function0)<span class=\"keyword\">null</span>.INSTANCE, <span class=\"number\">1</span>, (Object)<span class=\"keyword\">null</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>ComponentActivityKt.setContent()</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">fun</span> ComponentActivity.<span class=\"title\">setContent</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    parent: <span class=\"type\">CompositionContext</span>? = <span class=\"literal\">null</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> existingComposeView = window.decorView</span><br><span class=\"line\">        .findViewById&lt;ViewGroup&gt;(android.R.id.content)</span><br><span class=\"line\">        .getChildAt(<span class=\"number\">0</span>) <span class=\"keyword\">as</span>? ComposeView</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (existingComposeView != <span class=\"literal\">null</span>) with(existingComposeView) &#123;</span><br><span class=\"line\">        setParentCompositionContext(parent)</span><br><span class=\"line\">        setContent(content)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> ComposeView(<span class=\"keyword\">this</span>).apply &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Set content and parent **before** setContentView</span></span><br><span class=\"line\">        <span class=\"comment\">// to have ComposeView create the composition on attach</span></span><br><span class=\"line\">        setParentCompositionContext(parent)</span><br><span class=\"line\">        setContent(content)</span><br><span class=\"line\">        setContentView(<span class=\"keyword\">this</span>, DefaultActivityContentLayoutParams)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>CompositionContext</code>  null  , <code>(Function0)null.INSTANCE, 1, (Object)null</code>   ,</p>\n<p>  <code>@Composable</code> Annotation .</p>\n<p>     <strong><code>@Composable</code>     <code>ComposeView</code>   <code>Activity</code> <code>setContentView()</code> .</strong>  .</p>\n<h5 id=\"3-Composable--\"><a href=\"#3-Composable--\" class=\"headerlink\" title=\"3. @Composable  \"></a>3. <code>@Composable</code>  </h5><p><code>Composable</code> Annotaion    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@MustBeDocumented</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(AnnotationRetention.BINARY)</span></span><br><span class=\"line\"><span class=\"meta\">@Target(</span></span><br><span class=\"line\"><span class=\"meta\">    // function declarations</span></span><br><span class=\"line\"><span class=\"meta\">    // @Composable fun Foo()</span> &#123; ... &#125;</span><br><span class=\"line\">    <span class=\"comment\">// lambda expressions</span></span><br><span class=\"line\">    <span class=\"comment\">// val foo = @Composable &#123; ... &#125;</span></span><br><span class=\"line\">    AnnotationTarget.FUNCTION,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// type declarations</span></span><br><span class=\"line\">    <span class=\"comment\">// var foo: @Composable () -&gt; Unit = &#123; ... &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// parameter types</span></span><br><span class=\"line\">    <span class=\"comment\">// foo: @Composable () -&gt; Unit</span></span><br><span class=\"line\">    AnnotationTarget.TYPE,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// composable types inside of type signatures</span></span><br><span class=\"line\">    <span class=\"comment\">// foo: (@Composable () -&gt; Unit) -&gt; Unit</span></span><br><span class=\"line\">    AnnotationTarget.TYPE_PARAMETER,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// composable property getters and setters</span></span><br><span class=\"line\">    <span class=\"comment\">// val foo: Int @Composable get() &#123; ... &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// var bar: Int</span></span><br><span class=\"line\">    <span class=\"comment\">//   @Composable get() &#123; ... &#125;</span></span><br><span class=\"line\">    AnnotationTarget.PROPERTY_GETTER</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">annotation</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Composable</span></span></span><br></pre></td></tr></table></figure>\n\n<p>AnnotationTarget   Lambda     , <code>View</code> <code>ViewGroup</code>        .</p>\n<p>  Flutter Widget, React Native Component   .</p>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<h2 id=\"Android-Studio-Jetpack-Compose\"><a href=\"#Android-Studio-Jetpack-Compose\" class=\"headerlink\" title=\"Android Studio Jetpack Compose\"></a>Android Studio Jetpack Compose</h2><p>Android Studio Preview  Compose  Preview      .</p>\n<p>   .</p>\n<h3 id=\"Preview-\"><a href=\"#Preview-\" class=\"headerlink\" title=\"Preview \"></a>Preview </h3><p>Preview  Compose       .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_ybDWG4W2bPYNq79vr1gE8w.png\" class=\"\" title=\"[1_ybDWG4W2bPYNq79vr1gE8w]\">\n\n<p>Split(design/code)          .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_XVvr-CB2pn88Te7Gg52GPA.png\" class=\"\" title=\"[1_XVvr-CB2pn88Te7Gg52GPA]\">\n\n<p>     . </p>\n<p>              .</p>\n<p>,      Context API      .</p>\n<blockquote>\n<p> interactive     .</p>\n</blockquote>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_9IA2k2s5hAS9pSyzpmQ6Pw.png\" class=\"\" title=\"[1_9IA2k2s5hAS9pSyzpmQ6Pw]\">\n\n<p>         .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_5RZOM7sWV0sXctJtTPdshQ.png\" class=\"\" title=\"[1_5RZOM7sWV0sXctJtTPdshQ]\">\n\n\n<h3 id=\"Preview-Annotation-\"><a href=\"#Preview-Annotation-\" class=\"headerlink\" title=\"@Preview Annotation \"></a><code>@Preview</code> Annotation </h3><p>  <code>@Preview</code>       Compose UI    .</p>\n<p><code>@Preview</code>           .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">annotation</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Preview</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">val</span> name: String = <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> group: String = <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    <span class=\"meta\">@IntRange(from = 1)</span> <span class=\"keyword\">val</span> apiLevel: <span class=\"built_in\">Int</span> = -<span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"comment\">// TODO(mount): Make this Dp when they are inline classes</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> widthDp: <span class=\"built_in\">Int</span> = -<span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"comment\">// TODO(mount): Make this Dp when they are inline classes</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> heightDp: <span class=\"built_in\">Int</span> = -<span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> locale: String = <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    <span class=\"meta\">@FloatRange(from = 0.01)</span> <span class=\"keyword\">val</span> fontScale: <span class=\"built_in\">Float</span> = <span class=\"number\">1f</span>,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> showSystemUi: <span class=\"built_in\">Boolean</span> = <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> showBackground: <span class=\"built_in\">Boolean</span> = <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> backgroundColor: <span class=\"built_in\">Long</span> = <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"meta\">@UiMode</span> <span class=\"keyword\">val</span> uiMode: <span class=\"built_in\">Int</span> = <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"meta\">@Device</span> <span class=\"keyword\">val</span> device: String = Devices.DEFAULT</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>name</strong> : Preview   ,   function  .</li>\n<li><strong>group</strong> : Preview   ,   function  .</li>\n<li><strong>apiLevel</strong> : api level   Composable  .</li>\n<li><strong>widthDp</strong> : Preview   . (  dp)</li>\n<li><strong>heightDp</strong> : Preview   . (  dp)</li>\n<li><strong>locale</strong> :  locales    UI     .</li>\n<li><strong>fontScale</strong> :  density        .</li>\n<li><strong>showSystemUi</strong> : true   status bar  action bar  .</li>\n<li><strong>showBackground</strong> : true     .</li>\n<li><strong>backgroundColor</strong> :     , showBackground     .</li>\n<li><strong>uiMode</strong> : uiMode  .</li>\n<li><strong>device</strong> :     . Devices object       . (Devices.NEXUS_9)</li>\n</ul>\n<h3 id=\"Compose--\"><a href=\"#Compose--\" class=\"headerlink\" title=\"Compose  \"></a>Compose  </h3><ul>\n<li><strong>Column</strong> :   .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeColumn</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    Column &#123;</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose&quot;</span>)</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_bSyX8yT7H2HevBNw9fbyYw.png\" class=\"\" title=\"[1_bSyX8yT7H2HevBNw9fbyYw]\">\n\n<ul>\n<li><strong>Row</strong> :   .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeRow</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    Row &#123;</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose&quot;</span>)</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_T9Pww7JyPMPhCJ_6yU8fyQ.png\" class=\"\" title=\"[1_T9Pww7JyPMPhCJ_6yU8fyQ]\">\n\n<ul>\n<li><strong>Box</strong> :       .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeBox</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    Box &#123;</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose 1&quot;</span>)</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;My First Compose 2&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_wFM4jF71V5aJog3lALaRKQ.png\" class=\"\" title=\"[1_wFM4jF71V5aJog3lALaRKQ]\">\n\n<ul>\n<li><strong>Modifier</strong> :   ,          .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeModifier</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    Box(modifier = Modifier</span><br><span class=\"line\">        .padding(<span class=\"number\">5.</span>dp)</span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">        Text(text = <span class=\"string\">&quot;Compose Modifier&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_tPAf-Akf2IpDRrrZo1f1dg.png\" class=\"\" title=\"[1_tPAf-Akf2IpDRrrZo1f1dg]\">\n\n<ul>\n<li><strong>LazyColumn / LazyRow</strong> : Recyclerview      .    .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeLazyColumn</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> itemsList = (<span class=\"number\">0.</span><span class=\"number\">.100</span>).toList()</span><br><span class=\"line\"></span><br><span class=\"line\">    LazyColumn &#123;</span><br><span class=\"line\">        items(items = itemsList, itemContent = &#123; item -&gt;</span><br><span class=\"line\">            Text(text = <span class=\"string\">&quot;Item : <span class=\"variable\">$item</span>&quot;</span>, style = TextStyle(fontSize = <span class=\"number\">80.</span>sp))</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_m7mSalYCza-SoJjmlYeWdA.png\" class=\"\" title=\"[1_m7mSalYCza-SoJjmlYeWdA]\">\n\n<ul>\n<li><strong>ConstraintLayout</strong> :  ContraintLayout         .<br><code>createRefs</code> / <code>createRefFor</code>    , constrainAs     .</li>\n</ul>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ComposeConstraintLayout</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    ConstraintLayout(modifier = Modifier.size(<span class=\"number\">100.</span>dp, <span class=\"number\">200.</span>dp)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> (text1, image, text3) = createRefs()</span><br><span class=\"line\"></span><br><span class=\"line\">        Text(<span class=\"string\">&quot;Text Item 1&quot;</span>, Modifier.constrainAs(text1) &#123;</span><br><span class=\"line\">            top.linkTo(parent.top)</span><br><span class=\"line\">            start.linkTo(parent.start)</span><br><span class=\"line\">            end.linkTo(parent.end)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">        Image(</span><br><span class=\"line\">            painterResource(R.drawable.ic_launcher_foreground),</span><br><span class=\"line\">            contentDescription = <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">            contentScale = ContentScale.Crop,</span><br><span class=\"line\">            modifier = Modifier.fillMaxSize().constrainAs(image) &#123;</span><br><span class=\"line\">                top.linkTo(text1.bottom)</span><br><span class=\"line\">                bottom.linkTo(text3.top)</span><br><span class=\"line\">                start.linkTo(parent.start)</span><br><span class=\"line\">                end.linkTo(parent.end)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        Text(<span class=\"string\">&quot;Text Item 3&quot;</span>, Modifier.constrainAs(text3) &#123;</span><br><span class=\"line\">            bottom.linkTo(parent.bottom)</span><br><span class=\"line\">            start.linkTo(parent.start)</span><br><span class=\"line\">            end.linkTo(parent.end)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Jetpack Compose  ConstraintLayout       .</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">implementation <span class=\"string\">&quot;androidx.constraintlayout:constraintlayout-compose:1.0.0-alpha05&quot;</span></span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/1_UoLVl1dbUjKh9kd4uY0ROA.png\" class=\"\" title=\"[1_UoLVl1dbUjKh9kd4uY0ROA]\">\n\n<h3 id=\"Jetpack-Compose-------\"><a href=\"#Jetpack-Compose-------\" class=\"headerlink\" title=\"Jetpack Compose       \"></a>Jetpack Compose       </h3><h5 id=\"1--\"><a href=\"#1--\" class=\"headerlink\" title=\"1.  \"></a>1.  </h5><p>Compose         .</p>\n<p>  Kotlin &gt; Byte Code &gt; Decompiled Java    .</p>\n<p>Android Studio Preview Empty Compose Activity         .</p>\n<p>    Hello World  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> : <span class=\"type\">ComponentActivity</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContent &#123;</span><br><span class=\"line\">            HelloWorldTheme &#123;</span><br><span class=\"line\">                <span class=\"comment\">// A surface container using the &#x27;background&#x27; color from the theme</span></span><br><span class=\"line\">                Surface(color = MaterialTheme.colors.background) &#123;</span><br><span class=\"line\">                    Greeting(<span class=\"string\">&quot;World&quot;</span>)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">Greeting</span><span class=\"params\">(name: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">    Text(text = <span class=\"string\">&quot;Hello <span class=\"variable\">$name</span>!&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Preview(showBackground = true)</span></span><br><span class=\"line\"><span class=\"meta\">@Composable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">DefaultPreview</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    HelloWorldTheme &#123;</span><br><span class=\"line\">        Greeting(<span class=\"string\">&quot;World&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>src</code>   <code>ui.theme</code>   <code>Color.kt</code>, <code>Shape.kt</code>, <code>Theme.kt</code>, <code>Type.kt</code>  .</p>\n<p>      .</p>\n<p>  Preview    .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%202/add_002_001.png\" class=\"\" title=\"[add_002_001]\">\n\n<h5 id=\"2-MainActivity-\"><a href=\"#2-MainActivity-\" class=\"headerlink\" title=\"2. MainActivity \"></a>2. MainActivity </h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Metadata(</span></span><br><span class=\"line\"><span class=\"meta\">   mv = &#123;1, 4, 2&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   bv = &#123;1, 0, 3&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   k = 2,</span></span><br><span class=\"line\"><span class=\"meta\">   d1 = &#123;&quot;...&quot;&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   d2 = &#123;&quot;DefaultPreview&quot;, &quot;&quot;, &quot;Greeting&quot;, &quot;name&quot;, &quot;&quot;, &quot;app_debug&quot;&#125;</span></span><br><span class=\"line\"><span class=\"meta\">)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivityKt</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Composable</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">Greeting</span><span class=\"params\">(<span class=\"meta\">@NotNull</span> String name)</span> </span>&#123;</span><br><span class=\"line\">        Intrinsics.checkNotNullParameter(name, <span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">        TextKt.Text-Vh6c2nE$<span class=\"keyword\">default</span>(<span class=\"string\">&quot;Hello &quot;</span> + name + <span class=\"string\">&#x27;!&#x27;</span>, </span><br><span class=\"line\">            (Modifier)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            <span class=\"number\">0L</span>, </span><br><span class=\"line\">            <span class=\"number\">0L</span>, </span><br><span class=\"line\">            (FontStyle)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            (FontWeight)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            (FontFamily)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            <span class=\"number\">0L</span>, </span><br><span class=\"line\">            (TextDecoration)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            (TextAlign)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            <span class=\"number\">0L</span>, </span><br><span class=\"line\">            (TextOverflow)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            <span class=\"keyword\">false</span>, </span><br><span class=\"line\">            <span class=\"number\">0</span>, </span><br><span class=\"line\">            (Function1)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            (TextStyle)<span class=\"keyword\">null</span>, </span><br><span class=\"line\">            <span class=\"number\">65534</span>, </span><br><span class=\"line\">            (Object)<span class=\"keyword\">null</span></span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@Composable</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">DefaultPreview</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      ThemeKt.HelloWorldTheme$<span class=\"keyword\">default</span>(<span class=\"keyword\">false</span>, (Function0)<span class=\"keyword\">null</span>.INSTANCE, <span class=\"number\">1</span>, (Object)<span class=\"keyword\">null</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// MainActivity.java</span></span><br><span class=\"line\"><span class=\"meta\">@Metadata(</span></span><br><span class=\"line\"><span class=\"meta\">   mv = &#123;1, 4, 2&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   bv = &#123;1, 0, 3&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   k = 1,</span></span><br><span class=\"line\"><span class=\"meta\">   d1 = &#123;&quot;...&quot;&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">   d2 = &#123;&quot;...&quot;&#125;</span></span><br><span class=\"line\"><span class=\"meta\">)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">ComponentActivity</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">      ComponentActivityKt.setContent$<span class=\"keyword\">default</span>(<span class=\"keyword\">this</span>, (CompositionContext)<span class=\"keyword\">null</span>, (Function0)<span class=\"keyword\">null</span>.INSTANCE, <span class=\"number\">1</span>, (Object)<span class=\"keyword\">null</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>ComponentActivityKt.setContent()</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">fun</span> ComponentActivity.<span class=\"title\">setContent</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    parent: <span class=\"type\">CompositionContext</span>? = <span class=\"literal\">null</span>,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    content: @<span class=\"type\">Composable</span> () -&gt; <span class=\"type\">Unit</span></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> existingComposeView = window.decorView</span><br><span class=\"line\">        .findViewById&lt;ViewGroup&gt;(android.R.id.content)</span><br><span class=\"line\">        .getChildAt(<span class=\"number\">0</span>) <span class=\"keyword\">as</span>? ComposeView</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (existingComposeView != <span class=\"literal\">null</span>) with(existingComposeView) &#123;</span><br><span class=\"line\">        setParentCompositionContext(parent)</span><br><span class=\"line\">        setContent(content)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> ComposeView(<span class=\"keyword\">this</span>).apply &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Set content and parent **before** setContentView</span></span><br><span class=\"line\">        <span class=\"comment\">// to have ComposeView create the composition on attach</span></span><br><span class=\"line\">        setParentCompositionContext(parent)</span><br><span class=\"line\">        setContent(content)</span><br><span class=\"line\">        setContentView(<span class=\"keyword\">this</span>, DefaultActivityContentLayoutParams)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>CompositionContext</code>  null  , <code>(Function0)null.INSTANCE, 1, (Object)null</code>   ,</p>\n<p>  <code>@Composable</code> Annotation .</p>\n<p>     <strong><code>@Composable</code>     <code>ComposeView</code>   <code>Activity</code> <code>setContentView()</code> .</strong>  .</p>\n<h5 id=\"3-Composable--\"><a href=\"#3-Composable--\" class=\"headerlink\" title=\"3. @Composable  \"></a>3. <code>@Composable</code>  </h5><p><code>Composable</code> Annotaion    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@MustBeDocumented</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(AnnotationRetention.BINARY)</span></span><br><span class=\"line\"><span class=\"meta\">@Target(</span></span><br><span class=\"line\"><span class=\"meta\">    // function declarations</span></span><br><span class=\"line\"><span class=\"meta\">    // @Composable fun Foo()</span> &#123; ... &#125;</span><br><span class=\"line\">    <span class=\"comment\">// lambda expressions</span></span><br><span class=\"line\">    <span class=\"comment\">// val foo = @Composable &#123; ... &#125;</span></span><br><span class=\"line\">    AnnotationTarget.FUNCTION,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// type declarations</span></span><br><span class=\"line\">    <span class=\"comment\">// var foo: @Composable () -&gt; Unit = &#123; ... &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// parameter types</span></span><br><span class=\"line\">    <span class=\"comment\">// foo: @Composable () -&gt; Unit</span></span><br><span class=\"line\">    AnnotationTarget.TYPE,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// composable types inside of type signatures</span></span><br><span class=\"line\">    <span class=\"comment\">// foo: (@Composable () -&gt; Unit) -&gt; Unit</span></span><br><span class=\"line\">    AnnotationTarget.TYPE_PARAMETER,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// composable property getters and setters</span></span><br><span class=\"line\">    <span class=\"comment\">// val foo: Int @Composable get() &#123; ... &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// var bar: Int</span></span><br><span class=\"line\">    <span class=\"comment\">//   @Composable get() &#123; ... &#125;</span></span><br><span class=\"line\">    AnnotationTarget.PROPERTY_GETTER</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">annotation</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Composable</span></span></span><br></pre></td></tr></table></figure>\n\n<p>AnnotationTarget   Lambda     , <code>View</code> <code>ViewGroup</code>        .</p>\n<p>  Flutter Widget, React Native Component   .</p>"},{"title":"Jetpack Compose Part 3 - Retrospect","date":"2021-04-06T18:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_jepack_compose.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n\n### Jetpack Compose Coupling Cohesion\n\n Android  ,         ** (Separation of concerns)**  .\n\n        View Controller          (   ?)  .\n\nCompose          .\n\n Compose      **Coupling**  **Cohesion** .\n\n    ,    ,   ****      ****     .\n\n{% asset_img add_002_002.png [add_002_002] %}\n\n> **** [How Cohesion and Coupling Correlate](https://blog.ttulka.com/how-cohesion-and-coupling-correlate)\n\n     .\n\n- A : Low cohesion, tight coupling\n- B : High cohesion, tight coupling\n- C : High cohesion, loose coupling\n\n Compose    UI/UX          C    .\n\n### Compose  \n\n-     .\n-      .\n  -   ViewModel      \n  -   .\n-    ,     .\n\n### Compose State\n\n**remember**\n-       .\n-       .\n\n**Stateless**\n- Satateless Composable     .\n-       .\n\n**Stateful**\n-     Composable\n- `State<T>`        .\n- Runtime .\n-     `rememberSaveable`  .\n- `Bundle`   .\n\n#### Compose Samples\n\n    Compose   .\n\n  .\n\n> [Github#Android Compose Samples](https://github.com/android/compose-samples)\n\n        Compose       .\n\n### \n\n-            \n  - Flutter SwiftUI         . (    )\n\n-     MVVM       .\n  - MVI         .\n\n-             .\n  -    ?\n  -  React Flutter             . \n  -    XML           .\n\n- ,  alpha       .\n  -    ,          ,           .\n-         .\n  - Flutter           ,   Flutter        .\n\n\n## References\n\n### Members of Study\n- https://namhoon.kim/2021/03/14/android_deep_dive/001/\n- https://namhoon.kim/2021/03/21/android_deep_dive/002/\n- https://sysys.medium.com/jetpack-compose-%EC%B2%B4%ED%97%98%EA%B8%B0-8f90aff89f47\n- https://soda1127.github.io/introduce-jetpack-compose/\n\n### Official\n- [Android Developers#Jetpack Compose](https://developer.android.com/jetpack/compose/)\n- [Android Developers#Compose ](https://developer.android.com/jetpack/compose/mental-model?hl=ko)\n- [Android Developers#Compose Cource](https://developer.android.com/courses/pathways/compose)\n- [Android#Compose Samples](https://github.com/android/compose-samples)\n\n### Etc\n- [Understanding Jetpack Compose - part 1 of 2](https://medium.com/androiddevelopers/understanding-jetpack-compose-part-1-of-2-ca316fe39050)\n- [Understanding Jetpack Compose - part 2 of 2](https://medium.com/androiddevelopers/under-the-hood-of-jetpack-compose-part-2-of-2-37b2c20c6cdd)\n- [foso.github.io](https://foso.github.io/Jetpack-Compose-Playground/)","source":"_posts/2021-04-07 Jetpack Compose Part 3.md","raw":"---\ntitle: Jetpack Compose Part 3 - Retrospect\ndate: 2021-04-07 03:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_jepack_compose.png\ncategories:\n- Jetpack Compose\ntags:\n- Android\n- Jetpack\n- Compose\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n\n### Jetpack Compose Coupling Cohesion\n\n Android  ,         ** (Separation of concerns)**  .\n\n        View Controller          (   ?)  .\n\nCompose          .\n\n Compose      **Coupling**  **Cohesion** .\n\n    ,    ,   ****      ****     .\n\n{% asset_img add_002_002.png [add_002_002] %}\n\n> **** [How Cohesion and Coupling Correlate](https://blog.ttulka.com/how-cohesion-and-coupling-correlate)\n\n     .\n\n- A : Low cohesion, tight coupling\n- B : High cohesion, tight coupling\n- C : High cohesion, loose coupling\n\n Compose    UI/UX          C    .\n\n### Compose  \n\n-     .\n-      .\n  -   ViewModel      \n  -   .\n-    ,     .\n\n### Compose State\n\n**remember**\n-       .\n-       .\n\n**Stateless**\n- Satateless Composable     .\n-       .\n\n**Stateful**\n-     Composable\n- `State<T>`        .\n- Runtime .\n-     `rememberSaveable`  .\n- `Bundle`   .\n\n#### Compose Samples\n\n    Compose   .\n\n  .\n\n> [Github#Android Compose Samples](https://github.com/android/compose-samples)\n\n        Compose       .\n\n### \n\n-            \n  - Flutter SwiftUI         . (    )\n\n-     MVVM       .\n  - MVI         .\n\n-             .\n  -    ?\n  -  React Flutter             . \n  -    XML           .\n\n- ,  alpha       .\n  -    ,          ,           .\n-         .\n  - Flutter           ,   Flutter        .\n\n\n## References\n\n### Members of Study\n- https://namhoon.kim/2021/03/14/android_deep_dive/001/\n- https://namhoon.kim/2021/03/21/android_deep_dive/002/\n- https://sysys.medium.com/jetpack-compose-%EC%B2%B4%ED%97%98%EA%B8%B0-8f90aff89f47\n- https://soda1127.github.io/introduce-jetpack-compose/\n\n### Official\n- [Android Developers#Jetpack Compose](https://developer.android.com/jetpack/compose/)\n- [Android Developers#Compose ](https://developer.android.com/jetpack/compose/mental-model?hl=ko)\n- [Android Developers#Compose Cource](https://developer.android.com/courses/pathways/compose)\n- [Android#Compose Samples](https://github.com/android/compose-samples)\n\n### Etc\n- [Understanding Jetpack Compose - part 1 of 2](https://medium.com/androiddevelopers/understanding-jetpack-compose-part-1-of-2-ca316fe39050)\n- [Understanding Jetpack Compose - part 2 of 2](https://medium.com/androiddevelopers/under-the-hood-of-jetpack-compose-part-2-of-2-37b2c20c6cdd)\n- [foso.github.io](https://foso.github.io/Jetpack-Compose-Playground/)","slug":"2021-04-07 Jetpack Compose Part 3","published":1,"updated":"2021-07-25T07:18:42.912Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7kw00043lre9kn363in","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<span id=\"more\"></span>\n\n<h3 id=\"Jetpack-Compose-Coupling-Cohesion\"><a href=\"#Jetpack-Compose-Coupling-Cohesion\" class=\"headerlink\" title=\"Jetpack Compose Coupling Cohesion\"></a>Jetpack Compose Coupling Cohesion</h3><p> Android  ,         <strong> (Separation of concerns)</strong>  .</p>\n<p>        View Controller          (   ?)  .</p>\n<p>Compose          .</p>\n<p> Compose      <strong>Coupling</strong>  <strong>Cohesion</strong> .</p>\n<p>    ,    ,   <strong></strong>      <strong></strong>     .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%203/add_002_002.png\" class=\"\" title=\"[add_002_002]\">\n\n<blockquote>\n<p><strong></strong> <a href=\"https://blog.ttulka.com/how-cohesion-and-coupling-correlate\">How Cohesion and Coupling Correlate</a></p>\n</blockquote>\n<p>     .</p>\n<ul>\n<li>A : Low cohesion, tight coupling</li>\n<li>B : High cohesion, tight coupling</li>\n<li>C : High cohesion, loose coupling</li>\n</ul>\n<p> Compose    UI/UX          C    .</p>\n<h3 id=\"Compose--\"><a href=\"#Compose--\" class=\"headerlink\" title=\"Compose  \"></a>Compose  </h3><ul>\n<li>    .</li>\n<li>     .<ul>\n<li>  ViewModel      </li>\n<li>  .</li>\n</ul>\n</li>\n<li>   ,     .</li>\n</ul>\n<h3 id=\"Compose-State\"><a href=\"#Compose-State\" class=\"headerlink\" title=\"Compose State\"></a>Compose State</h3><p><strong>remember</strong></p>\n<ul>\n<li>      .</li>\n<li>      .</li>\n</ul>\n<p><strong>Stateless</strong></p>\n<ul>\n<li>Satateless Composable     .</li>\n<li>      .</li>\n</ul>\n<p><strong>Stateful</strong></p>\n<ul>\n<li>    Composable</li>\n<li><code>State&lt;T&gt;</code>        .</li>\n<li>Runtime .</li>\n<li>    <code>rememberSaveable</code>  .</li>\n<li><code>Bundle</code>   .</li>\n</ul>\n<h4 id=\"Compose-Samples\"><a href=\"#Compose-Samples\" class=\"headerlink\" title=\"Compose Samples\"></a>Compose Samples</h4><p>    Compose   .</p>\n<p>  .</p>\n<blockquote>\n<p><a href=\"https://github.com/android/compose-samples\">Github#Android Compose Samples</a></p>\n</blockquote>\n<p>        Compose       .</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>           </p>\n<ul>\n<li>Flutter SwiftUI         . (    )</li>\n</ul>\n</li>\n<li><p>    MVVM       .</p>\n<ul>\n<li>MVI         .</li>\n</ul>\n</li>\n<li><p>            .</p>\n<ul>\n<li>   ?</li>\n<li> React Flutter             . </li>\n<li>   XML           .</li>\n</ul>\n</li>\n<li><p>,  alpha       .</p>\n<ul>\n<li>   ,          ,           .</li>\n</ul>\n</li>\n<li><p>        .</p>\n<ul>\n<li>Flutter           ,   Flutter        .</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><h3 id=\"Members-of-Study\"><a href=\"#Members-of-Study\" class=\"headerlink\" title=\"Members of Study\"></a>Members of Study</h3><ul>\n<li><a href=\"https://namhoon.kim/2021/03/14/android_deep_dive/001/\">https://namhoon.kim/2021/03/14/android_deep_dive/001/</a></li>\n<li><a href=\"https://namhoon.kim/2021/03/21/android_deep_dive/002/\">https://namhoon.kim/2021/03/21/android_deep_dive/002/</a></li>\n<li><a href=\"https://sysys.medium.com/jetpack-compose-%EC%B2%B4%ED%97%98%EA%B8%B0-8f90aff89f47\">https://sysys.medium.com/jetpack-compose-%EC%B2%B4%ED%97%98%EA%B8%B0-8f90aff89f47</a></li>\n<li><a href=\"https://soda1127.github.io/introduce-jetpack-compose/\">https://soda1127.github.io/introduce-jetpack-compose/</a></li>\n</ul>\n<h3 id=\"Official\"><a href=\"#Official\" class=\"headerlink\" title=\"Official\"></a>Official</h3><ul>\n<li><a href=\"https://developer.android.com/jetpack/compose/\">Android Developers#Jetpack Compose</a></li>\n<li><a href=\"https://developer.android.com/jetpack/compose/mental-model?hl=ko\">Android Developers#Compose </a></li>\n<li><a href=\"https://developer.android.com/courses/pathways/compose\">Android Developers#Compose Cource</a></li>\n<li><a href=\"https://github.com/android/compose-samples\">Android#Compose Samples</a></li>\n</ul>\n<h3 id=\"Etc\"><a href=\"#Etc\" class=\"headerlink\" title=\"Etc\"></a>Etc</h3><ul>\n<li><a href=\"https://medium.com/androiddevelopers/understanding-jetpack-compose-part-1-of-2-ca316fe39050\">Understanding Jetpack Compose - part 1 of 2</a></li>\n<li><a href=\"https://medium.com/androiddevelopers/under-the-hood-of-jetpack-compose-part-2-of-2-37b2c20c6cdd\">Understanding Jetpack Compose - part 2 of 2</a></li>\n<li><a href=\"https://foso.github.io/Jetpack-Compose-Playground/\">foso.github.io</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<h3 id=\"Jetpack-Compose-Coupling-Cohesion\"><a href=\"#Jetpack-Compose-Coupling-Cohesion\" class=\"headerlink\" title=\"Jetpack Compose Coupling Cohesion\"></a>Jetpack Compose Coupling Cohesion</h3><p> Android  ,         <strong> (Separation of concerns)</strong>  .</p>\n<p>        View Controller          (   ?)  .</p>\n<p>Compose          .</p>\n<p> Compose      <strong>Coupling</strong>  <strong>Cohesion</strong> .</p>\n<p>    ,    ,   <strong></strong>      <strong></strong>     .</p>\n<img src=\"/Team-Blog/2021/04/07/2021-04-07%20Jetpack%20Compose%20Part%203/add_002_002.png\" class=\"\" title=\"[add_002_002]\">\n\n<blockquote>\n<p><strong></strong> <a href=\"https://blog.ttulka.com/how-cohesion-and-coupling-correlate\">How Cohesion and Coupling Correlate</a></p>\n</blockquote>\n<p>     .</p>\n<ul>\n<li>A : Low cohesion, tight coupling</li>\n<li>B : High cohesion, tight coupling</li>\n<li>C : High cohesion, loose coupling</li>\n</ul>\n<p> Compose    UI/UX          C    .</p>\n<h3 id=\"Compose--\"><a href=\"#Compose--\" class=\"headerlink\" title=\"Compose  \"></a>Compose  </h3><ul>\n<li>    .</li>\n<li>     .<ul>\n<li>  ViewModel      </li>\n<li>  .</li>\n</ul>\n</li>\n<li>   ,     .</li>\n</ul>\n<h3 id=\"Compose-State\"><a href=\"#Compose-State\" class=\"headerlink\" title=\"Compose State\"></a>Compose State</h3><p><strong>remember</strong></p>\n<ul>\n<li>      .</li>\n<li>      .</li>\n</ul>\n<p><strong>Stateless</strong></p>\n<ul>\n<li>Satateless Composable     .</li>\n<li>      .</li>\n</ul>\n<p><strong>Stateful</strong></p>\n<ul>\n<li>    Composable</li>\n<li><code>State&lt;T&gt;</code>        .</li>\n<li>Runtime .</li>\n<li>    <code>rememberSaveable</code>  .</li>\n<li><code>Bundle</code>   .</li>\n</ul>\n<h4 id=\"Compose-Samples\"><a href=\"#Compose-Samples\" class=\"headerlink\" title=\"Compose Samples\"></a>Compose Samples</h4><p>    Compose   .</p>\n<p>  .</p>\n<blockquote>\n<p><a href=\"https://github.com/android/compose-samples\">Github#Android Compose Samples</a></p>\n</blockquote>\n<p>        Compose       .</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>           </p>\n<ul>\n<li>Flutter SwiftUI         . (    )</li>\n</ul>\n</li>\n<li><p>    MVVM       .</p>\n<ul>\n<li>MVI         .</li>\n</ul>\n</li>\n<li><p>            .</p>\n<ul>\n<li>   ?</li>\n<li> React Flutter             . </li>\n<li>   XML           .</li>\n</ul>\n</li>\n<li><p>,  alpha       .</p>\n<ul>\n<li>   ,          ,           .</li>\n</ul>\n</li>\n<li><p>        .</p>\n<ul>\n<li>Flutter           ,   Flutter        .</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><h3 id=\"Members-of-Study\"><a href=\"#Members-of-Study\" class=\"headerlink\" title=\"Members of Study\"></a>Members of Study</h3><ul>\n<li><a href=\"https://namhoon.kim/2021/03/14/android_deep_dive/001/\">https://namhoon.kim/2021/03/14/android_deep_dive/001/</a></li>\n<li><a href=\"https://namhoon.kim/2021/03/21/android_deep_dive/002/\">https://namhoon.kim/2021/03/21/android_deep_dive/002/</a></li>\n<li><a href=\"https://sysys.medium.com/jetpack-compose-%EC%B2%B4%ED%97%98%EA%B8%B0-8f90aff89f47\">https://sysys.medium.com/jetpack-compose-%EC%B2%B4%ED%97%98%EA%B8%B0-8f90aff89f47</a></li>\n<li><a href=\"https://soda1127.github.io/introduce-jetpack-compose/\">https://soda1127.github.io/introduce-jetpack-compose/</a></li>\n</ul>\n<h3 id=\"Official\"><a href=\"#Official\" class=\"headerlink\" title=\"Official\"></a>Official</h3><ul>\n<li><a href=\"https://developer.android.com/jetpack/compose/\">Android Developers#Jetpack Compose</a></li>\n<li><a href=\"https://developer.android.com/jetpack/compose/mental-model?hl=ko\">Android Developers#Compose </a></li>\n<li><a href=\"https://developer.android.com/courses/pathways/compose\">Android Developers#Compose Cource</a></li>\n<li><a href=\"https://github.com/android/compose-samples\">Android#Compose Samples</a></li>\n</ul>\n<h3 id=\"Etc\"><a href=\"#Etc\" class=\"headerlink\" title=\"Etc\"></a>Etc</h3><ul>\n<li><a href=\"https://medium.com/androiddevelopers/understanding-jetpack-compose-part-1-of-2-ca316fe39050\">Understanding Jetpack Compose - part 1 of 2</a></li>\n<li><a href=\"https://medium.com/androiddevelopers/under-the-hood-of-jetpack-compose-part-2-of-2-37b2c20c6cdd\">Understanding Jetpack Compose - part 2 of 2</a></li>\n<li><a href=\"https://foso.github.io/Jetpack-Compose-Playground/\">foso.github.io</a></li>\n</ul>"},{"title":"Introduce Android UI Rendering Principle and View Optimization Part 1","date":"2021-05-18T16:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_ui_rendering.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n      .      UI UX.       UI    ,  UI  UI  .\n\n      .    UI      View    ?      ,   ADD    .\n\n## Android View\n\n    ,  .   .\n\n{% asset_img 7AGranC.png [Android Views] %}\n\n     **View**   . \n\n\n\n### View & ViewGroup\n\n    .      View ViewGroup    .\n\n{% asset_img EzHZMUm.png [View & ViewGroup] %}\n\n**View** Activity,        .    ,  View     .  ImageView, TextView, Button   .        RemoteView     ,     .\n\n**ViewGroup** View   .   , View N    .  LinearLayout, FrameLayout, RelativeLayout, ConsraintLayout .\n\n  View, ViewGroup Java,  Kotlin   ,    Mark-Up    .   XML   ,   XML Parser   Java .\n\n        ,      View        .    View    .\n\n\n\n## View Life-Cycle\n\n   ,   View    .  View, ViewGroup      ,  ` `  .     ,       ,         .   View      .\n\n , Fragment  View  .\n\nView       ,\n\n\n{% asset_img qu5Mr6x.png [View Life Cycle] %}\n\n\n         .\n\n\n\n### Constructors\n\nProgrammatically View  . View    ,     .\n\n   .\n\n- `View(Context context) `\n- `View(Context context, @Nullable AttributeSet attrs) `\n- `View(Context context, @Nullable AttributeSet attrs, int defStyleAttr) `\n- `View(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes)`\n\n\n\n### Attachment / Detachment\n\n- **Attachment** Window  .\n- **Detachment** Window  .\n\n      Callback Function    .\n\n\n\n### onAttachedToWindow()\n\nView Window   .  View Active ,   ,   ,      .\n\n\n\n### onDetachedFromWindow() \n\nView Window   . Window    , Inactive,  View   .      .\n\n- ViewGroup View  \n- Activity `finish()`   Activity Destroyed \n\n\n\n### onMeasure()\n\nView  . ViewGroup   View   ,      . ,   ViewGroup   .\n\n```java\n/**\n * \n *  View    Background Dimension Size  .\n * \n *     Background , Background   .\n * @param widthMeasureSpec     \n * @param heightMeasureSpec     \n *\n */\nprotected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n  setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec),\n                       getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));\n}\n```\n\n\n\n### MeasureSpec\n\nViewGroup   View        ,  MeasureSpec  . MeasureSpec Width, Height  ,   .\n\n   .\n\n- **MeasureSpec.EXACTLY** :     .       .\n\n- **MeasureSpec.AT_MOST** :        .\n\n- **MeasureSpec.UNSPECIFIED** :      ,      .\n\n     .\n\n```java\n@Override\npublic void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n  int mode = MeasureSpec.getMode(heightMeasureSpec)\n    if (mode != MeasureSpec.EXACTLY) {\n      // Logic\n    }\n}\n```\n\n\n\n### onLayout()\n\n   onLayout    View Window . \n\nView       .\n\n```java\nprotected void onLayout(boolean changed, int left, int top, int right, int bottom)\n```\n\n\n\n### onDraw()\n\nonLayout View      ,   onDraw Canvas  ,  Canvas  DisplayList    . onDraw      .    CPU   ,     .\n\nView draw      .\n\n- View     - invalidate()\n- View     - requestLayout()\n\n### Invalidate()\n\ninvalidate    ,  View  View     .\n\n     ,   invalidate    .\n\n- **drawableStateChanged** - Background,     , Foreground Drawable   ,     \n- **setDefaultFocusHighlight** -      .   \n- **setForeground**\n- **setScrollIndicators** - indicator   .   ,       .\n- **setAutoFilled**\n- **requestAccessibilityFocus** -         View        \n- **setForceDarkAllowed** -    \n- **onDrawScrollBars** -    \n- **setLayerPaint** -      . (alpha, Xfermode, colorFilter)\n\n### requestLayout()\n\n     .      onMeasure => onLayout .\n\n## View State Save/Restore\n\nView Activity    /  .     .\n\n### onSaveInstanceState() -> Parcelable\n\n        View   ID .   Bundle    .\n\nBundle Parcelable  ,     .\n\n  .\n\n```java\n@Override\npublic Parcelable onSaveInstanceState() {\n  Bundle bundle = new Bundle();\n  // The vars you want to save - in this instance a string and a boolean\n  String someString = \"something\";\n  boolean someBoolean = true;\n  State state = new State(super.onSaveInstanceState(), someString, someBoolean);\n  bundle.putParcelable(State.STATE, state);\n  return bundle;\n}\n```\n\nState  ,  State       . View      .\n\n### onRestoreInstanceState(Parcelable state)\n\n   Paracleable     . Parcelable   ,      .\n\n .\n\n```java\n@Override\npublic void onRestoreInstanceState(Parcelable state) {\n  if (state instanceof Bundle) {\n    Bundle bundle = (Bundle) state;\n    State customViewState = (State) bundle.getParcelable(State.STATE);\n    // The vars you saved - do whatever you want with them\n    String someString = customViewState.getText();\n    boolean someBoolean = customViewState.isSomethingShowing());\n    super.onRestoreInstanceState(customViewState.getSuperState());\n    return;\n  }\n  // Stops a bug with the wrong state being passed to the super\n  super.onRestoreInstanceState(BaseSavedState.EMPTY_STATE); \n}\n```\n\n\n\n## View  \n\nView   ,  `ViewGroup`    `View`   `Measure -> Layout -> Draw`   .\n\n### Measure Pass\n\n  measure(int, int)     - .          .\n\n        .    - layout(int, int, int)  .          .\n\nView   2   .\n\n- **measured width & measured height** :         .\n- **drawing width & drawing height** :        .\n\nView Padding, Margin     Padding  Margin     Measured Width, Measured Height  Drawing Width, Drawing Height    .\n\n\n\n### Layout Pass\n\n , requestLayout()  .          .    top-down    ,    ViewGroup Measure       .\n\n\n\n### Draw Pass\n\nGPU   .     GPU   View Tree    Canvas  .  ,  1,2         .\n\n View  ,    2  , `Invaliadate()`    draw   , `requestLayout()`   measure -> layout -> draw    .\n\n\n\n   View   .\n\n\n\n###   View Rendering Process \n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    android:id=\"@+id/root1\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <androidx.constraintlayout.widget.ConstraintLayout\n        android:id=\"@+id/constraintContainer2\"\n        android:layout_width=\"400dp\"\n        android:layout_height=\"400dp\"\n        android:background=\"@color/teal_200\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintBottom_toBottomOf=\"parent\">\n\n        <TextView\n            android:id=\"@+id/constraintTextView3\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"First TextView\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\" />\n\n        <LinearLayout\n            android:id=\"@+id/linearContainer4\"\n            android:layout_width=\"200dp\"\n            android:layout_height=\"200dp\"\n            android:orientation=\"vertical\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\">\n\n            <ImageView\n                android:id=\"@+id/linearImageView5\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:background=\"@drawable/ic_launcher_foreground\"/>\n\n            <TextView\n                android:id=\"@+id/linearTextView5\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Second TextView\"/>\n\n            <RelativeLayout\n                android:id=\"@+id/relativeContainer5\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:background=\"@color/purple_500\">\n\n                <TextView\n                    android:id=\"@+id/relativeTextView6\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:text=\"Thired TextView\"/>\n\n            </RelativeLayout>\n\n        </LinearLayout>\n\n    </androidx.constraintlayout.widget.ConstraintLayout>\n\n    <FrameLayout\n        android:id=\"@+id/frameContainer2\"\n        android:layout_width=\"100dp\"\n        android:layout_height=\"100dp\"\n        android:background=\"@color/teal_200_30\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintBottom_toBottomOf=\"parent\" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\nroot Container      depth  View   ,      .\n\n{% asset_img UntitledDiagram.png [View Tree Example] %}\n\n View, ViewGroup onLayout      ,   View   .\n\n> doOnLayout, doOnDraw, doOnXXX        .\n\n### OnLayout   \n\n```kotlin\nlinearContainer4.doOnLayout {\n    println(\"linearContainer4 doOnLayout\")\n}\n\nconstraintContainer2.doOnLayout {\n    println(\"ConstraintContainer2 doOnLayout\")\n}\n\nconstraintTextView3.doOnLayout {\n    println(\"constraintTextView3 doOnLayout\")\n}\n\nroot1.doOnLayout {\n    println(\"root1 doOnLayout\")\n}\n\nrelativeContainer5.doOnLayout {\n    println(\"relativeContainer5 doOnLayout\")\n}\n\nrelativeTextView6.doOnLayout {\n    println(\"relativeTextView6 doOnLayout\")\n}\n\nlinearImageView5.doOnLayout {\n    println(\"linearImageView5 doOnLayout\")\n}\n\nlinearTextView5.doOnLayout {\n    println(\"linearTextView5 doOnLayout\")\n}\n\nframeContainer2.doOnLayout {\n    println(\"frameContainer2 doOnLayout\")\n}\n```\n\n{% asset_img image.png [onLayout Log] %}\n\nonLayout    View & ViewGroup  ****  ** **    .\n\n\n###     \n\nLayout   Chile View lifecycle     ,   . \n\n1. Child View    Parent View          , `(Layout )`\n2.      , Parent View    Child View     . `(Draw )`\n\n## Extra Info\n\n### **`layout_weight`  **\n\nLinear Layout  layout_weight       Measure pass     . \n\nlayout_weight       ,  View     ,  View              . \n\n View    Releative Layout & Constraint Layout  .\n\n### **Overdraw   **\n\nOverDraw   , **   Layout Background  **       . \n\n           ?\n\nLayout Background     View **Lifecycle onDraw  **   . UI        onDraw(GPU   ) ,   skip      . \n\n---\n\n View , View    . \n\n  View    Window, Surface, Canvas  ,        ,         .\n","source":"_posts/2021-05-19 Android UI Rendering Optimization Part 1.md","raw":"---\ntitle: Introduce Android UI Rendering Principle and View Optimization Part 1\ndate: 2021-05-19 01:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_ui_rendering.png\ncategories:\n- User Interface\ntags:\n- Android\n- Rendering\n- Principle\n- Optimize\n- UI\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n      .      UI UX.       UI    ,  UI  UI  .\n\n      .    UI      View    ?      ,   ADD    .\n\n## Android View\n\n    ,  .   .\n\n{% asset_img 7AGranC.png [Android Views] %}\n\n     **View**   . \n\n\n\n### View & ViewGroup\n\n    .      View ViewGroup    .\n\n{% asset_img EzHZMUm.png [View & ViewGroup] %}\n\n**View** Activity,        .    ,  View     .  ImageView, TextView, Button   .        RemoteView     ,     .\n\n**ViewGroup** View   .   , View N    .  LinearLayout, FrameLayout, RelativeLayout, ConsraintLayout .\n\n  View, ViewGroup Java,  Kotlin   ,    Mark-Up    .   XML   ,   XML Parser   Java .\n\n        ,      View        .    View    .\n\n\n\n## View Life-Cycle\n\n   ,   View    .  View, ViewGroup      ,  ` `  .     ,       ,         .   View      .\n\n , Fragment  View  .\n\nView       ,\n\n\n{% asset_img qu5Mr6x.png [View Life Cycle] %}\n\n\n         .\n\n\n\n### Constructors\n\nProgrammatically View  . View    ,     .\n\n   .\n\n- `View(Context context) `\n- `View(Context context, @Nullable AttributeSet attrs) `\n- `View(Context context, @Nullable AttributeSet attrs, int defStyleAttr) `\n- `View(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes)`\n\n\n\n### Attachment / Detachment\n\n- **Attachment** Window  .\n- **Detachment** Window  .\n\n      Callback Function    .\n\n\n\n### onAttachedToWindow()\n\nView Window   .  View Active ,   ,   ,      .\n\n\n\n### onDetachedFromWindow() \n\nView Window   . Window    , Inactive,  View   .      .\n\n- ViewGroup View  \n- Activity `finish()`   Activity Destroyed \n\n\n\n### onMeasure()\n\nView  . ViewGroup   View   ,      . ,   ViewGroup   .\n\n```java\n/**\n * \n *  View    Background Dimension Size  .\n * \n *     Background , Background   .\n * @param widthMeasureSpec     \n * @param heightMeasureSpec     \n *\n */\nprotected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n  setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec),\n                       getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));\n}\n```\n\n\n\n### MeasureSpec\n\nViewGroup   View        ,  MeasureSpec  . MeasureSpec Width, Height  ,   .\n\n   .\n\n- **MeasureSpec.EXACTLY** :     .       .\n\n- **MeasureSpec.AT_MOST** :        .\n\n- **MeasureSpec.UNSPECIFIED** :      ,      .\n\n     .\n\n```java\n@Override\npublic void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n  int mode = MeasureSpec.getMode(heightMeasureSpec)\n    if (mode != MeasureSpec.EXACTLY) {\n      // Logic\n    }\n}\n```\n\n\n\n### onLayout()\n\n   onLayout    View Window . \n\nView       .\n\n```java\nprotected void onLayout(boolean changed, int left, int top, int right, int bottom)\n```\n\n\n\n### onDraw()\n\nonLayout View      ,   onDraw Canvas  ,  Canvas  DisplayList    . onDraw      .    CPU   ,     .\n\nView draw      .\n\n- View     - invalidate()\n- View     - requestLayout()\n\n### Invalidate()\n\ninvalidate    ,  View  View     .\n\n     ,   invalidate    .\n\n- **drawableStateChanged** - Background,     , Foreground Drawable   ,     \n- **setDefaultFocusHighlight** -      .   \n- **setForeground**\n- **setScrollIndicators** - indicator   .   ,       .\n- **setAutoFilled**\n- **requestAccessibilityFocus** -         View        \n- **setForceDarkAllowed** -    \n- **onDrawScrollBars** -    \n- **setLayerPaint** -      . (alpha, Xfermode, colorFilter)\n\n### requestLayout()\n\n     .      onMeasure => onLayout .\n\n## View State Save/Restore\n\nView Activity    /  .     .\n\n### onSaveInstanceState() -> Parcelable\n\n        View   ID .   Bundle    .\n\nBundle Parcelable  ,     .\n\n  .\n\n```java\n@Override\npublic Parcelable onSaveInstanceState() {\n  Bundle bundle = new Bundle();\n  // The vars you want to save - in this instance a string and a boolean\n  String someString = \"something\";\n  boolean someBoolean = true;\n  State state = new State(super.onSaveInstanceState(), someString, someBoolean);\n  bundle.putParcelable(State.STATE, state);\n  return bundle;\n}\n```\n\nState  ,  State       . View      .\n\n### onRestoreInstanceState(Parcelable state)\n\n   Paracleable     . Parcelable   ,      .\n\n .\n\n```java\n@Override\npublic void onRestoreInstanceState(Parcelable state) {\n  if (state instanceof Bundle) {\n    Bundle bundle = (Bundle) state;\n    State customViewState = (State) bundle.getParcelable(State.STATE);\n    // The vars you saved - do whatever you want with them\n    String someString = customViewState.getText();\n    boolean someBoolean = customViewState.isSomethingShowing());\n    super.onRestoreInstanceState(customViewState.getSuperState());\n    return;\n  }\n  // Stops a bug with the wrong state being passed to the super\n  super.onRestoreInstanceState(BaseSavedState.EMPTY_STATE); \n}\n```\n\n\n\n## View  \n\nView   ,  `ViewGroup`    `View`   `Measure -> Layout -> Draw`   .\n\n### Measure Pass\n\n  measure(int, int)     - .          .\n\n        .    - layout(int, int, int)  .          .\n\nView   2   .\n\n- **measured width & measured height** :         .\n- **drawing width & drawing height** :        .\n\nView Padding, Margin     Padding  Margin     Measured Width, Measured Height  Drawing Width, Drawing Height    .\n\n\n\n### Layout Pass\n\n , requestLayout()  .          .    top-down    ,    ViewGroup Measure       .\n\n\n\n### Draw Pass\n\nGPU   .     GPU   View Tree    Canvas  .  ,  1,2         .\n\n View  ,    2  , `Invaliadate()`    draw   , `requestLayout()`   measure -> layout -> draw    .\n\n\n\n   View   .\n\n\n\n###   View Rendering Process \n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    android:id=\"@+id/root1\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <androidx.constraintlayout.widget.ConstraintLayout\n        android:id=\"@+id/constraintContainer2\"\n        android:layout_width=\"400dp\"\n        android:layout_height=\"400dp\"\n        android:background=\"@color/teal_200\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintBottom_toBottomOf=\"parent\">\n\n        <TextView\n            android:id=\"@+id/constraintTextView3\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"First TextView\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\" />\n\n        <LinearLayout\n            android:id=\"@+id/linearContainer4\"\n            android:layout_width=\"200dp\"\n            android:layout_height=\"200dp\"\n            android:orientation=\"vertical\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\">\n\n            <ImageView\n                android:id=\"@+id/linearImageView5\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:background=\"@drawable/ic_launcher_foreground\"/>\n\n            <TextView\n                android:id=\"@+id/linearTextView5\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Second TextView\"/>\n\n            <RelativeLayout\n                android:id=\"@+id/relativeContainer5\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:background=\"@color/purple_500\">\n\n                <TextView\n                    android:id=\"@+id/relativeTextView6\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:text=\"Thired TextView\"/>\n\n            </RelativeLayout>\n\n        </LinearLayout>\n\n    </androidx.constraintlayout.widget.ConstraintLayout>\n\n    <FrameLayout\n        android:id=\"@+id/frameContainer2\"\n        android:layout_width=\"100dp\"\n        android:layout_height=\"100dp\"\n        android:background=\"@color/teal_200_30\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintBottom_toBottomOf=\"parent\" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\nroot Container      depth  View   ,      .\n\n{% asset_img UntitledDiagram.png [View Tree Example] %}\n\n View, ViewGroup onLayout      ,   View   .\n\n> doOnLayout, doOnDraw, doOnXXX        .\n\n### OnLayout   \n\n```kotlin\nlinearContainer4.doOnLayout {\n    println(\"linearContainer4 doOnLayout\")\n}\n\nconstraintContainer2.doOnLayout {\n    println(\"ConstraintContainer2 doOnLayout\")\n}\n\nconstraintTextView3.doOnLayout {\n    println(\"constraintTextView3 doOnLayout\")\n}\n\nroot1.doOnLayout {\n    println(\"root1 doOnLayout\")\n}\n\nrelativeContainer5.doOnLayout {\n    println(\"relativeContainer5 doOnLayout\")\n}\n\nrelativeTextView6.doOnLayout {\n    println(\"relativeTextView6 doOnLayout\")\n}\n\nlinearImageView5.doOnLayout {\n    println(\"linearImageView5 doOnLayout\")\n}\n\nlinearTextView5.doOnLayout {\n    println(\"linearTextView5 doOnLayout\")\n}\n\nframeContainer2.doOnLayout {\n    println(\"frameContainer2 doOnLayout\")\n}\n```\n\n{% asset_img image.png [onLayout Log] %}\n\nonLayout    View & ViewGroup  ****  ** **    .\n\n\n###     \n\nLayout   Chile View lifecycle     ,   . \n\n1. Child View    Parent View          , `(Layout )`\n2.      , Parent View    Child View     . `(Draw )`\n\n## Extra Info\n\n### **`layout_weight`  **\n\nLinear Layout  layout_weight       Measure pass     . \n\nlayout_weight       ,  View     ,  View              . \n\n View    Releative Layout & Constraint Layout  .\n\n### **Overdraw   **\n\nOverDraw   , **   Layout Background  **       . \n\n           ?\n\nLayout Background     View **Lifecycle onDraw  **   . UI        onDraw(GPU   ) ,   skip      . \n\n---\n\n View , View    . \n\n  View    Window, Surface, Canvas  ,        ,         .\n","slug":"2021-05-19 Android UI Rendering Optimization Part 1","published":1,"updated":"2021-07-25T13:28:20.235Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7kx00053lre02i6f7pq","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<span id=\"more\"></span>\n\n<p>      .      UI UX.       UI    ,  UI  UI  .</p>\n<p>      .    UI      View    ?      ,   ADD    .</p>\n<h2 id=\"Android-View\"><a href=\"#Android-View\" class=\"headerlink\" title=\"Android View\"></a>Android View</h2><p>    ,  .   .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%201/7AGranC.png\" class=\"\" title=\"[Android Views]\">\n\n<p>     <strong>View</strong>   . </p>\n<h3 id=\"View-amp-ViewGroup\"><a href=\"#View-amp-ViewGroup\" class=\"headerlink\" title=\"View &amp; ViewGroup\"></a>View &amp; ViewGroup</h3><p>    .      View ViewGroup    .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%201/EzHZMUm.png\" class=\"\" title=\"[View &amp; ViewGroup]\">\n\n<p><strong>View</strong> Activity,        .    ,  View     .  ImageView, TextView, Button   .        RemoteView     ,     .</p>\n<p><strong>ViewGroup</strong> View   .   , View N    .  LinearLayout, FrameLayout, RelativeLayout, ConsraintLayout .</p>\n<p>  View, ViewGroup Java,  Kotlin   ,    Mark-Up    .   XML   ,   XML Parser   Java .</p>\n<p>        ,      View        .    View    .</p>\n<h2 id=\"View-Life-Cycle\"><a href=\"#View-Life-Cycle\" class=\"headerlink\" title=\"View Life-Cycle\"></a>View Life-Cycle</h2><p>   ,   View    .  View, ViewGroup      ,  <code> </code>  .     ,       ,         .   View      .</p>\n<p> , Fragment  View  .</p>\n<p>View       ,</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%201/qu5Mr6x.png\" class=\"\" title=\"[View Life Cycle]\">\n\n\n<p>         .</p>\n<h3 id=\"Constructors\"><a href=\"#Constructors\" class=\"headerlink\" title=\"Constructors\"></a>Constructors</h3><p>Programmatically View  . View    ,     .</p>\n<p>   .</p>\n<ul>\n<li><code>View(Context context) </code></li>\n<li><code>View(Context context, @Nullable AttributeSet attrs) </code></li>\n<li><code>View(Context context, @Nullable AttributeSet attrs, int defStyleAttr) </code></li>\n<li><code>View(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes)</code></li>\n</ul>\n<h3 id=\"Attachment-Detachment\"><a href=\"#Attachment-Detachment\" class=\"headerlink\" title=\"Attachment / Detachment\"></a>Attachment / Detachment</h3><ul>\n<li><strong>Attachment</strong> Window  .</li>\n<li><strong>Detachment</strong> Window  .</li>\n</ul>\n<p>      Callback Function    .</p>\n<h3 id=\"onAttachedToWindow\"><a href=\"#onAttachedToWindow\" class=\"headerlink\" title=\"onAttachedToWindow()\"></a>onAttachedToWindow()</h3><p>View Window   .  View Active ,   ,   ,      .</p>\n<h3 id=\"onDetachedFromWindow\"><a href=\"#onDetachedFromWindow\" class=\"headerlink\" title=\"onDetachedFromWindow()\"></a>onDetachedFromWindow()</h3><p>View Window   . Window    , Inactive,  View   .      .</p>\n<ul>\n<li>ViewGroup View  </li>\n<li>Activity <code>finish()</code>   Activity Destroyed </li>\n</ul>\n<h3 id=\"onMeasure\"><a href=\"#onMeasure\" class=\"headerlink\" title=\"onMeasure()\"></a>onMeasure()</h3><p>View  . ViewGroup   View   ,      . ,   ViewGroup   .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *  View    Background Dimension Size  .</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *     Background , Background   .</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> widthMeasureSpec     </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> heightMeasureSpec     </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class=\"line\">  setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec),</span><br><span class=\"line\">                       getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"MeasureSpec\"><a href=\"#MeasureSpec\" class=\"headerlink\" title=\"MeasureSpec\"></a>MeasureSpec</h3><p>ViewGroup   View        ,  MeasureSpec  . MeasureSpec Width, Height  ,   .</p>\n<p>   .</p>\n<ul>\n<li><p><strong>MeasureSpec.EXACTLY</strong> :     .       .</p>\n</li>\n<li><p><strong>MeasureSpec.AT_MOST</strong> :        .</p>\n</li>\n<li><p><strong>MeasureSpec.UNSPECIFIED</strong> :      ,      .</p>\n</li>\n</ul>\n<p>     .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">int</span> mode = MeasureSpec.getMode(heightMeasureSpec)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mode != MeasureSpec.EXACTLY) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// Logic</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"onLayout\"><a href=\"#onLayout\" class=\"headerlink\" title=\"onLayout()\"></a>onLayout()</h3><p>   onLayout    View Window . </p>\n<p>View       .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onLayout</span><span class=\"params\">(<span class=\"keyword\">boolean</span> changed, <span class=\"keyword\">int</span> left, <span class=\"keyword\">int</span> top, <span class=\"keyword\">int</span> right, <span class=\"keyword\">int</span> bottom)</span></span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"onDraw\"><a href=\"#onDraw\" class=\"headerlink\" title=\"onDraw()\"></a>onDraw()</h3><p>onLayout View      ,   onDraw Canvas  ,  Canvas  DisplayList    . onDraw      .    CPU   ,     .</p>\n<p>View draw      .</p>\n<ul>\n<li>View     - invalidate()</li>\n<li>View     - requestLayout()</li>\n</ul>\n<h3 id=\"Invalidate\"><a href=\"#Invalidate\" class=\"headerlink\" title=\"Invalidate()\"></a>Invalidate()</h3><p>invalidate    ,  View  View     .</p>\n<p>     ,   invalidate    .</p>\n<ul>\n<li><strong>drawableStateChanged</strong> - Background,     , Foreground Drawable   ,     </li>\n<li><strong>setDefaultFocusHighlight</strong> -      .   </li>\n<li><strong>setForeground</strong></li>\n<li><strong>setScrollIndicators</strong> - indicator   .   ,       .</li>\n<li><strong>setAutoFilled</strong></li>\n<li><strong>requestAccessibilityFocus</strong> -         View        </li>\n<li><strong>setForceDarkAllowed</strong> -    </li>\n<li><strong>onDrawScrollBars</strong> -    </li>\n<li><strong>setLayerPaint</strong> -      . (alpha, Xfermode, colorFilter)</li>\n</ul>\n<h3 id=\"requestLayout\"><a href=\"#requestLayout\" class=\"headerlink\" title=\"requestLayout()\"></a>requestLayout()</h3><p>     .      onMeasure =&gt; onLayout .</p>\n<h2 id=\"View-State-Save-Restore\"><a href=\"#View-State-Save-Restore\" class=\"headerlink\" title=\"View State Save/Restore\"></a>View State Save/Restore</h2><p>View Activity    /  .     .</p>\n<h3 id=\"onSaveInstanceState-gt-Parcelable\"><a href=\"#onSaveInstanceState-gt-Parcelable\" class=\"headerlink\" title=\"onSaveInstanceState() -&gt; Parcelable\"></a>onSaveInstanceState() -&gt; Parcelable</h3><p>        View   ID .   Bundle    .</p>\n<p>Bundle Parcelable  ,     .</p>\n<p>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Parcelable <span class=\"title\">onSaveInstanceState</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  Bundle bundle = <span class=\"keyword\">new</span> Bundle();</span><br><span class=\"line\">  <span class=\"comment\">// The vars you want to save - in this instance a string and a boolean</span></span><br><span class=\"line\">  String someString = <span class=\"string\">&quot;something&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">boolean</span> someBoolean = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">  State state = <span class=\"keyword\">new</span> State(<span class=\"keyword\">super</span>.onSaveInstanceState(), someString, someBoolean);</span><br><span class=\"line\">  bundle.putParcelable(State.STATE, state);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> bundle;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>State  ,  State       . View      .</p>\n<h3 id=\"onRestoreInstanceState-Parcelable-state\"><a href=\"#onRestoreInstanceState-Parcelable-state\" class=\"headerlink\" title=\"onRestoreInstanceState(Parcelable state)\"></a>onRestoreInstanceState(Parcelable state)</h3><p>   Paracleable     . Parcelable   ,      .</p>\n<p> .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onRestoreInstanceState</span><span class=\"params\">(Parcelable state)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (state <span class=\"keyword\">instanceof</span> Bundle) &#123;</span><br><span class=\"line\">    Bundle bundle = (Bundle) state;</span><br><span class=\"line\">    State customViewState = (State) bundle.getParcelable(State.STATE);</span><br><span class=\"line\">    <span class=\"comment\">// The vars you saved - do whatever you want with them</span></span><br><span class=\"line\">    String someString = customViewState.getText();</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> someBoolean = customViewState.isSomethingShowing());</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.onRestoreInstanceState(customViewState.getSuperState());</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// Stops a bug with the wrong state being passed to the super</span></span><br><span class=\"line\">  <span class=\"keyword\">super</span>.onRestoreInstanceState(BaseSavedState.EMPTY_STATE); </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"View--\"><a href=\"#View--\" class=\"headerlink\" title=\"View  \"></a>View  </h2><p>View   ,  <code>ViewGroup</code>    <code>View</code>   <code>Measure -&gt; Layout -&gt; Draw</code>   .</p>\n<h3 id=\"Measure-Pass\"><a href=\"#Measure-Pass\" class=\"headerlink\" title=\"Measure Pass\"></a>Measure Pass</h3><p>  measure(int, int)     - .          .</p>\n<p>        .    - layout(int, int, int)  .          .</p>\n<p>View   2   .</p>\n<ul>\n<li><strong>measured width &amp; measured height</strong> :         .</li>\n<li><strong>drawing width &amp; drawing height</strong> :        .</li>\n</ul>\n<p>View Padding, Margin     Padding  Margin     Measured Width, Measured Height  Drawing Width, Drawing Height    .</p>\n<h3 id=\"Layout-Pass\"><a href=\"#Layout-Pass\" class=\"headerlink\" title=\"Layout Pass\"></a>Layout Pass</h3><p> , requestLayout()  .          .    top-down    ,    ViewGroup Measure       .</p>\n<h3 id=\"Draw-Pass\"><a href=\"#Draw-Pass\" class=\"headerlink\" title=\"Draw Pass\"></a>Draw Pass</h3><p>GPU   .     GPU   View Tree    Canvas  .  ,  1,2         .</p>\n<p> View  ,    2  , <code>Invaliadate()</code>    draw   , <code>requestLayout()</code>   measure -&gt; layout -&gt; draw    .</p>\n<p>   View   .</p>\n<h3 id=\"--View-Rendering-Process-\"><a href=\"#--View-Rendering-Process-\" class=\"headerlink\" title=\"  View Rendering Process \"></a>  View Rendering Process </h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/root1&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">tools:context</span>=<span class=\"string\">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/constraintContainer2&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;400dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;400dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@color/teal_200&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/constraintTextView3&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;First TextView&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/linearContainer4&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;200dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;200dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;vertical&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/linearImageView5&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@drawable/ic_launcher_foreground&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/linearTextView5&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;Second TextView&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">RelativeLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/relativeContainer5&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@color/purple_500&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/relativeTextView6&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;Thired TextView&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">RelativeLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">FrameLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/frameContainer2&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;100dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;100dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@color/teal_200_30&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>root Container      depth  View   ,      .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%201/UntitledDiagram.png\" class=\"\" title=\"[View Tree Example]\">\n\n<p> View, ViewGroup onLayout      ,   View   .</p>\n<blockquote>\n<p>doOnLayout, doOnDraw, doOnXXX        .</p>\n</blockquote>\n<h3 id=\"OnLayout---\"><a href=\"#OnLayout---\" class=\"headerlink\" title=\"OnLayout   \"></a>OnLayout   </h3><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">linearContainer4.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;linearContainer4 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">constraintContainer2.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;ConstraintContainer2 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">constraintTextView3.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;constraintTextView3 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">root1.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;root1 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">relativeContainer5.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;relativeContainer5 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">relativeTextView6.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;relativeTextView6 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">linearImageView5.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;linearImageView5 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">linearTextView5.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;linearTextView5 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">frameContainer2.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;frameContainer2 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%201/image.png\" class=\"\" title=\"[onLayout Log]\">\n\n<p>onLayout    View &amp; ViewGroup  <strong></strong>  <strong> </strong>    .</p>\n<h3 id=\"----\"><a href=\"#----\" class=\"headerlink\" title=\"    \"></a>    </h3><p>Layout   Chile View lifecycle     ,   . </p>\n<ol>\n<li>Child View    Parent View          , <code>(Layout )</code></li>\n<li>     , Parent View    Child View     . <code>(Draw )</code></li>\n</ol>\n<h2 id=\"Extra-Info\"><a href=\"#Extra-Info\" class=\"headerlink\" title=\"Extra Info\"></a>Extra Info</h2><h3 id=\"layout-weight--\"><a href=\"#layout-weight--\" class=\"headerlink\" title=\"layout_weight  \"></a><strong><code>layout_weight</code>  </strong></h3><p>Linear Layout  layout_weight       Measure pass     . </p>\n<p>layout_weight       ,  View     ,  View              . </p>\n<p> View    Releative Layout &amp; Constraint Layout  .</p>\n<h3 id=\"Overdraw---\"><a href=\"#Overdraw---\" class=\"headerlink\" title=\"Overdraw   \"></a><strong>Overdraw   </strong></h3><p>OverDraw   , <strong>   Layout Background  </strong>       . </p>\n<p>           ?</p>\n<p>Layout Background     View <strong>Lifecycle onDraw  </strong>   . UI        onDraw(GPU   ) ,   skip      . </p>\n<hr>\n<p> View , View    . </p>\n<p>  View    Window, Surface, Canvas  ,        ,         .</p>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<p>      .      UI UX.       UI    ,  UI  UI  .</p>\n<p>      .    UI      View    ?      ,   ADD    .</p>\n<h2 id=\"Android-View\"><a href=\"#Android-View\" class=\"headerlink\" title=\"Android View\"></a>Android View</h2><p>    ,  .   .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%201/7AGranC.png\" class=\"\" title=\"[Android Views]\">\n\n<p>     <strong>View</strong>   . </p>\n<h3 id=\"View-amp-ViewGroup\"><a href=\"#View-amp-ViewGroup\" class=\"headerlink\" title=\"View &amp; ViewGroup\"></a>View &amp; ViewGroup</h3><p>    .      View ViewGroup    .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%201/EzHZMUm.png\" class=\"\" title=\"[View &amp; ViewGroup]\">\n\n<p><strong>View</strong> Activity,        .    ,  View     .  ImageView, TextView, Button   .        RemoteView     ,     .</p>\n<p><strong>ViewGroup</strong> View   .   , View N    .  LinearLayout, FrameLayout, RelativeLayout, ConsraintLayout .</p>\n<p>  View, ViewGroup Java,  Kotlin   ,    Mark-Up    .   XML   ,   XML Parser   Java .</p>\n<p>        ,      View        .    View    .</p>\n<h2 id=\"View-Life-Cycle\"><a href=\"#View-Life-Cycle\" class=\"headerlink\" title=\"View Life-Cycle\"></a>View Life-Cycle</h2><p>   ,   View    .  View, ViewGroup      ,  <code> </code>  .     ,       ,         .   View      .</p>\n<p> , Fragment  View  .</p>\n<p>View       ,</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%201/qu5Mr6x.png\" class=\"\" title=\"[View Life Cycle]\">\n\n\n<p>         .</p>\n<h3 id=\"Constructors\"><a href=\"#Constructors\" class=\"headerlink\" title=\"Constructors\"></a>Constructors</h3><p>Programmatically View  . View    ,     .</p>\n<p>   .</p>\n<ul>\n<li><code>View(Context context) </code></li>\n<li><code>View(Context context, @Nullable AttributeSet attrs) </code></li>\n<li><code>View(Context context, @Nullable AttributeSet attrs, int defStyleAttr) </code></li>\n<li><code>View(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes)</code></li>\n</ul>\n<h3 id=\"Attachment-Detachment\"><a href=\"#Attachment-Detachment\" class=\"headerlink\" title=\"Attachment / Detachment\"></a>Attachment / Detachment</h3><ul>\n<li><strong>Attachment</strong> Window  .</li>\n<li><strong>Detachment</strong> Window  .</li>\n</ul>\n<p>      Callback Function    .</p>\n<h3 id=\"onAttachedToWindow\"><a href=\"#onAttachedToWindow\" class=\"headerlink\" title=\"onAttachedToWindow()\"></a>onAttachedToWindow()</h3><p>View Window   .  View Active ,   ,   ,      .</p>\n<h3 id=\"onDetachedFromWindow\"><a href=\"#onDetachedFromWindow\" class=\"headerlink\" title=\"onDetachedFromWindow()\"></a>onDetachedFromWindow()</h3><p>View Window   . Window    , Inactive,  View   .      .</p>\n<ul>\n<li>ViewGroup View  </li>\n<li>Activity <code>finish()</code>   Activity Destroyed </li>\n</ul>\n<h3 id=\"onMeasure\"><a href=\"#onMeasure\" class=\"headerlink\" title=\"onMeasure()\"></a>onMeasure()</h3><p>View  . ViewGroup   View   ,      . ,   ViewGroup   .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *  View    Background Dimension Size  .</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> *     Background , Background   .</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> widthMeasureSpec     </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> heightMeasureSpec     </span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class=\"line\">  setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec),</span><br><span class=\"line\">                       getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"MeasureSpec\"><a href=\"#MeasureSpec\" class=\"headerlink\" title=\"MeasureSpec\"></a>MeasureSpec</h3><p>ViewGroup   View        ,  MeasureSpec  . MeasureSpec Width, Height  ,   .</p>\n<p>   .</p>\n<ul>\n<li><p><strong>MeasureSpec.EXACTLY</strong> :     .       .</p>\n</li>\n<li><p><strong>MeasureSpec.AT_MOST</strong> :        .</p>\n</li>\n<li><p><strong>MeasureSpec.UNSPECIFIED</strong> :      ,      .</p>\n</li>\n</ul>\n<p>     .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">int</span> mode = MeasureSpec.getMode(heightMeasureSpec)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mode != MeasureSpec.EXACTLY) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// Logic</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"onLayout\"><a href=\"#onLayout\" class=\"headerlink\" title=\"onLayout()\"></a>onLayout()</h3><p>   onLayout    View Window . </p>\n<p>View       .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onLayout</span><span class=\"params\">(<span class=\"keyword\">boolean</span> changed, <span class=\"keyword\">int</span> left, <span class=\"keyword\">int</span> top, <span class=\"keyword\">int</span> right, <span class=\"keyword\">int</span> bottom)</span></span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"onDraw\"><a href=\"#onDraw\" class=\"headerlink\" title=\"onDraw()\"></a>onDraw()</h3><p>onLayout View      ,   onDraw Canvas  ,  Canvas  DisplayList    . onDraw      .    CPU   ,     .</p>\n<p>View draw      .</p>\n<ul>\n<li>View     - invalidate()</li>\n<li>View     - requestLayout()</li>\n</ul>\n<h3 id=\"Invalidate\"><a href=\"#Invalidate\" class=\"headerlink\" title=\"Invalidate()\"></a>Invalidate()</h3><p>invalidate    ,  View  View     .</p>\n<p>     ,   invalidate    .</p>\n<ul>\n<li><strong>drawableStateChanged</strong> - Background,     , Foreground Drawable   ,     </li>\n<li><strong>setDefaultFocusHighlight</strong> -      .   </li>\n<li><strong>setForeground</strong></li>\n<li><strong>setScrollIndicators</strong> - indicator   .   ,       .</li>\n<li><strong>setAutoFilled</strong></li>\n<li><strong>requestAccessibilityFocus</strong> -         View        </li>\n<li><strong>setForceDarkAllowed</strong> -    </li>\n<li><strong>onDrawScrollBars</strong> -    </li>\n<li><strong>setLayerPaint</strong> -      . (alpha, Xfermode, colorFilter)</li>\n</ul>\n<h3 id=\"requestLayout\"><a href=\"#requestLayout\" class=\"headerlink\" title=\"requestLayout()\"></a>requestLayout()</h3><p>     .      onMeasure =&gt; onLayout .</p>\n<h2 id=\"View-State-Save-Restore\"><a href=\"#View-State-Save-Restore\" class=\"headerlink\" title=\"View State Save/Restore\"></a>View State Save/Restore</h2><p>View Activity    /  .     .</p>\n<h3 id=\"onSaveInstanceState-gt-Parcelable\"><a href=\"#onSaveInstanceState-gt-Parcelable\" class=\"headerlink\" title=\"onSaveInstanceState() -&gt; Parcelable\"></a>onSaveInstanceState() -&gt; Parcelable</h3><p>        View   ID .   Bundle    .</p>\n<p>Bundle Parcelable  ,     .</p>\n<p>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Parcelable <span class=\"title\">onSaveInstanceState</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  Bundle bundle = <span class=\"keyword\">new</span> Bundle();</span><br><span class=\"line\">  <span class=\"comment\">// The vars you want to save - in this instance a string and a boolean</span></span><br><span class=\"line\">  String someString = <span class=\"string\">&quot;something&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">boolean</span> someBoolean = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">  State state = <span class=\"keyword\">new</span> State(<span class=\"keyword\">super</span>.onSaveInstanceState(), someString, someBoolean);</span><br><span class=\"line\">  bundle.putParcelable(State.STATE, state);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> bundle;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>State  ,  State       . View      .</p>\n<h3 id=\"onRestoreInstanceState-Parcelable-state\"><a href=\"#onRestoreInstanceState-Parcelable-state\" class=\"headerlink\" title=\"onRestoreInstanceState(Parcelable state)\"></a>onRestoreInstanceState(Parcelable state)</h3><p>   Paracleable     . Parcelable   ,      .</p>\n<p> .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onRestoreInstanceState</span><span class=\"params\">(Parcelable state)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (state <span class=\"keyword\">instanceof</span> Bundle) &#123;</span><br><span class=\"line\">    Bundle bundle = (Bundle) state;</span><br><span class=\"line\">    State customViewState = (State) bundle.getParcelable(State.STATE);</span><br><span class=\"line\">    <span class=\"comment\">// The vars you saved - do whatever you want with them</span></span><br><span class=\"line\">    String someString = customViewState.getText();</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> someBoolean = customViewState.isSomethingShowing());</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.onRestoreInstanceState(customViewState.getSuperState());</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// Stops a bug with the wrong state being passed to the super</span></span><br><span class=\"line\">  <span class=\"keyword\">super</span>.onRestoreInstanceState(BaseSavedState.EMPTY_STATE); </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"View--\"><a href=\"#View--\" class=\"headerlink\" title=\"View  \"></a>View  </h2><p>View   ,  <code>ViewGroup</code>    <code>View</code>   <code>Measure -&gt; Layout -&gt; Draw</code>   .</p>\n<h3 id=\"Measure-Pass\"><a href=\"#Measure-Pass\" class=\"headerlink\" title=\"Measure Pass\"></a>Measure Pass</h3><p>  measure(int, int)     - .          .</p>\n<p>        .    - layout(int, int, int)  .          .</p>\n<p>View   2   .</p>\n<ul>\n<li><strong>measured width &amp; measured height</strong> :         .</li>\n<li><strong>drawing width &amp; drawing height</strong> :        .</li>\n</ul>\n<p>View Padding, Margin     Padding  Margin     Measured Width, Measured Height  Drawing Width, Drawing Height    .</p>\n<h3 id=\"Layout-Pass\"><a href=\"#Layout-Pass\" class=\"headerlink\" title=\"Layout Pass\"></a>Layout Pass</h3><p> , requestLayout()  .          .    top-down    ,    ViewGroup Measure       .</p>\n<h3 id=\"Draw-Pass\"><a href=\"#Draw-Pass\" class=\"headerlink\" title=\"Draw Pass\"></a>Draw Pass</h3><p>GPU   .     GPU   View Tree    Canvas  .  ,  1,2         .</p>\n<p> View  ,    2  , <code>Invaliadate()</code>    draw   , <code>requestLayout()</code>   measure -&gt; layout -&gt; draw    .</p>\n<p>   View   .</p>\n<h3 id=\"--View-Rendering-Process-\"><a href=\"#--View-Rendering-Process-\" class=\"headerlink\" title=\"  View Rendering Process \"></a>  View Rendering Process </h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/root1&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">tools:context</span>=<span class=\"string\">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/constraintContainer2&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;400dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;400dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@color/teal_200&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/constraintTextView3&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;First TextView&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintStart_toStartOf</span>=<span class=\"string\">&quot;parent&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/linearContainer4&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;200dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;200dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;vertical&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/linearImageView5&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@drawable/ic_launcher_foreground&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/linearTextView5&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;Second TextView&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">RelativeLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/relativeContainer5&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@color/purple_500&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/relativeTextView6&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;Thired TextView&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">RelativeLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">FrameLayout</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/frameContainer2&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;100dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;100dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@color/teal_200_30&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintEnd_toEndOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>root Container      depth  View   ,      .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%201/UntitledDiagram.png\" class=\"\" title=\"[View Tree Example]\">\n\n<p> View, ViewGroup onLayout      ,   View   .</p>\n<blockquote>\n<p>doOnLayout, doOnDraw, doOnXXX        .</p>\n</blockquote>\n<h3 id=\"OnLayout---\"><a href=\"#OnLayout---\" class=\"headerlink\" title=\"OnLayout   \"></a>OnLayout   </h3><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">linearContainer4.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;linearContainer4 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">constraintContainer2.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;ConstraintContainer2 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">constraintTextView3.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;constraintTextView3 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">root1.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;root1 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">relativeContainer5.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;relativeContainer5 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">relativeTextView6.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;relativeTextView6 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">linearImageView5.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;linearImageView5 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">linearTextView5.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;linearTextView5 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">frameContainer2.doOnLayout &#123;</span><br><span class=\"line\">    println(<span class=\"string\">&quot;frameContainer2 doOnLayout&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%201/image.png\" class=\"\" title=\"[onLayout Log]\">\n\n<p>onLayout    View &amp; ViewGroup  <strong></strong>  <strong> </strong>    .</p>\n<h3 id=\"----\"><a href=\"#----\" class=\"headerlink\" title=\"    \"></a>    </h3><p>Layout   Chile View lifecycle     ,   . </p>\n<ol>\n<li>Child View    Parent View          , <code>(Layout )</code></li>\n<li>     , Parent View    Child View     . <code>(Draw )</code></li>\n</ol>\n<h2 id=\"Extra-Info\"><a href=\"#Extra-Info\" class=\"headerlink\" title=\"Extra Info\"></a>Extra Info</h2><h3 id=\"layout-weight--\"><a href=\"#layout-weight--\" class=\"headerlink\" title=\"layout_weight  \"></a><strong><code>layout_weight</code>  </strong></h3><p>Linear Layout  layout_weight       Measure pass     . </p>\n<p>layout_weight       ,  View     ,  View              . </p>\n<p> View    Releative Layout &amp; Constraint Layout  .</p>\n<h3 id=\"Overdraw---\"><a href=\"#Overdraw---\" class=\"headerlink\" title=\"Overdraw   \"></a><strong>Overdraw   </strong></h3><p>OverDraw   , <strong>   Layout Background  </strong>       . </p>\n<p>           ?</p>\n<p>Layout Background     View <strong>Lifecycle onDraw  </strong>   . UI        onDraw(GPU   ) ,   skip      . </p>\n<hr>\n<p> View , View    . </p>\n<p>  View    Window, Surface, Canvas  ,        ,         .</p>"},{"title":"Introduce Android UI Rendering Principle and View Optimization Part 2","date":"2021-05-18T17:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_ui_rendering.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n  View ViewGroup , UI  , UI   View   .  UI Rendering        .\n\n## UI Rendering\n\n  Google Android Source Document [ ](https://source.android.com/devices/graphics/architecture)   .\n\n        , **Window, Surface, Canvas, View**    .\n\n### Window\n\n **   **(Window).      Surface  ,  WindowManager   Window , Window  Surface  UI .\n\n   Window , WindowManager   . \n\n PhoneWindowManager, DialogWindowManager   .\n\n## Surface and SurfacHolder\n\n     , **Surface**  .  Surface SurfaceHolder    .\n\n### Surface\n\nSurface         .   Android 1.0  API  ,     **Surface**   **Screen Compositor**   Raw    .\n\n  ,      .\n\n{% asset_img ptHtNno.png [Surface & Surface Flinger] %}\n\n    **Surface** .  **BufferQueue**     ()       () .\n\n**Suface**   **BufferQueue** (Producer),    **SurfaceFlinger**(Consumer)  .    drawing  Application  .\n\n Surface **  **  1  ( 2)  .\n\n####   (Double Buffer Rendering)\n\n    ** ** ,        ,          ,          Flicker    .\n\n        ,        ,       Flicker  .\n\n### SurfaceFlinger\n\nSurfaceFlinger         . SurfaceFlinger BufferQueue  SurfaceControl     .\n\n  10 **ASurfaceControl**    .\n\n  Google Android Source Document [SurfaceFlinger  WindowManager](https://source.android.com/devices/graphics/surfaceflinger-windowmanager) .\n\n### SurfaceHolder\n\nSurfaceHolder   Surface     .      ,  **SurfaceView, GLSurfaceView**  .         .  VIew  onDraw   , Thread     .\n\n### Canvas Rendering\n\n   UI   [OpenGL ES](https://source.android.com/devices/graphics/arch-egl-opengl)  [Vulkan](https://source.android.com/devices/graphics/arch-vulkan)  View .\n\n,    .  2D ,    ,    API     .  **Canvas Rendering** .\n\nCanvas     .\n\n- **onDraw() **\n- Canvas( ) => Paint( )\n-   , Drawable   BitmapDrawable    .\n-    ( ) .\n- Drawable    **XML** (      !)\n-  Drawable(   ,  ..)\n- NinePatch \n-  SKIA   c++ native API  .\n\n\n\n     .       ,     .\n\n      Rendering Process (   `onDraw()`     ),   Canvas Rendering            .\n\n  [Skia  ](https://skia.org/) .          API .\n\nCanvas       Bitmap   .\n\nSurface      .\n\n{% asset_img JNfYVx7.png [android canvas drawing] %}\n\n ,  View  Rect    , Skia     . Skia     .           ,       . **lockCanvas()**       Canvas .  **unlockCanvasAnsPost()**   ,  compositor .\n\n     ,  Surface  .\n\n View  ,   3D    ,    UI   [OpenGL ES](https://source.android.com/devices/graphics/arch-egl-opengl)  [Vulkan](https://source.android.com/devices/graphics/arch-vulkan)  View  .    API   ,   Canvas API  .\n\n---\n\n         ,              .\n\n## Surface Flinger and Harware Composer\n\n [Android Drawing Process 1(App surface, SF Layer)](https://lastyouth.tistory.com/24)  .\n\n  **SyrfaceFlinger** **HWComposer(Hardware Composer)**      .\n\n  ,    .\n\n{% asset_img cK00ybR.png [Surface Flinger and Harware Composer] %}\n\n### Layer Management\n\n Layer Management       Surface SufraceFlinger  Layer  .    .\n\n{% asset_img 7990Bf0.png [Layer Management] %}\n\n### Screen Refreshing\n\n    ,     60  .     90hz, 120hz    ,      fps  .\n\n     , 60 FPS(1 60) ,  , 16ms          , 16ms  draw  .\n\n 4.0 - ICS( )  Screen Refershing Framebuffer  SurfaceFligner Thread         .\n\n 16ms     ? View        ,    ,        .  \" \"    ,  `Frame Drop`  . `Frame Drop`         ,          CPU & GPU    .\n\n   UI    , **(tearing)** / ** (Frame Drop)**   . \n\n{% asset_img image.png [Frame Drop] %}\n\n### Project Butter\n\n{% asset_img n6fsbPA.png [Proejct Butter] %}\n\n    Android 4.1JB()  **Project Butter**  60hz  60 FPS   .\n\n          .\n\nProejct Butter     **VSync**  **Choreographer** .\n\n### Vsync Processing\n\n**VSync** Vertical Synchronization( ) . \n\n{% asset_img ha7Eriy.png [Drawing with VSync] %}\n\n**VSync**        ,   .  , GPU Rendering Rate,  fps Device Presenting Rate,  hz     .\n\n, GPU   100fps(  100  ), Device Screen  60hz(  60  ), GPU    Device Screen    (Delay)   .\n\n , VSync GPU  Device  (Time Gap)       . VSync  Detail      [Android Performance Patterns: Understanding VSYNC](https://www.youtube.com/watch?v=1iaHxmfZGGc)  .\n\n\n\n### Choreographer\n\nSurfaceFlinger  Vsync Event /   .\n\n- **Input Event Handling**\n- **Self-Invalidation**\n- **Animation**\n\n\n\n### ViewRootImpl\n\n**ViewRootImpl** DecorView **Choreographer**      , DecorView Choreographer     .\n\n\n\n### Rendering Flow\n\n **Vsync Process**   .\n\n{% asset_img 1ZQEOg0.png [Rendering Flow] %}\n\n   foreground       .\n\n1.    `Invalidate`   ViewRootImpl  `scheduleTraversal()`  . \n\n   `scheduleTraversal()`   **Choreographer**   Vsync    .     Invalidate Vsync scheduling .\n\n2. Choreographer VSync   Frame Render Screen Rate . Vsync    Choreographer SurfaceFlinger   Vsync    .\n\n3.  Vsync signal  Choreographer .\n\n4. Choreographer ViewRootImpl `performTraversal()`  . performTraversal       `measure()`,  .\n\n5.  `performDraw()`    .\n\n\n\n## Software Rendering Model V.S. Hardare Rendering Model\n\n   3.0((API  11, ))  .      .\n\n### Software Rendering Model\n\nSoftware Rendering Model Android 3.0    .\n\nCPU  ,   .\n\n1.   \n2.   \n\n\n\n### Hardare Rendering Model (By using GPU)\n\nAndroid 3.0 Android 2D     , `View`      GPU .\n\n         RAM .\n\nAndroid   `invalidate()`  `draw()`     ,    .\n\nAndroid      ,          .\n\n Android  `invalidate()`            .\n\n             .       .\n\n1.   \n2.     \n3.   \n\n### Internal UI Rendering Optimization\n\n  `  `(Button, TextView, etc.)        .\n\n{% asset_img image-1.png [View Rendering Principle] %}\n\n- CPU Level    ,      `displaylist`  .\n- GPU          `Rasterization` . CPU   OpenGL-ES api  GPU  ,  .   displaylist  ,    displaylist                 .\n\nUI   , CPU displaylist   GPU     (High Cost) ,   .\n\n## Extra Info\n### Displaylist ?\n\n{% asset_img 4.png [Displaylist] %}\n\n 3.0  View  , ViewRoot  . View ViewGroup, ViewRoot   View        .\n\n  Displaylist  ,  UI       . UI   ,  View Tree          .\n\n---\n\n Window, Surface, Canvas  ,        .  View             .\n\n     GPU      ,   ,    .         .\n\n\n","source":"_posts/2021-05-19 Android UI Rendering Optimization Part 2.md","raw":"---\ntitle: Introduce Android UI Rendering Principle and View Optimization Part 2\ndate: 2021-05-19 02:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_ui_rendering.png\ncategories:\n- User Interface\ntags:\n- Android\n- Rendering\n- Principle\n- Optimize\n- UI\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n  View ViewGroup , UI  , UI   View   .  UI Rendering        .\n\n## UI Rendering\n\n  Google Android Source Document [ ](https://source.android.com/devices/graphics/architecture)   .\n\n        , **Window, Surface, Canvas, View**    .\n\n### Window\n\n **   **(Window).      Surface  ,  WindowManager   Window , Window  Surface  UI .\n\n   Window , WindowManager   . \n\n PhoneWindowManager, DialogWindowManager   .\n\n## Surface and SurfacHolder\n\n     , **Surface**  .  Surface SurfaceHolder    .\n\n### Surface\n\nSurface         .   Android 1.0  API  ,     **Surface**   **Screen Compositor**   Raw    .\n\n  ,      .\n\n{% asset_img ptHtNno.png [Surface & Surface Flinger] %}\n\n    **Surface** .  **BufferQueue**     ()       () .\n\n**Suface**   **BufferQueue** (Producer),    **SurfaceFlinger**(Consumer)  .    drawing  Application  .\n\n Surface **  **  1  ( 2)  .\n\n####   (Double Buffer Rendering)\n\n    ** ** ,        ,          ,          Flicker    .\n\n        ,        ,       Flicker  .\n\n### SurfaceFlinger\n\nSurfaceFlinger         . SurfaceFlinger BufferQueue  SurfaceControl     .\n\n  10 **ASurfaceControl**    .\n\n  Google Android Source Document [SurfaceFlinger  WindowManager](https://source.android.com/devices/graphics/surfaceflinger-windowmanager) .\n\n### SurfaceHolder\n\nSurfaceHolder   Surface     .      ,  **SurfaceView, GLSurfaceView**  .         .  VIew  onDraw   , Thread     .\n\n### Canvas Rendering\n\n   UI   [OpenGL ES](https://source.android.com/devices/graphics/arch-egl-opengl)  [Vulkan](https://source.android.com/devices/graphics/arch-vulkan)  View .\n\n,    .  2D ,    ,    API     .  **Canvas Rendering** .\n\nCanvas     .\n\n- **onDraw() **\n- Canvas( ) => Paint( )\n-   , Drawable   BitmapDrawable    .\n-    ( ) .\n- Drawable    **XML** (      !)\n-  Drawable(   ,  ..)\n- NinePatch \n-  SKIA   c++ native API  .\n\n\n\n     .       ,     .\n\n      Rendering Process (   `onDraw()`     ),   Canvas Rendering            .\n\n  [Skia  ](https://skia.org/) .          API .\n\nCanvas       Bitmap   .\n\nSurface      .\n\n{% asset_img JNfYVx7.png [android canvas drawing] %}\n\n ,  View  Rect    , Skia     . Skia     .           ,       . **lockCanvas()**       Canvas .  **unlockCanvasAnsPost()**   ,  compositor .\n\n     ,  Surface  .\n\n View  ,   3D    ,    UI   [OpenGL ES](https://source.android.com/devices/graphics/arch-egl-opengl)  [Vulkan](https://source.android.com/devices/graphics/arch-vulkan)  View  .    API   ,   Canvas API  .\n\n---\n\n         ,              .\n\n## Surface Flinger and Harware Composer\n\n [Android Drawing Process 1(App surface, SF Layer)](https://lastyouth.tistory.com/24)  .\n\n  **SyrfaceFlinger** **HWComposer(Hardware Composer)**      .\n\n  ,    .\n\n{% asset_img cK00ybR.png [Surface Flinger and Harware Composer] %}\n\n### Layer Management\n\n Layer Management       Surface SufraceFlinger  Layer  .    .\n\n{% asset_img 7990Bf0.png [Layer Management] %}\n\n### Screen Refreshing\n\n    ,     60  .     90hz, 120hz    ,      fps  .\n\n     , 60 FPS(1 60) ,  , 16ms          , 16ms  draw  .\n\n 4.0 - ICS( )  Screen Refershing Framebuffer  SurfaceFligner Thread         .\n\n 16ms     ? View        ,    ,        .  \" \"    ,  `Frame Drop`  . `Frame Drop`         ,          CPU & GPU    .\n\n   UI    , **(tearing)** / ** (Frame Drop)**   . \n\n{% asset_img image.png [Frame Drop] %}\n\n### Project Butter\n\n{% asset_img n6fsbPA.png [Proejct Butter] %}\n\n    Android 4.1JB()  **Project Butter**  60hz  60 FPS   .\n\n          .\n\nProejct Butter     **VSync**  **Choreographer** .\n\n### Vsync Processing\n\n**VSync** Vertical Synchronization( ) . \n\n{% asset_img ha7Eriy.png [Drawing with VSync] %}\n\n**VSync**        ,   .  , GPU Rendering Rate,  fps Device Presenting Rate,  hz     .\n\n, GPU   100fps(  100  ), Device Screen  60hz(  60  ), GPU    Device Screen    (Delay)   .\n\n , VSync GPU  Device  (Time Gap)       . VSync  Detail      [Android Performance Patterns: Understanding VSYNC](https://www.youtube.com/watch?v=1iaHxmfZGGc)  .\n\n\n\n### Choreographer\n\nSurfaceFlinger  Vsync Event /   .\n\n- **Input Event Handling**\n- **Self-Invalidation**\n- **Animation**\n\n\n\n### ViewRootImpl\n\n**ViewRootImpl** DecorView **Choreographer**      , DecorView Choreographer     .\n\n\n\n### Rendering Flow\n\n **Vsync Process**   .\n\n{% asset_img 1ZQEOg0.png [Rendering Flow] %}\n\n   foreground       .\n\n1.    `Invalidate`   ViewRootImpl  `scheduleTraversal()`  . \n\n   `scheduleTraversal()`   **Choreographer**   Vsync    .     Invalidate Vsync scheduling .\n\n2. Choreographer VSync   Frame Render Screen Rate . Vsync    Choreographer SurfaceFlinger   Vsync    .\n\n3.  Vsync signal  Choreographer .\n\n4. Choreographer ViewRootImpl `performTraversal()`  . performTraversal       `measure()`,  .\n\n5.  `performDraw()`    .\n\n\n\n## Software Rendering Model V.S. Hardare Rendering Model\n\n   3.0((API  11, ))  .      .\n\n### Software Rendering Model\n\nSoftware Rendering Model Android 3.0    .\n\nCPU  ,   .\n\n1.   \n2.   \n\n\n\n### Hardare Rendering Model (By using GPU)\n\nAndroid 3.0 Android 2D     , `View`      GPU .\n\n         RAM .\n\nAndroid   `invalidate()`  `draw()`     ,    .\n\nAndroid      ,          .\n\n Android  `invalidate()`            .\n\n             .       .\n\n1.   \n2.     \n3.   \n\n### Internal UI Rendering Optimization\n\n  `  `(Button, TextView, etc.)        .\n\n{% asset_img image-1.png [View Rendering Principle] %}\n\n- CPU Level    ,      `displaylist`  .\n- GPU          `Rasterization` . CPU   OpenGL-ES api  GPU  ,  .   displaylist  ,    displaylist                 .\n\nUI   , CPU displaylist   GPU     (High Cost) ,   .\n\n## Extra Info\n### Displaylist ?\n\n{% asset_img 4.png [Displaylist] %}\n\n 3.0  View  , ViewRoot  . View ViewGroup, ViewRoot   View        .\n\n  Displaylist  ,  UI       . UI   ,  View Tree          .\n\n---\n\n Window, Surface, Canvas  ,        .  View             .\n\n     GPU      ,   ,    .         .\n\n\n","slug":"2021-05-19 Android UI Rendering Optimization Part 2","published":1,"updated":"2021-07-25T13:28:24.789Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7ky00063lreddjqc1bt","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<span id=\"more\"></span>\n\n<p>  View ViewGroup , UI  , UI   View   .  UI Rendering        .</p>\n<h2 id=\"UI-Rendering\"><a href=\"#UI-Rendering\" class=\"headerlink\" title=\"UI Rendering\"></a>UI Rendering</h2><p>  Google Android Source Document <a href=\"https://source.android.com/devices/graphics/architecture\"> </a>   .</p>\n<p>        , <strong>Window, Surface, Canvas, View</strong>    .</p>\n<h3 id=\"Window\"><a href=\"#Window\" class=\"headerlink\" title=\"Window\"></a>Window</h3><p> <strong>   </strong>(Window).      Surface  ,  WindowManager   Window , Window  Surface  UI .</p>\n<p>   Window , WindowManager   . </p>\n<p> PhoneWindowManager, DialogWindowManager   .</p>\n<h2 id=\"Surface-and-SurfacHolder\"><a href=\"#Surface-and-SurfacHolder\" class=\"headerlink\" title=\"Surface and SurfacHolder\"></a>Surface and SurfacHolder</h2><p>     , <strong>Surface</strong>  .  Surface SurfaceHolder    .</p>\n<h3 id=\"Surface\"><a href=\"#Surface\" class=\"headerlink\" title=\"Surface\"></a>Surface</h3><p>Surface         .   Android 1.0  API  ,     <strong>Surface</strong>   <strong>Screen Compositor</strong>   Raw    .</p>\n<p>  ,      .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/ptHtNno.png\" class=\"\" title=\"[Surface &amp; Surface Flinger]\">\n\n<p>    <strong>Surface</strong> .  <strong>BufferQueue</strong>     ()       () .</p>\n<p><strong>Suface</strong>   <strong>BufferQueue</strong> (Producer),    <strong>SurfaceFlinger</strong>(Consumer)  .    drawing  Application  .</p>\n<p> Surface <strong>  </strong>  1  ( 2)  .</p>\n<h4 id=\"---Double-Buffer-Rendering\"><a href=\"#---Double-Buffer-Rendering\" class=\"headerlink\" title=\"  (Double Buffer Rendering)\"></a>  (Double Buffer Rendering)</h4><p>    <strong> </strong> ,        ,          ,          Flicker    .</p>\n<p>        ,        ,       Flicker  .</p>\n<h3 id=\"SurfaceFlinger\"><a href=\"#SurfaceFlinger\" class=\"headerlink\" title=\"SurfaceFlinger\"></a>SurfaceFlinger</h3><p>SurfaceFlinger         . SurfaceFlinger BufferQueue  SurfaceControl     .</p>\n<p>  10 <strong>ASurfaceControl</strong>    .</p>\n<p>  Google Android Source Document <a href=\"https://source.android.com/devices/graphics/surfaceflinger-windowmanager\">SurfaceFlinger  WindowManager</a> .</p>\n<h3 id=\"SurfaceHolder\"><a href=\"#SurfaceHolder\" class=\"headerlink\" title=\"SurfaceHolder\"></a>SurfaceHolder</h3><p>SurfaceHolder   Surface     .      ,  <strong>SurfaceView, GLSurfaceView</strong>  .         .  VIew  onDraw   , Thread     .</p>\n<h3 id=\"Canvas-Rendering\"><a href=\"#Canvas-Rendering\" class=\"headerlink\" title=\"Canvas Rendering\"></a>Canvas Rendering</h3><p>   UI   <a href=\"https://source.android.com/devices/graphics/arch-egl-opengl\">OpenGL ES</a>  <a href=\"https://source.android.com/devices/graphics/arch-vulkan\">Vulkan</a>  View .</p>\n<p>,    .  2D ,    ,    API     .  <strong>Canvas Rendering</strong> .</p>\n<p>Canvas     .</p>\n<ul>\n<li><strong>onDraw() </strong></li>\n<li>Canvas( ) =&gt; Paint( )</li>\n<li>  , Drawable   BitmapDrawable    .</li>\n<li>   ( ) .</li>\n<li>Drawable    <strong>XML</strong> (      !)</li>\n<li> Drawable(   ,  ..)</li>\n<li>NinePatch </li>\n<li> SKIA   c++ native API  .</li>\n</ul>\n<p>     .       ,     .</p>\n<p>      Rendering Process (   <code>onDraw()</code>     ),   Canvas Rendering            .</p>\n<p>  <a href=\"https://skia.org/\">Skia  </a> .          API .</p>\n<p>Canvas       Bitmap   .</p>\n<p>Surface      .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/JNfYVx7.png\" class=\"\" title=\"[android canvas drawing]\">\n\n<p> ,  View  Rect    , Skia     . Skia     .           ,       . **lockCanvas()**       Canvas .  **unlockCanvasAnsPost()**   ,  compositor .</p>\n<p>     ,  Surface  .</p>\n<p> View  ,   3D    ,    UI   <a href=\"https://source.android.com/devices/graphics/arch-egl-opengl\">OpenGL ES</a>  <a href=\"https://source.android.com/devices/graphics/arch-vulkan\">Vulkan</a>  View  .    API   ,   Canvas API  .</p>\n<hr>\n<p>         ,              .</p>\n<h2 id=\"Surface-Flinger-and-Harware-Composer\"><a href=\"#Surface-Flinger-and-Harware-Composer\" class=\"headerlink\" title=\"Surface Flinger and Harware Composer\"></a>Surface Flinger and Harware Composer</h2><p> <a href=\"https://lastyouth.tistory.com/24\">Android Drawing Process 1(App surface, SF Layer)</a>  .</p>\n<p>  <strong>SyrfaceFlinger</strong> **HWComposer(Hardware Composer)**      .</p>\n<p>  ,    .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/cK00ybR.png\" class=\"\" title=\"[Surface Flinger and Harware Composer]\">\n\n<h3 id=\"Layer-Management\"><a href=\"#Layer-Management\" class=\"headerlink\" title=\"Layer Management\"></a>Layer Management</h3><p> Layer Management       Surface SufraceFlinger  Layer  .    .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/7990Bf0.png\" class=\"\" title=\"[Layer Management]\">\n\n<h3 id=\"Screen-Refreshing\"><a href=\"#Screen-Refreshing\" class=\"headerlink\" title=\"Screen Refreshing\"></a>Screen Refreshing</h3><p>    ,     60  .     90hz, 120hz    ,      fps  .</p>\n<p>     , 60 FPS(1 60) ,  , 16ms          , 16ms  draw  .</p>\n<p> 4.0 - ICS( )  Screen Refershing Framebuffer  SurfaceFligner Thread         .</p>\n<p> 16ms     ? View        ,    ,        .       ,  <code>Frame Drop</code>  . <code>Frame Drop</code>         ,          CPU &amp; GPU    .</p>\n<p>   UI    , <strong>(tearing)</strong> / <strong> (Frame Drop)</strong>   . </p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/image.png\" class=\"\" title=\"[Frame Drop]\">\n\n<h3 id=\"Project-Butter\"><a href=\"#Project-Butter\" class=\"headerlink\" title=\"Project Butter\"></a>Project Butter</h3><img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/n6fsbPA.png\" class=\"\" title=\"[Proejct Butter]\">\n\n<p>    Android 4.1JB()  <strong>Project Butter</strong>  60hz  60 FPS   .</p>\n<p>          .</p>\n<p>Proejct Butter     <strong>VSync</strong>  <strong>Choreographer</strong> .</p>\n<h3 id=\"Vsync-Processing\"><a href=\"#Vsync-Processing\" class=\"headerlink\" title=\"Vsync Processing\"></a>Vsync Processing</h3><p><strong>VSync</strong> Vertical Synchronization( ) . </p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/ha7Eriy.png\" class=\"\" title=\"[Drawing with VSync]\">\n\n<p><strong>VSync</strong>        ,   .  , GPU Rendering Rate,  fps Device Presenting Rate,  hz     .</p>\n<p>, GPU   100fps(  100  ), Device Screen  60hz(  60  ), GPU    Device Screen    (Delay)   .</p>\n<p> , VSync GPU  Device  (Time Gap)       . VSync  Detail      <a href=\"https://www.youtube.com/watch?v=1iaHxmfZGGc\">Android Performance Patterns: Understanding VSYNC</a>  .</p>\n<h3 id=\"Choreographer\"><a href=\"#Choreographer\" class=\"headerlink\" title=\"Choreographer\"></a>Choreographer</h3><p>SurfaceFlinger  Vsync Event /   .</p>\n<ul>\n<li><strong>Input Event Handling</strong></li>\n<li><strong>Self-Invalidation</strong></li>\n<li><strong>Animation</strong></li>\n</ul>\n<h3 id=\"ViewRootImpl\"><a href=\"#ViewRootImpl\" class=\"headerlink\" title=\"ViewRootImpl\"></a>ViewRootImpl</h3><p><strong>ViewRootImpl</strong> DecorView <strong>Choreographer</strong>      , DecorView Choreographer     .</p>\n<h3 id=\"Rendering-Flow\"><a href=\"#Rendering-Flow\" class=\"headerlink\" title=\"Rendering Flow\"></a>Rendering Flow</h3><p> <strong>Vsync Process</strong>   .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/1ZQEOg0.png\" class=\"\" title=\"[Rendering Flow]\">\n\n<p>   foreground       .</p>\n<ol>\n<li><p>   <code>Invalidate</code>   ViewRootImpl  <code>scheduleTraversal()</code>  . </p>\n<p><code>scheduleTraversal()</code>   <strong>Choreographer</strong>   Vsync    .     Invalidate Vsync scheduling .</p>\n</li>\n<li><p>Choreographer VSync   Frame Render Screen Rate . Vsync    Choreographer SurfaceFlinger   Vsync    .</p>\n</li>\n<li><p> Vsync signal  Choreographer .</p>\n</li>\n<li><p>Choreographer ViewRootImpl <code>performTraversal()</code>  . performTraversal       <code>measure()</code>,  .</p>\n</li>\n<li><p> <code>performDraw()</code>    .</p>\n</li>\n</ol>\n<h2 id=\"Software-Rendering-Model-V-S-Hardare-Rendering-Model\"><a href=\"#Software-Rendering-Model-V-S-Hardare-Rendering-Model\" class=\"headerlink\" title=\"Software Rendering Model V.S. Hardare Rendering Model\"></a>Software Rendering Model V.S. Hardare Rendering Model</h2><p>   3.0((API  11, ))  .      .</p>\n<h3 id=\"Software-Rendering-Model\"><a href=\"#Software-Rendering-Model\" class=\"headerlink\" title=\"Software Rendering Model\"></a>Software Rendering Model</h3><p>Software Rendering Model Android 3.0    .</p>\n<p>CPU  ,   .</p>\n<ol>\n<li>  </li>\n<li>  </li>\n</ol>\n<h3 id=\"Hardare-Rendering-Model-By-using-GPU\"><a href=\"#Hardare-Rendering-Model-By-using-GPU\" class=\"headerlink\" title=\"Hardare Rendering Model (By using GPU)\"></a>Hardare Rendering Model (By using GPU)</h3><p>Android 3.0 Android 2D     , <code>View</code>      GPU .</p>\n<p>         RAM .</p>\n<p>Android   <code>invalidate()</code>  <code>draw()</code>     ,    .</p>\n<p>Android      ,          .</p>\n<p> Android  <code>invalidate()</code>            .</p>\n<p>             .       .</p>\n<ol>\n<li>  </li>\n<li>    </li>\n<li>  </li>\n</ol>\n<h3 id=\"Internal-UI-Rendering-Optimization\"><a href=\"#Internal-UI-Rendering-Optimization\" class=\"headerlink\" title=\"Internal UI Rendering Optimization\"></a>Internal UI Rendering Optimization</h3><p>  <code>  </code>(Button, TextView, etc.)        .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/image-1.png\" class=\"\" title=\"[View Rendering Principle]\">\n\n<ul>\n<li>CPU Level    ,      <code>displaylist</code>  .</li>\n<li>GPU          <code>Rasterization</code> . CPU   OpenGL-ES api  GPU  ,  .   displaylist  ,    displaylist                 .</li>\n</ul>\n<p>UI   , CPU displaylist   GPU     (High Cost) ,   .</p>\n<h2 id=\"Extra-Info\"><a href=\"#Extra-Info\" class=\"headerlink\" title=\"Extra Info\"></a>Extra Info</h2><h3 id=\"Displaylist\"><a href=\"#Displaylist\" class=\"headerlink\" title=\"Displaylist ?\"></a>Displaylist ?</h3><img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/4.png\" class=\"\" title=\"[Displaylist]\">\n\n<p> 3.0  View  , ViewRoot  . View ViewGroup, ViewRoot   View        .</p>\n<p>  Displaylist  ,  UI       . UI   ,  View Tree          .</p>\n<hr>\n<p> Window, Surface, Canvas  ,        .  View             .</p>\n<p>     GPU      ,   ,    .         .</p>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<p>  View ViewGroup , UI  , UI   View   .  UI Rendering        .</p>\n<h2 id=\"UI-Rendering\"><a href=\"#UI-Rendering\" class=\"headerlink\" title=\"UI Rendering\"></a>UI Rendering</h2><p>  Google Android Source Document <a href=\"https://source.android.com/devices/graphics/architecture\"> </a>   .</p>\n<p>        , <strong>Window, Surface, Canvas, View</strong>    .</p>\n<h3 id=\"Window\"><a href=\"#Window\" class=\"headerlink\" title=\"Window\"></a>Window</h3><p> <strong>   </strong>(Window).      Surface  ,  WindowManager   Window , Window  Surface  UI .</p>\n<p>   Window , WindowManager   . </p>\n<p> PhoneWindowManager, DialogWindowManager   .</p>\n<h2 id=\"Surface-and-SurfacHolder\"><a href=\"#Surface-and-SurfacHolder\" class=\"headerlink\" title=\"Surface and SurfacHolder\"></a>Surface and SurfacHolder</h2><p>     , <strong>Surface</strong>  .  Surface SurfaceHolder    .</p>\n<h3 id=\"Surface\"><a href=\"#Surface\" class=\"headerlink\" title=\"Surface\"></a>Surface</h3><p>Surface         .   Android 1.0  API  ,     <strong>Surface</strong>   <strong>Screen Compositor</strong>   Raw    .</p>\n<p>  ,      .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/ptHtNno.png\" class=\"\" title=\"[Surface &amp; Surface Flinger]\">\n\n<p>    <strong>Surface</strong> .  <strong>BufferQueue</strong>     ()       () .</p>\n<p><strong>Suface</strong>   <strong>BufferQueue</strong> (Producer),    <strong>SurfaceFlinger</strong>(Consumer)  .    drawing  Application  .</p>\n<p> Surface <strong>  </strong>  1  ( 2)  .</p>\n<h4 id=\"---Double-Buffer-Rendering\"><a href=\"#---Double-Buffer-Rendering\" class=\"headerlink\" title=\"  (Double Buffer Rendering)\"></a>  (Double Buffer Rendering)</h4><p>    <strong> </strong> ,        ,          ,          Flicker    .</p>\n<p>        ,        ,       Flicker  .</p>\n<h3 id=\"SurfaceFlinger\"><a href=\"#SurfaceFlinger\" class=\"headerlink\" title=\"SurfaceFlinger\"></a>SurfaceFlinger</h3><p>SurfaceFlinger         . SurfaceFlinger BufferQueue  SurfaceControl     .</p>\n<p>  10 <strong>ASurfaceControl</strong>    .</p>\n<p>  Google Android Source Document <a href=\"https://source.android.com/devices/graphics/surfaceflinger-windowmanager\">SurfaceFlinger  WindowManager</a> .</p>\n<h3 id=\"SurfaceHolder\"><a href=\"#SurfaceHolder\" class=\"headerlink\" title=\"SurfaceHolder\"></a>SurfaceHolder</h3><p>SurfaceHolder   Surface     .      ,  <strong>SurfaceView, GLSurfaceView</strong>  .         .  VIew  onDraw   , Thread     .</p>\n<h3 id=\"Canvas-Rendering\"><a href=\"#Canvas-Rendering\" class=\"headerlink\" title=\"Canvas Rendering\"></a>Canvas Rendering</h3><p>   UI   <a href=\"https://source.android.com/devices/graphics/arch-egl-opengl\">OpenGL ES</a>  <a href=\"https://source.android.com/devices/graphics/arch-vulkan\">Vulkan</a>  View .</p>\n<p>,    .  2D ,    ,    API     .  <strong>Canvas Rendering</strong> .</p>\n<p>Canvas     .</p>\n<ul>\n<li><strong>onDraw() </strong></li>\n<li>Canvas( ) =&gt; Paint( )</li>\n<li>  , Drawable   BitmapDrawable    .</li>\n<li>   ( ) .</li>\n<li>Drawable    <strong>XML</strong> (      !)</li>\n<li> Drawable(   ,  ..)</li>\n<li>NinePatch </li>\n<li> SKIA   c++ native API  .</li>\n</ul>\n<p>     .       ,     .</p>\n<p>      Rendering Process (   <code>onDraw()</code>     ),   Canvas Rendering            .</p>\n<p>  <a href=\"https://skia.org/\">Skia  </a> .          API .</p>\n<p>Canvas       Bitmap   .</p>\n<p>Surface      .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/JNfYVx7.png\" class=\"\" title=\"[android canvas drawing]\">\n\n<p> ,  View  Rect    , Skia     . Skia     .           ,       . **lockCanvas()**       Canvas .  **unlockCanvasAnsPost()**   ,  compositor .</p>\n<p>     ,  Surface  .</p>\n<p> View  ,   3D    ,    UI   <a href=\"https://source.android.com/devices/graphics/arch-egl-opengl\">OpenGL ES</a>  <a href=\"https://source.android.com/devices/graphics/arch-vulkan\">Vulkan</a>  View  .    API   ,   Canvas API  .</p>\n<hr>\n<p>         ,              .</p>\n<h2 id=\"Surface-Flinger-and-Harware-Composer\"><a href=\"#Surface-Flinger-and-Harware-Composer\" class=\"headerlink\" title=\"Surface Flinger and Harware Composer\"></a>Surface Flinger and Harware Composer</h2><p> <a href=\"https://lastyouth.tistory.com/24\">Android Drawing Process 1(App surface, SF Layer)</a>  .</p>\n<p>  <strong>SyrfaceFlinger</strong> **HWComposer(Hardware Composer)**      .</p>\n<p>  ,    .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/cK00ybR.png\" class=\"\" title=\"[Surface Flinger and Harware Composer]\">\n\n<h3 id=\"Layer-Management\"><a href=\"#Layer-Management\" class=\"headerlink\" title=\"Layer Management\"></a>Layer Management</h3><p> Layer Management       Surface SufraceFlinger  Layer  .    .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/7990Bf0.png\" class=\"\" title=\"[Layer Management]\">\n\n<h3 id=\"Screen-Refreshing\"><a href=\"#Screen-Refreshing\" class=\"headerlink\" title=\"Screen Refreshing\"></a>Screen Refreshing</h3><p>    ,     60  .     90hz, 120hz    ,      fps  .</p>\n<p>     , 60 FPS(1 60) ,  , 16ms          , 16ms  draw  .</p>\n<p> 4.0 - ICS( )  Screen Refershing Framebuffer  SurfaceFligner Thread         .</p>\n<p> 16ms     ? View        ,    ,        .       ,  <code>Frame Drop</code>  . <code>Frame Drop</code>         ,          CPU &amp; GPU    .</p>\n<p>   UI    , <strong>(tearing)</strong> / <strong> (Frame Drop)</strong>   . </p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/image.png\" class=\"\" title=\"[Frame Drop]\">\n\n<h3 id=\"Project-Butter\"><a href=\"#Project-Butter\" class=\"headerlink\" title=\"Project Butter\"></a>Project Butter</h3><img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/n6fsbPA.png\" class=\"\" title=\"[Proejct Butter]\">\n\n<p>    Android 4.1JB()  <strong>Project Butter</strong>  60hz  60 FPS   .</p>\n<p>          .</p>\n<p>Proejct Butter     <strong>VSync</strong>  <strong>Choreographer</strong> .</p>\n<h3 id=\"Vsync-Processing\"><a href=\"#Vsync-Processing\" class=\"headerlink\" title=\"Vsync Processing\"></a>Vsync Processing</h3><p><strong>VSync</strong> Vertical Synchronization( ) . </p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/ha7Eriy.png\" class=\"\" title=\"[Drawing with VSync]\">\n\n<p><strong>VSync</strong>        ,   .  , GPU Rendering Rate,  fps Device Presenting Rate,  hz     .</p>\n<p>, GPU   100fps(  100  ), Device Screen  60hz(  60  ), GPU    Device Screen    (Delay)   .</p>\n<p> , VSync GPU  Device  (Time Gap)       . VSync  Detail      <a href=\"https://www.youtube.com/watch?v=1iaHxmfZGGc\">Android Performance Patterns: Understanding VSYNC</a>  .</p>\n<h3 id=\"Choreographer\"><a href=\"#Choreographer\" class=\"headerlink\" title=\"Choreographer\"></a>Choreographer</h3><p>SurfaceFlinger  Vsync Event /   .</p>\n<ul>\n<li><strong>Input Event Handling</strong></li>\n<li><strong>Self-Invalidation</strong></li>\n<li><strong>Animation</strong></li>\n</ul>\n<h3 id=\"ViewRootImpl\"><a href=\"#ViewRootImpl\" class=\"headerlink\" title=\"ViewRootImpl\"></a>ViewRootImpl</h3><p><strong>ViewRootImpl</strong> DecorView <strong>Choreographer</strong>      , DecorView Choreographer     .</p>\n<h3 id=\"Rendering-Flow\"><a href=\"#Rendering-Flow\" class=\"headerlink\" title=\"Rendering Flow\"></a>Rendering Flow</h3><p> <strong>Vsync Process</strong>   .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/1ZQEOg0.png\" class=\"\" title=\"[Rendering Flow]\">\n\n<p>   foreground       .</p>\n<ol>\n<li><p>   <code>Invalidate</code>   ViewRootImpl  <code>scheduleTraversal()</code>  . </p>\n<p><code>scheduleTraversal()</code>   <strong>Choreographer</strong>   Vsync    .     Invalidate Vsync scheduling .</p>\n</li>\n<li><p>Choreographer VSync   Frame Render Screen Rate . Vsync    Choreographer SurfaceFlinger   Vsync    .</p>\n</li>\n<li><p> Vsync signal  Choreographer .</p>\n</li>\n<li><p>Choreographer ViewRootImpl <code>performTraversal()</code>  . performTraversal       <code>measure()</code>,  .</p>\n</li>\n<li><p> <code>performDraw()</code>    .</p>\n</li>\n</ol>\n<h2 id=\"Software-Rendering-Model-V-S-Hardare-Rendering-Model\"><a href=\"#Software-Rendering-Model-V-S-Hardare-Rendering-Model\" class=\"headerlink\" title=\"Software Rendering Model V.S. Hardare Rendering Model\"></a>Software Rendering Model V.S. Hardare Rendering Model</h2><p>   3.0((API  11, ))  .      .</p>\n<h3 id=\"Software-Rendering-Model\"><a href=\"#Software-Rendering-Model\" class=\"headerlink\" title=\"Software Rendering Model\"></a>Software Rendering Model</h3><p>Software Rendering Model Android 3.0    .</p>\n<p>CPU  ,   .</p>\n<ol>\n<li>  </li>\n<li>  </li>\n</ol>\n<h3 id=\"Hardare-Rendering-Model-By-using-GPU\"><a href=\"#Hardare-Rendering-Model-By-using-GPU\" class=\"headerlink\" title=\"Hardare Rendering Model (By using GPU)\"></a>Hardare Rendering Model (By using GPU)</h3><p>Android 3.0 Android 2D     , <code>View</code>      GPU .</p>\n<p>         RAM .</p>\n<p>Android   <code>invalidate()</code>  <code>draw()</code>     ,    .</p>\n<p>Android      ,          .</p>\n<p> Android  <code>invalidate()</code>            .</p>\n<p>             .       .</p>\n<ol>\n<li>  </li>\n<li>    </li>\n<li>  </li>\n</ol>\n<h3 id=\"Internal-UI-Rendering-Optimization\"><a href=\"#Internal-UI-Rendering-Optimization\" class=\"headerlink\" title=\"Internal UI Rendering Optimization\"></a>Internal UI Rendering Optimization</h3><p>  <code>  </code>(Button, TextView, etc.)        .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/image-1.png\" class=\"\" title=\"[View Rendering Principle]\">\n\n<ul>\n<li>CPU Level    ,      <code>displaylist</code>  .</li>\n<li>GPU          <code>Rasterization</code> . CPU   OpenGL-ES api  GPU  ,  .   displaylist  ,    displaylist                 .</li>\n</ul>\n<p>UI   , CPU displaylist   GPU     (High Cost) ,   .</p>\n<h2 id=\"Extra-Info\"><a href=\"#Extra-Info\" class=\"headerlink\" title=\"Extra Info\"></a>Extra Info</h2><h3 id=\"Displaylist\"><a href=\"#Displaylist\" class=\"headerlink\" title=\"Displaylist ?\"></a>Displaylist ?</h3><img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%202/4.png\" class=\"\" title=\"[Displaylist]\">\n\n<p> 3.0  View  , ViewRoot  . View ViewGroup, ViewRoot   View        .</p>\n<p>  Displaylist  ,  UI       . UI   ,  View Tree          .</p>\n<hr>\n<p> Window, Surface, Canvas  ,        .  View             .</p>\n<p>     GPU      ,   ,    .         .</p>"},{"title":"Introduce Android UI Rendering Principle and View Optimization Part 3","date":"2021-05-18T18:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_ui_rendering.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n  UI Rendering          ,           ,       ,       .\n\n## (Jank)\n\n     ,         .\n\n{% asset_img image.png [Frame Drop] %}\n\n  ,  UI  **OverDraw, Slow Rendering**   .\n\n## Slow Rendering \n\n  Google Android Source Document [ ](https://developer.android.com/topic/performance/vitals/render#custom-monitoring)  .\n\n       .\n\n- [Visual inspection](https://developer.android.com/topic/performance/vitals/render#visual-inspection)\n- [Systrace](https://developer.android.com/topic/performance/vitals/render#systrace)\n- [Custom performance monitoring](https://developer.android.com/topic/performance/vitals/render#custom-monitoring)\n\n\n\n###  (Visual Inspection)\n\n           .   .\n\n#### `Profile GPU Rendering`  \n\n60fps(GPU    60   )                .\n\n Android 4.1(API 16 )         .        .\n\n##### \n\n1.  ****  ** ** .\n2. ****  ** GPU ** .\n3.  GPU   **  **     .\n4.   .\n\n   ,        . \n\n{% asset_img gpu_profile.png [Profile GPU Rendering] %}\n\n-      .\n-               () .\n-   16 . 60fps          .        .\n- 16          .\n-          .    API   .\n-                   .\n-                 .\n\n#####    \n\n{% asset_img graph_color.png [Profile Graph Color] %}\n\n     8  .\n\n- **/(Swap)**:    GPU   ,            . CPU  GPU    CPU  GPU   ,      . CPU     .              .     GPU         .\n- ** (Issue)**:            .        .      ,    .\n- **/(Upload)**:     CPU  GPU     .               .                     .\n- **(Draw)**:               .   onDraw      ,         .       .    onDraw        .\n- **  (Measure)**:          .                , Traceview Systrace         .\n- **(Anim)**:        .          .\n- ** (Input)**:               .       ,        .\n- **(Misc)**:           .       UI      .    ,   ,        . Method tracing  Systrace          .\n\n         .       ,         .          .\n\n{% asset_img gpu_rendering_profile_1.png [Image Comparison By GPU Rendering Profiling - 1] %}\n\n        .  8.1MB      16KB    . \n\n           .\n\n{% asset_img gpu_rendering_profile_2.png [Image Comparison By GPU Rendering Profiling - 2] %}\n\n#### Etc\n\n      .\n\n1. Release   .\n   - ART(Android Runtime)          .\n2.    [cold start](https://developer.android.com/topic/performance/vitals/launch-time#cold)       .\n3.          .\n\n\n\n### Systrace\n\n            .\n\nSystrace           .\n\n\n\n###     \n\n    **Scrollable lists, Layout performance, Rendering performance** .\n\n#### Scrollable lists\n\nListView   RecyclerView        .\n\n  Systrace    Systrace        .\n\nRecyclerView systrace    `-a <your-package-name>` .    systrace      .\n\nSystrace  RecyclerView systrace   RecyclerView       .\n\n1.    `notifyDataSetChanged()`, `setAdapter(Adapter)`, or `swapAdapter(Adapter, boolean)`  .\n   -      .\n   -  `SortedList`  `DiffUtil`         .\n2. **Nested recyclerview**\n   -  RecyclerView LinearLayoutManager `setInitialPrefetchItemCount(int)`    .\n   -    3.5      , `innerLinearLayoutManager.setInitialItemPrefetchCount(4);`  .\n\n3. `RecyclerView`  `view type`    item type       inflation   .\n   -  , ,    ,  view type    bind     . (    )\n4. Bind (, onBindViewHolder (VH, int)           1     .\n   -  adapter   item  POJO item  , ViewHolder view  setter   .\n\n#### Layout performance\n\n`Systrace` `Choreographer # doFrame`                 .\n\n     `RelativeLayouts`  `weighted-LinearLayouts`         . \n\n      /          O (n ^ 2)    . \n\n**        RelativeLayout  LinearLayout   .**\n\n#### Rendering performance\n\n**Android UI UI  Record `View # draw` RenderThread `DrawFrame`   **.\n\n   `invalidated View`  `draw (Canvas)` .\n\n   `RenderThread`  `View#draw()`      .\n\n`View#draw()`    ,    UI  bitmap   . `Bitmap`   CPU       .\n\n### Custom Performance Monitoring(   )\n\n                  .\n\n  [`FrameMetricsAggregator`](https://developer.android.com/reference/androidx/core/app/FrameMetricsAggregator)         [Firebase Performance Monitoring](https://firebase.google.com/docs/perf-mon/)      .\n\n   .\n\n- [Android Vitals](https://developer.android.com/topic/performance/vitals)\n- [Firebase Performance Monitoring ](https://firebase.google.com/docs/perf-mon/get-started-android#pdc)\n\n## Overdraw\n\n> An app may draw the same pixel more than once within a single frame, an event called overdraw. Overdraw is usually unnecessary, and best eliminated. It manifests itself as a performance problem by wasting GPU time to render pixels that don't contribute to what the user sees on the screen.\n\n           .\n\n> **** : Overdraw   Google I/O            .\n>\n>    GPU           .    GPU    ,       UI       .\n>\n> [](https://www.youtube.com/watch?v=vkTn3Ule4Ps) .\n\n   UI       .          .\n\n        ,        GPU         .         .\n\n### Overdraw \n\n##### \n\n1.  ****  ** ** .\n2. **  **   **GPU  ** .\n3. **GPU  **  **  ** .\n4. ****\n\n- **True color:** No overdraw\n- **Blue:** Overdrawn 1 time {% asset_img overdrawn_1.png [Overdrawn 1 time] %}\n- **Green:** Overdrawn 2 times {% asset_img overdrawn_2.png [Overdrawn 2 time] %}\n- **Pink:** Overdrawn 3 times {% asset_img overdrawn_3.png [Overdrawn 3 time] %}\n- **Red:** Overdrawn 4 or more times {% asset_img overdrawn_4.png [Overdrawn 4 time] %}\n\n     .\n\n         .\n\n{% asset_img zw3H5pZ.png [Overdraw Visialization] %}\n\n\n### Overdraw \n\nOverdraw       .\n\n1. layouts   backgrounds  \n\n2. View  \n\n3.   \n\n-           .\n-               ,    `blending equation`      .\n\n> **** blending equation : 2     . [ ](https://xysterxx.tistory.com/50)\n\n\n## UI   \n\n      .            .\n\n###  \n\n- include, merge   .\n- include        .\n\n{% asset_img before_merge.png [before_merge] %}\n\n- merge     \n\n{% asset_img after_merge.png [after_merge] %}\n\n  \n\n###  ( )\n\n       `android:background=\"@color/white\"`    .\n\n```xml\n<!-- /res/layout/activity_main.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"\n    android:background=\"@color/white\">\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Hello World!\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n  View        .\n\n{% asset_img example1.png [example1] %}\n\n Overdraw       .\n\n```xml\n<!-- /res/values/themes.xml -->\n<resources xmlns:tools=\"http://schemas.android.com/tools\">\n    <!-- Base application theme. -->\n    <style name=\"Theme.UITest\" parent=\"Theme.MaterialComponents.DayNight.DarkActionBar\">\n        <!-- Primary brand color. -->\n        <item name=\"colorPrimary\">@color/purple_500</item>\n        <item name=\"colorPrimaryVariant\">@color/purple_700</item>\n        <item name=\"colorOnPrimary\">@color/white</item>\n        <!-- Secondary brand color. -->\n        <item name=\"colorSecondary\">@color/teal_200</item>\n        <item name=\"colorSecondaryVariant\">@color/teal_700</item>\n        <item name=\"colorOnSecondary\">@color/black</item>\n        <!-- Status bar color. -->\n        <item name=\"android:statusBarColor\" tools:targetApi=\"l\">?attr/colorPrimaryVariant</item>\n        <!-- Customize your theme here. -->\n    </style>\n</resources>\n```\n\n      Parent  .\n\n```\nBase.V14.Theme.MaterialComponents.Light\n Base.Theme.MaterialComponents.Light\n     Base.Theme.MaterialComponents.Light.DarkActionBar\n         Theme.MaterialComponents.Light.DarkActionBar\n             Theme.MaterialComponents.DayNight.DarkActionBar\n```\n\n        \n\n```xml\n<item name=\"android:colorBackground\">@color/design_default_color_background</item>\n```\n\n       .\n\n```xml\n<color name=\"design_default_color_background\">#FFFFFF</color>\n```\n\n          .  Overdraw           `<item name=\"android:windowBackground\">@color/beige</item>`       .\n\n```xml\n<!-- /res/values/themes.xml -->\n<resources xmlns:tools=\"http://schemas.android.com/tools\">\n    <!-- Base application theme. -->\n    <style name=\"Theme.UITest\" parent=\"Theme.MaterialComponents.DayNight.NoActionBar\">\n        <!-- Primary brand color. -->\n        <item name=\"colorPrimary\">@color/purple_500</item>\n        <item name=\"colorPrimaryVariant\">@color/purple_700</item>\n        <item name=\"colorOnPrimary\">@color/white</item>\n        <!-- Secondary brand color. -->\n        <item name=\"colorSecondary\">@color/teal_200</item>\n        <item name=\"colorSecondaryVariant\">@color/teal_700</item>\n        <item name=\"colorOnSecondary\">@color/black</item>\n        <!-- Status bar color. -->\n        <item name=\"android:statusBarColor\" tools:targetApi=\"l\">?attr/colorPrimaryVariant</item>\n        <!-- Customize your theme here. -->\n        <item name=\"android:windowBackground\">@color/beige</item>\n    </style>\n</resources>\n```\n\n `/res/layout/activity_main.xml`  `android:background=\"@color/beige\"`    Overdraw    .\n\n{% asset_img example2.png [example2] %}\n\n       Overdraw   .\n\n\n### Lazy Load by ViewStub\n\n  [  - ViewStub   ](https://www.charlezz.com/?p=19977)  .\n\nViewStub        (lazy-inflate)     .\n\nViewStub   inflate()     ViewStub   ViewStub .\n\n\n\n  ViewStub    .  ViewStub   .\n\n```xml\n<ViewStub android:id=\"@+id/stub\"\n          android:inflatedId=\"@+id/subTree\"\n          android:layout=\"@layout/mySubTree\"\n          android:layout_width=\"120dp\"\n          android:layout_height=\"40dp\" />\n```\n\n\n\nfindViewById()   ViewStub   .\n\n```kotlin\nval viewStub = findViewById(R.id.stub)\n```\n\n   ViewStub ViewStubProxy , ViewStub     .\n\n```kotlin\nval binding: ActivityMainBinding = ...\nval viewStubProxy = binding.stub\nval viewStub = viewStubProxy.viewStub()\n```\n\nViewStub       setVisibility()  inflate()    .\n\n```kotlin\nval viewStub: ViewStub = ...\nviewStub.inflate()\n// viewStub.visibility = View.VISIBLE\n```\n\nViewStub      ,       .\n\n    UI         .\n\n             .              .\n\n\n\n 1, 2, 3   UI,   ,               .\n\n      .\n\n\n\n## Reference\n\n### Members of Study\n\nhttps://soda1127.github.io/introduce-jetpack-compose/\n\nhttps://velog.io/@jshme/How-To-Render-UI-In-Android\n\nhttps://velog.io/@jshme/How-To-Render-UI-In-Android-22\n\n### Official\n\n#### Docs\n\n[Android vitals](https://developer.android.com/topic/performance/vitals)\n\n[Android   ](https://developer.android.com/guide/topics/ui/how-android-draws)\n\n[](https://developer.android.com/topic/performance/vitals/render#custom-monitoring)\n\n[Firebase Performance Monitoring ](https://firebase.google.com/docs/perf-mon/get-started-android#pdc)\n\n[GPU     ](https://developer.android.com/topic/performance/rendering/inspect-gpu-rendering)\n\n[ ](https://developer.android.com/training/custom-views/custom-drawing?hl=ko)\n\n[ ](https://developer.android.com/training/custom-views/optimizing-view?hl=ko)\n\n\n\n#### Videos\n\n[Android Performance Patterns: Understanding VSYNC](https://www.youtube.com/watch?v=1iaHxmfZGGc)\n\n[Android Performance Patterns: Rendering Performance 101](https://www.youtube.com/watch?v=HXQhu6qfTVU&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=48)\n\n[Android Performance Patterns: Tool - Profile GPU Rendering](https://www.youtube.com/watch?v=VzYkVL1n4M8&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=51)\n\n[Android Performance Patterns: Understanding Overdraw](https://www.youtube.com/watch?v=T52v50r-JfE&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=49)\n\n[Android Performance Patterns: Invalidations, Layouts, and Performance](https://www.youtube.com/watch?v=we6poP0kw6E&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=54)\n\n[Android Performance Patterns: Hidden Cost of Transparency](https://www.youtube.com/watch?v=wIy8g8yNhNk&index=46&list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE)\n\n\n\n### Etc\n\n[  - ViewStub   ](https://www.charlezz.com/?p=19977)\n\n[Android Drawing Process 1(App surface, SF Layer)](https://lastyouth.tistory.com/24)","source":"_posts/2021-05-19 Android UI Rendering Optimization Part 3.md","raw":"---\ntitle: Introduce Android UI Rendering Principle and View Optimization Part 3\ndate: 2021-05-19 03:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_ui_rendering.png\ncategories:\n- User Interface\ntags:\n- Android\n- Rendering\n- Principle\n- Optimize\n- UI\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n  UI Rendering          ,           ,       ,       .\n\n## (Jank)\n\n     ,         .\n\n{% asset_img image.png [Frame Drop] %}\n\n  ,  UI  **OverDraw, Slow Rendering**   .\n\n## Slow Rendering \n\n  Google Android Source Document [ ](https://developer.android.com/topic/performance/vitals/render#custom-monitoring)  .\n\n       .\n\n- [Visual inspection](https://developer.android.com/topic/performance/vitals/render#visual-inspection)\n- [Systrace](https://developer.android.com/topic/performance/vitals/render#systrace)\n- [Custom performance monitoring](https://developer.android.com/topic/performance/vitals/render#custom-monitoring)\n\n\n\n###  (Visual Inspection)\n\n           .   .\n\n#### `Profile GPU Rendering`  \n\n60fps(GPU    60   )                .\n\n Android 4.1(API 16 )         .        .\n\n##### \n\n1.  ****  ** ** .\n2. ****  ** GPU ** .\n3.  GPU   **  **     .\n4.   .\n\n   ,        . \n\n{% asset_img gpu_profile.png [Profile GPU Rendering] %}\n\n-      .\n-               () .\n-   16 . 60fps          .        .\n- 16          .\n-          .    API   .\n-                   .\n-                 .\n\n#####    \n\n{% asset_img graph_color.png [Profile Graph Color] %}\n\n     8  .\n\n- **/(Swap)**:    GPU   ,            . CPU  GPU    CPU  GPU   ,      . CPU     .              .     GPU         .\n- ** (Issue)**:            .        .      ,    .\n- **/(Upload)**:     CPU  GPU     .               .                     .\n- **(Draw)**:               .   onDraw      ,         .       .    onDraw        .\n- **  (Measure)**:          .                , Traceview Systrace         .\n- **(Anim)**:        .          .\n- ** (Input)**:               .       ,        .\n- **(Misc)**:           .       UI      .    ,   ,        . Method tracing  Systrace          .\n\n         .       ,         .          .\n\n{% asset_img gpu_rendering_profile_1.png [Image Comparison By GPU Rendering Profiling - 1] %}\n\n        .  8.1MB      16KB    . \n\n           .\n\n{% asset_img gpu_rendering_profile_2.png [Image Comparison By GPU Rendering Profiling - 2] %}\n\n#### Etc\n\n      .\n\n1. Release   .\n   - ART(Android Runtime)          .\n2.    [cold start](https://developer.android.com/topic/performance/vitals/launch-time#cold)       .\n3.          .\n\n\n\n### Systrace\n\n            .\n\nSystrace           .\n\n\n\n###     \n\n    **Scrollable lists, Layout performance, Rendering performance** .\n\n#### Scrollable lists\n\nListView   RecyclerView        .\n\n  Systrace    Systrace        .\n\nRecyclerView systrace    `-a <your-package-name>` .    systrace      .\n\nSystrace  RecyclerView systrace   RecyclerView       .\n\n1.    `notifyDataSetChanged()`, `setAdapter(Adapter)`, or `swapAdapter(Adapter, boolean)`  .\n   -      .\n   -  `SortedList`  `DiffUtil`         .\n2. **Nested recyclerview**\n   -  RecyclerView LinearLayoutManager `setInitialPrefetchItemCount(int)`    .\n   -    3.5      , `innerLinearLayoutManager.setInitialItemPrefetchCount(4);`  .\n\n3. `RecyclerView`  `view type`    item type       inflation   .\n   -  , ,    ,  view type    bind     . (    )\n4. Bind (, onBindViewHolder (VH, int)           1     .\n   -  adapter   item  POJO item  , ViewHolder view  setter   .\n\n#### Layout performance\n\n`Systrace` `Choreographer # doFrame`                 .\n\n     `RelativeLayouts`  `weighted-LinearLayouts`         . \n\n      /          O (n ^ 2)    . \n\n**        RelativeLayout  LinearLayout   .**\n\n#### Rendering performance\n\n**Android UI UI  Record `View # draw` RenderThread `DrawFrame`   **.\n\n   `invalidated View`  `draw (Canvas)` .\n\n   `RenderThread`  `View#draw()`      .\n\n`View#draw()`    ,    UI  bitmap   . `Bitmap`   CPU       .\n\n### Custom Performance Monitoring(   )\n\n                  .\n\n  [`FrameMetricsAggregator`](https://developer.android.com/reference/androidx/core/app/FrameMetricsAggregator)         [Firebase Performance Monitoring](https://firebase.google.com/docs/perf-mon/)      .\n\n   .\n\n- [Android Vitals](https://developer.android.com/topic/performance/vitals)\n- [Firebase Performance Monitoring ](https://firebase.google.com/docs/perf-mon/get-started-android#pdc)\n\n## Overdraw\n\n> An app may draw the same pixel more than once within a single frame, an event called overdraw. Overdraw is usually unnecessary, and best eliminated. It manifests itself as a performance problem by wasting GPU time to render pixels that don't contribute to what the user sees on the screen.\n\n           .\n\n> **** : Overdraw   Google I/O            .\n>\n>    GPU           .    GPU    ,       UI       .\n>\n> [](https://www.youtube.com/watch?v=vkTn3Ule4Ps) .\n\n   UI       .          .\n\n        ,        GPU         .         .\n\n### Overdraw \n\n##### \n\n1.  ****  ** ** .\n2. **  **   **GPU  ** .\n3. **GPU  **  **  ** .\n4. ****\n\n- **True color:** No overdraw\n- **Blue:** Overdrawn 1 time {% asset_img overdrawn_1.png [Overdrawn 1 time] %}\n- **Green:** Overdrawn 2 times {% asset_img overdrawn_2.png [Overdrawn 2 time] %}\n- **Pink:** Overdrawn 3 times {% asset_img overdrawn_3.png [Overdrawn 3 time] %}\n- **Red:** Overdrawn 4 or more times {% asset_img overdrawn_4.png [Overdrawn 4 time] %}\n\n     .\n\n         .\n\n{% asset_img zw3H5pZ.png [Overdraw Visialization] %}\n\n\n### Overdraw \n\nOverdraw       .\n\n1. layouts   backgrounds  \n\n2. View  \n\n3.   \n\n-           .\n-               ,    `blending equation`      .\n\n> **** blending equation : 2     . [ ](https://xysterxx.tistory.com/50)\n\n\n## UI   \n\n      .            .\n\n###  \n\n- include, merge   .\n- include        .\n\n{% asset_img before_merge.png [before_merge] %}\n\n- merge     \n\n{% asset_img after_merge.png [after_merge] %}\n\n  \n\n###  ( )\n\n       `android:background=\"@color/white\"`    .\n\n```xml\n<!-- /res/layout/activity_main.xml -->\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"\n    android:background=\"@color/white\">\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Hello World!\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n  View        .\n\n{% asset_img example1.png [example1] %}\n\n Overdraw       .\n\n```xml\n<!-- /res/values/themes.xml -->\n<resources xmlns:tools=\"http://schemas.android.com/tools\">\n    <!-- Base application theme. -->\n    <style name=\"Theme.UITest\" parent=\"Theme.MaterialComponents.DayNight.DarkActionBar\">\n        <!-- Primary brand color. -->\n        <item name=\"colorPrimary\">@color/purple_500</item>\n        <item name=\"colorPrimaryVariant\">@color/purple_700</item>\n        <item name=\"colorOnPrimary\">@color/white</item>\n        <!-- Secondary brand color. -->\n        <item name=\"colorSecondary\">@color/teal_200</item>\n        <item name=\"colorSecondaryVariant\">@color/teal_700</item>\n        <item name=\"colorOnSecondary\">@color/black</item>\n        <!-- Status bar color. -->\n        <item name=\"android:statusBarColor\" tools:targetApi=\"l\">?attr/colorPrimaryVariant</item>\n        <!-- Customize your theme here. -->\n    </style>\n</resources>\n```\n\n      Parent  .\n\n```\nBase.V14.Theme.MaterialComponents.Light\n Base.Theme.MaterialComponents.Light\n     Base.Theme.MaterialComponents.Light.DarkActionBar\n         Theme.MaterialComponents.Light.DarkActionBar\n             Theme.MaterialComponents.DayNight.DarkActionBar\n```\n\n        \n\n```xml\n<item name=\"android:colorBackground\">@color/design_default_color_background</item>\n```\n\n       .\n\n```xml\n<color name=\"design_default_color_background\">#FFFFFF</color>\n```\n\n          .  Overdraw           `<item name=\"android:windowBackground\">@color/beige</item>`       .\n\n```xml\n<!-- /res/values/themes.xml -->\n<resources xmlns:tools=\"http://schemas.android.com/tools\">\n    <!-- Base application theme. -->\n    <style name=\"Theme.UITest\" parent=\"Theme.MaterialComponents.DayNight.NoActionBar\">\n        <!-- Primary brand color. -->\n        <item name=\"colorPrimary\">@color/purple_500</item>\n        <item name=\"colorPrimaryVariant\">@color/purple_700</item>\n        <item name=\"colorOnPrimary\">@color/white</item>\n        <!-- Secondary brand color. -->\n        <item name=\"colorSecondary\">@color/teal_200</item>\n        <item name=\"colorSecondaryVariant\">@color/teal_700</item>\n        <item name=\"colorOnSecondary\">@color/black</item>\n        <!-- Status bar color. -->\n        <item name=\"android:statusBarColor\" tools:targetApi=\"l\">?attr/colorPrimaryVariant</item>\n        <!-- Customize your theme here. -->\n        <item name=\"android:windowBackground\">@color/beige</item>\n    </style>\n</resources>\n```\n\n `/res/layout/activity_main.xml`  `android:background=\"@color/beige\"`    Overdraw    .\n\n{% asset_img example2.png [example2] %}\n\n       Overdraw   .\n\n\n### Lazy Load by ViewStub\n\n  [  - ViewStub   ](https://www.charlezz.com/?p=19977)  .\n\nViewStub        (lazy-inflate)     .\n\nViewStub   inflate()     ViewStub   ViewStub .\n\n\n\n  ViewStub    .  ViewStub   .\n\n```xml\n<ViewStub android:id=\"@+id/stub\"\n          android:inflatedId=\"@+id/subTree\"\n          android:layout=\"@layout/mySubTree\"\n          android:layout_width=\"120dp\"\n          android:layout_height=\"40dp\" />\n```\n\n\n\nfindViewById()   ViewStub   .\n\n```kotlin\nval viewStub = findViewById(R.id.stub)\n```\n\n   ViewStub ViewStubProxy , ViewStub     .\n\n```kotlin\nval binding: ActivityMainBinding = ...\nval viewStubProxy = binding.stub\nval viewStub = viewStubProxy.viewStub()\n```\n\nViewStub       setVisibility()  inflate()    .\n\n```kotlin\nval viewStub: ViewStub = ...\nviewStub.inflate()\n// viewStub.visibility = View.VISIBLE\n```\n\nViewStub      ,       .\n\n    UI         .\n\n             .              .\n\n\n\n 1, 2, 3   UI,   ,               .\n\n      .\n\n\n\n## Reference\n\n### Members of Study\n\nhttps://soda1127.github.io/introduce-jetpack-compose/\n\nhttps://velog.io/@jshme/How-To-Render-UI-In-Android\n\nhttps://velog.io/@jshme/How-To-Render-UI-In-Android-22\n\n### Official\n\n#### Docs\n\n[Android vitals](https://developer.android.com/topic/performance/vitals)\n\n[Android   ](https://developer.android.com/guide/topics/ui/how-android-draws)\n\n[](https://developer.android.com/topic/performance/vitals/render#custom-monitoring)\n\n[Firebase Performance Monitoring ](https://firebase.google.com/docs/perf-mon/get-started-android#pdc)\n\n[GPU     ](https://developer.android.com/topic/performance/rendering/inspect-gpu-rendering)\n\n[ ](https://developer.android.com/training/custom-views/custom-drawing?hl=ko)\n\n[ ](https://developer.android.com/training/custom-views/optimizing-view?hl=ko)\n\n\n\n#### Videos\n\n[Android Performance Patterns: Understanding VSYNC](https://www.youtube.com/watch?v=1iaHxmfZGGc)\n\n[Android Performance Patterns: Rendering Performance 101](https://www.youtube.com/watch?v=HXQhu6qfTVU&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=48)\n\n[Android Performance Patterns: Tool - Profile GPU Rendering](https://www.youtube.com/watch?v=VzYkVL1n4M8&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=51)\n\n[Android Performance Patterns: Understanding Overdraw](https://www.youtube.com/watch?v=T52v50r-JfE&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=49)\n\n[Android Performance Patterns: Invalidations, Layouts, and Performance](https://www.youtube.com/watch?v=we6poP0kw6E&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=54)\n\n[Android Performance Patterns: Hidden Cost of Transparency](https://www.youtube.com/watch?v=wIy8g8yNhNk&index=46&list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE)\n\n\n\n### Etc\n\n[  - ViewStub   ](https://www.charlezz.com/?p=19977)\n\n[Android Drawing Process 1(App surface, SF Layer)](https://lastyouth.tistory.com/24)","slug":"2021-05-19 Android UI Rendering Optimization Part 3","published":1,"updated":"2021-07-25T13:28:28.008Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7l400093lreh3dy7weh","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<span id=\"more\"></span>\n\n<p>  UI Rendering          ,           ,       ,       .</p>\n<h2 id=\"-Jank\"><a href=\"#-Jank\" class=\"headerlink\" title=\"(Jank)\"></a>(Jank)</h2><p>     ,         .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/image.png\" class=\"\" title=\"[Frame Drop]\">\n\n<p>  ,  UI  <strong>OverDraw, Slow Rendering</strong>   .</p>\n<h2 id=\"Slow-Rendering-\"><a href=\"#Slow-Rendering-\" class=\"headerlink\" title=\"Slow Rendering \"></a>Slow Rendering </h2><p>  Google Android Source Document <a href=\"https://developer.android.com/topic/performance/vitals/render#custom-monitoring\"> </a>  .</p>\n<p>       .</p>\n<ul>\n<li><a href=\"https://developer.android.com/topic/performance/vitals/render#visual-inspection\">Visual inspection</a></li>\n<li><a href=\"https://developer.android.com/topic/performance/vitals/render#systrace\">Systrace</a></li>\n<li><a href=\"https://developer.android.com/topic/performance/vitals/render#custom-monitoring\">Custom performance monitoring</a></li>\n</ul>\n<h3 id=\"--Visual-Inspection\"><a href=\"#--Visual-Inspection\" class=\"headerlink\" title=\" (Visual Inspection)\"></a> (Visual Inspection)</h3><p>           .   .</p>\n<h4 id=\"Profile-GPU-Rendering--\"><a href=\"#Profile-GPU-Rendering--\" class=\"headerlink\" title=\"Profile GPU Rendering  \"></a><code>Profile GPU Rendering</code>  </h4><p>60fps(GPU    60   )                .</p>\n<p> Android 4.1(API 16 )         .        .</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ol>\n<li> <strong></strong>  <strong> </strong> .</li>\n<li><strong></strong>  <strong> GPU </strong> .</li>\n<li> GPU   <strong>  </strong>     .</li>\n<li>  .</li>\n</ol>\n<p>   ,        . </p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/gpu_profile.png\" class=\"\" title=\"[Profile GPU Rendering]\">\n\n<ul>\n<li>     .</li>\n<li>              () .</li>\n<li>  16 . 60fps          .        .</li>\n<li>16          .</li>\n<li>         .    API   .</li>\n<li>                  .</li>\n<li>                .</li>\n</ul>\n<h5 id=\"---\"><a href=\"#---\" class=\"headerlink\" title=\"   \"></a>   </h5><img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/graph_color.png\" class=\"\" title=\"[Profile Graph Color]\">\n\n<p>     8  .</p>\n<ul>\n<li><strong>/(Swap)</strong>:    GPU   ,            . CPU  GPU    CPU  GPU   ,      . CPU     .              .     GPU         .</li>\n<li><strong> (Issue)</strong>:            .        .      ,    .</li>\n<li><strong>/(Upload)</strong>:     CPU  GPU     .               .                     .</li>\n<li><strong>(Draw)</strong>:               .   onDraw      ,         .       .    onDraw        .</li>\n<li><strong>  (Measure)</strong>:          .                , Traceview Systrace         .</li>\n<li><strong>(Anim)</strong>:        .          .</li>\n<li><strong> (Input)</strong>:               .       ,        .</li>\n<li><strong>(Misc)</strong>:           .       UI      .    ,   ,        . Method tracing  Systrace          .</li>\n</ul>\n<p>         .       ,         .          .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/gpu_rendering_profile_1.png\" class=\"\" title=\"[Image Comparison By GPU Rendering Profiling - 1]\">\n\n<p>        .  8.1MB      16KB    . </p>\n<p>           .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/gpu_rendering_profile_2.png\" class=\"\" title=\"[Image Comparison By GPU Rendering Profiling - 2]\">\n\n<h4 id=\"Etc\"><a href=\"#Etc\" class=\"headerlink\" title=\"Etc\"></a>Etc</h4><p>      .</p>\n<ol>\n<li>Release   .<ul>\n<li>ART(Android Runtime)          .</li>\n</ul>\n</li>\n<li>   <a href=\"https://developer.android.com/topic/performance/vitals/launch-time#cold\">cold start</a>       .</li>\n<li>         .</li>\n</ol>\n<h3 id=\"Systrace\"><a href=\"#Systrace\" class=\"headerlink\" title=\"Systrace\"></a>Systrace</h3><p>            .</p>\n<p>Systrace           .</p>\n<h3 id=\"----\"><a href=\"#----\" class=\"headerlink\" title=\"    \"></a>    </h3><p>    <strong>Scrollable lists, Layout performance, Rendering performance</strong> .</p>\n<h4 id=\"Scrollable-lists\"><a href=\"#Scrollable-lists\" class=\"headerlink\" title=\"Scrollable lists\"></a>Scrollable lists</h4><p>ListView   RecyclerView        .</p>\n<p>  Systrace    Systrace        .</p>\n<p>RecyclerView systrace    <code>-a &lt;your-package-name&gt;</code> .    systrace      .</p>\n<p>Systrace  RecyclerView systrace   RecyclerView       .</p>\n<ol>\n<li><p>   <code>notifyDataSetChanged()</code>, <code>setAdapter(Adapter)</code>, or <code>swapAdapter(Adapter, boolean)</code>  .</p>\n<ul>\n<li>     .</li>\n<li> <code>SortedList</code>  <code>DiffUtil</code>         .</li>\n</ul>\n</li>\n<li><p><strong>Nested recyclerview</strong></p>\n<ul>\n<li> RecyclerView LinearLayoutManager <code>setInitialPrefetchItemCount(int)</code>    .</li>\n<li>   3.5      , <code>innerLinearLayoutManager.setInitialItemPrefetchCount(4);</code>  .</li>\n</ul>\n</li>\n<li><p><code>RecyclerView</code>  <code>view type</code>    item type       inflation   .</p>\n<ul>\n<li> , ,    ,  view type    bind     . (    )</li>\n</ul>\n</li>\n<li><p>Bind (, onBindViewHolder (VH, int)           1     .</p>\n<ul>\n<li> adapter   item  POJO item  , ViewHolder view  setter   .</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"Layout-performance\"><a href=\"#Layout-performance\" class=\"headerlink\" title=\"Layout performance\"></a>Layout performance</h4><p><code>Systrace</code> <code>Choreographer # doFrame</code>                 .</p>\n<p>     <code>RelativeLayouts</code>  <code>weighted-LinearLayouts</code>         . </p>\n<p>      /          O (n ^ 2)    . </p>\n<p><strong>        RelativeLayout  LinearLayout   .</strong></p>\n<h4 id=\"Rendering-performance\"><a href=\"#Rendering-performance\" class=\"headerlink\" title=\"Rendering performance\"></a>Rendering performance</h4><p><strong>Android UI UI  Record <code>View # draw</code> RenderThread <code>DrawFrame</code>   </strong>.</p>\n<p>   <code>invalidated View</code>  <code>draw (Canvas)</code> .</p>\n<p>   <code>RenderThread</code>  <code>View#draw()</code>      .</p>\n<p><code>View#draw()</code>    ,    UI  bitmap   . <code>Bitmap</code>   CPU       .</p>\n<h3 id=\"Custom-Performance-Monitoring----\"><a href=\"#Custom-Performance-Monitoring----\" class=\"headerlink\" title=\"Custom Performance Monitoring(   )\"></a>Custom Performance Monitoring(   )</h3><p>                  .</p>\n<p>  <a href=\"https://developer.android.com/reference/androidx/core/app/FrameMetricsAggregator\"><code>FrameMetricsAggregator</code></a>         <a href=\"https://firebase.google.com/docs/perf-mon/\">Firebase Performance Monitoring</a>      .</p>\n<p>   .</p>\n<ul>\n<li><a href=\"https://developer.android.com/topic/performance/vitals\">Android Vitals</a></li>\n<li><a href=\"https://firebase.google.com/docs/perf-mon/get-started-android#pdc\">Firebase Performance Monitoring </a></li>\n</ul>\n<h2 id=\"Overdraw\"><a href=\"#Overdraw\" class=\"headerlink\" title=\"Overdraw\"></a>Overdraw</h2><blockquote>\n<p>An app may draw the same pixel more than once within a single frame, an event called overdraw. Overdraw is usually unnecessary, and best eliminated. It manifests itself as a performance problem by wasting GPU time to render pixels that dont contribute to what the user sees on the screen.</p>\n</blockquote>\n<p>           .</p>\n<blockquote>\n<p><strong></strong> : Overdraw   Google I/O            .</p>\n<p>   GPU           .    GPU    ,       UI       .</p>\n<p><a href=\"https://www.youtube.com/watch?v=vkTn3Ule4Ps\"></a> .</p>\n</blockquote>\n<p>   UI       .          .</p>\n<p>        ,        GPU         .         .</p>\n<h3 id=\"Overdraw-\"><a href=\"#Overdraw-\" class=\"headerlink\" title=\"Overdraw \"></a>Overdraw </h3><h5 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h5><ol>\n<li> <strong></strong>  <strong> </strong> .</li>\n<li><strong>  </strong>   <strong>GPU  </strong> .</li>\n<li><strong>GPU  </strong>  <strong>  </strong> .</li>\n<li><strong></strong></li>\n</ol>\n<ul>\n<li><strong>True color:</strong> No overdraw</li>\n<li><strong>Blue:</strong> Overdrawn 1 time <img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/overdrawn_1.png\" class=\"\" title=\"[Overdrawn 1 time]\"></li>\n<li><strong>Green:</strong> Overdrawn 2 times <img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/overdrawn_2.png\" class=\"\" title=\"[Overdrawn 2 time]\"></li>\n<li><strong>Pink:</strong> Overdrawn 3 times <img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/overdrawn_3.png\" class=\"\" title=\"[Overdrawn 3 time]\"></li>\n<li><strong>Red:</strong> Overdrawn 4 or more times <img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/overdrawn_4.png\" class=\"\" title=\"[Overdrawn 4 time]\"></li>\n</ul>\n<p>     .</p>\n<p>         .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/zw3H5pZ.png\" class=\"\" title=\"[Overdraw Visialization]\">\n\n\n<h3 id=\"Overdraw-\"><a href=\"#Overdraw-\" class=\"headerlink\" title=\"Overdraw \"></a>Overdraw </h3><p>Overdraw       .</p>\n<ol>\n<li><p>layouts   backgrounds  </p>\n</li>\n<li><p>View  </p>\n</li>\n<li><p>  </p>\n</li>\n</ol>\n<ul>\n<li>          .</li>\n<li>              ,    <code>blending equation</code>      .</li>\n</ul>\n<blockquote>\n<p><strong></strong> blending equation : 2     . <a href=\"https://xysterxx.tistory.com/50\"> </a></p>\n</blockquote>\n<h2 id=\"UI---\"><a href=\"#UI---\" class=\"headerlink\" title=\"UI   \"></a>UI   </h2><p>      .            .</p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h3><ul>\n<li>include, merge   .</li>\n<li>include        .</li>\n</ul>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/before_merge.png\" class=\"\" title=\"[before_merge]\">\n\n<ul>\n<li>merge     </li>\n</ul>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/after_merge.png\" class=\"\" title=\"[after_merge]\">\n\n<h3 id=\"---\"><a href=\"#---\" class=\"headerlink\" title=\" ( )\"></a> ( )</h3><p>       <code>android:background=&quot;@color/white&quot;</code>    .</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- /res/layout/activity_main.xml --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">tools:context</span>=<span class=\"string\">&quot;.MainActivity&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@color/white&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;Hello World!&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintLeft_toLeftOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintRight_toRightOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>  View        .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/example1.png\" class=\"\" title=\"[example1]\">\n\n<p> Overdraw       .</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- /res/values/themes.xml --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span> <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- Base application theme. --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Theme.UITest&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;</span>&gt;</span><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Primary brand color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimary&quot;</span>&gt;</span>@color/purple_500<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimaryVariant&quot;</span>&gt;</span>@color/purple_700<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorOnPrimary&quot;</span>&gt;</span>@color/white<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Secondary brand color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorSecondary&quot;</span>&gt;</span>@color/teal_200<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorSecondaryVariant&quot;</span>&gt;</span>@color/teal_700<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorOnSecondary&quot;</span>&gt;</span>@color/black<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Status bar color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:statusBarColor&quot;</span> <span class=\"attr\">tools:targetApi</span>=<span class=\"string\">&quot;l&quot;</span>&gt;</span>?attr/colorPrimaryVariant<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>      Parent  .</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Base.V14.Theme.MaterialComponents.Light</span><br><span class=\"line\"> Base.Theme.MaterialComponents.Light</span><br><span class=\"line\">     Base.Theme.MaterialComponents.Light.DarkActionBar</span><br><span class=\"line\">         Theme.MaterialComponents.Light.DarkActionBar</span><br><span class=\"line\">             Theme.MaterialComponents.DayNight.DarkActionBar</span><br></pre></td></tr></table></figure>\n\n<p>        </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:colorBackground&quot;</span>&gt;</span>@color/design_default_color_background<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>       .</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">color</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;design_default_color_background&quot;</span>&gt;</span>#FFFFFF<span class=\"tag\">&lt;/<span class=\"name\">color</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>          .  Overdraw           <code>&lt;item name=&quot;android:windowBackground&quot;&gt;@color/beige&lt;/item&gt;</code>       .</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- /res/values/themes.xml --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span> <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- Base application theme. --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Theme.UITest&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;</span>&gt;</span><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Primary brand color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimary&quot;</span>&gt;</span>@color/purple_500<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimaryVariant&quot;</span>&gt;</span>@color/purple_700<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorOnPrimary&quot;</span>&gt;</span>@color/white<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Secondary brand color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorSecondary&quot;</span>&gt;</span>@color/teal_200<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorSecondaryVariant&quot;</span>&gt;</span>@color/teal_700<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorOnSecondary&quot;</span>&gt;</span>@color/black<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Status bar color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:statusBarColor&quot;</span> <span class=\"attr\">tools:targetApi</span>=<span class=\"string\">&quot;l&quot;</span>&gt;</span>?attr/colorPrimaryVariant<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:windowBackground&quot;</span>&gt;</span>@color/beige<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>/res/layout/activity_main.xml</code>  <code>android:background=&quot;@color/beige&quot;</code>    Overdraw    .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/example2.png\" class=\"\" title=\"[example2]\">\n\n<p>       Overdraw   .</p>\n<h3 id=\"Lazy-Load-by-ViewStub\"><a href=\"#Lazy-Load-by-ViewStub\" class=\"headerlink\" title=\"Lazy Load by ViewStub\"></a>Lazy Load by ViewStub</h3><p>  <a href=\"https://www.charlezz.com/?p=19977\">  - ViewStub   </a>  .</p>\n<p>ViewStub        (lazy-inflate)     .</p>\n<p>ViewStub   inflate()     ViewStub   ViewStub .</p>\n<p>  ViewStub    .  ViewStub   .</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ViewStub</span> <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/stub&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">android:inflatedId</span>=<span class=\"string\">&quot;@+id/subTree&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">android:layout</span>=<span class=\"string\">&quot;@layout/mySubTree&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;120dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;40dp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>findViewById()   ViewStub   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> viewStub = findViewById(R.id.stub)</span><br></pre></td></tr></table></figure>\n\n<p>   ViewStub ViewStubProxy , ViewStub     .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> binding: ActivityMainBinding = ...</span><br><span class=\"line\"><span class=\"keyword\">val</span> viewStubProxy = binding.stub</span><br><span class=\"line\"><span class=\"keyword\">val</span> viewStub = viewStubProxy.viewStub()</span><br></pre></td></tr></table></figure>\n\n<p>ViewStub       setVisibility()  inflate()    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> viewStub: ViewStub = ...</span><br><span class=\"line\">viewStub.inflate()</span><br><span class=\"line\"><span class=\"comment\">// viewStub.visibility = View.VISIBLE</span></span><br></pre></td></tr></table></figure>\n\n<p>ViewStub      ,       .</p>\n<p>    UI         .</p>\n<p>             .              .</p>\n<p> 1, 2, 3   UI,   ,               .</p>\n<p>      .</p>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><h3 id=\"Members-of-Study\"><a href=\"#Members-of-Study\" class=\"headerlink\" title=\"Members of Study\"></a>Members of Study</h3><p><a href=\"https://soda1127.github.io/introduce-jetpack-compose/\">https://soda1127.github.io/introduce-jetpack-compose/</a></p>\n<p><a href=\"https://velog.io/@jshme/How-To-Render-UI-In-Android\">https://velog.io/@jshme/How-To-Render-UI-In-Android</a></p>\n<p><a href=\"https://velog.io/@jshme/How-To-Render-UI-In-Android-22\">https://velog.io/@jshme/How-To-Render-UI-In-Android-22</a></p>\n<h3 id=\"Official\"><a href=\"#Official\" class=\"headerlink\" title=\"Official\"></a>Official</h3><h4 id=\"Docs\"><a href=\"#Docs\" class=\"headerlink\" title=\"Docs\"></a>Docs</h4><p><a href=\"https://developer.android.com/topic/performance/vitals\">Android vitals</a></p>\n<p><a href=\"https://developer.android.com/guide/topics/ui/how-android-draws\">Android   </a></p>\n<p><a href=\"https://developer.android.com/topic/performance/vitals/render#custom-monitoring\"></a></p>\n<p><a href=\"https://firebase.google.com/docs/perf-mon/get-started-android#pdc\">Firebase Performance Monitoring </a></p>\n<p><a href=\"https://developer.android.com/topic/performance/rendering/inspect-gpu-rendering\">GPU     </a></p>\n<p><a href=\"https://developer.android.com/training/custom-views/custom-drawing?hl=ko\"> </a></p>\n<p><a href=\"https://developer.android.com/training/custom-views/optimizing-view?hl=ko\"> </a></p>\n<h4 id=\"Videos\"><a href=\"#Videos\" class=\"headerlink\" title=\"Videos\"></a>Videos</h4><p><a href=\"https://www.youtube.com/watch?v=1iaHxmfZGGc\">Android Performance Patterns: Understanding VSYNC</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=HXQhu6qfTVU&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=48\">Android Performance Patterns: Rendering Performance 101</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=VzYkVL1n4M8&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=51\">Android Performance Patterns: Tool - Profile GPU Rendering</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=T52v50r-JfE&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=49\">Android Performance Patterns: Understanding Overdraw</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=we6poP0kw6E&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=54\">Android Performance Patterns: Invalidations, Layouts, and Performance</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=wIy8g8yNhNk&index=46&list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\">Android Performance Patterns: Hidden Cost of Transparency</a></p>\n<h3 id=\"Etc-1\"><a href=\"#Etc-1\" class=\"headerlink\" title=\"Etc\"></a>Etc</h3><p><a href=\"https://www.charlezz.com/?p=19977\">  - ViewStub   </a></p>\n<p><a href=\"https://lastyouth.tistory.com/24\">Android Drawing Process 1(App surface, SF Layer)</a></p>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @BankSalad<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<p>  UI Rendering          ,           ,       ,       .</p>\n<h2 id=\"-Jank\"><a href=\"#-Jank\" class=\"headerlink\" title=\"(Jank)\"></a>(Jank)</h2><p>     ,         .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/image.png\" class=\"\" title=\"[Frame Drop]\">\n\n<p>  ,  UI  <strong>OverDraw, Slow Rendering</strong>   .</p>\n<h2 id=\"Slow-Rendering-\"><a href=\"#Slow-Rendering-\" class=\"headerlink\" title=\"Slow Rendering \"></a>Slow Rendering </h2><p>  Google Android Source Document <a href=\"https://developer.android.com/topic/performance/vitals/render#custom-monitoring\"> </a>  .</p>\n<p>       .</p>\n<ul>\n<li><a href=\"https://developer.android.com/topic/performance/vitals/render#visual-inspection\">Visual inspection</a></li>\n<li><a href=\"https://developer.android.com/topic/performance/vitals/render#systrace\">Systrace</a></li>\n<li><a href=\"https://developer.android.com/topic/performance/vitals/render#custom-monitoring\">Custom performance monitoring</a></li>\n</ul>\n<h3 id=\"--Visual-Inspection\"><a href=\"#--Visual-Inspection\" class=\"headerlink\" title=\" (Visual Inspection)\"></a> (Visual Inspection)</h3><p>           .   .</p>\n<h4 id=\"Profile-GPU-Rendering--\"><a href=\"#Profile-GPU-Rendering--\" class=\"headerlink\" title=\"Profile GPU Rendering  \"></a><code>Profile GPU Rendering</code>  </h4><p>60fps(GPU    60   )                .</p>\n<p> Android 4.1(API 16 )         .        .</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ol>\n<li> <strong></strong>  <strong> </strong> .</li>\n<li><strong></strong>  <strong> GPU </strong> .</li>\n<li> GPU   <strong>  </strong>     .</li>\n<li>  .</li>\n</ol>\n<p>   ,        . </p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/gpu_profile.png\" class=\"\" title=\"[Profile GPU Rendering]\">\n\n<ul>\n<li>     .</li>\n<li>              () .</li>\n<li>  16 . 60fps          .        .</li>\n<li>16          .</li>\n<li>         .    API   .</li>\n<li>                  .</li>\n<li>                .</li>\n</ul>\n<h5 id=\"---\"><a href=\"#---\" class=\"headerlink\" title=\"   \"></a>   </h5><img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/graph_color.png\" class=\"\" title=\"[Profile Graph Color]\">\n\n<p>     8  .</p>\n<ul>\n<li><strong>/(Swap)</strong>:    GPU   ,            . CPU  GPU    CPU  GPU   ,      . CPU     .              .     GPU         .</li>\n<li><strong> (Issue)</strong>:            .        .      ,    .</li>\n<li><strong>/(Upload)</strong>:     CPU  GPU     .               .                     .</li>\n<li><strong>(Draw)</strong>:               .   onDraw      ,         .       .    onDraw        .</li>\n<li><strong>  (Measure)</strong>:          .                , Traceview Systrace         .</li>\n<li><strong>(Anim)</strong>:        .          .</li>\n<li><strong> (Input)</strong>:               .       ,        .</li>\n<li><strong>(Misc)</strong>:           .       UI      .    ,   ,        . Method tracing  Systrace          .</li>\n</ul>\n<p>         .       ,         .          .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/gpu_rendering_profile_1.png\" class=\"\" title=\"[Image Comparison By GPU Rendering Profiling - 1]\">\n\n<p>        .  8.1MB      16KB    . </p>\n<p>           .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/gpu_rendering_profile_2.png\" class=\"\" title=\"[Image Comparison By GPU Rendering Profiling - 2]\">\n\n<h4 id=\"Etc\"><a href=\"#Etc\" class=\"headerlink\" title=\"Etc\"></a>Etc</h4><p>      .</p>\n<ol>\n<li>Release   .<ul>\n<li>ART(Android Runtime)          .</li>\n</ul>\n</li>\n<li>   <a href=\"https://developer.android.com/topic/performance/vitals/launch-time#cold\">cold start</a>       .</li>\n<li>         .</li>\n</ol>\n<h3 id=\"Systrace\"><a href=\"#Systrace\" class=\"headerlink\" title=\"Systrace\"></a>Systrace</h3><p>            .</p>\n<p>Systrace           .</p>\n<h3 id=\"----\"><a href=\"#----\" class=\"headerlink\" title=\"    \"></a>    </h3><p>    <strong>Scrollable lists, Layout performance, Rendering performance</strong> .</p>\n<h4 id=\"Scrollable-lists\"><a href=\"#Scrollable-lists\" class=\"headerlink\" title=\"Scrollable lists\"></a>Scrollable lists</h4><p>ListView   RecyclerView        .</p>\n<p>  Systrace    Systrace        .</p>\n<p>RecyclerView systrace    <code>-a &lt;your-package-name&gt;</code> .    systrace      .</p>\n<p>Systrace  RecyclerView systrace   RecyclerView       .</p>\n<ol>\n<li><p>   <code>notifyDataSetChanged()</code>, <code>setAdapter(Adapter)</code>, or <code>swapAdapter(Adapter, boolean)</code>  .</p>\n<ul>\n<li>     .</li>\n<li> <code>SortedList</code>  <code>DiffUtil</code>         .</li>\n</ul>\n</li>\n<li><p><strong>Nested recyclerview</strong></p>\n<ul>\n<li> RecyclerView LinearLayoutManager <code>setInitialPrefetchItemCount(int)</code>    .</li>\n<li>   3.5      , <code>innerLinearLayoutManager.setInitialItemPrefetchCount(4);</code>  .</li>\n</ul>\n</li>\n<li><p><code>RecyclerView</code>  <code>view type</code>    item type       inflation   .</p>\n<ul>\n<li> , ,    ,  view type    bind     . (    )</li>\n</ul>\n</li>\n<li><p>Bind (, onBindViewHolder (VH, int)           1     .</p>\n<ul>\n<li> adapter   item  POJO item  , ViewHolder view  setter   .</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"Layout-performance\"><a href=\"#Layout-performance\" class=\"headerlink\" title=\"Layout performance\"></a>Layout performance</h4><p><code>Systrace</code> <code>Choreographer # doFrame</code>                 .</p>\n<p>     <code>RelativeLayouts</code>  <code>weighted-LinearLayouts</code>         . </p>\n<p>      /          O (n ^ 2)    . </p>\n<p><strong>        RelativeLayout  LinearLayout   .</strong></p>\n<h4 id=\"Rendering-performance\"><a href=\"#Rendering-performance\" class=\"headerlink\" title=\"Rendering performance\"></a>Rendering performance</h4><p><strong>Android UI UI  Record <code>View # draw</code> RenderThread <code>DrawFrame</code>   </strong>.</p>\n<p>   <code>invalidated View</code>  <code>draw (Canvas)</code> .</p>\n<p>   <code>RenderThread</code>  <code>View#draw()</code>      .</p>\n<p><code>View#draw()</code>    ,    UI  bitmap   . <code>Bitmap</code>   CPU       .</p>\n<h3 id=\"Custom-Performance-Monitoring----\"><a href=\"#Custom-Performance-Monitoring----\" class=\"headerlink\" title=\"Custom Performance Monitoring(   )\"></a>Custom Performance Monitoring(   )</h3><p>                  .</p>\n<p>  <a href=\"https://developer.android.com/reference/androidx/core/app/FrameMetricsAggregator\"><code>FrameMetricsAggregator</code></a>         <a href=\"https://firebase.google.com/docs/perf-mon/\">Firebase Performance Monitoring</a>      .</p>\n<p>   .</p>\n<ul>\n<li><a href=\"https://developer.android.com/topic/performance/vitals\">Android Vitals</a></li>\n<li><a href=\"https://firebase.google.com/docs/perf-mon/get-started-android#pdc\">Firebase Performance Monitoring </a></li>\n</ul>\n<h2 id=\"Overdraw\"><a href=\"#Overdraw\" class=\"headerlink\" title=\"Overdraw\"></a>Overdraw</h2><blockquote>\n<p>An app may draw the same pixel more than once within a single frame, an event called overdraw. Overdraw is usually unnecessary, and best eliminated. It manifests itself as a performance problem by wasting GPU time to render pixels that dont contribute to what the user sees on the screen.</p>\n</blockquote>\n<p>           .</p>\n<blockquote>\n<p><strong></strong> : Overdraw   Google I/O            .</p>\n<p>   GPU           .    GPU    ,       UI       .</p>\n<p><a href=\"https://www.youtube.com/watch?v=vkTn3Ule4Ps\"></a> .</p>\n</blockquote>\n<p>   UI       .          .</p>\n<p>        ,        GPU         .         .</p>\n<h3 id=\"Overdraw-\"><a href=\"#Overdraw-\" class=\"headerlink\" title=\"Overdraw \"></a>Overdraw </h3><h5 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h5><ol>\n<li> <strong></strong>  <strong> </strong> .</li>\n<li><strong>  </strong>   <strong>GPU  </strong> .</li>\n<li><strong>GPU  </strong>  <strong>  </strong> .</li>\n<li><strong></strong></li>\n</ol>\n<ul>\n<li><strong>True color:</strong> No overdraw</li>\n<li><strong>Blue:</strong> Overdrawn 1 time <img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/overdrawn_1.png\" class=\"\" title=\"[Overdrawn 1 time]\"></li>\n<li><strong>Green:</strong> Overdrawn 2 times <img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/overdrawn_2.png\" class=\"\" title=\"[Overdrawn 2 time]\"></li>\n<li><strong>Pink:</strong> Overdrawn 3 times <img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/overdrawn_3.png\" class=\"\" title=\"[Overdrawn 3 time]\"></li>\n<li><strong>Red:</strong> Overdrawn 4 or more times <img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/overdrawn_4.png\" class=\"\" title=\"[Overdrawn 4 time]\"></li>\n</ul>\n<p>     .</p>\n<p>         .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/zw3H5pZ.png\" class=\"\" title=\"[Overdraw Visialization]\">\n\n\n<h3 id=\"Overdraw-\"><a href=\"#Overdraw-\" class=\"headerlink\" title=\"Overdraw \"></a>Overdraw </h3><p>Overdraw       .</p>\n<ol>\n<li><p>layouts   backgrounds  </p>\n</li>\n<li><p>View  </p>\n</li>\n<li><p>  </p>\n</li>\n</ol>\n<ul>\n<li>          .</li>\n<li>              ,    <code>blending equation</code>      .</li>\n</ul>\n<blockquote>\n<p><strong></strong> blending equation : 2     . <a href=\"https://xysterxx.tistory.com/50\"> </a></p>\n</blockquote>\n<h2 id=\"UI---\"><a href=\"#UI---\" class=\"headerlink\" title=\"UI   \"></a>UI   </h2><p>      .            .</p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h3><ul>\n<li>include, merge   .</li>\n<li>include        .</li>\n</ul>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/before_merge.png\" class=\"\" title=\"[before_merge]\">\n\n<ul>\n<li>merge     </li>\n</ul>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/after_merge.png\" class=\"\" title=\"[after_merge]\">\n\n<h3 id=\"---\"><a href=\"#---\" class=\"headerlink\" title=\" ( )\"></a> ( )</h3><p>       <code>android:background=&quot;@color/white&quot;</code>    .</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- /res/layout/activity_main.xml --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">tools:context</span>=<span class=\"string\">&quot;.MainActivity&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@color/white&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:text</span>=<span class=\"string\">&quot;Hello World!&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintLeft_toLeftOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintRight_toRightOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>  View        .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/example1.png\" class=\"\" title=\"[example1]\">\n\n<p> Overdraw       .</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- /res/values/themes.xml --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span> <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- Base application theme. --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Theme.UITest&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;Theme.MaterialComponents.DayNight.DarkActionBar&quot;</span>&gt;</span><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Primary brand color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimary&quot;</span>&gt;</span>@color/purple_500<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimaryVariant&quot;</span>&gt;</span>@color/purple_700<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorOnPrimary&quot;</span>&gt;</span>@color/white<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Secondary brand color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorSecondary&quot;</span>&gt;</span>@color/teal_200<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorSecondaryVariant&quot;</span>&gt;</span>@color/teal_700<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorOnSecondary&quot;</span>&gt;</span>@color/black<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Status bar color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:statusBarColor&quot;</span> <span class=\"attr\">tools:targetApi</span>=<span class=\"string\">&quot;l&quot;</span>&gt;</span>?attr/colorPrimaryVariant<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>      Parent  .</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Base.V14.Theme.MaterialComponents.Light</span><br><span class=\"line\"> Base.Theme.MaterialComponents.Light</span><br><span class=\"line\">     Base.Theme.MaterialComponents.Light.DarkActionBar</span><br><span class=\"line\">         Theme.MaterialComponents.Light.DarkActionBar</span><br><span class=\"line\">             Theme.MaterialComponents.DayNight.DarkActionBar</span><br></pre></td></tr></table></figure>\n\n<p>        </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:colorBackground&quot;</span>&gt;</span>@color/design_default_color_background<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>       .</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">color</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;design_default_color_background&quot;</span>&gt;</span>#FFFFFF<span class=\"tag\">&lt;/<span class=\"name\">color</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>          .  Overdraw           <code>&lt;item name=&quot;android:windowBackground&quot;&gt;@color/beige&lt;/item&gt;</code>       .</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- /res/values/themes.xml --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span> <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- Base application theme. --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Theme.UITest&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;</span>&gt;</span><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Primary brand color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimary&quot;</span>&gt;</span>@color/purple_500<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimaryVariant&quot;</span>&gt;</span>@color/purple_700<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorOnPrimary&quot;</span>&gt;</span>@color/white<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Secondary brand color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorSecondary&quot;</span>&gt;</span>@color/teal_200<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorSecondaryVariant&quot;</span>&gt;</span>@color/teal_700<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorOnSecondary&quot;</span>&gt;</span>@color/black<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Status bar color. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:statusBarColor&quot;</span> <span class=\"attr\">tools:targetApi</span>=<span class=\"string\">&quot;l&quot;</span>&gt;</span>?attr/colorPrimaryVariant<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"comment\">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:windowBackground&quot;</span>&gt;</span>@color/beige<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p> <code>/res/layout/activity_main.xml</code>  <code>android:background=&quot;@color/beige&quot;</code>    Overdraw    .</p>\n<img src=\"/Team-Blog/2021/05/19/2021-05-19%20Android%20UI%20Rendering%20Optimization%20Part%203/example2.png\" class=\"\" title=\"[example2]\">\n\n<p>       Overdraw   .</p>\n<h3 id=\"Lazy-Load-by-ViewStub\"><a href=\"#Lazy-Load-by-ViewStub\" class=\"headerlink\" title=\"Lazy Load by ViewStub\"></a>Lazy Load by ViewStub</h3><p>  <a href=\"https://www.charlezz.com/?p=19977\">  - ViewStub   </a>  .</p>\n<p>ViewStub        (lazy-inflate)     .</p>\n<p>ViewStub   inflate()     ViewStub   ViewStub .</p>\n<p>  ViewStub    .  ViewStub   .</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ViewStub</span> <span class=\"attr\">android:id</span>=<span class=\"string\">&quot;@+id/stub&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">android:inflatedId</span>=<span class=\"string\">&quot;@+id/subTree&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">android:layout</span>=<span class=\"string\">&quot;@layout/mySubTree&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;120dp&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;40dp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>findViewById()   ViewStub   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> viewStub = findViewById(R.id.stub)</span><br></pre></td></tr></table></figure>\n\n<p>   ViewStub ViewStubProxy , ViewStub     .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> binding: ActivityMainBinding = ...</span><br><span class=\"line\"><span class=\"keyword\">val</span> viewStubProxy = binding.stub</span><br><span class=\"line\"><span class=\"keyword\">val</span> viewStub = viewStubProxy.viewStub()</span><br></pre></td></tr></table></figure>\n\n<p>ViewStub       setVisibility()  inflate()    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> viewStub: ViewStub = ...</span><br><span class=\"line\">viewStub.inflate()</span><br><span class=\"line\"><span class=\"comment\">// viewStub.visibility = View.VISIBLE</span></span><br></pre></td></tr></table></figure>\n\n<p>ViewStub      ,       .</p>\n<p>    UI         .</p>\n<p>             .              .</p>\n<p> 1, 2, 3   UI,   ,               .</p>\n<p>      .</p>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><h3 id=\"Members-of-Study\"><a href=\"#Members-of-Study\" class=\"headerlink\" title=\"Members of Study\"></a>Members of Study</h3><p><a href=\"https://soda1127.github.io/introduce-jetpack-compose/\">https://soda1127.github.io/introduce-jetpack-compose/</a></p>\n<p><a href=\"https://velog.io/@jshme/How-To-Render-UI-In-Android\">https://velog.io/@jshme/How-To-Render-UI-In-Android</a></p>\n<p><a href=\"https://velog.io/@jshme/How-To-Render-UI-In-Android-22\">https://velog.io/@jshme/How-To-Render-UI-In-Android-22</a></p>\n<h3 id=\"Official\"><a href=\"#Official\" class=\"headerlink\" title=\"Official\"></a>Official</h3><h4 id=\"Docs\"><a href=\"#Docs\" class=\"headerlink\" title=\"Docs\"></a>Docs</h4><p><a href=\"https://developer.android.com/topic/performance/vitals\">Android vitals</a></p>\n<p><a href=\"https://developer.android.com/guide/topics/ui/how-android-draws\">Android   </a></p>\n<p><a href=\"https://developer.android.com/topic/performance/vitals/render#custom-monitoring\"></a></p>\n<p><a href=\"https://firebase.google.com/docs/perf-mon/get-started-android#pdc\">Firebase Performance Monitoring </a></p>\n<p><a href=\"https://developer.android.com/topic/performance/rendering/inspect-gpu-rendering\">GPU     </a></p>\n<p><a href=\"https://developer.android.com/training/custom-views/custom-drawing?hl=ko\"> </a></p>\n<p><a href=\"https://developer.android.com/training/custom-views/optimizing-view?hl=ko\"> </a></p>\n<h4 id=\"Videos\"><a href=\"#Videos\" class=\"headerlink\" title=\"Videos\"></a>Videos</h4><p><a href=\"https://www.youtube.com/watch?v=1iaHxmfZGGc\">Android Performance Patterns: Understanding VSYNC</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=HXQhu6qfTVU&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=48\">Android Performance Patterns: Rendering Performance 101</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=VzYkVL1n4M8&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=51\">Android Performance Patterns: Tool - Profile GPU Rendering</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=T52v50r-JfE&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=49\">Android Performance Patterns: Understanding Overdraw</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=we6poP0kw6E&list=PLOU2XLYxmsIKEOXh5TwZEv89aofHzNCiu&index=54\">Android Performance Patterns: Invalidations, Layouts, and Performance</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=wIy8g8yNhNk&index=46&list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\">Android Performance Patterns: Hidden Cost of Transparency</a></p>\n<h3 id=\"Etc-1\"><a href=\"#Etc-1\" class=\"headerlink\" title=\"Etc\"></a>Etc</h3><p><a href=\"https://www.charlezz.com/?p=19977\">  - ViewStub   </a></p>\n<p><a href=\"https://lastyouth.tistory.com/24\">Android Drawing Process 1(App surface, SF Layer)</a></p>"},{"title":"Image Loading and Caching Library Part 1  Why use?","date":"2021-06-23T16:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_image_library.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n\nAndroid Image   ImageView  .\n\nImageView   .\n\n### android.widget.ImageView\n\n```kotlin\nkotlin.Any\n   android.view.View\n     android.widget.ImageView\n```\n\nImageView View   Image   .\n\n`android.graphics.Bitmap` `android.graphics.drawable.Drawable`    , tint      .\n\n xml  ImageView   .\n\n```js\n<LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\">\n    <ImageView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:src=\"@drawable/my_image\"\n        android:contentDescription=\"@string/my_image_description\"/>\n</LinearLayout>\n```\n\n> **** [Android Developers#Drawble Resources](https://developer.android.com/guide/topics/resources/drawable-resource.html)\n\n> **** [Android Developers#Handling bitmaps](https://developer.android.com/topic/performance/graphics/index.html)\n\n### Bitmap\n\n```kotlin\nkotlin.Any\n   android.graphics.Bitmap\n```\n\n `.bmp`     .\n\n      .\n\n            , Android       .\n\n     `.jpg`, `.jpeg`, `.png`, `.gif`      .\n\n## Android  ?\n\nAndroid Platform     ?\n\n  .\n\nAndroid Studio **Empty Activity**    , Layout   .\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <ImageView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:src=\"@drawable/ic_launcher_foreground\"\n        android:background=\"@drawable/ic_launcher_background\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"/>\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n       .\n\n{% asset_img Screenshot_1623775512.png 350 [Screenshot_1623775512] %}\n\n   xml  ImageView   .\n\n   .\n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        var imageView: ImageView = findViewById(R.id.imageView)\n        imageView.background = getDrawable(R.drawable.ic_launcher_background)\n        imageView.setImageResource(R.drawable.ic_launcher_foreground)\n    }\n}\n```\n\n `imageView`  `background`  `View`   , `ImageView`   `setImageResource`  .\n\n\n```java\n// ImageView#setImageResource\n@android.view.RemotableViewMethod(asyncImpl=\"setImageResourceAsync\")\npublic void setImageResource(@DrawableRes int resId) {\n  // The resource configuration may have changed, so we should always\n  // try to load the resource even if the resId hasn't changed.\n  final int oldWidth = mDrawableWidth;\n  final int oldHeight = mDrawableHeight;\n\n  updateDrawable(null);\n  mResource = resId;\n  mUri = null;\n\n  resolveUri();\n\n  if (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) {\n    requestLayout();\n  }\n  invalidate();\n}\n```\n\n`ImageView`       .\n\n```java\n// ImageView#setImageBitmap\n@android.view.RemotableViewMethod\npublic void setImageBitmap(Bitmap bm) {\n  // Hacky fix to force setImageDrawable to do a full setImageDrawable\n  // instead of doing an object reference comparison\n  mDrawable = null;\n  if (mRecycleableBitmapDrawable == null) {\n      mRecycleableBitmapDrawable = new BitmapDrawable(mContext.getResources(), bm);\n  } else {\n      mRecycleableBitmapDrawable.setBitmap(bm);\n  }\n  setImageDrawable(mRecycleableBitmapDrawable);\n}\n```\n\n```java\n// ImageView#setImageDrawable\npublic void setImageDrawable(@Nullable Drawable drawable) {\n  if (mDrawable != drawable) {\n    mResource = 0;\n    mUri = null;\n\n    final int oldWidth = mDrawableWidth;\n    final int oldHeight = mDrawableHeight;\n\n    updateDrawable(drawable);\n\n    if (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) {\n      requestLayout();\n    }\n    invalidate();\n  }\n}\n```\n\n```java\n// ImageView#setImageURI\n@android.view.RemotableViewMethod(asyncImpl=\"setImageURIAsync\")\npublic void setImageURI(@Nullable Uri uri) {\n  if (mResource != 0 || (mUri != uri && (uri == null || mUri == null || !uri.equals(mUri)))) {\n    updateDrawable(null);\n    mResource = 0;\n    mUri = uri;\n\n    final int oldWidth = mDrawableWidth;\n    final int oldHeight = mDrawableHeight;\n\n    resolveUri();\n\n    if (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) {\n      requestLayout();\n    }\n    invalidate();\n  }\n}\n```\n\n   `ImageView`      .\n\n1.      .\n2. `requestLayout()`  .\n3. `invalidate()`  .\n\n`requestLayout()` `invalidate()`  `View`  .\n\n        onDraw    .\n\n  , Android `Bitmap`  `Drawable`         .\n\n- `Bitmap`       .       4048x3036 (12 )  . `Bitmap`  ARGB_8888  ,   2.3 (API level 9)       48MB    .               .\n\n- UI           ANR    .  `Bitmap`        .\n\n-   `Bitmap`    ,     .  ,      .\n\n-  `Bitmap`          .   `Bitmap`       ,     .\n\n\n     .\n\n### ImageView   \n\n#### Out of memory\n\nAndroid        .\n\n        ,     OOM      .\n\n        ,               .\n\n#### Slow Loading\n\nBitmap          ,           .\n\n   ,            .\n\n#### Bitmap Caching (Memory / Disk cache)\n\n           .\n\n   url     ,  url            .\n\nAndroid     Memory   ,   Disk    .\n\n#### LRU Cache\n\nAndroid `LruCache`   .\n\n        .\n\n            **LRU Algorithm** , 4Mib()     .\n\n> **** [Android Developers#LruCache](https://developer.android.com/reference/android/util/LruCache)\n\n> **** [androidx.collection.LruCache](https://developer.android.com/reference/androidx/collection/LruCache)\n\n> **** [Cache replacement policies#recently used](https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU))\n\n#### Unresponsive UI / Gabarge collector\n\nBitmap     Bitmap      .\n\nui thread      ui    ,  16ms    Android OS        .\n\n### Image Library \n\nAndroid ImageView  Bitmap     ,    .\n\n           **   ** .\n\n Android      .\n\n#### 1. Picasso\n\n![](https://square.github.io/picasso/static/sample.png)\n\n-   : [Square Open Source](https://square.github.io)\n-   : https://square.github.io/picasso/\n-  \n  -  \n  -   \n  -   \n  -  \n  -     \n\n\n#### 2. Glide\n\n![](https://github.com/bumptech/glide/blob/master/static/glide_logo.png?raw=true)\n\n-   : Bump Technologies\n-   : https://bumptech.github.io/glide/\n-  \n  -  \n  - `LruResourceCache`  `MemorySizeCalculator`   \n  - `Lru`    ( 250mb)\n  -      \n  - `RGB_565`   \n  - gif, jpeg, war, png, webp  \n\n### Coil (Coroutine Image Loader)\n\n![](https://github.com/coil-kt/coil/raw/main/logo.svg)\n\n-   : [Instacart](https://www.instacart.com)\n-   : https://github.com/coil-kt/coil\n-  \n  - `MemoryCache.Key`   \n  - `OkHttpClient`    (`CoilUtils.createDefaultCache`  )\n  -  \n  -  \n  -       \n  - Corotines, Okio    \n  - bmp, jpeg, png, webp  \n  - Android 8.0  heif  \n  - `coil-gif`  \n    - Android 9.0  animated webp   \n    - Android 11.0  animated heif  ()\n  - `coil-svg`   svg  \n  - `coil-video`   Android      frame  \n\n\n\n### Fresco\n\n<img alt=\"Fresco Logo\" src=\"https://github.com/facebook/fresco/raw/master/docs/static/sample-images/fresco_logo.svg\" width=\"15%\" />\n\n-   : [Facebook](https://developers.facebook.com)\n-   : https://frescolib.org\n-  \n  -      \n  -    \n  - Drawees   \n  - URI    jpeg  \n  - Android 4.0  OOM \n  -   PlaceHolder \n\n### AMUL (Android-Universal-Image-Loader)\n\n![](https://github.com/nostra13/Android-Universal-Image-Loader/raw/master/sample/src/main/res/drawable-mdpi/ic_launcher.png)\n\n-   : [Sergey Tarasevich(User)](https://github.com/nostra13/Android-Universal-Image-Loader)\n-   : https://github.com/nostra13/Android-Universal-Image-Loader/wiki\n-  \n  - /    \n  - Thread / Downloader / Decoder   \n  -     \n  -   \n\n\n##     \n\n### Picasso\n\nPicasso            . \n\n      .         .     .\n\n Picasso     Transformation ,   &  ,  ImageView        .\n\n| MinSdkVersion | CompileSdkVersion | AAR Size |  |\n| :--: | :--: | :--: | :--: |\n| 14 | 29 | 105kb | GIF   |\n\n``` kotlin\nPicasso.get().load(url)\n    .transform(RoundedCornersTransformation(128, 3))\n    .into(imageView5, object : Callback {\n        override fun onSuccess() {\n            toast(\"Complete\")\n        }\n\n        override fun onError(e: Exception?) {\n            TODO(\"Not yet implemented\")\n        }\n    })\n```\n\n|    : 6.4s |    : 1.6s |\n| :--: | :--: |\n| {% asset_img picasso_test.gif [picasso test] %} | {% asset_img picasso_caching.gif [picasso_caching] %} |\n\nPicasso         .   `1000 * 800`    , Bitmap  `1000 * 800 * 4bytes` = 3MB  ImageView   .      OOM   . \n\n{% asset_img IMG_9F5E046409C4-1.jpg [IMG_9F5E046409C4-1] %}\n\n    `fit()`                 .\n\n```kotlin\nPicasso.get()\n    .fit()\n    .transform({...})\n    .load(url)\n```\n\n#### Heap Dump\n\n{% asset_img heap_dump.png [heap_dump] %}\n\n10,136,858 byte (= 10MB)\n\n### Glide\n\nGoogle     Glide   ,         . \n\n ,             , ,  , ,  GIF    . \n\n HttpUrlConnection             API   , Volly  OkHttp     . \n\n| MinSdkVersion | CompileSdkVersion | AAR Size |  |\n| :--: | :--: | :--: | :--: |\n| 14 | 26 | 625kb | |\n\nGlide       . \n\n```kotlin\nGlide.with(this)\n    .load(url)\n    .apply(RequestOptions.bitmapTransform(RoundedCornersTransformation(128, 3)))\n    .listener(object : RequestListener<Drawable> {\n        override fun onLoadFailed(e: GlideException?, model: Any?, target: Target<Drawable>?, isFirstResource: Boolean): Boolean {\n            TODO(\"Not yet implemented\")\n        }\n\n        override fun onResourceReady(resource: Drawable?, model: Any?, target: Target<Drawable>?, \n          dataSource: DataSource?, isFirstResource: Boolean): Boolean {\n            toast(\"Complete\")\n            return false\n        }\n    })\n    .into(imageView)\n```\n\n|    : 6.2s |    : 0.72s |\n| :--: | :--: |\n| {% asset_img glide_test.gif [glide_test] %} | {% asset_img glide_caching.gif [glide_caching] %} |\n\n\nPicasso  Glide                      Picasso .\n\n{% asset_img IMG_8FF7402ED110-1.jpg [IMG_8FF7402ED110-1] %}\n\nGlide      Gif   .\n\nPicasso , Coil `1.2.2`    Gif      , Fresco Gif Transformation      .)\n\n{% asset_img glide_gif.gif [glide_gif] %}\n\n#### Heap Dump\n\n{% asset_img glide_heap_dump.png [glide_heap_dump] %}\n\n11,004,024 byte (= 11MB)\n\n\n### Coil\n\nInstacart  Coil  Coroutine Image Loading        &  .     100%    AndroidX, OkHttp        . Coil   , Glide       Glide  ``  .  ImageView  ,        ` `    .\n\n| MinSdkVersion | CompileSdkVersion | AAR Size |  |\n| :--: | :--: | :--: | :--: |\n| 14 | 30 | 16kb | |\n\n\n``` kotlin\nimageView.load(url) {\n    listener(\n        onError = { _,_ -> /** Show toast. */ },\n        onSuccess = { _,_ -> toast(\"Complete\") }\n    )\n    transformations(RoundedCornersTransformation(128f))\n}\n```\n\n|    : 5.24s |    : 1.3s |\n| :--: | :--: |\n| {% asset_img coil_test.gif [coil_test] %} | {% asset_img coil_caching.gif [coil_caching] %} |\n\n#### Heap Dump\n\n{% asset_img coil_heap_dump.png [coil_heap_dump] %}\n\n6,995,072 byte (= 7MB)\n\n\n     Part 3  .\n","source":"_posts/2021-06-24 Image Loading and Caching Library Part 1.md","raw":"---\ntitle: Image Loading and Caching Library Part 1  Why use?\ndate: 2021-06-24 01:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_image_library.png\ncategories:\n- Image Library\ntags:\n- Android\n- Image\n- Library\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n\nAndroid Image   ImageView  .\n\nImageView   .\n\n### android.widget.ImageView\n\n```kotlin\nkotlin.Any\n   android.view.View\n     android.widget.ImageView\n```\n\nImageView View   Image   .\n\n`android.graphics.Bitmap` `android.graphics.drawable.Drawable`    , tint      .\n\n xml  ImageView   .\n\n```js\n<LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\">\n    <ImageView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:src=\"@drawable/my_image\"\n        android:contentDescription=\"@string/my_image_description\"/>\n</LinearLayout>\n```\n\n> **** [Android Developers#Drawble Resources](https://developer.android.com/guide/topics/resources/drawable-resource.html)\n\n> **** [Android Developers#Handling bitmaps](https://developer.android.com/topic/performance/graphics/index.html)\n\n### Bitmap\n\n```kotlin\nkotlin.Any\n   android.graphics.Bitmap\n```\n\n `.bmp`     .\n\n      .\n\n            , Android       .\n\n     `.jpg`, `.jpeg`, `.png`, `.gif`      .\n\n## Android  ?\n\nAndroid Platform     ?\n\n  .\n\nAndroid Studio **Empty Activity**    , Layout   .\n\n```js\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\">\n\n    <ImageView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:src=\"@drawable/ic_launcher_foreground\"\n        android:background=\"@drawable/ic_launcher_background\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"/>\n\n</androidx.constraintlayout.widget.ConstraintLayout>\n```\n\n       .\n\n{% asset_img Screenshot_1623775512.png 350 [Screenshot_1623775512] %}\n\n   xml  ImageView   .\n\n   .\n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        var imageView: ImageView = findViewById(R.id.imageView)\n        imageView.background = getDrawable(R.drawable.ic_launcher_background)\n        imageView.setImageResource(R.drawable.ic_launcher_foreground)\n    }\n}\n```\n\n `imageView`  `background`  `View`   , `ImageView`   `setImageResource`  .\n\n\n```java\n// ImageView#setImageResource\n@android.view.RemotableViewMethod(asyncImpl=\"setImageResourceAsync\")\npublic void setImageResource(@DrawableRes int resId) {\n  // The resource configuration may have changed, so we should always\n  // try to load the resource even if the resId hasn't changed.\n  final int oldWidth = mDrawableWidth;\n  final int oldHeight = mDrawableHeight;\n\n  updateDrawable(null);\n  mResource = resId;\n  mUri = null;\n\n  resolveUri();\n\n  if (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) {\n    requestLayout();\n  }\n  invalidate();\n}\n```\n\n`ImageView`       .\n\n```java\n// ImageView#setImageBitmap\n@android.view.RemotableViewMethod\npublic void setImageBitmap(Bitmap bm) {\n  // Hacky fix to force setImageDrawable to do a full setImageDrawable\n  // instead of doing an object reference comparison\n  mDrawable = null;\n  if (mRecycleableBitmapDrawable == null) {\n      mRecycleableBitmapDrawable = new BitmapDrawable(mContext.getResources(), bm);\n  } else {\n      mRecycleableBitmapDrawable.setBitmap(bm);\n  }\n  setImageDrawable(mRecycleableBitmapDrawable);\n}\n```\n\n```java\n// ImageView#setImageDrawable\npublic void setImageDrawable(@Nullable Drawable drawable) {\n  if (mDrawable != drawable) {\n    mResource = 0;\n    mUri = null;\n\n    final int oldWidth = mDrawableWidth;\n    final int oldHeight = mDrawableHeight;\n\n    updateDrawable(drawable);\n\n    if (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) {\n      requestLayout();\n    }\n    invalidate();\n  }\n}\n```\n\n```java\n// ImageView#setImageURI\n@android.view.RemotableViewMethod(asyncImpl=\"setImageURIAsync\")\npublic void setImageURI(@Nullable Uri uri) {\n  if (mResource != 0 || (mUri != uri && (uri == null || mUri == null || !uri.equals(mUri)))) {\n    updateDrawable(null);\n    mResource = 0;\n    mUri = uri;\n\n    final int oldWidth = mDrawableWidth;\n    final int oldHeight = mDrawableHeight;\n\n    resolveUri();\n\n    if (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) {\n      requestLayout();\n    }\n    invalidate();\n  }\n}\n```\n\n   `ImageView`      .\n\n1.      .\n2. `requestLayout()`  .\n3. `invalidate()`  .\n\n`requestLayout()` `invalidate()`  `View`  .\n\n        onDraw    .\n\n  , Android `Bitmap`  `Drawable`         .\n\n- `Bitmap`       .       4048x3036 (12 )  . `Bitmap`  ARGB_8888  ,   2.3 (API level 9)       48MB    .               .\n\n- UI           ANR    .  `Bitmap`        .\n\n-   `Bitmap`    ,     .  ,      .\n\n-  `Bitmap`          .   `Bitmap`       ,     .\n\n\n     .\n\n### ImageView   \n\n#### Out of memory\n\nAndroid        .\n\n        ,     OOM      .\n\n        ,               .\n\n#### Slow Loading\n\nBitmap          ,           .\n\n   ,            .\n\n#### Bitmap Caching (Memory / Disk cache)\n\n           .\n\n   url     ,  url            .\n\nAndroid     Memory   ,   Disk    .\n\n#### LRU Cache\n\nAndroid `LruCache`   .\n\n        .\n\n            **LRU Algorithm** , 4Mib()     .\n\n> **** [Android Developers#LruCache](https://developer.android.com/reference/android/util/LruCache)\n\n> **** [androidx.collection.LruCache](https://developer.android.com/reference/androidx/collection/LruCache)\n\n> **** [Cache replacement policies#recently used](https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU))\n\n#### Unresponsive UI / Gabarge collector\n\nBitmap     Bitmap      .\n\nui thread      ui    ,  16ms    Android OS        .\n\n### Image Library \n\nAndroid ImageView  Bitmap     ,    .\n\n           **   ** .\n\n Android      .\n\n#### 1. Picasso\n\n![](https://square.github.io/picasso/static/sample.png)\n\n-   : [Square Open Source](https://square.github.io)\n-   : https://square.github.io/picasso/\n-  \n  -  \n  -   \n  -   \n  -  \n  -     \n\n\n#### 2. Glide\n\n![](https://github.com/bumptech/glide/blob/master/static/glide_logo.png?raw=true)\n\n-   : Bump Technologies\n-   : https://bumptech.github.io/glide/\n-  \n  -  \n  - `LruResourceCache`  `MemorySizeCalculator`   \n  - `Lru`    ( 250mb)\n  -      \n  - `RGB_565`   \n  - gif, jpeg, war, png, webp  \n\n### Coil (Coroutine Image Loader)\n\n![](https://github.com/coil-kt/coil/raw/main/logo.svg)\n\n-   : [Instacart](https://www.instacart.com)\n-   : https://github.com/coil-kt/coil\n-  \n  - `MemoryCache.Key`   \n  - `OkHttpClient`    (`CoilUtils.createDefaultCache`  )\n  -  \n  -  \n  -       \n  - Corotines, Okio    \n  - bmp, jpeg, png, webp  \n  - Android 8.0  heif  \n  - `coil-gif`  \n    - Android 9.0  animated webp   \n    - Android 11.0  animated heif  ()\n  - `coil-svg`   svg  \n  - `coil-video`   Android      frame  \n\n\n\n### Fresco\n\n<img alt=\"Fresco Logo\" src=\"https://github.com/facebook/fresco/raw/master/docs/static/sample-images/fresco_logo.svg\" width=\"15%\" />\n\n-   : [Facebook](https://developers.facebook.com)\n-   : https://frescolib.org\n-  \n  -      \n  -    \n  - Drawees   \n  - URI    jpeg  \n  - Android 4.0  OOM \n  -   PlaceHolder \n\n### AMUL (Android-Universal-Image-Loader)\n\n![](https://github.com/nostra13/Android-Universal-Image-Loader/raw/master/sample/src/main/res/drawable-mdpi/ic_launcher.png)\n\n-   : [Sergey Tarasevich(User)](https://github.com/nostra13/Android-Universal-Image-Loader)\n-   : https://github.com/nostra13/Android-Universal-Image-Loader/wiki\n-  \n  - /    \n  - Thread / Downloader / Decoder   \n  -     \n  -   \n\n\n##     \n\n### Picasso\n\nPicasso            . \n\n      .         .     .\n\n Picasso     Transformation ,   &  ,  ImageView        .\n\n| MinSdkVersion | CompileSdkVersion | AAR Size |  |\n| :--: | :--: | :--: | :--: |\n| 14 | 29 | 105kb | GIF   |\n\n``` kotlin\nPicasso.get().load(url)\n    .transform(RoundedCornersTransformation(128, 3))\n    .into(imageView5, object : Callback {\n        override fun onSuccess() {\n            toast(\"Complete\")\n        }\n\n        override fun onError(e: Exception?) {\n            TODO(\"Not yet implemented\")\n        }\n    })\n```\n\n|    : 6.4s |    : 1.6s |\n| :--: | :--: |\n| {% asset_img picasso_test.gif [picasso test] %} | {% asset_img picasso_caching.gif [picasso_caching] %} |\n\nPicasso         .   `1000 * 800`    , Bitmap  `1000 * 800 * 4bytes` = 3MB  ImageView   .      OOM   . \n\n{% asset_img IMG_9F5E046409C4-1.jpg [IMG_9F5E046409C4-1] %}\n\n    `fit()`                 .\n\n```kotlin\nPicasso.get()\n    .fit()\n    .transform({...})\n    .load(url)\n```\n\n#### Heap Dump\n\n{% asset_img heap_dump.png [heap_dump] %}\n\n10,136,858 byte (= 10MB)\n\n### Glide\n\nGoogle     Glide   ,         . \n\n ,             , ,  , ,  GIF    . \n\n HttpUrlConnection             API   , Volly  OkHttp     . \n\n| MinSdkVersion | CompileSdkVersion | AAR Size |  |\n| :--: | :--: | :--: | :--: |\n| 14 | 26 | 625kb | |\n\nGlide       . \n\n```kotlin\nGlide.with(this)\n    .load(url)\n    .apply(RequestOptions.bitmapTransform(RoundedCornersTransformation(128, 3)))\n    .listener(object : RequestListener<Drawable> {\n        override fun onLoadFailed(e: GlideException?, model: Any?, target: Target<Drawable>?, isFirstResource: Boolean): Boolean {\n            TODO(\"Not yet implemented\")\n        }\n\n        override fun onResourceReady(resource: Drawable?, model: Any?, target: Target<Drawable>?, \n          dataSource: DataSource?, isFirstResource: Boolean): Boolean {\n            toast(\"Complete\")\n            return false\n        }\n    })\n    .into(imageView)\n```\n\n|    : 6.2s |    : 0.72s |\n| :--: | :--: |\n| {% asset_img glide_test.gif [glide_test] %} | {% asset_img glide_caching.gif [glide_caching] %} |\n\n\nPicasso  Glide                      Picasso .\n\n{% asset_img IMG_8FF7402ED110-1.jpg [IMG_8FF7402ED110-1] %}\n\nGlide      Gif   .\n\nPicasso , Coil `1.2.2`    Gif      , Fresco Gif Transformation      .)\n\n{% asset_img glide_gif.gif [glide_gif] %}\n\n#### Heap Dump\n\n{% asset_img glide_heap_dump.png [glide_heap_dump] %}\n\n11,004,024 byte (= 11MB)\n\n\n### Coil\n\nInstacart  Coil  Coroutine Image Loading        &  .     100%    AndroidX, OkHttp        . Coil   , Glide       Glide  ``  .  ImageView  ,        ` `    .\n\n| MinSdkVersion | CompileSdkVersion | AAR Size |  |\n| :--: | :--: | :--: | :--: |\n| 14 | 30 | 16kb | |\n\n\n``` kotlin\nimageView.load(url) {\n    listener(\n        onError = { _,_ -> /** Show toast. */ },\n        onSuccess = { _,_ -> toast(\"Complete\") }\n    )\n    transformations(RoundedCornersTransformation(128f))\n}\n```\n\n|    : 5.24s |    : 1.3s |\n| :--: | :--: |\n| {% asset_img coil_test.gif [coil_test] %} | {% asset_img coil_caching.gif [coil_caching] %} |\n\n#### Heap Dump\n\n{% asset_img coil_heap_dump.png [coil_heap_dump] %}\n\n6,995,072 byte (= 7MB)\n\n\n     Part 3  .\n","slug":"2021-06-24 Image Loading and Caching Library Part 1","published":1,"updated":"2021-07-25T13:29:06.334Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7ls001r3lrehr0p4cex","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<span id=\"more\"></span>\n\n<p>Android Image   ImageView  .</p>\n<p>ImageView   .</p>\n<h3 id=\"android-widget-ImageView\"><a href=\"#android-widget-ImageView\" class=\"headerlink\" title=\"android.widget.ImageView\"></a>android.widget.ImageView</h3><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kotlin.Any</span><br><span class=\"line\">   android.view.View</span><br><span class=\"line\">     android.widget.ImageView</span><br></pre></td></tr></table></figure>\n\n<p>ImageView View   Image   .</p>\n<p><code>android.graphics.Bitmap</code> <code>android.graphics.drawable.Drawable</code>    , tint      .</p>\n<p> xml  ImageView   .</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;LinearLayout</span><br><span class=\"line\">    <span class=\"attr\">xmlns</span>:android=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">android</span>:layout_width=<span class=\"string\">&quot;match_parent&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">android</span>:layout_height=<span class=\"string\">&quot;match_parent&quot;</span>&gt;</span><br><span class=\"line\">    <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ImageView</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:src</span>=<span class=\"string\">&quot;@drawable/my_image&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:contentDescription</span>=<span class=\"string\">&quot;@string/my_image_description&quot;</span>/&gt;</span></span></span><br><span class=\"line\">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/guide/topics/resources/drawable-resource.html\">Android Developers#Drawble Resources</a></p>\n</blockquote>\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/topic/performance/graphics/index.html\">Android Developers#Handling bitmaps</a></p>\n</blockquote>\n<h3 id=\"Bitmap\"><a href=\"#Bitmap\" class=\"headerlink\" title=\"Bitmap\"></a>Bitmap</h3><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kotlin.Any</span><br><span class=\"line\">   android.graphics.Bitmap</span><br></pre></td></tr></table></figure>\n\n<p> <code>.bmp</code>     .</p>\n<p>      .</p>\n<p>            , Android       .</p>\n<p>     <code>.jpg</code>, <code>.jpeg</code>, <code>.png</code>, <code>.gif</code>      .</p>\n<h2 id=\"Android--\"><a href=\"#Android--\" class=\"headerlink\" title=\"Android  ?\"></a>Android  ?</h2><p>Android Platform     ?</p>\n<p>  .</p>\n<p>Android Studio <strong>Empty Activity</strong>    , Layout   .</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">tools:context</span>=<span class=\"string\">&quot;.MainActivity&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:src</span>=<span class=\"string\">&quot;@drawable/ic_launcher_foreground&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@drawable/ic_launcher_background&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">app:layout_constraintLeft_toLeftOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">app:layout_constraintRight_toRightOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span>/&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>       .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/Screenshot_1623775512.png\" class=\"\" width=\"350\" title=\"[Screenshot_1623775512]\">\n\n<p>   xml  ImageView   .</p>\n<p>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> : <span class=\"type\">AppCompatActivity</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContentView(R.layout.activity_main)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> imageView: ImageView = findViewById(R.id.imageView)</span><br><span class=\"line\">        imageView.background = getDrawable(R.drawable.ic_launcher_background)</span><br><span class=\"line\">        imageView.setImageResource(R.drawable.ic_launcher_foreground)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>imageView</code>  <code>background</code>  <code>View</code>   , <code>ImageView</code>   <code>setImageResource</code>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ImageView#setImageResource</span></span><br><span class=\"line\"><span class=\"meta\">@android</span>.view.RemotableViewMethod(asyncImpl=<span class=\"string\">&quot;setImageResourceAsync&quot;</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setImageResource</span><span class=\"params\">(<span class=\"meta\">@DrawableRes</span> <span class=\"keyword\">int</span> resId)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// The resource configuration may have changed, so we should always</span></span><br><span class=\"line\">  <span class=\"comment\">// try to load the resource even if the resId hasn&#x27;t changed.</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldWidth = mDrawableWidth;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldHeight = mDrawableHeight;</span><br><span class=\"line\"></span><br><span class=\"line\">  updateDrawable(<span class=\"keyword\">null</span>);</span><br><span class=\"line\">  mResource = resId;</span><br><span class=\"line\">  mUri = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  resolveUri();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) &#123;</span><br><span class=\"line\">    requestLayout();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  invalidate();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>ImageView</code>       .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ImageView#setImageBitmap</span></span><br><span class=\"line\"><span class=\"meta\">@android</span>.view.<span class=\"function\">RemotableViewMethod</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setImageBitmap</span><span class=\"params\">(Bitmap bm)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Hacky fix to force setImageDrawable to do a full setImageDrawable</span></span><br><span class=\"line\">  <span class=\"comment\">// instead of doing an object reference comparison</span></span><br><span class=\"line\">  mDrawable = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (mRecycleableBitmapDrawable == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      mRecycleableBitmapDrawable = <span class=\"keyword\">new</span> BitmapDrawable(mContext.getResources(), bm);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      mRecycleableBitmapDrawable.setBitmap(bm);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  setImageDrawable(mRecycleableBitmapDrawable);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ImageView#setImageDrawable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setImageDrawable</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Drawable drawable)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (mDrawable != drawable) &#123;</span><br><span class=\"line\">    mResource = <span class=\"number\">0</span>;</span><br><span class=\"line\">    mUri = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldWidth = mDrawableWidth;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldHeight = mDrawableHeight;</span><br><span class=\"line\"></span><br><span class=\"line\">    updateDrawable(drawable);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) &#123;</span><br><span class=\"line\">      requestLayout();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    invalidate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ImageView#setImageURI</span></span><br><span class=\"line\"><span class=\"meta\">@android</span>.view.RemotableViewMethod(asyncImpl=<span class=\"string\">&quot;setImageURIAsync&quot;</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setImageURI</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Uri uri)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (mResource != <span class=\"number\">0</span> || (mUri != uri &amp;&amp; (uri == <span class=\"keyword\">null</span> || mUri == <span class=\"keyword\">null</span> || !uri.equals(mUri)))) &#123;</span><br><span class=\"line\">    updateDrawable(<span class=\"keyword\">null</span>);</span><br><span class=\"line\">    mResource = <span class=\"number\">0</span>;</span><br><span class=\"line\">    mUri = uri;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldWidth = mDrawableWidth;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldHeight = mDrawableHeight;</span><br><span class=\"line\"></span><br><span class=\"line\">    resolveUri();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) &#123;</span><br><span class=\"line\">      requestLayout();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    invalidate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   <code>ImageView</code>      .</p>\n<ol>\n<li>     .</li>\n<li><code>requestLayout()</code>  .</li>\n<li><code>invalidate()</code>  .</li>\n</ol>\n<p><code>requestLayout()</code> <code>invalidate()</code>  <code>View</code>  .</p>\n<p>        onDraw    .</p>\n<p>  , Android <code>Bitmap</code>  <code>Drawable</code>         .</p>\n<ul>\n<li><p><code>Bitmap</code>       .       4048x3036 (12 )  . <code>Bitmap</code>  ARGB_8888  ,   2.3 (API level 9)       48MB    .               .</p>\n</li>\n<li><p>UI           ANR    .  <code>Bitmap</code>        .</p>\n</li>\n<li><p>  <code>Bitmap</code>    ,     .  ,      .</p>\n</li>\n<li><p> <code>Bitmap</code>          .   <code>Bitmap</code>       ,     .</p>\n</li>\n</ul>\n<p>     .</p>\n<h3 id=\"ImageView---\"><a href=\"#ImageView---\" class=\"headerlink\" title=\"ImageView   \"></a>ImageView   </h3><h4 id=\"Out-of-memory\"><a href=\"#Out-of-memory\" class=\"headerlink\" title=\"Out of memory\"></a>Out of memory</h4><p>Android        .</p>\n<p>        ,     OOM      .</p>\n<p>        ,               .</p>\n<h4 id=\"Slow-Loading\"><a href=\"#Slow-Loading\" class=\"headerlink\" title=\"Slow Loading\"></a>Slow Loading</h4><p>Bitmap          ,           .</p>\n<p>   ,            .</p>\n<h4 id=\"Bitmap-Caching-Memory-Disk-cache\"><a href=\"#Bitmap-Caching-Memory-Disk-cache\" class=\"headerlink\" title=\"Bitmap Caching (Memory / Disk cache)\"></a>Bitmap Caching (Memory / Disk cache)</h4><p>           .</p>\n<p>   url     ,  url            .</p>\n<p>Android     Memory   ,   Disk    .</p>\n<h4 id=\"LRU-Cache\"><a href=\"#LRU-Cache\" class=\"headerlink\" title=\"LRU Cache\"></a>LRU Cache</h4><p>Android <code>LruCache</code>   .</p>\n<p>        .</p>\n<p>            <strong>LRU Algorithm</strong> , 4Mib()     .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/reference/android/util/LruCache\">Android Developers#LruCache</a></p>\n</blockquote>\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/reference/androidx/collection/LruCache\">androidx.collection.LruCache</a></p>\n</blockquote>\n<blockquote>\n<p><strong></strong> <a href=\"https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)\">Cache replacement policies#recently used</a></p>\n</blockquote>\n<h4 id=\"Unresponsive-UI-Gabarge-collector\"><a href=\"#Unresponsive-UI-Gabarge-collector\" class=\"headerlink\" title=\"Unresponsive UI / Gabarge collector\"></a>Unresponsive UI / Gabarge collector</h4><p>Bitmap     Bitmap      .</p>\n<p>ui thread      ui    ,  16ms    Android OS        .</p>\n<h3 id=\"Image-Library-\"><a href=\"#Image-Library-\" class=\"headerlink\" title=\"Image Library \"></a>Image Library </h3><p>Android ImageView  Bitmap     ,    .</p>\n<p>           <strong>   </strong> .</p>\n<p> Android      .</p>\n<h4 id=\"1-Picasso\"><a href=\"#1-Picasso\" class=\"headerlink\" title=\"1. Picasso\"></a>1. Picasso</h4><p><img src=\"https://square.github.io/picasso/static/sample.png\"></p>\n<ul>\n<li>  : <a href=\"https://square.github.io/\">Square Open Source</a></li>\n<li>  : <a href=\"https://square.github.io/picasso/\">https://square.github.io/picasso/</a></li>\n<li> <ul>\n<li> </li>\n<li>  </li>\n<li>  </li>\n<li> </li>\n<li>    </li>\n</ul>\n</li>\n</ul>\n<h4 id=\"2-Glide\"><a href=\"#2-Glide\" class=\"headerlink\" title=\"2. Glide\"></a>2. Glide</h4><p><img src=\"https://github.com/bumptech/glide/blob/master/static/glide_logo.png?raw=true\"></p>\n<ul>\n<li>  : Bump Technologies</li>\n<li>  : <a href=\"https://bumptech.github.io/glide/\">https://bumptech.github.io/glide/</a></li>\n<li> <ul>\n<li> </li>\n<li><code>LruResourceCache</code>  <code>MemorySizeCalculator</code>   </li>\n<li><code>Lru</code>    ( 250mb)</li>\n<li>     </li>\n<li><code>RGB_565</code>   </li>\n<li>gif, jpeg, war, png, webp  </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Coil-Coroutine-Image-Loader\"><a href=\"#Coil-Coroutine-Image-Loader\" class=\"headerlink\" title=\"Coil (Coroutine Image Loader)\"></a>Coil (Coroutine Image Loader)</h3><p><img src=\"https://github.com/coil-kt/coil/raw/main/logo.svg\"></p>\n<ul>\n<li>  : <a href=\"https://www.instacart.com/\">Instacart</a></li>\n<li>  : <a href=\"https://github.com/coil-kt/coil\">https://github.com/coil-kt/coil</a></li>\n<li> <ul>\n<li><code>MemoryCache.Key</code>   </li>\n<li><code>OkHttpClient</code>    (<code>CoilUtils.createDefaultCache</code>  )</li>\n<li> </li>\n<li> </li>\n<li>      </li>\n<li>Corotines, Okio    </li>\n<li>bmp, jpeg, png, webp  </li>\n<li>Android 8.0  heif  </li>\n<li><code>coil-gif</code>  <ul>\n<li>Android 9.0  animated webp   </li>\n<li>Android 11.0  animated heif  ()</li>\n</ul>\n</li>\n<li><code>coil-svg</code>   svg  </li>\n<li><code>coil-video</code>   Android      frame  </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Fresco\"><a href=\"#Fresco\" class=\"headerlink\" title=\"Fresco\"></a>Fresco</h3><img alt=\"Fresco Logo\" src=\"https://github.com/facebook/fresco/raw/master/docs/static/sample-images/fresco_logo.svg\" width=\"15%\" />\n\n<ul>\n<li>  : <a href=\"https://developers.facebook.com/\">Facebook</a></li>\n<li>  : <a href=\"https://frescolib.org/\">https://frescolib.org</a></li>\n<li> <ul>\n<li>     </li>\n<li>   </li>\n<li>Drawees   </li>\n<li>URI    jpeg  </li>\n<li>Android 4.0  OOM </li>\n<li>  PlaceHolder </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"AMUL-Android-Universal-Image-Loader\"><a href=\"#AMUL-Android-Universal-Image-Loader\" class=\"headerlink\" title=\"AMUL (Android-Universal-Image-Loader)\"></a>AMUL (Android-Universal-Image-Loader)</h3><p><img src=\"https://github.com/nostra13/Android-Universal-Image-Loader/raw/master/sample/src/main/res/drawable-mdpi/ic_launcher.png\"></p>\n<ul>\n<li>  : <a href=\"https://github.com/nostra13/Android-Universal-Image-Loader\">Sergey Tarasevich(User)</a></li>\n<li>  : <a href=\"https://github.com/nostra13/Android-Universal-Image-Loader/wiki\">https://github.com/nostra13/Android-Universal-Image-Loader/wiki</a></li>\n<li> <ul>\n<li>/    </li>\n<li>Thread / Downloader / Decoder   </li>\n<li>    </li>\n<li>  </li>\n</ul>\n</li>\n</ul>\n<h2 id=\"----\"><a href=\"#----\" class=\"headerlink\" title=\"    \"></a>    </h2><h3 id=\"Picasso\"><a href=\"#Picasso\" class=\"headerlink\" title=\"Picasso\"></a>Picasso</h3><p>Picasso            . </p>\n<p>      .         .     .</p>\n<p> Picasso     Transformation ,   &amp;  ,  ImageView        .</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">MinSdkVersion</th>\n<th align=\"center\">CompileSdkVersion</th>\n<th align=\"center\">AAR Size</th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">14</td>\n<td align=\"center\">29</td>\n<td align=\"center\">105kb</td>\n<td align=\"center\">GIF  </td>\n</tr>\n</tbody></table>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Picasso.<span class=\"keyword\">get</span>().load(url)</span><br><span class=\"line\">    .transform(RoundedCornersTransformation(<span class=\"number\">128</span>, <span class=\"number\">3</span>))</span><br><span class=\"line\">    .into(imageView5, <span class=\"keyword\">object</span> : Callback &#123;</span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onSuccess</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">            toast(<span class=\"string\">&quot;Complete&quot;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onError</span><span class=\"params\">(e: <span class=\"type\">Exception</span>?)</span></span> &#123;</span><br><span class=\"line\">            TODO(<span class=\"string\">&quot;Not yet implemented&quot;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">   : 6.4s</th>\n<th align=\"center\">   : 1.6s</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/picasso_test.gif\" class=\"\" title=\"[picasso test]\"></td>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/picasso_caching.gif\" class=\"\" title=\"[picasso_caching]\"></td>\n</tr>\n</tbody></table>\n<p>Picasso         .   <code>1000 * 800</code>    , Bitmap  <code>1000 * 800 * 4bytes</code> = 3MB  ImageView   .      OOM   . </p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/IMG_9F5E046409C4-1.jpg\" class=\"\" title=\"[IMG_9F5E046409C4-1]\">\n\n<p>    <code>fit()</code>                 .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Picasso.<span class=\"keyword\">get</span>()</span><br><span class=\"line\">    .fit()</span><br><span class=\"line\">    .transform(&#123;...&#125;)</span><br><span class=\"line\">    .load(url)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Heap-Dump\"><a href=\"#Heap-Dump\" class=\"headerlink\" title=\"Heap Dump\"></a>Heap Dump</h4><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/heap_dump.png\" class=\"\" title=\"[heap_dump]\">\n\n<p>10,136,858 byte (= 10MB)</p>\n<h3 id=\"Glide\"><a href=\"#Glide\" class=\"headerlink\" title=\"Glide\"></a>Glide</h3><p>Google     Glide   ,         . </p>\n<p> ,             , ,  , ,  GIF    . </p>\n<p> HttpUrlConnection             API   , Volly  OkHttp     . </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">MinSdkVersion</th>\n<th align=\"center\">CompileSdkVersion</th>\n<th align=\"center\">AAR Size</th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">14</td>\n<td align=\"center\">26</td>\n<td align=\"center\">625kb</td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<p>Glide       . </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Glide.with(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    .load(url)</span><br><span class=\"line\">    .apply(RequestOptions.bitmapTransform(RoundedCornersTransformation(<span class=\"number\">128</span>, <span class=\"number\">3</span>)))</span><br><span class=\"line\">    .listener(<span class=\"keyword\">object</span> : RequestListener&lt;Drawable&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onLoadFailed</span><span class=\"params\">(e: <span class=\"type\">GlideException</span>?, model: <span class=\"type\">Any</span>?, target: <span class=\"type\">Target</span>&lt;<span class=\"type\">Drawable</span>&gt;?, isFirstResource: <span class=\"type\">Boolean</span>)</span></span>: <span class=\"built_in\">Boolean</span> &#123;</span><br><span class=\"line\">            TODO(<span class=\"string\">&quot;Not yet implemented&quot;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onResourceReady</span><span class=\"params\">(resource: <span class=\"type\">Drawable</span>?, model: <span class=\"type\">Any</span>?, target: <span class=\"type\">Target</span>&lt;<span class=\"type\">Drawable</span>&gt;?, </span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">          dataSource: <span class=\"type\">DataSource</span>?, isFirstResource: <span class=\"type\">Boolean</span>)</span></span>: <span class=\"built_in\">Boolean</span> &#123;</span><br><span class=\"line\">            toast(<span class=\"string\">&quot;Complete&quot;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .into(imageView)</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">   : 6.2s</th>\n<th align=\"center\">   : 0.72s</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/glide_test.gif\" class=\"\" title=\"[glide_test]\"></td>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/glide_caching.gif\" class=\"\" title=\"[glide_caching]\"></td>\n</tr>\n</tbody></table>\n<p>Picasso  Glide                      Picasso .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/IMG_8FF7402ED110-1.jpg\" class=\"\" title=\"[IMG_8FF7402ED110-1]\">\n\n<p>Glide      Gif   .</p>\n<p>Picasso , Coil <code>1.2.2</code>    Gif      , Fresco Gif Transformation      .)</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/glide_gif.gif\" class=\"\" title=\"[glide_gif]\">\n\n<h4 id=\"Heap-Dump-1\"><a href=\"#Heap-Dump-1\" class=\"headerlink\" title=\"Heap Dump\"></a>Heap Dump</h4><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/glide_heap_dump.png\" class=\"\" title=\"[glide_heap_dump]\">\n\n<p>11,004,024 byte (= 11MB)</p>\n<h3 id=\"Coil\"><a href=\"#Coil\" class=\"headerlink\" title=\"Coil\"></a>Coil</h3><p>Instacart  Coil  Coroutine Image Loading        &amp;  .     100%    AndroidX, OkHttp        . Coil   , Glide       Glide  <code></code>  .  ImageView  ,        <code> </code>    .</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">MinSdkVersion</th>\n<th align=\"center\">CompileSdkVersion</th>\n<th align=\"center\">AAR Size</th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">14</td>\n<td align=\"center\">30</td>\n<td align=\"center\">16kb</td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">imageView.load(url) &#123;</span><br><span class=\"line\">    listener(</span><br><span class=\"line\">        onError = &#123; _,_ -&gt; <span class=\"comment\">/** Show toast. */</span> &#125;,</span><br><span class=\"line\">        onSuccess = &#123; _,_ -&gt; toast(<span class=\"string\">&quot;Complete&quot;</span>) &#125;</span><br><span class=\"line\">    )</span><br><span class=\"line\">    transformations(RoundedCornersTransformation(<span class=\"number\">128f</span>))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">   : 5.24s</th>\n<th align=\"center\">   : 1.3s</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/coil_test.gif\" class=\"\" title=\"[coil_test]\"></td>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/coil_caching.gif\" class=\"\" title=\"[coil_caching]\"></td>\n</tr>\n</tbody></table>\n<h4 id=\"Heap-Dump-2\"><a href=\"#Heap-Dump-2\" class=\"headerlink\" title=\"Heap Dump\"></a>Heap Dump</h4><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/coil_heap_dump.png\" class=\"\" title=\"[coil_heap_dump]\">\n\n<p>6,995,072 byte (= 7MB)</p>\n<p>     Part 3  .</p>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<p>Android Image   ImageView  .</p>\n<p>ImageView   .</p>\n<h3 id=\"android-widget-ImageView\"><a href=\"#android-widget-ImageView\" class=\"headerlink\" title=\"android.widget.ImageView\"></a>android.widget.ImageView</h3><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kotlin.Any</span><br><span class=\"line\">   android.view.View</span><br><span class=\"line\">     android.widget.ImageView</span><br></pre></td></tr></table></figure>\n\n<p>ImageView View   Image   .</p>\n<p><code>android.graphics.Bitmap</code> <code>android.graphics.drawable.Drawable</code>    , tint      .</p>\n<p> xml  ImageView   .</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;LinearLayout</span><br><span class=\"line\">    <span class=\"attr\">xmlns</span>:android=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">android</span>:layout_width=<span class=\"string\">&quot;match_parent&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">android</span>:layout_height=<span class=\"string\">&quot;match_parent&quot;</span>&gt;</span><br><span class=\"line\">    <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ImageView</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:src</span>=<span class=\"string\">&quot;@drawable/my_image&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:contentDescription</span>=<span class=\"string\">&quot;@string/my_image_description&quot;</span>/&gt;</span></span></span><br><span class=\"line\">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/guide/topics/resources/drawable-resource.html\">Android Developers#Drawble Resources</a></p>\n</blockquote>\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/topic/performance/graphics/index.html\">Android Developers#Handling bitmaps</a></p>\n</blockquote>\n<h3 id=\"Bitmap\"><a href=\"#Bitmap\" class=\"headerlink\" title=\"Bitmap\"></a>Bitmap</h3><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kotlin.Any</span><br><span class=\"line\">   android.graphics.Bitmap</span><br></pre></td></tr></table></figure>\n\n<p> <code>.bmp</code>     .</p>\n<p>      .</p>\n<p>            , Android       .</p>\n<p>     <code>.jpg</code>, <code>.jpeg</code>, <code>.png</code>, <code>.gif</code>      .</p>\n<h2 id=\"Android--\"><a href=\"#Android--\" class=\"headerlink\" title=\"Android  ?\"></a>Android  ?</h2><p>Android Platform     ?</p>\n<p>  .</p>\n<p>Android Studio <strong>Empty Activity</strong>    , Layout   .</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">    <span class=\"attr\">tools:context</span>=<span class=\"string\">&quot;.MainActivity&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;wrap_content&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:src</span>=<span class=\"string\">&quot;@drawable/ic_launcher_foreground&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;@drawable/ic_launcher_background&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">app:layout_constraintLeft_toLeftOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">app:layout_constraintRight_toRightOf</span>=<span class=\"string\">&quot;parent&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"xml\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">&quot;parent&quot;</span>/&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>       .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/Screenshot_1623775512.png\" class=\"\" width=\"350\" title=\"[Screenshot_1623775512]\">\n\n<p>   xml  ImageView   .</p>\n<p>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> : <span class=\"type\">AppCompatActivity</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContentView(R.layout.activity_main)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> imageView: ImageView = findViewById(R.id.imageView)</span><br><span class=\"line\">        imageView.background = getDrawable(R.drawable.ic_launcher_background)</span><br><span class=\"line\">        imageView.setImageResource(R.drawable.ic_launcher_foreground)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>imageView</code>  <code>background</code>  <code>View</code>   , <code>ImageView</code>   <code>setImageResource</code>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ImageView#setImageResource</span></span><br><span class=\"line\"><span class=\"meta\">@android</span>.view.RemotableViewMethod(asyncImpl=<span class=\"string\">&quot;setImageResourceAsync&quot;</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setImageResource</span><span class=\"params\">(<span class=\"meta\">@DrawableRes</span> <span class=\"keyword\">int</span> resId)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// The resource configuration may have changed, so we should always</span></span><br><span class=\"line\">  <span class=\"comment\">// try to load the resource even if the resId hasn&#x27;t changed.</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldWidth = mDrawableWidth;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldHeight = mDrawableHeight;</span><br><span class=\"line\"></span><br><span class=\"line\">  updateDrawable(<span class=\"keyword\">null</span>);</span><br><span class=\"line\">  mResource = resId;</span><br><span class=\"line\">  mUri = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  resolveUri();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) &#123;</span><br><span class=\"line\">    requestLayout();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  invalidate();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>ImageView</code>       .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ImageView#setImageBitmap</span></span><br><span class=\"line\"><span class=\"meta\">@android</span>.view.<span class=\"function\">RemotableViewMethod</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setImageBitmap</span><span class=\"params\">(Bitmap bm)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Hacky fix to force setImageDrawable to do a full setImageDrawable</span></span><br><span class=\"line\">  <span class=\"comment\">// instead of doing an object reference comparison</span></span><br><span class=\"line\">  mDrawable = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (mRecycleableBitmapDrawable == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      mRecycleableBitmapDrawable = <span class=\"keyword\">new</span> BitmapDrawable(mContext.getResources(), bm);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      mRecycleableBitmapDrawable.setBitmap(bm);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  setImageDrawable(mRecycleableBitmapDrawable);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ImageView#setImageDrawable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setImageDrawable</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Drawable drawable)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (mDrawable != drawable) &#123;</span><br><span class=\"line\">    mResource = <span class=\"number\">0</span>;</span><br><span class=\"line\">    mUri = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldWidth = mDrawableWidth;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldHeight = mDrawableHeight;</span><br><span class=\"line\"></span><br><span class=\"line\">    updateDrawable(drawable);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) &#123;</span><br><span class=\"line\">      requestLayout();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    invalidate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ImageView#setImageURI</span></span><br><span class=\"line\"><span class=\"meta\">@android</span>.view.RemotableViewMethod(asyncImpl=<span class=\"string\">&quot;setImageURIAsync&quot;</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setImageURI</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Uri uri)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (mResource != <span class=\"number\">0</span> || (mUri != uri &amp;&amp; (uri == <span class=\"keyword\">null</span> || mUri == <span class=\"keyword\">null</span> || !uri.equals(mUri)))) &#123;</span><br><span class=\"line\">    updateDrawable(<span class=\"keyword\">null</span>);</span><br><span class=\"line\">    mResource = <span class=\"number\">0</span>;</span><br><span class=\"line\">    mUri = uri;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldWidth = mDrawableWidth;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> oldHeight = mDrawableHeight;</span><br><span class=\"line\"></span><br><span class=\"line\">    resolveUri();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) &#123;</span><br><span class=\"line\">      requestLayout();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    invalidate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   <code>ImageView</code>      .</p>\n<ol>\n<li>     .</li>\n<li><code>requestLayout()</code>  .</li>\n<li><code>invalidate()</code>  .</li>\n</ol>\n<p><code>requestLayout()</code> <code>invalidate()</code>  <code>View</code>  .</p>\n<p>        onDraw    .</p>\n<p>  , Android <code>Bitmap</code>  <code>Drawable</code>         .</p>\n<ul>\n<li><p><code>Bitmap</code>       .       4048x3036 (12 )  . <code>Bitmap</code>  ARGB_8888  ,   2.3 (API level 9)       48MB    .               .</p>\n</li>\n<li><p>UI           ANR    .  <code>Bitmap</code>        .</p>\n</li>\n<li><p>  <code>Bitmap</code>    ,     .  ,      .</p>\n</li>\n<li><p> <code>Bitmap</code>          .   <code>Bitmap</code>       ,     .</p>\n</li>\n</ul>\n<p>     .</p>\n<h3 id=\"ImageView---\"><a href=\"#ImageView---\" class=\"headerlink\" title=\"ImageView   \"></a>ImageView   </h3><h4 id=\"Out-of-memory\"><a href=\"#Out-of-memory\" class=\"headerlink\" title=\"Out of memory\"></a>Out of memory</h4><p>Android        .</p>\n<p>        ,     OOM      .</p>\n<p>        ,               .</p>\n<h4 id=\"Slow-Loading\"><a href=\"#Slow-Loading\" class=\"headerlink\" title=\"Slow Loading\"></a>Slow Loading</h4><p>Bitmap          ,           .</p>\n<p>   ,            .</p>\n<h4 id=\"Bitmap-Caching-Memory-Disk-cache\"><a href=\"#Bitmap-Caching-Memory-Disk-cache\" class=\"headerlink\" title=\"Bitmap Caching (Memory / Disk cache)\"></a>Bitmap Caching (Memory / Disk cache)</h4><p>           .</p>\n<p>   url     ,  url            .</p>\n<p>Android     Memory   ,   Disk    .</p>\n<h4 id=\"LRU-Cache\"><a href=\"#LRU-Cache\" class=\"headerlink\" title=\"LRU Cache\"></a>LRU Cache</h4><p>Android <code>LruCache</code>   .</p>\n<p>        .</p>\n<p>            <strong>LRU Algorithm</strong> , 4Mib()     .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/reference/android/util/LruCache\">Android Developers#LruCache</a></p>\n</blockquote>\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/reference/androidx/collection/LruCache\">androidx.collection.LruCache</a></p>\n</blockquote>\n<blockquote>\n<p><strong></strong> <a href=\"https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)\">Cache replacement policies#recently used</a></p>\n</blockquote>\n<h4 id=\"Unresponsive-UI-Gabarge-collector\"><a href=\"#Unresponsive-UI-Gabarge-collector\" class=\"headerlink\" title=\"Unresponsive UI / Gabarge collector\"></a>Unresponsive UI / Gabarge collector</h4><p>Bitmap     Bitmap      .</p>\n<p>ui thread      ui    ,  16ms    Android OS        .</p>\n<h3 id=\"Image-Library-\"><a href=\"#Image-Library-\" class=\"headerlink\" title=\"Image Library \"></a>Image Library </h3><p>Android ImageView  Bitmap     ,    .</p>\n<p>           <strong>   </strong> .</p>\n<p> Android      .</p>\n<h4 id=\"1-Picasso\"><a href=\"#1-Picasso\" class=\"headerlink\" title=\"1. Picasso\"></a>1. Picasso</h4><p><img src=\"https://square.github.io/picasso/static/sample.png\"></p>\n<ul>\n<li>  : <a href=\"https://square.github.io/\">Square Open Source</a></li>\n<li>  : <a href=\"https://square.github.io/picasso/\">https://square.github.io/picasso/</a></li>\n<li> <ul>\n<li> </li>\n<li>  </li>\n<li>  </li>\n<li> </li>\n<li>    </li>\n</ul>\n</li>\n</ul>\n<h4 id=\"2-Glide\"><a href=\"#2-Glide\" class=\"headerlink\" title=\"2. Glide\"></a>2. Glide</h4><p><img src=\"https://github.com/bumptech/glide/blob/master/static/glide_logo.png?raw=true\"></p>\n<ul>\n<li>  : Bump Technologies</li>\n<li>  : <a href=\"https://bumptech.github.io/glide/\">https://bumptech.github.io/glide/</a></li>\n<li> <ul>\n<li> </li>\n<li><code>LruResourceCache</code>  <code>MemorySizeCalculator</code>   </li>\n<li><code>Lru</code>    ( 250mb)</li>\n<li>     </li>\n<li><code>RGB_565</code>   </li>\n<li>gif, jpeg, war, png, webp  </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Coil-Coroutine-Image-Loader\"><a href=\"#Coil-Coroutine-Image-Loader\" class=\"headerlink\" title=\"Coil (Coroutine Image Loader)\"></a>Coil (Coroutine Image Loader)</h3><p><img src=\"https://github.com/coil-kt/coil/raw/main/logo.svg\"></p>\n<ul>\n<li>  : <a href=\"https://www.instacart.com/\">Instacart</a></li>\n<li>  : <a href=\"https://github.com/coil-kt/coil\">https://github.com/coil-kt/coil</a></li>\n<li> <ul>\n<li><code>MemoryCache.Key</code>   </li>\n<li><code>OkHttpClient</code>    (<code>CoilUtils.createDefaultCache</code>  )</li>\n<li> </li>\n<li> </li>\n<li>      </li>\n<li>Corotines, Okio    </li>\n<li>bmp, jpeg, png, webp  </li>\n<li>Android 8.0  heif  </li>\n<li><code>coil-gif</code>  <ul>\n<li>Android 9.0  animated webp   </li>\n<li>Android 11.0  animated heif  ()</li>\n</ul>\n</li>\n<li><code>coil-svg</code>   svg  </li>\n<li><code>coil-video</code>   Android      frame  </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Fresco\"><a href=\"#Fresco\" class=\"headerlink\" title=\"Fresco\"></a>Fresco</h3><img alt=\"Fresco Logo\" src=\"https://github.com/facebook/fresco/raw/master/docs/static/sample-images/fresco_logo.svg\" width=\"15%\" />\n\n<ul>\n<li>  : <a href=\"https://developers.facebook.com/\">Facebook</a></li>\n<li>  : <a href=\"https://frescolib.org/\">https://frescolib.org</a></li>\n<li> <ul>\n<li>     </li>\n<li>   </li>\n<li>Drawees   </li>\n<li>URI    jpeg  </li>\n<li>Android 4.0  OOM </li>\n<li>  PlaceHolder </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"AMUL-Android-Universal-Image-Loader\"><a href=\"#AMUL-Android-Universal-Image-Loader\" class=\"headerlink\" title=\"AMUL (Android-Universal-Image-Loader)\"></a>AMUL (Android-Universal-Image-Loader)</h3><p><img src=\"https://github.com/nostra13/Android-Universal-Image-Loader/raw/master/sample/src/main/res/drawable-mdpi/ic_launcher.png\"></p>\n<ul>\n<li>  : <a href=\"https://github.com/nostra13/Android-Universal-Image-Loader\">Sergey Tarasevich(User)</a></li>\n<li>  : <a href=\"https://github.com/nostra13/Android-Universal-Image-Loader/wiki\">https://github.com/nostra13/Android-Universal-Image-Loader/wiki</a></li>\n<li> <ul>\n<li>/    </li>\n<li>Thread / Downloader / Decoder   </li>\n<li>    </li>\n<li>  </li>\n</ul>\n</li>\n</ul>\n<h2 id=\"----\"><a href=\"#----\" class=\"headerlink\" title=\"    \"></a>    </h2><h3 id=\"Picasso\"><a href=\"#Picasso\" class=\"headerlink\" title=\"Picasso\"></a>Picasso</h3><p>Picasso            . </p>\n<p>      .         .     .</p>\n<p> Picasso     Transformation ,   &amp;  ,  ImageView        .</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">MinSdkVersion</th>\n<th align=\"center\">CompileSdkVersion</th>\n<th align=\"center\">AAR Size</th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">14</td>\n<td align=\"center\">29</td>\n<td align=\"center\">105kb</td>\n<td align=\"center\">GIF  </td>\n</tr>\n</tbody></table>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Picasso.<span class=\"keyword\">get</span>().load(url)</span><br><span class=\"line\">    .transform(RoundedCornersTransformation(<span class=\"number\">128</span>, <span class=\"number\">3</span>))</span><br><span class=\"line\">    .into(imageView5, <span class=\"keyword\">object</span> : Callback &#123;</span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onSuccess</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">            toast(<span class=\"string\">&quot;Complete&quot;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onError</span><span class=\"params\">(e: <span class=\"type\">Exception</span>?)</span></span> &#123;</span><br><span class=\"line\">            TODO(<span class=\"string\">&quot;Not yet implemented&quot;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">   : 6.4s</th>\n<th align=\"center\">   : 1.6s</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/picasso_test.gif\" class=\"\" title=\"[picasso test]\"></td>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/picasso_caching.gif\" class=\"\" title=\"[picasso_caching]\"></td>\n</tr>\n</tbody></table>\n<p>Picasso         .   <code>1000 * 800</code>    , Bitmap  <code>1000 * 800 * 4bytes</code> = 3MB  ImageView   .      OOM   . </p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/IMG_9F5E046409C4-1.jpg\" class=\"\" title=\"[IMG_9F5E046409C4-1]\">\n\n<p>    <code>fit()</code>                 .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Picasso.<span class=\"keyword\">get</span>()</span><br><span class=\"line\">    .fit()</span><br><span class=\"line\">    .transform(&#123;...&#125;)</span><br><span class=\"line\">    .load(url)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Heap-Dump\"><a href=\"#Heap-Dump\" class=\"headerlink\" title=\"Heap Dump\"></a>Heap Dump</h4><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/heap_dump.png\" class=\"\" title=\"[heap_dump]\">\n\n<p>10,136,858 byte (= 10MB)</p>\n<h3 id=\"Glide\"><a href=\"#Glide\" class=\"headerlink\" title=\"Glide\"></a>Glide</h3><p>Google     Glide   ,         . </p>\n<p> ,             , ,  , ,  GIF    . </p>\n<p> HttpUrlConnection             API   , Volly  OkHttp     . </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">MinSdkVersion</th>\n<th align=\"center\">CompileSdkVersion</th>\n<th align=\"center\">AAR Size</th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">14</td>\n<td align=\"center\">26</td>\n<td align=\"center\">625kb</td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<p>Glide       . </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Glide.with(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    .load(url)</span><br><span class=\"line\">    .apply(RequestOptions.bitmapTransform(RoundedCornersTransformation(<span class=\"number\">128</span>, <span class=\"number\">3</span>)))</span><br><span class=\"line\">    .listener(<span class=\"keyword\">object</span> : RequestListener&lt;Drawable&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onLoadFailed</span><span class=\"params\">(e: <span class=\"type\">GlideException</span>?, model: <span class=\"type\">Any</span>?, target: <span class=\"type\">Target</span>&lt;<span class=\"type\">Drawable</span>&gt;?, isFirstResource: <span class=\"type\">Boolean</span>)</span></span>: <span class=\"built_in\">Boolean</span> &#123;</span><br><span class=\"line\">            TODO(<span class=\"string\">&quot;Not yet implemented&quot;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onResourceReady</span><span class=\"params\">(resource: <span class=\"type\">Drawable</span>?, model: <span class=\"type\">Any</span>?, target: <span class=\"type\">Target</span>&lt;<span class=\"type\">Drawable</span>&gt;?, </span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">          dataSource: <span class=\"type\">DataSource</span>?, isFirstResource: <span class=\"type\">Boolean</span>)</span></span>: <span class=\"built_in\">Boolean</span> &#123;</span><br><span class=\"line\">            toast(<span class=\"string\">&quot;Complete&quot;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .into(imageView)</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">   : 6.2s</th>\n<th align=\"center\">   : 0.72s</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/glide_test.gif\" class=\"\" title=\"[glide_test]\"></td>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/glide_caching.gif\" class=\"\" title=\"[glide_caching]\"></td>\n</tr>\n</tbody></table>\n<p>Picasso  Glide                      Picasso .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/IMG_8FF7402ED110-1.jpg\" class=\"\" title=\"[IMG_8FF7402ED110-1]\">\n\n<p>Glide      Gif   .</p>\n<p>Picasso , Coil <code>1.2.2</code>    Gif      , Fresco Gif Transformation      .)</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/glide_gif.gif\" class=\"\" title=\"[glide_gif]\">\n\n<h4 id=\"Heap-Dump-1\"><a href=\"#Heap-Dump-1\" class=\"headerlink\" title=\"Heap Dump\"></a>Heap Dump</h4><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/glide_heap_dump.png\" class=\"\" title=\"[glide_heap_dump]\">\n\n<p>11,004,024 byte (= 11MB)</p>\n<h3 id=\"Coil\"><a href=\"#Coil\" class=\"headerlink\" title=\"Coil\"></a>Coil</h3><p>Instacart  Coil  Coroutine Image Loading        &amp;  .     100%    AndroidX, OkHttp        . Coil   , Glide       Glide  <code></code>  .  ImageView  ,        <code> </code>    .</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">MinSdkVersion</th>\n<th align=\"center\">CompileSdkVersion</th>\n<th align=\"center\">AAR Size</th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">14</td>\n<td align=\"center\">30</td>\n<td align=\"center\">16kb</td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">imageView.load(url) &#123;</span><br><span class=\"line\">    listener(</span><br><span class=\"line\">        onError = &#123; _,_ -&gt; <span class=\"comment\">/** Show toast. */</span> &#125;,</span><br><span class=\"line\">        onSuccess = &#123; _,_ -&gt; toast(<span class=\"string\">&quot;Complete&quot;</span>) &#125;</span><br><span class=\"line\">    )</span><br><span class=\"line\">    transformations(RoundedCornersTransformation(<span class=\"number\">128f</span>))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">   : 5.24s</th>\n<th align=\"center\">   : 1.3s</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/coil_test.gif\" class=\"\" title=\"[coil_test]\"></td>\n<td align=\"center\"><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/coil_caching.gif\" class=\"\" title=\"[coil_caching]\"></td>\n</tr>\n</tbody></table>\n<h4 id=\"Heap-Dump-2\"><a href=\"#Heap-Dump-2\" class=\"headerlink\" title=\"Heap Dump\"></a>Heap Dump</h4><img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%201/coil_heap_dump.png\" class=\"\" title=\"[coil_heap_dump]\">\n\n<p>6,995,072 byte (= 7MB)</p>\n<p>     Part 3  .</p>"},{"title":"Image Loading and Caching Library Part 2  Principle / Memory & Footprint / Compose","date":"2021-06-23T17:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_image_library.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n## Image Library  \n\nAndroid     `Glide`      .\n\n Part 1     .\n\n### Glide  \n\n```gradle\ndependencies {\n    ...\n    implementation 'com.github.bumptech.glide:glide:4.12.0'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.12.0'\n    ...\n}\n```\n\n###    \n\n```xml\n<manifest \n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"android.deepdive.raw\">\n\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n\n    <!-- ... -->\n\n</manifest>\n```\n\n###     \n\n```js\n<ImageView\n    android:id=\"@+id/imageView\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintLeft_toLeftOf=\"parent\"\n    app:layout_constraintRight_toRightOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"/>\n```\n\n###  Glide  \n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        var imageView: ImageView = findViewById(R.id.imageView)\n\n        Glide\n            .with(this)\n            .load(\"https://goo.gl/gEgYUd\")\n            .into(imageView)\n    }\n}\n```\n\n          .\n\n{% asset_img Screenshot_1624078627.png 350 [Screenshot_1624078627] %}\n\n##  \n###   \n\n```\nGlide\n    .with(this)\n    .load(\"https://goo.gl/gEgYUd\")\n    .into(imageView)\n```\n\n        .\n\nGlide     `with()` `load()`, `into()`     .\n\n#### 1. with \n\n```java\n@NonNull\npublic static RequestManager with(@NonNull FragmentActivity activity) {\n    return getRetriever(activity).get(activity);\n}\n```\n\n```java\n@NonNull\nprivate static RequestManagerRetriever getRetriever(@Nullable Context context) {\n    // Context could be null for other reasons (ie the user passes in null), but in practice it will\n    // only occur due to errors with the Fragment lifecycle.\n    Preconditions.checkNotNull(\n        context,\n        \"You cannot start a load on a not yet attached View or a Fragment where getActivity() \"\n            + \"returns null (which usually occurs when getActivity() is called before the Fragment \"\n            + \"is attached or after the Fragment is destroyed).\");\n    return Glide.get(context).getRequestManagerRetriever();\n}\n```\n\n`with()`  `getRetriever()`   `RequestManagerRetriever`  .\n\n `get()`   `RequestManager`      .\n\n```java\n@NonNull\npublic RequestManager get(@NonNull Context context) {\n    if (context == null) {\n        throw new IllegalArgumentException(\"You cannot start a load on a null Context\");\n    } else if (Util.isOnMainThread() && !(context instanceof Application)) {\n        if (context instanceof FragmentActivity) {\n        return get((FragmentActivity) context);\n        } else if (context instanceof Activity) {\n        return get((Activity) context);\n        } else if (context instanceof ContextWrapper\n            // Only unwrap a ContextWrapper if the baseContext has a non-null application context.\n            // Context#createPackageContext may return a Context without an Application instance,\n            // in which case a ContextWrapper may be used to attach one.\n            && ((ContextWrapper) context).getBaseContext().getApplicationContext() != null) {\n        return get(((ContextWrapper) context).getBaseContext());\n        }\n    }\n    return getApplicationManager(context);\n}\n```\n\nContext instance type     `getApplicationManager()` .\n\n```java\n@NonNull\nprivate RequestManager getApplicationManager(@NonNull Context context) {\n    // Either an application context or we're on a background thread.\n    if (applicationManager == null) {  \n        synchronized (this) {\n            if (applicationManager == null) {\n            // Normally pause/resume is taken care of by the fragment we add to the fragment or\n            // activity. However, in this case since the manager attached to the application will not\n            // receive lifecycle events, we must force the manager to start resumed using\n            // ApplicationLifecycle.\n\n          // T  ODO(b/27524013): Factor out this Glide.get() call.\n            Glide glide = Glide.get(context.getApplicationContext());\n            applicationManager =\n                factory.build(\n                    glide,\n                    new ApplicationLifecycle(),\n                    new EmptyRequestManagerTreeNode(),\n                    context.getApplicationContext());\n            }\n        }\n    }\n    return applicationManager;\n}\n```\n\n`with()`  Global Scope    Glide        .\n\n#### 2. load \n\n  `load()`  .\n\n```java\n@NonNull\n@CheckResult\n@Override\npublic RequestBuilder<Drawable> load(@Nullable String string) {\n    return asDrawable().load(string);\n}\n```\n\n `asDrawable()`  `RequestBuilder`  , `load()`  .\n\n`asDrawable()`  .\n\n```java\n@NonNull\n@CheckResult\npublic RequestBuilder<Drawable> asDrawable() {\n    return as(Drawable.class);\n}\n```\n\n`android.graphics.drawable.Drawable`  `as()`   .\n\n`as()`  .\n\n\n```java\n@NonNull\n@CheckResult\npublic <ResourceType> RequestBuilder<ResourceType> as(@NonNull Class<ResourceType> resourceClass) {\n    return new RequestBuilder<>(glide, this, resourceClass, context);\n}\n```\n\n   ( `android.graphics.drawable.Drawable`)  .\n\n   `com.bumptech.glide.load.ResourceDecoders`.\n\n`Drawable.class`        .\n\n`Glide.load()`  `asDrawable()`        `RequestBuilder.load()`       .\n\n`RequestBuilder.load()`    .\n\n```java\n@NonNull\n@Override\n@CheckResult\npublic RequestBuilder<TranscodeType> load(@Nullable String string) {\n    return loadGeneric(string);\n}\n```\n\n`load()`   `string` key    .\n\n          .\n\n `loadGeneric()` .\n\n```java\n@NonNull\nprivate RequestBuilder<TranscodeType> loadGeneric(@Nullable Object model) {\n    if (isAutoCloneEnabled()) {\n        return clone().loadGeneric(model);\n    }\n    this.model = model;\n    isModelSet = true;\n    return selfOrThrowIfLocked();\n}\n```\n\n  `String` `Object` .\n\n `model` `com.bumptech.glide.load.model.UriLoader`   .\n\n```java\n@NonNull\n@SuppressWarnings(\"unchecked\")\nprotected final T selfOrThrowIfLocked() {\n    if (isLocked) {\n        throw new IllegalStateException(\"You cannot modify locked T, consider clone()\");\n    }\n    return self();\n}\n```\n\n```java\n@SuppressWarnings(\"unchecked\")\nprivate T self() {\n    return (T) this;\n}\n```\n\n `RequestBuilder.load()`  `RequestBuilder`   .\n\n#### 3. into \n\n `with()` `RequestManager`  ,   `load()`   `RequestBuilder`    .\n\n `RequestBuilder` `into()`   `ImageView`    .\n\n  ImageView  .\n\n```java\n@NonNull\npublic ViewTarget<ImageView, TranscodeType> into(@NonNull ImageView view) {\n    Util.assertMainThread();\n    Preconditions.checkNotNull(view);\n\n    BaseRequestOptions<?> requestOptions = this;\n    if (!requestOptions.isTransformationSet()\n        && requestOptions.isTransformationAllowed()\n        && view.getScaleType() != null) {\n        // Clone in this method so that if we use this RequestBuilder to load into a View and then\n        // into a different target, we don't retain the transformation applied based on the previous\n        // View's scale type.\n        switch (view.getScaleType()) {\n        case CENTER_CROP:\n            requestOptions = requestOptions.clone().optionalCenterCrop();\n            break;\n        case CENTER_INSIDE:\n            requestOptions = requestOptions.clone().optionalCenterInside();\n            break;\n        case FIT_CENTER:\n        case FIT_START:\n        case FIT_END:\n            requestOptions = requestOptions.clone().optionalFitCenter();\n            break;\n        case FIT_XY:\n            requestOptions = requestOptions.clone().optionalCenterInside();\n            break;\n        case CENTER:\n        case MATRIX:\n        default:\n            // Do nothing.\n            }\n        }\n    return into(\n        glideContext.buildImageViewTarget(view, transcodeClass),\n        /*targetListener=*/ null,\n        requestOptions,\n        Executors.mainThreadExecutor());\n}\n```\n`Util.assertMainThread()`     , `Preconditions.checkNotNull(view)`   ImageView  null check .\n\n ImageView scaleType   , `into(target, targetListener, options, callbackExecutor)` .\n\n `target`  `GlideContext.buildImageViewTarget()`  ,   ImageView  `BitmapImageViewTarget` `DrawableImageViewTarget`   .\n\n`GlideContext.buildImageViewTarget()`    `transcodeClass`  `Glide.load()`    `as()`   `Drawable.class`  .\n\n```java\nprivate <Y extends Target<TranscodeType>> Y into(\n    @NonNull Y target,\n    @Nullable RequestListener<TranscodeType> targetListener,\n    BaseRequestOptions<?> options,\n    Executor callbackExecutor) {\n\n    Preconditions.checkNotNull(target);\n    if (!isModelSet) {\n        throw new IllegalArgumentException(\"You must call #load() before calling #into()\");\n    }\n\n    Request request = buildRequest(target, targetListener, options, callbackExecutor);\n    Request previous = target.getRequest();\n    if (request.isEquivalentTo(previous) && !isSkipMemoryCacheWithCompletePreviousRequest(options, previous)) {\n        // If the request is completed, beginning again will ensure the result is re-delivered,\n        // triggering RequestListeners and Targets. If the request is failed, beginning again will\n        // restart the request, giving it another chance to complete. If the request is already\n        // running, we can let it continue running without interruption.\n        if (!Preconditions.checkNotNull(previous).isRunning()) {\n            // Use the previous request rather than the new one to allow for optimizations like skipping\n            // setting placeholders, tracking and un-tracking Targets, and obtaining View dimensions\n            // that are done in the individual Request.\n            previous.begin();\n        }\n        return target;\n    }\n\n    requestManager.clear(target);\n    target.setRequest(request);\n    requestManager.track(target, request);\n\n    return target;\n}\n```\n\n`target`  ImageView   ,   `requestManager.clear(target)`.\n\n    target         .\n\n## Memory & Footprint\n\nBitmap   OOM      .\n\nImage Library              OOM  .\n\n        **   (?)**   ,          .\n\n{% asset_img IMG_06A0242D2ABE-1.jpg [IMG_06A0242D2ABE-1] %}\n\nAndroid        . \n\n* Dalvik heap  : java   \n* External  : native heap      \nDalvik heap  External  `Dalvik heap footprint + External Limit`      OOM  .\n\n### Footprint\njava footprint        , footprint     . \n\n{% asset_img image.png [image] %}\n\nDalvik VM      Heap  ,        Dalvit Footfrint .   Footfrint     java      , External heap   OOM   .    Honeycomb  Dalvik heap  External   ,   . \n\nExternal   Honeycomb            OOM    .                 ,             . \n\n         ? Honeycomb   Java              External  Native Heap   . Java      GC   Native Heap  GC       . \n\n  , Honeycomb   External   Dalvik heap        GC    .\n\n ,      OOM   BitmapFactory   ,       .      OOM , ` `   ?\n\n### Bitmap Caching\n\n              .                     .     `Memory Cache` `Disk Cache`       .\n\n#### 1. Memory Cache\nMemory Cache      ,    .  Memory Cache               Disk Cache      .\n\n\n#### 2. Disk Cache\nMemory Cache     ,          Disk Cache   .  Disk     Memory    .\n\n\n### BitmapPool\nMemory Cache     `BitmapPool`. `BitmapPool`    Bitmap  ,          pool     . \n\n BitmapPool   Pool   , LRU    LinkedList `(lruBItmapList)` Byte Size   LinkedList`(bitmapList)`   .       ,   .\n\n``` kotlin\nprivate val lruBitmapList = LinkedList<Bitmap>()\nprivate val bitmapList = LinkedList<Bitmap>()\n```\n\nLRU         , `   ` BitmapPool  . LRU     BitmapPool     ,        ,      .   [ ](https://jamssoft.tistory.com/195)  .\n\n\n\n    `Glide`  LruBitmapPool Class  , LruBitmapList bitmapList   . \n\n``` java\npublic class LruBitmapPool implements BitmapPool {\n    private static final String TAG = \"LruBitmapPool\";\n    private static final Bitmap.Config DEFAULT_CONFIG = Bitmap.Config.ARGB_8888;\n\n    private final LruPoolStrategy strategy;\n    private final Set<Bitmap.Config> allowedConfigs;\n    private final BitmapTracker tracker;\n\n    // Pool    \n    private long maxSize;\n    //  pool  bitmap byte \n    private long currentSize;\n\n  // ...\n```\n\nGlide LruBitmapPool Class  strategy(LruPoolStrategy)  LRU   , tracker(BitmapTracker) Bitmap size   .\n\n``` java\n@Override\npublic synchronized void put(Bitmap bitmap) {\n    if (bitmap == null) {\n        throw new NullPointerException(\"Bitmap must not be null\");\n    }\n    // isRecycled:  bitmap \n    if (bitmap.isRecycled()) {\n        throw new IllegalStateException(\"Cannot pool recycled bitmap\");\n    }\n    // isMutable: canvas    bitmap  .\n    if (!bitmap.isMutable()\n        || strategy.getSize(bitmap) > maxSize\n        || !allowedConfigs.contains(bitmap.getConfig())) {\n        \n        if (Log.isLoggable(TAG, Log.VERBOSE)) {\n            Log.v(\n                TAG,\n                \"Reject bitmap from pool\"\n                + \", bitmap: \"\n                + strategy.logBitmap(bitmap)\n                + \", is mutable: \"\n                + bitmap.isMutable()\n                + \", is allowed config: \"\n                + allowedConfigs.contains(bitmap.getConfig()));\n        }\n        bitmap.recycle();\n        return;\n    }\n    // pool  bitmap  .\n    final int size = strategy.getSize(bitmap);\n    strategy.put(bitmap);\n    tracker.add(bitmap);\n\n    puts++;\n    currentSize += size;\n\n    if (Log.isLoggable(TAG, Log.VERBOSE)) {\n        Log.v(TAG, \"Put bitmap in pool=\" + strategy.logBitmap(bitmap));\n    }\n    dump();\n\n    evict();\n}\n```\n\nBitmap Pool     , strategy & tracker bitmap . \n\n> **** Lru  strategy    bitmap    ,   `LruPoolStrategy`    .\n\n```java\n// Pool     .\nprivate synchronized void trimToSize(long size) {\n    while (currentSize > size) {\n        //LRU List .\n        final Bitmap removed = strategy.removeLast();\n        if (removed == null) {\n            if (Log.isLoggable(TAG, Log.WARN)) {\n                Log.w(TAG, \"Size mismatch, resetting\");\n                dumpUnchecked();\n            }\n            currentSize = 0;\n            return;\n        }\n        // BitmapList . \n        tracker.remove(removed);\n        currentSize -= strategy.getSize(removed);\n        evictions++;\n        if (Log.isLoggable(TAG, Log.DEBUG)) {\n            Log.d(TAG, \"Evicting bitmap=\" + strategy.logBitmap(removed));\n        }\n        dump();\n        removed.recycle();\n    }\n}\n```\n\ntrimToSize()  pool        lastIndex       . \n\n```java\n@Override\n@Nullable\npublic Bitmap get(int width, int height, Bitmap.Config config) {\n    final int size = Util.getBitmapByteSize(width, height, config);\n    Key key = keyPool.get(size);\n\n    Integer possibleSize = sortedSizes.ceilingKey(size);\n    if (possibleSize != null && possibleSize != size && possibleSize <= size * MAX_SIZE_MULTIPLE) {\n        keyPool.offer(key);\n        key = keyPool.get(possibleSize);\n    }\n\n    final Bitmap result = groupedMap.get(key);\n    //   , pool .\n    if (result != null) {\n        result.reconfigure(width, height, config);\n        decrementBitmapOfSize(possibleSize);\n    }\n    return result;\n}\n```\n\n   pool   .\n\n## Jetpack Compose   \n\nGoogle  Jetpack Compose       .\n\n**Accompanist**   GroupId   .\n\n> **** [Google#Accompanist Repository](https://github.com/google/accompanist)\n\nAccompanist Glide Coil  .\n\n   .\n\n```gradle\ndependencies {\n    ...\n    implementation \"com.google.accompanist:accompanist-glide:0.11.1\"\n    implementation \"com.google.accompanist:accompanist-coil:0.11.1\"\n    ...\n}\n```\n\nGlide   .\n\n```kotlin\nImage(\n    painter = rememberGlidePainter(\n        request = \"https://picsum.photos/300/300\",\n        // placeHolder\n    ),\n    contentDescription = stringResource(R.string.image_content_desc)\n)\nImage(\n    painter = rememberGlidePainter(\n        request = \"https://cataas.com/cat/gif\",\n        // placeHolder\n    ),\n    contentDescription = null\n)\n```\n\nCoil   .\n\n```kotlin\nImage(\n    painter = rememberCoilPainter(\n        request = \"https://picsum.photos/300/300\",\n        // placeHolder\n    ),\n    contentDescription = null\n)\n```\n\nCoil gif   `coil-gif`  .\n\n```gradle\ndependencies {\n    ...\n    implementation \"com.google.accompanist:accompanist-glide:0.11.1\"\n    implementation \"com.google.accompanist:accompanist-coil:0.11.1\"\n    // Coil  gif    \n    implementation \"io.coil-kt:coil-gif:1.2.2\"\n    ...\n}\n```\n\n   ImageLoader .\n\n```kotlin\nfun gifImageLoader(context: Context) = ImageLoader.Builder(context)\n    .componentRegistry {\n    if (SDK_INT >= 28) {\n        add(ImageDecoderDecoder(context))\n    } else {\n        add(GifDecoder())\n        }\n    }\n    .build()\n```\n\nImage    .\n\n```kotlin\nImage(\n    painter = rememberCoilPainter(\n        request = \"https://cataas.com/cat/gif\",\n        imageLoader = gifImageLoader(LocalContext*.current),\n    ),\n    contentDescription = null\n)\n```","source":"_posts/2021-06-24 Image Loading and Caching Library Part 2.md","raw":"---\ntitle: Image Loading and Caching Library Part 2  Principle / Memory & Footprint / Compose\ndate: 2021-06-24 02:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_image_library.png\ncategories:\n- Image Library\ntags:\n- Android\n- Image\n- Library\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n## Image Library  \n\nAndroid     `Glide`      .\n\n Part 1     .\n\n### Glide  \n\n```gradle\ndependencies {\n    ...\n    implementation 'com.github.bumptech.glide:glide:4.12.0'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.12.0'\n    ...\n}\n```\n\n###    \n\n```xml\n<manifest \n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"android.deepdive.raw\">\n\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\n\n    <!-- ... -->\n\n</manifest>\n```\n\n###     \n\n```js\n<ImageView\n    android:id=\"@+id/imageView\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintLeft_toLeftOf=\"parent\"\n    app:layout_constraintRight_toRightOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"/>\n```\n\n###  Glide  \n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        var imageView: ImageView = findViewById(R.id.imageView)\n\n        Glide\n            .with(this)\n            .load(\"https://goo.gl/gEgYUd\")\n            .into(imageView)\n    }\n}\n```\n\n          .\n\n{% asset_img Screenshot_1624078627.png 350 [Screenshot_1624078627] %}\n\n##  \n###   \n\n```\nGlide\n    .with(this)\n    .load(\"https://goo.gl/gEgYUd\")\n    .into(imageView)\n```\n\n        .\n\nGlide     `with()` `load()`, `into()`     .\n\n#### 1. with \n\n```java\n@NonNull\npublic static RequestManager with(@NonNull FragmentActivity activity) {\n    return getRetriever(activity).get(activity);\n}\n```\n\n```java\n@NonNull\nprivate static RequestManagerRetriever getRetriever(@Nullable Context context) {\n    // Context could be null for other reasons (ie the user passes in null), but in practice it will\n    // only occur due to errors with the Fragment lifecycle.\n    Preconditions.checkNotNull(\n        context,\n        \"You cannot start a load on a not yet attached View or a Fragment where getActivity() \"\n            + \"returns null (which usually occurs when getActivity() is called before the Fragment \"\n            + \"is attached or after the Fragment is destroyed).\");\n    return Glide.get(context).getRequestManagerRetriever();\n}\n```\n\n`with()`  `getRetriever()`   `RequestManagerRetriever`  .\n\n `get()`   `RequestManager`      .\n\n```java\n@NonNull\npublic RequestManager get(@NonNull Context context) {\n    if (context == null) {\n        throw new IllegalArgumentException(\"You cannot start a load on a null Context\");\n    } else if (Util.isOnMainThread() && !(context instanceof Application)) {\n        if (context instanceof FragmentActivity) {\n        return get((FragmentActivity) context);\n        } else if (context instanceof Activity) {\n        return get((Activity) context);\n        } else if (context instanceof ContextWrapper\n            // Only unwrap a ContextWrapper if the baseContext has a non-null application context.\n            // Context#createPackageContext may return a Context without an Application instance,\n            // in which case a ContextWrapper may be used to attach one.\n            && ((ContextWrapper) context).getBaseContext().getApplicationContext() != null) {\n        return get(((ContextWrapper) context).getBaseContext());\n        }\n    }\n    return getApplicationManager(context);\n}\n```\n\nContext instance type     `getApplicationManager()` .\n\n```java\n@NonNull\nprivate RequestManager getApplicationManager(@NonNull Context context) {\n    // Either an application context or we're on a background thread.\n    if (applicationManager == null) {  \n        synchronized (this) {\n            if (applicationManager == null) {\n            // Normally pause/resume is taken care of by the fragment we add to the fragment or\n            // activity. However, in this case since the manager attached to the application will not\n            // receive lifecycle events, we must force the manager to start resumed using\n            // ApplicationLifecycle.\n\n          // T  ODO(b/27524013): Factor out this Glide.get() call.\n            Glide glide = Glide.get(context.getApplicationContext());\n            applicationManager =\n                factory.build(\n                    glide,\n                    new ApplicationLifecycle(),\n                    new EmptyRequestManagerTreeNode(),\n                    context.getApplicationContext());\n            }\n        }\n    }\n    return applicationManager;\n}\n```\n\n`with()`  Global Scope    Glide        .\n\n#### 2. load \n\n  `load()`  .\n\n```java\n@NonNull\n@CheckResult\n@Override\npublic RequestBuilder<Drawable> load(@Nullable String string) {\n    return asDrawable().load(string);\n}\n```\n\n `asDrawable()`  `RequestBuilder`  , `load()`  .\n\n`asDrawable()`  .\n\n```java\n@NonNull\n@CheckResult\npublic RequestBuilder<Drawable> asDrawable() {\n    return as(Drawable.class);\n}\n```\n\n`android.graphics.drawable.Drawable`  `as()`   .\n\n`as()`  .\n\n\n```java\n@NonNull\n@CheckResult\npublic <ResourceType> RequestBuilder<ResourceType> as(@NonNull Class<ResourceType> resourceClass) {\n    return new RequestBuilder<>(glide, this, resourceClass, context);\n}\n```\n\n   ( `android.graphics.drawable.Drawable`)  .\n\n   `com.bumptech.glide.load.ResourceDecoders`.\n\n`Drawable.class`        .\n\n`Glide.load()`  `asDrawable()`        `RequestBuilder.load()`       .\n\n`RequestBuilder.load()`    .\n\n```java\n@NonNull\n@Override\n@CheckResult\npublic RequestBuilder<TranscodeType> load(@Nullable String string) {\n    return loadGeneric(string);\n}\n```\n\n`load()`   `string` key    .\n\n          .\n\n `loadGeneric()` .\n\n```java\n@NonNull\nprivate RequestBuilder<TranscodeType> loadGeneric(@Nullable Object model) {\n    if (isAutoCloneEnabled()) {\n        return clone().loadGeneric(model);\n    }\n    this.model = model;\n    isModelSet = true;\n    return selfOrThrowIfLocked();\n}\n```\n\n  `String` `Object` .\n\n `model` `com.bumptech.glide.load.model.UriLoader`   .\n\n```java\n@NonNull\n@SuppressWarnings(\"unchecked\")\nprotected final T selfOrThrowIfLocked() {\n    if (isLocked) {\n        throw new IllegalStateException(\"You cannot modify locked T, consider clone()\");\n    }\n    return self();\n}\n```\n\n```java\n@SuppressWarnings(\"unchecked\")\nprivate T self() {\n    return (T) this;\n}\n```\n\n `RequestBuilder.load()`  `RequestBuilder`   .\n\n#### 3. into \n\n `with()` `RequestManager`  ,   `load()`   `RequestBuilder`    .\n\n `RequestBuilder` `into()`   `ImageView`    .\n\n  ImageView  .\n\n```java\n@NonNull\npublic ViewTarget<ImageView, TranscodeType> into(@NonNull ImageView view) {\n    Util.assertMainThread();\n    Preconditions.checkNotNull(view);\n\n    BaseRequestOptions<?> requestOptions = this;\n    if (!requestOptions.isTransformationSet()\n        && requestOptions.isTransformationAllowed()\n        && view.getScaleType() != null) {\n        // Clone in this method so that if we use this RequestBuilder to load into a View and then\n        // into a different target, we don't retain the transformation applied based on the previous\n        // View's scale type.\n        switch (view.getScaleType()) {\n        case CENTER_CROP:\n            requestOptions = requestOptions.clone().optionalCenterCrop();\n            break;\n        case CENTER_INSIDE:\n            requestOptions = requestOptions.clone().optionalCenterInside();\n            break;\n        case FIT_CENTER:\n        case FIT_START:\n        case FIT_END:\n            requestOptions = requestOptions.clone().optionalFitCenter();\n            break;\n        case FIT_XY:\n            requestOptions = requestOptions.clone().optionalCenterInside();\n            break;\n        case CENTER:\n        case MATRIX:\n        default:\n            // Do nothing.\n            }\n        }\n    return into(\n        glideContext.buildImageViewTarget(view, transcodeClass),\n        /*targetListener=*/ null,\n        requestOptions,\n        Executors.mainThreadExecutor());\n}\n```\n`Util.assertMainThread()`     , `Preconditions.checkNotNull(view)`   ImageView  null check .\n\n ImageView scaleType   , `into(target, targetListener, options, callbackExecutor)` .\n\n `target`  `GlideContext.buildImageViewTarget()`  ,   ImageView  `BitmapImageViewTarget` `DrawableImageViewTarget`   .\n\n`GlideContext.buildImageViewTarget()`    `transcodeClass`  `Glide.load()`    `as()`   `Drawable.class`  .\n\n```java\nprivate <Y extends Target<TranscodeType>> Y into(\n    @NonNull Y target,\n    @Nullable RequestListener<TranscodeType> targetListener,\n    BaseRequestOptions<?> options,\n    Executor callbackExecutor) {\n\n    Preconditions.checkNotNull(target);\n    if (!isModelSet) {\n        throw new IllegalArgumentException(\"You must call #load() before calling #into()\");\n    }\n\n    Request request = buildRequest(target, targetListener, options, callbackExecutor);\n    Request previous = target.getRequest();\n    if (request.isEquivalentTo(previous) && !isSkipMemoryCacheWithCompletePreviousRequest(options, previous)) {\n        // If the request is completed, beginning again will ensure the result is re-delivered,\n        // triggering RequestListeners and Targets. If the request is failed, beginning again will\n        // restart the request, giving it another chance to complete. If the request is already\n        // running, we can let it continue running without interruption.\n        if (!Preconditions.checkNotNull(previous).isRunning()) {\n            // Use the previous request rather than the new one to allow for optimizations like skipping\n            // setting placeholders, tracking and un-tracking Targets, and obtaining View dimensions\n            // that are done in the individual Request.\n            previous.begin();\n        }\n        return target;\n    }\n\n    requestManager.clear(target);\n    target.setRequest(request);\n    requestManager.track(target, request);\n\n    return target;\n}\n```\n\n`target`  ImageView   ,   `requestManager.clear(target)`.\n\n    target         .\n\n## Memory & Footprint\n\nBitmap   OOM      .\n\nImage Library              OOM  .\n\n        **   (?)**   ,          .\n\n{% asset_img IMG_06A0242D2ABE-1.jpg [IMG_06A0242D2ABE-1] %}\n\nAndroid        . \n\n* Dalvik heap  : java   \n* External  : native heap      \nDalvik heap  External  `Dalvik heap footprint + External Limit`      OOM  .\n\n### Footprint\njava footprint        , footprint     . \n\n{% asset_img image.png [image] %}\n\nDalvik VM      Heap  ,        Dalvit Footfrint .   Footfrint     java      , External heap   OOM   .    Honeycomb  Dalvik heap  External   ,   . \n\nExternal   Honeycomb            OOM    .                 ,             . \n\n         ? Honeycomb   Java              External  Native Heap   . Java      GC   Native Heap  GC       . \n\n  , Honeycomb   External   Dalvik heap        GC    .\n\n ,      OOM   BitmapFactory   ,       .      OOM , ` `   ?\n\n### Bitmap Caching\n\n              .                     .     `Memory Cache` `Disk Cache`       .\n\n#### 1. Memory Cache\nMemory Cache      ,    .  Memory Cache               Disk Cache      .\n\n\n#### 2. Disk Cache\nMemory Cache     ,          Disk Cache   .  Disk     Memory    .\n\n\n### BitmapPool\nMemory Cache     `BitmapPool`. `BitmapPool`    Bitmap  ,          pool     . \n\n BitmapPool   Pool   , LRU    LinkedList `(lruBItmapList)` Byte Size   LinkedList`(bitmapList)`   .       ,   .\n\n``` kotlin\nprivate val lruBitmapList = LinkedList<Bitmap>()\nprivate val bitmapList = LinkedList<Bitmap>()\n```\n\nLRU         , `   ` BitmapPool  . LRU     BitmapPool     ,        ,      .   [ ](https://jamssoft.tistory.com/195)  .\n\n\n\n    `Glide`  LruBitmapPool Class  , LruBitmapList bitmapList   . \n\n``` java\npublic class LruBitmapPool implements BitmapPool {\n    private static final String TAG = \"LruBitmapPool\";\n    private static final Bitmap.Config DEFAULT_CONFIG = Bitmap.Config.ARGB_8888;\n\n    private final LruPoolStrategy strategy;\n    private final Set<Bitmap.Config> allowedConfigs;\n    private final BitmapTracker tracker;\n\n    // Pool    \n    private long maxSize;\n    //  pool  bitmap byte \n    private long currentSize;\n\n  // ...\n```\n\nGlide LruBitmapPool Class  strategy(LruPoolStrategy)  LRU   , tracker(BitmapTracker) Bitmap size   .\n\n``` java\n@Override\npublic synchronized void put(Bitmap bitmap) {\n    if (bitmap == null) {\n        throw new NullPointerException(\"Bitmap must not be null\");\n    }\n    // isRecycled:  bitmap \n    if (bitmap.isRecycled()) {\n        throw new IllegalStateException(\"Cannot pool recycled bitmap\");\n    }\n    // isMutable: canvas    bitmap  .\n    if (!bitmap.isMutable()\n        || strategy.getSize(bitmap) > maxSize\n        || !allowedConfigs.contains(bitmap.getConfig())) {\n        \n        if (Log.isLoggable(TAG, Log.VERBOSE)) {\n            Log.v(\n                TAG,\n                \"Reject bitmap from pool\"\n                + \", bitmap: \"\n                + strategy.logBitmap(bitmap)\n                + \", is mutable: \"\n                + bitmap.isMutable()\n                + \", is allowed config: \"\n                + allowedConfigs.contains(bitmap.getConfig()));\n        }\n        bitmap.recycle();\n        return;\n    }\n    // pool  bitmap  .\n    final int size = strategy.getSize(bitmap);\n    strategy.put(bitmap);\n    tracker.add(bitmap);\n\n    puts++;\n    currentSize += size;\n\n    if (Log.isLoggable(TAG, Log.VERBOSE)) {\n        Log.v(TAG, \"Put bitmap in pool=\" + strategy.logBitmap(bitmap));\n    }\n    dump();\n\n    evict();\n}\n```\n\nBitmap Pool     , strategy & tracker bitmap . \n\n> **** Lru  strategy    bitmap    ,   `LruPoolStrategy`    .\n\n```java\n// Pool     .\nprivate synchronized void trimToSize(long size) {\n    while (currentSize > size) {\n        //LRU List .\n        final Bitmap removed = strategy.removeLast();\n        if (removed == null) {\n            if (Log.isLoggable(TAG, Log.WARN)) {\n                Log.w(TAG, \"Size mismatch, resetting\");\n                dumpUnchecked();\n            }\n            currentSize = 0;\n            return;\n        }\n        // BitmapList . \n        tracker.remove(removed);\n        currentSize -= strategy.getSize(removed);\n        evictions++;\n        if (Log.isLoggable(TAG, Log.DEBUG)) {\n            Log.d(TAG, \"Evicting bitmap=\" + strategy.logBitmap(removed));\n        }\n        dump();\n        removed.recycle();\n    }\n}\n```\n\ntrimToSize()  pool        lastIndex       . \n\n```java\n@Override\n@Nullable\npublic Bitmap get(int width, int height, Bitmap.Config config) {\n    final int size = Util.getBitmapByteSize(width, height, config);\n    Key key = keyPool.get(size);\n\n    Integer possibleSize = sortedSizes.ceilingKey(size);\n    if (possibleSize != null && possibleSize != size && possibleSize <= size * MAX_SIZE_MULTIPLE) {\n        keyPool.offer(key);\n        key = keyPool.get(possibleSize);\n    }\n\n    final Bitmap result = groupedMap.get(key);\n    //   , pool .\n    if (result != null) {\n        result.reconfigure(width, height, config);\n        decrementBitmapOfSize(possibleSize);\n    }\n    return result;\n}\n```\n\n   pool   .\n\n## Jetpack Compose   \n\nGoogle  Jetpack Compose       .\n\n**Accompanist**   GroupId   .\n\n> **** [Google#Accompanist Repository](https://github.com/google/accompanist)\n\nAccompanist Glide Coil  .\n\n   .\n\n```gradle\ndependencies {\n    ...\n    implementation \"com.google.accompanist:accompanist-glide:0.11.1\"\n    implementation \"com.google.accompanist:accompanist-coil:0.11.1\"\n    ...\n}\n```\n\nGlide   .\n\n```kotlin\nImage(\n    painter = rememberGlidePainter(\n        request = \"https://picsum.photos/300/300\",\n        // placeHolder\n    ),\n    contentDescription = stringResource(R.string.image_content_desc)\n)\nImage(\n    painter = rememberGlidePainter(\n        request = \"https://cataas.com/cat/gif\",\n        // placeHolder\n    ),\n    contentDescription = null\n)\n```\n\nCoil   .\n\n```kotlin\nImage(\n    painter = rememberCoilPainter(\n        request = \"https://picsum.photos/300/300\",\n        // placeHolder\n    ),\n    contentDescription = null\n)\n```\n\nCoil gif   `coil-gif`  .\n\n```gradle\ndependencies {\n    ...\n    implementation \"com.google.accompanist:accompanist-glide:0.11.1\"\n    implementation \"com.google.accompanist:accompanist-coil:0.11.1\"\n    // Coil  gif    \n    implementation \"io.coil-kt:coil-gif:1.2.2\"\n    ...\n}\n```\n\n   ImageLoader .\n\n```kotlin\nfun gifImageLoader(context: Context) = ImageLoader.Builder(context)\n    .componentRegistry {\n    if (SDK_INT >= 28) {\n        add(ImageDecoderDecoder(context))\n    } else {\n        add(GifDecoder())\n        }\n    }\n    .build()\n```\n\nImage    .\n\n```kotlin\nImage(\n    painter = rememberCoilPainter(\n        request = \"https://cataas.com/cat/gif\",\n        imageLoader = gifImageLoader(LocalContext*.current),\n    ),\n    contentDescription = null\n)\n```","slug":"2021-06-24 Image Loading and Caching Library Part 2","published":1,"updated":"2021-07-25T13:29:10.314Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7lt001s3lre6183g4z6","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<span id=\"more\"></span>\n<h2 id=\"Image-Library--\"><a href=\"#Image-Library--\" class=\"headerlink\" title=\"Image Library  \"></a>Image Library  </h2><p>Android     <code>Glide</code>      .</p>\n<p> Part 1     .</p>\n<h3 id=\"Glide--\"><a href=\"#Glide--\" class=\"headerlink\" title=\"Glide  \"></a>Glide  </h3><figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    implementation <span class=\"string\">&#x27;com.github.bumptech.glide:glide:4.12.0&#x27;</span></span><br><span class=\"line\">    annotationProcessor <span class=\"string\">&#x27;com.github.bumptech.glide:compiler:4.12.0&#x27;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"---\"><a href=\"#---\" class=\"headerlink\" title=\"   \"></a>   </h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">manifest</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">package</span>=<span class=\"string\">&quot;android.deepdive.raw&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">uses-permission</span> <span class=\"attr\">android:name</span>=<span class=\"string\">&quot;android.permission.INTERNET&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- ... --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"----\"><a href=\"#----\" class=\"headerlink\" title=\"    \"></a>    </h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;ImageView</span><br><span class=\"line\">    <span class=\"attr\">android</span>:id=<span class=\"string\">&quot;@+id/imageView&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">android</span>:layout_width=<span class=\"string\">&quot;wrap_content&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">android</span>:layout_height=<span class=\"string\">&quot;wrap_content&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">app</span>:layout_constraintBottom_toBottomOf=<span class=\"string\">&quot;parent&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">app</span>:layout_constraintLeft_toLeftOf=<span class=\"string\">&quot;parent&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">app</span>:layout_constraintRight_toRightOf=<span class=\"string\">&quot;parent&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">app</span>:layout_constraintTop_toTopOf=<span class=\"string\">&quot;parent&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-Glide--\"><a href=\"#-Glide--\" class=\"headerlink\" title=\" Glide  \"></a> Glide  </h3><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> : <span class=\"type\">AppCompatActivity</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContentView(R.layout.activity_main)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> imageView: ImageView = findViewById(R.id.imageView)</span><br><span class=\"line\"></span><br><span class=\"line\">        Glide</span><br><span class=\"line\">            .with(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">            .load(<span class=\"string\">&quot;https://goo.gl/gEgYUd&quot;</span>)</span><br><span class=\"line\">            .into(imageView)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>          .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%202/Screenshot_1624078627.png\" class=\"\" width=\"350\" title=\"[Screenshot_1624078627]\">\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Glide</span><br><span class=\"line\">    .with(this)</span><br><span class=\"line\">    .load(&quot;https://goo.gl/gEgYUd&quot;)</span><br><span class=\"line\">    .into(imageView)</span><br></pre></td></tr></table></figure>\n\n<p>        .</p>\n<p>Glide     <code>with()</code> <code>load()</code>, <code>into()</code>     .</p>\n<h4 id=\"1-with-\"><a href=\"#1-with-\" class=\"headerlink\" title=\"1. with \"></a>1. with </h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> RequestManager <span class=\"title\">with</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> FragmentActivity activity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getRetriever(activity).get(activity);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> RequestManagerRetriever <span class=\"title\">getRetriever</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Context context)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Context could be null for other reasons (ie the user passes in null), but in practice it will</span></span><br><span class=\"line\">    <span class=\"comment\">// only occur due to errors with the Fragment lifecycle.</span></span><br><span class=\"line\">    Preconditions.checkNotNull(</span><br><span class=\"line\">        context,</span><br><span class=\"line\">        <span class=\"string\">&quot;You cannot start a load on a not yet attached View or a Fragment where getActivity() &quot;</span></span><br><span class=\"line\">            + <span class=\"string\">&quot;returns null (which usually occurs when getActivity() is called before the Fragment &quot;</span></span><br><span class=\"line\">            + <span class=\"string\">&quot;is attached or after the Fragment is destroyed).&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Glide.get(context).getRequestManagerRetriever();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>with()</code>  <code>getRetriever()</code>   <code>RequestManagerRetriever</code>  .</p>\n<p> <code>get()</code>   <code>RequestManager</code>      .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> RequestManager <span class=\"title\">get</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> Context context)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (context == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">&quot;You cannot start a load on a null Context&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (Util.isOnMainThread() &amp;&amp; !(context <span class=\"keyword\">instanceof</span> Application)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (context <span class=\"keyword\">instanceof</span> FragmentActivity) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> get((FragmentActivity) context);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (context <span class=\"keyword\">instanceof</span> Activity) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> get((Activity) context);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (context <span class=\"keyword\">instanceof</span> ContextWrapper</span><br><span class=\"line\">            <span class=\"comment\">// Only unwrap a ContextWrapper if the baseContext has a non-null application context.</span></span><br><span class=\"line\">            <span class=\"comment\">// Context#createPackageContext may return a Context without an Application instance,</span></span><br><span class=\"line\">            <span class=\"comment\">// in which case a ContextWrapper may be used to attach one.</span></span><br><span class=\"line\">            &amp;&amp; ((ContextWrapper) context).getBaseContext().getApplicationContext() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> get(((ContextWrapper) context).getBaseContext());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getApplicationManager(context);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Context instance type     <code>getApplicationManager()</code> .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> RequestManager <span class=\"title\">getApplicationManager</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> Context context)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Either an application context or we&#x27;re on a background thread.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (applicationManager == <span class=\"keyword\">null</span>) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (applicationManager == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// Normally pause/resume is taken care of by the fragment we add to the fragment or</span></span><br><span class=\"line\">            <span class=\"comment\">// activity. However, in this case since the manager attached to the application will not</span></span><br><span class=\"line\">            <span class=\"comment\">// receive lifecycle events, we must force the manager to start resumed using</span></span><br><span class=\"line\">            <span class=\"comment\">// ApplicationLifecycle.</span></span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"comment\">// T  ODO(b/27524013): Factor out this Glide.get() call.</span></span><br><span class=\"line\">            Glide glide = Glide.get(context.getApplicationContext());</span><br><span class=\"line\">            applicationManager =</span><br><span class=\"line\">                factory.build(</span><br><span class=\"line\">                    glide,</span><br><span class=\"line\">                    <span class=\"keyword\">new</span> ApplicationLifecycle(),</span><br><span class=\"line\">                    <span class=\"keyword\">new</span> EmptyRequestManagerTreeNode(),</span><br><span class=\"line\">                    context.getApplicationContext());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> applicationManager;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>with()</code>  Global Scope    Glide        .</p>\n<h4 id=\"2-load-\"><a href=\"#2-load-\" class=\"headerlink\" title=\"2. load \"></a>2. load </h4><p>  <code>load()</code>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@CheckResult</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> RequestBuilder&lt;Drawable&gt; <span class=\"title\">load</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> String string)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> asDrawable().load(string);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>asDrawable()</code>  <code>RequestBuilder</code>  , <code>load()</code>  .</p>\n<p><code>asDrawable()</code>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@CheckResult</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> RequestBuilder&lt;Drawable&gt; <span class=\"title\">asDrawable</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> as(Drawable.class);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>android.graphics.drawable.Drawable</code>  <code>as()</code>   .</p>\n<p><code>as()</code>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@CheckResult</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> &lt;ResourceType&gt; <span class=\"function\">RequestBuilder&lt;ResourceType&gt; <span class=\"title\">as</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> Class&lt;ResourceType&gt; resourceClass)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> RequestBuilder&lt;&gt;(glide, <span class=\"keyword\">this</span>, resourceClass, context);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   ( <code>android.graphics.drawable.Drawable</code>)  .</p>\n<p>   <code>com.bumptech.glide.load.ResourceDecoders</code>.</p>\n<p><code>Drawable.class</code>        .</p>\n<p><code>Glide.load()</code>  <code>asDrawable()</code>        <code>RequestBuilder.load()</code>       .</p>\n<p><code>RequestBuilder.load()</code>    .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"meta\">@CheckResult</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> RequestBuilder&lt;TranscodeType&gt; <span class=\"title\">load</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> String string)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> loadGeneric(string);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>load()</code>   <code>string</code> key    .</p>\n<p>          .</p>\n<p> <code>loadGeneric()</code> .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> RequestBuilder&lt;TranscodeType&gt; <span class=\"title\">loadGeneric</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Object model)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isAutoCloneEnabled()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> clone().loadGeneric(model);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.model = model;</span><br><span class=\"line\">    isModelSet = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfOrThrowIfLocked();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>String</code> <code>Object</code> .</p>\n<p> <code>model</code> <code>com.bumptech.glide.load.model.UriLoader</code>   .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">final</span> T <span class=\"title\">selfOrThrowIfLocked</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isLocked) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">&quot;You cannot modify locked T, consider clone()&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> self();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> T <span class=\"title\">self</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (T) <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>RequestBuilder.load()</code>  <code>RequestBuilder</code>   .</p>\n<h4 id=\"3-into-\"><a href=\"#3-into-\" class=\"headerlink\" title=\"3. into \"></a>3. into </h4><p> <code>with()</code> <code>RequestManager</code>  ,   <code>load()</code>   <code>RequestBuilder</code>    .</p>\n<p> <code>RequestBuilder</code> <code>into()</code>   <code>ImageView</code>    .</p>\n<p>  ImageView  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> ViewTarget&lt;ImageView, TranscodeType&gt; <span class=\"title\">into</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> ImageView view)</span> </span>&#123;</span><br><span class=\"line\">    Util.assertMainThread();</span><br><span class=\"line\">    Preconditions.checkNotNull(view);</span><br><span class=\"line\"></span><br><span class=\"line\">    BaseRequestOptions&lt;?&gt; requestOptions = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!requestOptions.isTransformationSet()</span><br><span class=\"line\">        &amp;&amp; requestOptions.isTransformationAllowed()</span><br><span class=\"line\">        &amp;&amp; view.getScaleType() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Clone in this method so that if we use this RequestBuilder to load into a View and then</span></span><br><span class=\"line\">        <span class=\"comment\">// into a different target, we don&#x27;t retain the transformation applied based on the previous</span></span><br><span class=\"line\">        <span class=\"comment\">// View&#x27;s scale type.</span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (view.getScaleType()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> CENTER_CROP:</span><br><span class=\"line\">            requestOptions = requestOptions.clone().optionalCenterCrop();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> CENTER_INSIDE:</span><br><span class=\"line\">            requestOptions = requestOptions.clone().optionalCenterInside();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> FIT_CENTER:</span><br><span class=\"line\">        <span class=\"keyword\">case</span> FIT_START:</span><br><span class=\"line\">        <span class=\"keyword\">case</span> FIT_END:</span><br><span class=\"line\">            requestOptions = requestOptions.clone().optionalFitCenter();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> FIT_XY:</span><br><span class=\"line\">            requestOptions = requestOptions.clone().optionalCenterInside();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> CENTER:</span><br><span class=\"line\">        <span class=\"keyword\">case</span> MATRIX:</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"comment\">// Do nothing.</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> into(</span><br><span class=\"line\">        glideContext.buildImageViewTarget(view, transcodeClass),</span><br><span class=\"line\">        <span class=\"comment\">/*targetListener=*/</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">        requestOptions,</span><br><span class=\"line\">        Executors.mainThreadExecutor());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Util.assertMainThread()</code>     , <code>Preconditions.checkNotNull(view)</code>   ImageView  null check .</p>\n<p> ImageView scaleType   , <code>into(target, targetListener, options, callbackExecutor)</code> .</p>\n<p> <code>target</code>  <code>GlideContext.buildImageViewTarget()</code>  ,   ImageView  <code>BitmapImageViewTarget</code> <code>DrawableImageViewTarget</code>   .</p>\n<p><code>GlideContext.buildImageViewTarget()</code>    <code>transcodeClass</code>  <code>Glide.load()</code>    <code>as()</code>   <code>Drawable.class</code>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> &lt;Y extends Target&lt;TranscodeType&gt;&gt; <span class=\"function\">Y <span class=\"title\">into</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    <span class=\"meta\">@NonNull</span> Y target,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    <span class=\"meta\">@Nullable</span> RequestListener&lt;TranscodeType&gt; targetListener,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    BaseRequestOptions&lt;?&gt; options,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    Executor callbackExecutor)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Preconditions.checkNotNull(target);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isModelSet) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">&quot;You must call #load() before calling #into()&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    Request request = buildRequest(target, targetListener, options, callbackExecutor);</span><br><span class=\"line\">    Request previous = target.getRequest();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (request.isEquivalentTo(previous) &amp;&amp; !isSkipMemoryCacheWithCompletePreviousRequest(options, previous)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// If the request is completed, beginning again will ensure the result is re-delivered,</span></span><br><span class=\"line\">        <span class=\"comment\">// triggering RequestListeners and Targets. If the request is failed, beginning again will</span></span><br><span class=\"line\">        <span class=\"comment\">// restart the request, giving it another chance to complete. If the request is already</span></span><br><span class=\"line\">        <span class=\"comment\">// running, we can let it continue running without interruption.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!Preconditions.checkNotNull(previous).isRunning()) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// Use the previous request rather than the new one to allow for optimizations like skipping</span></span><br><span class=\"line\">            <span class=\"comment\">// setting placeholders, tracking and un-tracking Targets, and obtaining View dimensions</span></span><br><span class=\"line\">            <span class=\"comment\">// that are done in the individual Request.</span></span><br><span class=\"line\">            previous.begin();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> target;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    requestManager.clear(target);</span><br><span class=\"line\">    target.setRequest(request);</span><br><span class=\"line\">    requestManager.track(target, request);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> target;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>target</code>  ImageView   ,   <code>requestManager.clear(target)</code>.</p>\n<p>    target         .</p>\n<h2 id=\"Memory-amp-Footprint\"><a href=\"#Memory-amp-Footprint\" class=\"headerlink\" title=\"Memory &amp; Footprint\"></a>Memory &amp; Footprint</h2><p>Bitmap   OOM      .</p>\n<p>Image Library              OOM  .</p>\n<p>        <strong>   (?)</strong>   ,          .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%202/IMG_06A0242D2ABE-1.jpg\" class=\"\" title=\"[IMG_06A0242D2ABE-1]\">\n\n<p>Android        . </p>\n<ul>\n<li>Dalvik heap  : java   </li>\n<li>External  : native heap      <br>Dalvik heap  External  <code>Dalvik heap footprint + External Limit</code>      OOM  .</li>\n</ul>\n<h3 id=\"Footprint\"><a href=\"#Footprint\" class=\"headerlink\" title=\"Footprint\"></a>Footprint</h3><p>java footprint        , footprint     . </p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%202/image.png\" class=\"\" title=\"[image]\">\n\n<p>Dalvik VM      Heap  ,        Dalvit Footfrint .   Footfrint     java      , External heap   OOM   .    Honeycomb  Dalvik heap  External   ,   . </p>\n<p>External   Honeycomb            OOM    .                 ,             . </p>\n<p>         ? Honeycomb   Java              External  Native Heap   . Java      GC   Native Heap  GC       . </p>\n<p>  , Honeycomb   External   Dalvik heap        GC    .</p>\n<p> ,      OOM   BitmapFactory   ,       .      OOM , <code> </code>   ?</p>\n<h3 id=\"Bitmap-Caching\"><a href=\"#Bitmap-Caching\" class=\"headerlink\" title=\"Bitmap Caching\"></a>Bitmap Caching</h3><p>              .                     .     <code>Memory Cache</code> <code>Disk Cache</code>       .</p>\n<h4 id=\"1-Memory-Cache\"><a href=\"#1-Memory-Cache\" class=\"headerlink\" title=\"1. Memory Cache\"></a>1. Memory Cache</h4><p>Memory Cache      ,    .  Memory Cache               Disk Cache      .</p>\n<h4 id=\"2-Disk-Cache\"><a href=\"#2-Disk-Cache\" class=\"headerlink\" title=\"2. Disk Cache\"></a>2. Disk Cache</h4><p>Memory Cache     ,          Disk Cache   .  Disk     Memory    .</p>\n<h3 id=\"BitmapPool\"><a href=\"#BitmapPool\" class=\"headerlink\" title=\"BitmapPool\"></a>BitmapPool</h3><p>Memory Cache     <code>BitmapPool</code>. <code>BitmapPool</code>    Bitmap  ,          pool     . </p>\n<p> BitmapPool   Pool   , LRU    LinkedList <code>(lruBItmapList)</code> Byte Size   LinkedList<code>(bitmapList)</code>   .       ,   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> lruBitmapList = LinkedList&lt;Bitmap&gt;()</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> bitmapList = LinkedList&lt;Bitmap&gt;()</span><br></pre></td></tr></table></figure>\n\n<p>LRU         , <code>   </code> BitmapPool  . LRU     BitmapPool     ,        ,      .   <a href=\"https://jamssoft.tistory.com/195\"> </a>  .</p>\n<p>    <code>Glide</code>  LruBitmapPool Class  , LruBitmapList bitmapList   . </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LruBitmapPool</span> <span class=\"keyword\">implements</span> <span class=\"title\">BitmapPool</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">&quot;LruBitmapPool&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Bitmap.Config DEFAULT_CONFIG = Bitmap.Config.ARGB_8888;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> LruPoolStrategy strategy;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Set&lt;Bitmap.Config&gt; allowedConfigs;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> BitmapTracker tracker;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Pool    </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> maxSize;</span><br><span class=\"line\">    <span class=\"comment\">//  pool  bitmap byte </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> currentSize;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n\n<p>Glide LruBitmapPool Class  strategy(LruPoolStrategy)  LRU   , tracker(BitmapTracker) Bitmap size   .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(Bitmap bitmap)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (bitmap == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NullPointerException(<span class=\"string\">&quot;Bitmap must not be null&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// isRecycled:  bitmap </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (bitmap.isRecycled()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">&quot;Cannot pool recycled bitmap&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// isMutable: canvas    bitmap  .</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!bitmap.isMutable()</span><br><span class=\"line\">        || strategy.getSize(bitmap) &gt; maxSize</span><br><span class=\"line\">        || !allowedConfigs.contains(bitmap.getConfig())) &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Log.isLoggable(TAG, Log.VERBOSE)) &#123;</span><br><span class=\"line\">            Log.v(</span><br><span class=\"line\">                TAG,</span><br><span class=\"line\">                <span class=\"string\">&quot;Reject bitmap from pool&quot;</span></span><br><span class=\"line\">                + <span class=\"string\">&quot;, bitmap: &quot;</span></span><br><span class=\"line\">                + strategy.logBitmap(bitmap)</span><br><span class=\"line\">                + <span class=\"string\">&quot;, is mutable: &quot;</span></span><br><span class=\"line\">                + bitmap.isMutable()</span><br><span class=\"line\">                + <span class=\"string\">&quot;, is allowed config: &quot;</span></span><br><span class=\"line\">                + allowedConfigs.contains(bitmap.getConfig()));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        bitmap.recycle();</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// pool  bitmap  .</span></span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size = strategy.getSize(bitmap);</span><br><span class=\"line\">    strategy.put(bitmap);</span><br><span class=\"line\">    tracker.add(bitmap);</span><br><span class=\"line\"></span><br><span class=\"line\">    puts++;</span><br><span class=\"line\">    currentSize += size;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Log.isLoggable(TAG, Log.VERBOSE)) &#123;</span><br><span class=\"line\">        Log.v(TAG, <span class=\"string\">&quot;Put bitmap in pool=&quot;</span> + strategy.logBitmap(bitmap));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    dump();</span><br><span class=\"line\"></span><br><span class=\"line\">    evict();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Bitmap Pool     , strategy &amp; tracker bitmap . </p>\n<blockquote>\n<p><strong></strong> Lru  strategy    bitmap    ,   <code>LruPoolStrategy</code>    .</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Pool     .</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">trimToSize</span><span class=\"params\">(<span class=\"keyword\">long</span> size)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (currentSize &gt; size) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//LRU List .</span></span><br><span class=\"line\">        <span class=\"keyword\">final</span> Bitmap removed = strategy.removeLast();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (removed == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (Log.isLoggable(TAG, Log.WARN)) &#123;</span><br><span class=\"line\">                Log.w(TAG, <span class=\"string\">&quot;Size mismatch, resetting&quot;</span>);</span><br><span class=\"line\">                dumpUnchecked();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            currentSize = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// BitmapList . </span></span><br><span class=\"line\">        tracker.remove(removed);</span><br><span class=\"line\">        currentSize -= strategy.getSize(removed);</span><br><span class=\"line\">        evictions++;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Log.isLoggable(TAG, Log.DEBUG)) &#123;</span><br><span class=\"line\">            Log.d(TAG, <span class=\"string\">&quot;Evicting bitmap=&quot;</span> + strategy.logBitmap(removed));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        dump();</span><br><span class=\"line\">        removed.recycle();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>trimToSize()  pool        lastIndex       . </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"meta\">@Nullable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Bitmap <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">int</span> width, <span class=\"keyword\">int</span> height, Bitmap.Config config)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size = Util.getBitmapByteSize(width, height, config);</span><br><span class=\"line\">    Key key = keyPool.get(size);</span><br><span class=\"line\"></span><br><span class=\"line\">    Integer possibleSize = sortedSizes.ceilingKey(size);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (possibleSize != <span class=\"keyword\">null</span> &amp;&amp; possibleSize != size &amp;&amp; possibleSize &lt;= size * MAX_SIZE_MULTIPLE) &#123;</span><br><span class=\"line\">        keyPool.offer(key);</span><br><span class=\"line\">        key = keyPool.get(possibleSize);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">final</span> Bitmap result = groupedMap.get(key);</span><br><span class=\"line\">    <span class=\"comment\">//   , pool .</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        result.reconfigure(width, height, config);</span><br><span class=\"line\">        decrementBitmapOfSize(possibleSize);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   pool   .</p>\n<h2 id=\"Jetpack-Compose---\"><a href=\"#Jetpack-Compose---\" class=\"headerlink\" title=\"Jetpack Compose   \"></a>Jetpack Compose   </h2><p>Google  Jetpack Compose       .</p>\n<p><strong>Accompanist</strong>   GroupId   .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/google/accompanist\">Google#Accompanist Repository</a></p>\n</blockquote>\n<p>Accompanist Glide Coil  .</p>\n<p>   .</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    implementation <span class=\"string\">&quot;com.google.accompanist:accompanist-glide:0.11.1&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;com.google.accompanist:accompanist-coil:0.11.1&quot;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Glide   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Image(</span><br><span class=\"line\">    painter = rememberGlidePainter(</span><br><span class=\"line\">        request = <span class=\"string\">&quot;https://picsum.photos/300/300&quot;</span>,</span><br><span class=\"line\">        <span class=\"comment\">// placeHolder</span></span><br><span class=\"line\">    ),</span><br><span class=\"line\">    contentDescription = stringResource(R.string.image_content_desc)</span><br><span class=\"line\">)</span><br><span class=\"line\">Image(</span><br><span class=\"line\">    painter = rememberGlidePainter(</span><br><span class=\"line\">        request = <span class=\"string\">&quot;https://cataas.com/cat/gif&quot;</span>,</span><br><span class=\"line\">        <span class=\"comment\">// placeHolder</span></span><br><span class=\"line\">    ),</span><br><span class=\"line\">    contentDescription = <span class=\"literal\">null</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>Coil   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Image(</span><br><span class=\"line\">    painter = rememberCoilPainter(</span><br><span class=\"line\">        request = <span class=\"string\">&quot;https://picsum.photos/300/300&quot;</span>,</span><br><span class=\"line\">        <span class=\"comment\">// placeHolder</span></span><br><span class=\"line\">    ),</span><br><span class=\"line\">    contentDescription = <span class=\"literal\">null</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>Coil gif   <code>coil-gif</code>  .</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    implementation <span class=\"string\">&quot;com.google.accompanist:accompanist-glide:0.11.1&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;com.google.accompanist:accompanist-coil:0.11.1&quot;</span></span><br><span class=\"line\">    <span class=\"comment\">// Coil  gif    </span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;io.coil-kt:coil-gif:1.2.2&quot;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   ImageLoader .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">gifImageLoader</span><span class=\"params\">(context: <span class=\"type\">Context</span>)</span></span> = ImageLoader.Builder(context)</span><br><span class=\"line\">    .componentRegistry &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (SDK_INT &gt;= <span class=\"number\">28</span>) &#123;</span><br><span class=\"line\">        add(ImageDecoderDecoder(context))</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        add(GifDecoder())</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .build()</span><br></pre></td></tr></table></figure>\n\n<p>Image    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Image(</span><br><span class=\"line\">    painter = rememberCoilPainter(</span><br><span class=\"line\">        request = <span class=\"string\">&quot;https://cataas.com/cat/gif&quot;</span>,</span><br><span class=\"line\">        imageLoader = gifImageLoader(LocalContext*.current),</span><br><span class=\"line\">    ),</span><br><span class=\"line\">    contentDescription = <span class=\"literal\">null</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<h2 id=\"Image-Library--\"><a href=\"#Image-Library--\" class=\"headerlink\" title=\"Image Library  \"></a>Image Library  </h2><p>Android     <code>Glide</code>      .</p>\n<p> Part 1     .</p>\n<h3 id=\"Glide--\"><a href=\"#Glide--\" class=\"headerlink\" title=\"Glide  \"></a>Glide  </h3><figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    implementation <span class=\"string\">&#x27;com.github.bumptech.glide:glide:4.12.0&#x27;</span></span><br><span class=\"line\">    annotationProcessor <span class=\"string\">&#x27;com.github.bumptech.glide:compiler:4.12.0&#x27;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"---\"><a href=\"#---\" class=\"headerlink\" title=\"   \"></a>   </h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">manifest</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">package</span>=<span class=\"string\">&quot;android.deepdive.raw&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">uses-permission</span> <span class=\"attr\">android:name</span>=<span class=\"string\">&quot;android.permission.INTERNET&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- ... --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"----\"><a href=\"#----\" class=\"headerlink\" title=\"    \"></a>    </h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;ImageView</span><br><span class=\"line\">    <span class=\"attr\">android</span>:id=<span class=\"string\">&quot;@+id/imageView&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">android</span>:layout_width=<span class=\"string\">&quot;wrap_content&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">android</span>:layout_height=<span class=\"string\">&quot;wrap_content&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">app</span>:layout_constraintBottom_toBottomOf=<span class=\"string\">&quot;parent&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">app</span>:layout_constraintLeft_toLeftOf=<span class=\"string\">&quot;parent&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">app</span>:layout_constraintRight_toRightOf=<span class=\"string\">&quot;parent&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">app</span>:layout_constraintTop_toTopOf=<span class=\"string\">&quot;parent&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-Glide--\"><a href=\"#-Glide--\" class=\"headerlink\" title=\" Glide  \"></a> Glide  </h3><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> : <span class=\"type\">AppCompatActivity</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContentView(R.layout.activity_main)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> imageView: ImageView = findViewById(R.id.imageView)</span><br><span class=\"line\"></span><br><span class=\"line\">        Glide</span><br><span class=\"line\">            .with(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">            .load(<span class=\"string\">&quot;https://goo.gl/gEgYUd&quot;</span>)</span><br><span class=\"line\">            .into(imageView)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>          .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%202/Screenshot_1624078627.png\" class=\"\" width=\"350\" title=\"[Screenshot_1624078627]\">\n\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><h3 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"  \"></a>  </h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Glide</span><br><span class=\"line\">    .with(this)</span><br><span class=\"line\">    .load(&quot;https://goo.gl/gEgYUd&quot;)</span><br><span class=\"line\">    .into(imageView)</span><br></pre></td></tr></table></figure>\n\n<p>        .</p>\n<p>Glide     <code>with()</code> <code>load()</code>, <code>into()</code>     .</p>\n<h4 id=\"1-with-\"><a href=\"#1-with-\" class=\"headerlink\" title=\"1. with \"></a>1. with </h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> RequestManager <span class=\"title\">with</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> FragmentActivity activity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getRetriever(activity).get(activity);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> RequestManagerRetriever <span class=\"title\">getRetriever</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Context context)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Context could be null for other reasons (ie the user passes in null), but in practice it will</span></span><br><span class=\"line\">    <span class=\"comment\">// only occur due to errors with the Fragment lifecycle.</span></span><br><span class=\"line\">    Preconditions.checkNotNull(</span><br><span class=\"line\">        context,</span><br><span class=\"line\">        <span class=\"string\">&quot;You cannot start a load on a not yet attached View or a Fragment where getActivity() &quot;</span></span><br><span class=\"line\">            + <span class=\"string\">&quot;returns null (which usually occurs when getActivity() is called before the Fragment &quot;</span></span><br><span class=\"line\">            + <span class=\"string\">&quot;is attached or after the Fragment is destroyed).&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Glide.get(context).getRequestManagerRetriever();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>with()</code>  <code>getRetriever()</code>   <code>RequestManagerRetriever</code>  .</p>\n<p> <code>get()</code>   <code>RequestManager</code>      .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> RequestManager <span class=\"title\">get</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> Context context)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (context == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">&quot;You cannot start a load on a null Context&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (Util.isOnMainThread() &amp;&amp; !(context <span class=\"keyword\">instanceof</span> Application)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (context <span class=\"keyword\">instanceof</span> FragmentActivity) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> get((FragmentActivity) context);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (context <span class=\"keyword\">instanceof</span> Activity) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> get((Activity) context);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (context <span class=\"keyword\">instanceof</span> ContextWrapper</span><br><span class=\"line\">            <span class=\"comment\">// Only unwrap a ContextWrapper if the baseContext has a non-null application context.</span></span><br><span class=\"line\">            <span class=\"comment\">// Context#createPackageContext may return a Context without an Application instance,</span></span><br><span class=\"line\">            <span class=\"comment\">// in which case a ContextWrapper may be used to attach one.</span></span><br><span class=\"line\">            &amp;&amp; ((ContextWrapper) context).getBaseContext().getApplicationContext() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> get(((ContextWrapper) context).getBaseContext());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getApplicationManager(context);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Context instance type     <code>getApplicationManager()</code> .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> RequestManager <span class=\"title\">getApplicationManager</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> Context context)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Either an application context or we&#x27;re on a background thread.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (applicationManager == <span class=\"keyword\">null</span>) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (applicationManager == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// Normally pause/resume is taken care of by the fragment we add to the fragment or</span></span><br><span class=\"line\">            <span class=\"comment\">// activity. However, in this case since the manager attached to the application will not</span></span><br><span class=\"line\">            <span class=\"comment\">// receive lifecycle events, we must force the manager to start resumed using</span></span><br><span class=\"line\">            <span class=\"comment\">// ApplicationLifecycle.</span></span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"comment\">// T  ODO(b/27524013): Factor out this Glide.get() call.</span></span><br><span class=\"line\">            Glide glide = Glide.get(context.getApplicationContext());</span><br><span class=\"line\">            applicationManager =</span><br><span class=\"line\">                factory.build(</span><br><span class=\"line\">                    glide,</span><br><span class=\"line\">                    <span class=\"keyword\">new</span> ApplicationLifecycle(),</span><br><span class=\"line\">                    <span class=\"keyword\">new</span> EmptyRequestManagerTreeNode(),</span><br><span class=\"line\">                    context.getApplicationContext());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> applicationManager;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>with()</code>  Global Scope    Glide        .</p>\n<h4 id=\"2-load-\"><a href=\"#2-load-\" class=\"headerlink\" title=\"2. load \"></a>2. load </h4><p>  <code>load()</code>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@CheckResult</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> RequestBuilder&lt;Drawable&gt; <span class=\"title\">load</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> String string)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> asDrawable().load(string);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>asDrawable()</code>  <code>RequestBuilder</code>  , <code>load()</code>  .</p>\n<p><code>asDrawable()</code>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@CheckResult</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> RequestBuilder&lt;Drawable&gt; <span class=\"title\">asDrawable</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> as(Drawable.class);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>android.graphics.drawable.Drawable</code>  <code>as()</code>   .</p>\n<p><code>as()</code>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@CheckResult</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> &lt;ResourceType&gt; <span class=\"function\">RequestBuilder&lt;ResourceType&gt; <span class=\"title\">as</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> Class&lt;ResourceType&gt; resourceClass)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> RequestBuilder&lt;&gt;(glide, <span class=\"keyword\">this</span>, resourceClass, context);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   ( <code>android.graphics.drawable.Drawable</code>)  .</p>\n<p>   <code>com.bumptech.glide.load.ResourceDecoders</code>.</p>\n<p><code>Drawable.class</code>        .</p>\n<p><code>Glide.load()</code>  <code>asDrawable()</code>        <code>RequestBuilder.load()</code>       .</p>\n<p><code>RequestBuilder.load()</code>    .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"meta\">@CheckResult</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> RequestBuilder&lt;TranscodeType&gt; <span class=\"title\">load</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> String string)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> loadGeneric(string);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>load()</code>   <code>string</code> key    .</p>\n<p>          .</p>\n<p> <code>loadGeneric()</code> .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> RequestBuilder&lt;TranscodeType&gt; <span class=\"title\">loadGeneric</span><span class=\"params\">(<span class=\"meta\">@Nullable</span> Object model)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isAutoCloneEnabled()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> clone().loadGeneric(model);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.model = model;</span><br><span class=\"line\">    isModelSet = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> selfOrThrowIfLocked();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>String</code> <code>Object</code> .</p>\n<p> <code>model</code> <code>com.bumptech.glide.load.model.UriLoader</code>   .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">final</span> T <span class=\"title\">selfOrThrowIfLocked</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isLocked) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">&quot;You cannot modify locked T, consider clone()&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> self();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> T <span class=\"title\">self</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (T) <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>RequestBuilder.load()</code>  <code>RequestBuilder</code>   .</p>\n<h4 id=\"3-into-\"><a href=\"#3-into-\" class=\"headerlink\" title=\"3. into \"></a>3. into </h4><p> <code>with()</code> <code>RequestManager</code>  ,   <code>load()</code>   <code>RequestBuilder</code>    .</p>\n<p> <code>RequestBuilder</code> <code>into()</code>   <code>ImageView</code>    .</p>\n<p>  ImageView  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> ViewTarget&lt;ImageView, TranscodeType&gt; <span class=\"title\">into</span><span class=\"params\">(<span class=\"meta\">@NonNull</span> ImageView view)</span> </span>&#123;</span><br><span class=\"line\">    Util.assertMainThread();</span><br><span class=\"line\">    Preconditions.checkNotNull(view);</span><br><span class=\"line\"></span><br><span class=\"line\">    BaseRequestOptions&lt;?&gt; requestOptions = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!requestOptions.isTransformationSet()</span><br><span class=\"line\">        &amp;&amp; requestOptions.isTransformationAllowed()</span><br><span class=\"line\">        &amp;&amp; view.getScaleType() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Clone in this method so that if we use this RequestBuilder to load into a View and then</span></span><br><span class=\"line\">        <span class=\"comment\">// into a different target, we don&#x27;t retain the transformation applied based on the previous</span></span><br><span class=\"line\">        <span class=\"comment\">// View&#x27;s scale type.</span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (view.getScaleType()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> CENTER_CROP:</span><br><span class=\"line\">            requestOptions = requestOptions.clone().optionalCenterCrop();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> CENTER_INSIDE:</span><br><span class=\"line\">            requestOptions = requestOptions.clone().optionalCenterInside();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> FIT_CENTER:</span><br><span class=\"line\">        <span class=\"keyword\">case</span> FIT_START:</span><br><span class=\"line\">        <span class=\"keyword\">case</span> FIT_END:</span><br><span class=\"line\">            requestOptions = requestOptions.clone().optionalFitCenter();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> FIT_XY:</span><br><span class=\"line\">            requestOptions = requestOptions.clone().optionalCenterInside();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> CENTER:</span><br><span class=\"line\">        <span class=\"keyword\">case</span> MATRIX:</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"comment\">// Do nothing.</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> into(</span><br><span class=\"line\">        glideContext.buildImageViewTarget(view, transcodeClass),</span><br><span class=\"line\">        <span class=\"comment\">/*targetListener=*/</span> <span class=\"keyword\">null</span>,</span><br><span class=\"line\">        requestOptions,</span><br><span class=\"line\">        Executors.mainThreadExecutor());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Util.assertMainThread()</code>     , <code>Preconditions.checkNotNull(view)</code>   ImageView  null check .</p>\n<p> ImageView scaleType   , <code>into(target, targetListener, options, callbackExecutor)</code> .</p>\n<p> <code>target</code>  <code>GlideContext.buildImageViewTarget()</code>  ,   ImageView  <code>BitmapImageViewTarget</code> <code>DrawableImageViewTarget</code>   .</p>\n<p><code>GlideContext.buildImageViewTarget()</code>    <code>transcodeClass</code>  <code>Glide.load()</code>    <code>as()</code>   <code>Drawable.class</code>  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> &lt;Y extends Target&lt;TranscodeType&gt;&gt; <span class=\"function\">Y <span class=\"title\">into</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    <span class=\"meta\">@NonNull</span> Y target,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    <span class=\"meta\">@Nullable</span> RequestListener&lt;TranscodeType&gt; targetListener,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    BaseRequestOptions&lt;?&gt; options,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    Executor callbackExecutor)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Preconditions.checkNotNull(target);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isModelSet) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">&quot;You must call #load() before calling #into()&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    Request request = buildRequest(target, targetListener, options, callbackExecutor);</span><br><span class=\"line\">    Request previous = target.getRequest();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (request.isEquivalentTo(previous) &amp;&amp; !isSkipMemoryCacheWithCompletePreviousRequest(options, previous)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// If the request is completed, beginning again will ensure the result is re-delivered,</span></span><br><span class=\"line\">        <span class=\"comment\">// triggering RequestListeners and Targets. If the request is failed, beginning again will</span></span><br><span class=\"line\">        <span class=\"comment\">// restart the request, giving it another chance to complete. If the request is already</span></span><br><span class=\"line\">        <span class=\"comment\">// running, we can let it continue running without interruption.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!Preconditions.checkNotNull(previous).isRunning()) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// Use the previous request rather than the new one to allow for optimizations like skipping</span></span><br><span class=\"line\">            <span class=\"comment\">// setting placeholders, tracking and un-tracking Targets, and obtaining View dimensions</span></span><br><span class=\"line\">            <span class=\"comment\">// that are done in the individual Request.</span></span><br><span class=\"line\">            previous.begin();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> target;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    requestManager.clear(target);</span><br><span class=\"line\">    target.setRequest(request);</span><br><span class=\"line\">    requestManager.track(target, request);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> target;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>target</code>  ImageView   ,   <code>requestManager.clear(target)</code>.</p>\n<p>    target         .</p>\n<h2 id=\"Memory-amp-Footprint\"><a href=\"#Memory-amp-Footprint\" class=\"headerlink\" title=\"Memory &amp; Footprint\"></a>Memory &amp; Footprint</h2><p>Bitmap   OOM      .</p>\n<p>Image Library              OOM  .</p>\n<p>        <strong>   (?)</strong>   ,          .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%202/IMG_06A0242D2ABE-1.jpg\" class=\"\" title=\"[IMG_06A0242D2ABE-1]\">\n\n<p>Android        . </p>\n<ul>\n<li>Dalvik heap  : java   </li>\n<li>External  : native heap      <br>Dalvik heap  External  <code>Dalvik heap footprint + External Limit</code>      OOM  .</li>\n</ul>\n<h3 id=\"Footprint\"><a href=\"#Footprint\" class=\"headerlink\" title=\"Footprint\"></a>Footprint</h3><p>java footprint        , footprint     . </p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%202/image.png\" class=\"\" title=\"[image]\">\n\n<p>Dalvik VM      Heap  ,        Dalvit Footfrint .   Footfrint     java      , External heap   OOM   .    Honeycomb  Dalvik heap  External   ,   . </p>\n<p>External   Honeycomb            OOM    .                 ,             . </p>\n<p>         ? Honeycomb   Java              External  Native Heap   . Java      GC   Native Heap  GC       . </p>\n<p>  , Honeycomb   External   Dalvik heap        GC    .</p>\n<p> ,      OOM   BitmapFactory   ,       .      OOM , <code> </code>   ?</p>\n<h3 id=\"Bitmap-Caching\"><a href=\"#Bitmap-Caching\" class=\"headerlink\" title=\"Bitmap Caching\"></a>Bitmap Caching</h3><p>              .                     .     <code>Memory Cache</code> <code>Disk Cache</code>       .</p>\n<h4 id=\"1-Memory-Cache\"><a href=\"#1-Memory-Cache\" class=\"headerlink\" title=\"1. Memory Cache\"></a>1. Memory Cache</h4><p>Memory Cache      ,    .  Memory Cache               Disk Cache      .</p>\n<h4 id=\"2-Disk-Cache\"><a href=\"#2-Disk-Cache\" class=\"headerlink\" title=\"2. Disk Cache\"></a>2. Disk Cache</h4><p>Memory Cache     ,          Disk Cache   .  Disk     Memory    .</p>\n<h3 id=\"BitmapPool\"><a href=\"#BitmapPool\" class=\"headerlink\" title=\"BitmapPool\"></a>BitmapPool</h3><p>Memory Cache     <code>BitmapPool</code>. <code>BitmapPool</code>    Bitmap  ,          pool     . </p>\n<p> BitmapPool   Pool   , LRU    LinkedList <code>(lruBItmapList)</code> Byte Size   LinkedList<code>(bitmapList)</code>   .       ,   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> lruBitmapList = LinkedList&lt;Bitmap&gt;()</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> bitmapList = LinkedList&lt;Bitmap&gt;()</span><br></pre></td></tr></table></figure>\n\n<p>LRU         , <code>   </code> BitmapPool  . LRU     BitmapPool     ,        ,      .   <a href=\"https://jamssoft.tistory.com/195\"> </a>  .</p>\n<p>    <code>Glide</code>  LruBitmapPool Class  , LruBitmapList bitmapList   . </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LruBitmapPool</span> <span class=\"keyword\">implements</span> <span class=\"title\">BitmapPool</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">&quot;LruBitmapPool&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Bitmap.Config DEFAULT_CONFIG = Bitmap.Config.ARGB_8888;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> LruPoolStrategy strategy;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Set&lt;Bitmap.Config&gt; allowedConfigs;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> BitmapTracker tracker;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Pool    </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> maxSize;</span><br><span class=\"line\">    <span class=\"comment\">//  pool  bitmap byte </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> currentSize;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n\n<p>Glide LruBitmapPool Class  strategy(LruPoolStrategy)  LRU   , tracker(BitmapTracker) Bitmap size   .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(Bitmap bitmap)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (bitmap == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NullPointerException(<span class=\"string\">&quot;Bitmap must not be null&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// isRecycled:  bitmap </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (bitmap.isRecycled()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">&quot;Cannot pool recycled bitmap&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// isMutable: canvas    bitmap  .</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!bitmap.isMutable()</span><br><span class=\"line\">        || strategy.getSize(bitmap) &gt; maxSize</span><br><span class=\"line\">        || !allowedConfigs.contains(bitmap.getConfig())) &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Log.isLoggable(TAG, Log.VERBOSE)) &#123;</span><br><span class=\"line\">            Log.v(</span><br><span class=\"line\">                TAG,</span><br><span class=\"line\">                <span class=\"string\">&quot;Reject bitmap from pool&quot;</span></span><br><span class=\"line\">                + <span class=\"string\">&quot;, bitmap: &quot;</span></span><br><span class=\"line\">                + strategy.logBitmap(bitmap)</span><br><span class=\"line\">                + <span class=\"string\">&quot;, is mutable: &quot;</span></span><br><span class=\"line\">                + bitmap.isMutable()</span><br><span class=\"line\">                + <span class=\"string\">&quot;, is allowed config: &quot;</span></span><br><span class=\"line\">                + allowedConfigs.contains(bitmap.getConfig()));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        bitmap.recycle();</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// pool  bitmap  .</span></span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size = strategy.getSize(bitmap);</span><br><span class=\"line\">    strategy.put(bitmap);</span><br><span class=\"line\">    tracker.add(bitmap);</span><br><span class=\"line\"></span><br><span class=\"line\">    puts++;</span><br><span class=\"line\">    currentSize += size;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Log.isLoggable(TAG, Log.VERBOSE)) &#123;</span><br><span class=\"line\">        Log.v(TAG, <span class=\"string\">&quot;Put bitmap in pool=&quot;</span> + strategy.logBitmap(bitmap));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    dump();</span><br><span class=\"line\"></span><br><span class=\"line\">    evict();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Bitmap Pool     , strategy &amp; tracker bitmap . </p>\n<blockquote>\n<p><strong></strong> Lru  strategy    bitmap    ,   <code>LruPoolStrategy</code>    .</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Pool     .</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">trimToSize</span><span class=\"params\">(<span class=\"keyword\">long</span> size)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (currentSize &gt; size) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//LRU List .</span></span><br><span class=\"line\">        <span class=\"keyword\">final</span> Bitmap removed = strategy.removeLast();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (removed == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (Log.isLoggable(TAG, Log.WARN)) &#123;</span><br><span class=\"line\">                Log.w(TAG, <span class=\"string\">&quot;Size mismatch, resetting&quot;</span>);</span><br><span class=\"line\">                dumpUnchecked();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            currentSize = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// BitmapList . </span></span><br><span class=\"line\">        tracker.remove(removed);</span><br><span class=\"line\">        currentSize -= strategy.getSize(removed);</span><br><span class=\"line\">        evictions++;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Log.isLoggable(TAG, Log.DEBUG)) &#123;</span><br><span class=\"line\">            Log.d(TAG, <span class=\"string\">&quot;Evicting bitmap=&quot;</span> + strategy.logBitmap(removed));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        dump();</span><br><span class=\"line\">        removed.recycle();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>trimToSize()  pool        lastIndex       . </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"meta\">@Nullable</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Bitmap <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">int</span> width, <span class=\"keyword\">int</span> height, Bitmap.Config config)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size = Util.getBitmapByteSize(width, height, config);</span><br><span class=\"line\">    Key key = keyPool.get(size);</span><br><span class=\"line\"></span><br><span class=\"line\">    Integer possibleSize = sortedSizes.ceilingKey(size);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (possibleSize != <span class=\"keyword\">null</span> &amp;&amp; possibleSize != size &amp;&amp; possibleSize &lt;= size * MAX_SIZE_MULTIPLE) &#123;</span><br><span class=\"line\">        keyPool.offer(key);</span><br><span class=\"line\">        key = keyPool.get(possibleSize);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">final</span> Bitmap result = groupedMap.get(key);</span><br><span class=\"line\">    <span class=\"comment\">//   , pool .</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        result.reconfigure(width, height, config);</span><br><span class=\"line\">        decrementBitmapOfSize(possibleSize);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   pool   .</p>\n<h2 id=\"Jetpack-Compose---\"><a href=\"#Jetpack-Compose---\" class=\"headerlink\" title=\"Jetpack Compose   \"></a>Jetpack Compose   </h2><p>Google  Jetpack Compose       .</p>\n<p><strong>Accompanist</strong>   GroupId   .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/google/accompanist\">Google#Accompanist Repository</a></p>\n</blockquote>\n<p>Accompanist Glide Coil  .</p>\n<p>   .</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    implementation <span class=\"string\">&quot;com.google.accompanist:accompanist-glide:0.11.1&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;com.google.accompanist:accompanist-coil:0.11.1&quot;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Glide   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Image(</span><br><span class=\"line\">    painter = rememberGlidePainter(</span><br><span class=\"line\">        request = <span class=\"string\">&quot;https://picsum.photos/300/300&quot;</span>,</span><br><span class=\"line\">        <span class=\"comment\">// placeHolder</span></span><br><span class=\"line\">    ),</span><br><span class=\"line\">    contentDescription = stringResource(R.string.image_content_desc)</span><br><span class=\"line\">)</span><br><span class=\"line\">Image(</span><br><span class=\"line\">    painter = rememberGlidePainter(</span><br><span class=\"line\">        request = <span class=\"string\">&quot;https://cataas.com/cat/gif&quot;</span>,</span><br><span class=\"line\">        <span class=\"comment\">// placeHolder</span></span><br><span class=\"line\">    ),</span><br><span class=\"line\">    contentDescription = <span class=\"literal\">null</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>Coil   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Image(</span><br><span class=\"line\">    painter = rememberCoilPainter(</span><br><span class=\"line\">        request = <span class=\"string\">&quot;https://picsum.photos/300/300&quot;</span>,</span><br><span class=\"line\">        <span class=\"comment\">// placeHolder</span></span><br><span class=\"line\">    ),</span><br><span class=\"line\">    contentDescription = <span class=\"literal\">null</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>Coil gif   <code>coil-gif</code>  .</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    implementation <span class=\"string\">&quot;com.google.accompanist:accompanist-glide:0.11.1&quot;</span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;com.google.accompanist:accompanist-coil:0.11.1&quot;</span></span><br><span class=\"line\">    <span class=\"comment\">// Coil  gif    </span></span><br><span class=\"line\">    implementation <span class=\"string\">&quot;io.coil-kt:coil-gif:1.2.2&quot;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   ImageLoader .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">gifImageLoader</span><span class=\"params\">(context: <span class=\"type\">Context</span>)</span></span> = ImageLoader.Builder(context)</span><br><span class=\"line\">    .componentRegistry &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (SDK_INT &gt;= <span class=\"number\">28</span>) &#123;</span><br><span class=\"line\">        add(ImageDecoderDecoder(context))</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        add(GifDecoder())</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .build()</span><br></pre></td></tr></table></figure>\n\n<p>Image    .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Image(</span><br><span class=\"line\">    painter = rememberCoilPainter(</span><br><span class=\"line\">        request = <span class=\"string\">&quot;https://cataas.com/cat/gif&quot;</span>,</span><br><span class=\"line\">        imageLoader = gifImageLoader(LocalContext*.current),</span><br><span class=\"line\">    ),</span><br><span class=\"line\">    contentDescription = <span class=\"literal\">null</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>"},{"title":"Image Loading and Caching Library Part 3  Performance Test","date":"2021-06-23T18:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_image_library.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n   Glide, Fresco, Coil    .\n\n    `Pixel 4a`,   `Android Studio Profiler` .\n\n    ,         .\n\n    CPU, Memory, Disk 10   .\n\n    ,    .\n\n> ****   Picasso      .\n\n### Case 1)     \n\n   `7,680 x 4,320`  `4.29mb`   24-bit color depth  .\n\n{% asset_img m7itaqy.png [one big image profiling] %}\n\n| Library | CPU | Memory | Disk |\n|:--:|:--:|:--:|:--:|\n|Coil|38.3%|4.26MB|X|\n|Glide|40.8%|3.41MB|0.21MB|\n|Fresco|40.2%|8.14MB|X|\n\n1        .\n\n### Case 2)       \n\nCase 1  ScrollView 50  .\n\n{% asset_img BntHJ2Y.png [50 big image profiling] %}\n\n| Library | CPU | Memory | Disk |\n|:--:|:--:|:--:|:--:|\n|Coil|93.6%|350.8MB|X|\n|Glide|45.4%|4.6MB|0.21MB|\n|Fresco|72.4%|8.4MB|X|\n\nCoil Cpu, Memory    .\n\nGlide              .\n\n    Coil Coroutine   CPU, Memory       .\n\n Coil    .\n\n{% asset_img rb1bMMt.png [50 big image profiling coil] %}\n\n Glide    .\n\n{% asset_img 0oDUU69.png [50 big image profiling glide] %}\n\nGlide          .\n\n### Case 3)      (feat_ ScrollView)\n\n2mb ~ 10mb       10 ScrollView  .\n\n{% asset_img TIrybR8.png [10 different image profiling] %}\n\n| Library | CPU | Memory | Disk |\n|:--:|:--:|:--:|:--:|\n|Coil|88.6%|800MB|X|\n|Glide|89%|303.3MB|4.6MB|\n|Fresco|92.6%|276MB|X|\n\n       CPU, Memory .\n\n  Coil   Memory .\n\n### Case 4)      (feat_ RecyclerView)\n\nCase 3   RecyclerView  .\n\n{% asset_img QafKUB1.png [10 different image recyclerView profiling] %}\n\n| Library | CPU | Memory | Disk |\n|:--:|:--:|:--:|:--:|\n|Coil|94%|800MB|X|\n|Glide|94%|270MB|4.52MB|\n|Fresco|94.6%|281MB|X|\n\nCoil  ScrollView   CPU      .\n\n###  \n\nCoil Coroutine        CPU, Memory  .\n\nGilde          , Picasso      ,    .\n\nFresco      .   Glide  .\n\n## References\n\n### Members of Study\n- https://namhoon.kim/2021/05/25/android_deep_dive/017_Image%20Loading%20and%20Caching%20Library%20Part%201/\n- https://namhoon.kim/2021/06/01/android_deep_dive/018_Image%20Loading%20and%20Caching%20Library%20Part%202/\n- https://velog.io/@jshme/Android-Image-Loader-Library\n- https://velog.io/@jshme/Android-Hello-Out-Of-Memory\n- https://www.charlezz.com/wordpress/wp-content/uploads/2020/10/www.charlezz.com-glide-v4-glide-v4--by-charlezz.pdf\n\n### Official\n\n- [Android Developers#Drawble Resources](https://developer.android.com/guide/topics/resources/drawable-resource.html)\n- [Android Developers#Handling bitmaps](https://developer.android.com/topic/performance/graphics/index.html)\n- [Android Developers#LruCache](https://developer.android.com/reference/android/util/LruCache)\n- [androidx.collection.LruCache](https://developer.android.com/reference/androidx/collection/LruCache)\n- [Cache replacement policies#recently used](https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU))\n- [Google#Accompanist Repository](https://github.com/google/accompanist)\n\n- https://square.github.io/picasso/\n- https://bumptech.github.io/glide/\n- https://github.com/coil-kt/coil\n- https://frescolib.org\n- https://github.com/nostra13/Android-Universal-Image-Loader/wiki\n\n### ETC\n\n- https://futurestud.io/tutorials/glide-caching-basics\n- https://wooooooak.github.io/%EB%B2%88%EC%97%AD%ED%95%98%EB%A9%B0%20%EA%B3%B5%EB%B6%80%ED%95%98%EA%B8%B0/2021/02/21/How-The-Android-Image-Loading-Library-Glide-and-Fresco-Works/\n","source":"_posts/2021-06-24 Image Loading and Caching Library Part 3.md","raw":"---\ntitle: Image Loading and Caching Library Part 3  Performance Test\ndate: 2021-06-24 03:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_image_library.png\ncategories:\n- Image Library\ntags:\n- Android\n- Image\n- Library\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<!-- more -->\n   Glide, Fresco, Coil    .\n\n    `Pixel 4a`,   `Android Studio Profiler` .\n\n    ,         .\n\n    CPU, Memory, Disk 10   .\n\n    ,    .\n\n> ****   Picasso      .\n\n### Case 1)     \n\n   `7,680 x 4,320`  `4.29mb`   24-bit color depth  .\n\n{% asset_img m7itaqy.png [one big image profiling] %}\n\n| Library | CPU | Memory | Disk |\n|:--:|:--:|:--:|:--:|\n|Coil|38.3%|4.26MB|X|\n|Glide|40.8%|3.41MB|0.21MB|\n|Fresco|40.2%|8.14MB|X|\n\n1        .\n\n### Case 2)       \n\nCase 1  ScrollView 50  .\n\n{% asset_img BntHJ2Y.png [50 big image profiling] %}\n\n| Library | CPU | Memory | Disk |\n|:--:|:--:|:--:|:--:|\n|Coil|93.6%|350.8MB|X|\n|Glide|45.4%|4.6MB|0.21MB|\n|Fresco|72.4%|8.4MB|X|\n\nCoil Cpu, Memory    .\n\nGlide              .\n\n    Coil Coroutine   CPU, Memory       .\n\n Coil    .\n\n{% asset_img rb1bMMt.png [50 big image profiling coil] %}\n\n Glide    .\n\n{% asset_img 0oDUU69.png [50 big image profiling glide] %}\n\nGlide          .\n\n### Case 3)      (feat_ ScrollView)\n\n2mb ~ 10mb       10 ScrollView  .\n\n{% asset_img TIrybR8.png [10 different image profiling] %}\n\n| Library | CPU | Memory | Disk |\n|:--:|:--:|:--:|:--:|\n|Coil|88.6%|800MB|X|\n|Glide|89%|303.3MB|4.6MB|\n|Fresco|92.6%|276MB|X|\n\n       CPU, Memory .\n\n  Coil   Memory .\n\n### Case 4)      (feat_ RecyclerView)\n\nCase 3   RecyclerView  .\n\n{% asset_img QafKUB1.png [10 different image recyclerView profiling] %}\n\n| Library | CPU | Memory | Disk |\n|:--:|:--:|:--:|:--:|\n|Coil|94%|800MB|X|\n|Glide|94%|270MB|4.52MB|\n|Fresco|94.6%|281MB|X|\n\nCoil  ScrollView   CPU      .\n\n###  \n\nCoil Coroutine        CPU, Memory  .\n\nGilde          , Picasso      ,    .\n\nFresco      .   Glide  .\n\n## References\n\n### Members of Study\n- https://namhoon.kim/2021/05/25/android_deep_dive/017_Image%20Loading%20and%20Caching%20Library%20Part%201/\n- https://namhoon.kim/2021/06/01/android_deep_dive/018_Image%20Loading%20and%20Caching%20Library%20Part%202/\n- https://velog.io/@jshme/Android-Image-Loader-Library\n- https://velog.io/@jshme/Android-Hello-Out-Of-Memory\n- https://www.charlezz.com/wordpress/wp-content/uploads/2020/10/www.charlezz.com-glide-v4-glide-v4--by-charlezz.pdf\n\n### Official\n\n- [Android Developers#Drawble Resources](https://developer.android.com/guide/topics/resources/drawable-resource.html)\n- [Android Developers#Handling bitmaps](https://developer.android.com/topic/performance/graphics/index.html)\n- [Android Developers#LruCache](https://developer.android.com/reference/android/util/LruCache)\n- [androidx.collection.LruCache](https://developer.android.com/reference/androidx/collection/LruCache)\n- [Cache replacement policies#recently used](https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU))\n- [Google#Accompanist Repository](https://github.com/google/accompanist)\n\n- https://square.github.io/picasso/\n- https://bumptech.github.io/glide/\n- https://github.com/coil-kt/coil\n- https://frescolib.org\n- https://github.com/nostra13/Android-Universal-Image-Loader/wiki\n\n### ETC\n\n- https://futurestud.io/tutorials/glide-caching-basics\n- https://wooooooak.github.io/%EB%B2%88%EC%97%AD%ED%95%98%EB%A9%B0%20%EA%B3%B5%EB%B6%80%ED%95%98%EA%B8%B0/2021/02/21/How-The-Android-Image-Loading-Library-Glide-and-Fresco-Works/\n","slug":"2021-06-24 Image Loading and Caching Library Part 3","published":1,"updated":"2021-07-25T13:29:15.183Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7lv001v3lrebxc2cl09","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n<span id=\"more\"></span>\n<p>   Glide, Fresco, Coil    .</p>\n<p>    <code>Pixel 4a</code>,   <code>Android Studio Profiler</code> .</p>\n<p>    ,         .</p>\n<p>    CPU, Memory, Disk 10   .</p>\n<p>    ,    .</p>\n<blockquote>\n<p><strong></strong>   Picasso      .</p>\n</blockquote>\n<h3 id=\"Case-1-----\"><a href=\"#Case-1-----\" class=\"headerlink\" title=\"Case 1)     \"></a>Case 1)     </h3><p>   <code>7,680 x 4,320</code>  <code>4.29mb</code>   24-bit color depth  .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/m7itaqy.png\" class=\"\" title=\"[one big image profiling]\">\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">Library</th>\n<th align=\"center\">CPU</th>\n<th align=\"center\">Memory</th>\n<th align=\"center\">Disk</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Coil</td>\n<td align=\"center\">38.3%</td>\n<td align=\"center\">4.26MB</td>\n<td align=\"center\">X</td>\n</tr>\n<tr>\n<td align=\"center\">Glide</td>\n<td align=\"center\">40.8%</td>\n<td align=\"center\">3.41MB</td>\n<td align=\"center\">0.21MB</td>\n</tr>\n<tr>\n<td align=\"center\">Fresco</td>\n<td align=\"center\">40.2%</td>\n<td align=\"center\">8.14MB</td>\n<td align=\"center\">X</td>\n</tr>\n</tbody></table>\n<p>1        .</p>\n<h3 id=\"Case-2------\"><a href=\"#Case-2------\" class=\"headerlink\" title=\"Case 2)      \"></a>Case 2)      </h3><p>Case 1  ScrollView 50  .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/BntHJ2Y.png\" class=\"\" title=\"[50 big image profiling]\">\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">Library</th>\n<th align=\"center\">CPU</th>\n<th align=\"center\">Memory</th>\n<th align=\"center\">Disk</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Coil</td>\n<td align=\"center\">93.6%</td>\n<td align=\"center\">350.8MB</td>\n<td align=\"center\">X</td>\n</tr>\n<tr>\n<td align=\"center\">Glide</td>\n<td align=\"center\">45.4%</td>\n<td align=\"center\">4.6MB</td>\n<td align=\"center\">0.21MB</td>\n</tr>\n<tr>\n<td align=\"center\">Fresco</td>\n<td align=\"center\">72.4%</td>\n<td align=\"center\">8.4MB</td>\n<td align=\"center\">X</td>\n</tr>\n</tbody></table>\n<p>Coil Cpu, Memory    .</p>\n<p>Glide              .</p>\n<p>    Coil Coroutine   CPU, Memory       .</p>\n<p> Coil    .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/rb1bMMt.png\" class=\"\" title=\"[50 big image profiling coil]\">\n\n<p> Glide    .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/0oDUU69.png\" class=\"\" title=\"[50 big image profiling glide]\">\n\n<p>Glide          .</p>\n<h3 id=\"Case-3------feat-ScrollView\"><a href=\"#Case-3------feat-ScrollView\" class=\"headerlink\" title=\"Case 3)      (feat_ ScrollView)\"></a>Case 3)      (feat_ ScrollView)</h3><p>2mb ~ 10mb       10 ScrollView  .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/TIrybR8.png\" class=\"\" title=\"[10 different image profiling]\">\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">Library</th>\n<th align=\"center\">CPU</th>\n<th align=\"center\">Memory</th>\n<th align=\"center\">Disk</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Coil</td>\n<td align=\"center\">88.6%</td>\n<td align=\"center\">800MB</td>\n<td align=\"center\">X</td>\n</tr>\n<tr>\n<td align=\"center\">Glide</td>\n<td align=\"center\">89%</td>\n<td align=\"center\">303.3MB</td>\n<td align=\"center\">4.6MB</td>\n</tr>\n<tr>\n<td align=\"center\">Fresco</td>\n<td align=\"center\">92.6%</td>\n<td align=\"center\">276MB</td>\n<td align=\"center\">X</td>\n</tr>\n</tbody></table>\n<p>       CPU, Memory .</p>\n<p>  Coil   Memory .</p>\n<h3 id=\"Case-4------feat-RecyclerView\"><a href=\"#Case-4------feat-RecyclerView\" class=\"headerlink\" title=\"Case 4)      (feat_ RecyclerView)\"></a>Case 4)      (feat_ RecyclerView)</h3><p>Case 3   RecyclerView  .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/QafKUB1.png\" class=\"\" title=\"[10 different image recyclerView profiling]\">\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">Library</th>\n<th align=\"center\">CPU</th>\n<th align=\"center\">Memory</th>\n<th align=\"center\">Disk</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Coil</td>\n<td align=\"center\">94%</td>\n<td align=\"center\">800MB</td>\n<td align=\"center\">X</td>\n</tr>\n<tr>\n<td align=\"center\">Glide</td>\n<td align=\"center\">94%</td>\n<td align=\"center\">270MB</td>\n<td align=\"center\">4.52MB</td>\n</tr>\n<tr>\n<td align=\"center\">Fresco</td>\n<td align=\"center\">94.6%</td>\n<td align=\"center\">281MB</td>\n<td align=\"center\">X</td>\n</tr>\n</tbody></table>\n<p>Coil  ScrollView   CPU      .</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Coil Coroutine        CPU, Memory  .</p>\n<p>Gilde          , Picasso      ,    .</p>\n<p>Fresco      .   Glide  .</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><h3 id=\"Members-of-Study\"><a href=\"#Members-of-Study\" class=\"headerlink\" title=\"Members of Study\"></a>Members of Study</h3><ul>\n<li><a href=\"https://namhoon.kim/2021/05/25/android_deep_dive/017_Image%20Loading%20and%20Caching%20Library%20Part%201/\">https://namhoon.kim/2021/05/25/android_deep_dive/017_Image%20Loading%20and%20Caching%20Library%20Part%201/</a></li>\n<li><a href=\"https://namhoon.kim/2021/06/01/android_deep_dive/018_Image%20Loading%20and%20Caching%20Library%20Part%202/\">https://namhoon.kim/2021/06/01/android_deep_dive/018_Image%20Loading%20and%20Caching%20Library%20Part%202/</a></li>\n<li><a href=\"https://velog.io/@jshme/Android-Image-Loader-Library\">https://velog.io/@jshme/Android-Image-Loader-Library</a></li>\n<li><a href=\"https://velog.io/@jshme/Android-Hello-Out-Of-Memory\">https://velog.io/@jshme/Android-Hello-Out-Of-Memory</a></li>\n<li><a href=\"https://www.charlezz.com/wordpress/wp-content/uploads/2020/10/www.charlezz.com-glide-v4-glide-v4--by-charlezz.pdf\">https://www.charlezz.com/wordpress/wp-content/uploads/2020/10/www.charlezz.com-glide-v4-glide-v4--by-charlezz.pdf</a></li>\n</ul>\n<h3 id=\"Official\"><a href=\"#Official\" class=\"headerlink\" title=\"Official\"></a>Official</h3><ul>\n<li><p><a href=\"https://developer.android.com/guide/topics/resources/drawable-resource.html\">Android Developers#Drawble Resources</a></p>\n</li>\n<li><p><a href=\"https://developer.android.com/topic/performance/graphics/index.html\">Android Developers#Handling bitmaps</a></p>\n</li>\n<li><p><a href=\"https://developer.android.com/reference/android/util/LruCache\">Android Developers#LruCache</a></p>\n</li>\n<li><p><a href=\"https://developer.android.com/reference/androidx/collection/LruCache\">androidx.collection.LruCache</a></p>\n</li>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)\">Cache replacement policies#recently used</a></p>\n</li>\n<li><p><a href=\"https://github.com/google/accompanist\">Google#Accompanist Repository</a></p>\n</li>\n<li><p><a href=\"https://square.github.io/picasso/\">https://square.github.io/picasso/</a></p>\n</li>\n<li><p><a href=\"https://bumptech.github.io/glide/\">https://bumptech.github.io/glide/</a></p>\n</li>\n<li><p><a href=\"https://github.com/coil-kt/coil\">https://github.com/coil-kt/coil</a></p>\n</li>\n<li><p><a href=\"https://frescolib.org/\">https://frescolib.org</a></p>\n</li>\n<li><p><a href=\"https://github.com/nostra13/Android-Universal-Image-Loader/wiki\">https://github.com/nostra13/Android-Universal-Image-Loader/wiki</a></p>\n</li>\n</ul>\n<h3 id=\"ETC\"><a href=\"#ETC\" class=\"headerlink\" title=\"ETC\"></a>ETC</h3><ul>\n<li><a href=\"https://futurestud.io/tutorials/glide-caching-basics\">https://futurestud.io/tutorials/glide-caching-basics</a></li>\n<li><a href=\"https://wooooooak.github.io/%EB%B2%88%EC%97%AD%ED%95%98%EB%A9%B0%20%EA%B3%B5%EB%B6%80%ED%95%98%EA%B8%B0/2021/02/21/How-The-Android-Image-Loading-Library-Glide-and-Fresco-Works/\">https://wooooooak.github.io/%EB%B2%88%EC%97%AD%ED%95%98%EB%A9%B0%20%EA%B3%B5%EB%B6%80%ED%95%98%EA%B8%B0/2021/02/21/How-The-Android-Image-Loading-Library-Glide-and-Fresco-Works/</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @RocketPunch<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<p>   Glide, Fresco, Coil    .</p>\n<p>    <code>Pixel 4a</code>,   <code>Android Studio Profiler</code> .</p>\n<p>    ,         .</p>\n<p>    CPU, Memory, Disk 10   .</p>\n<p>    ,    .</p>\n<blockquote>\n<p><strong></strong>   Picasso      .</p>\n</blockquote>\n<h3 id=\"Case-1-----\"><a href=\"#Case-1-----\" class=\"headerlink\" title=\"Case 1)     \"></a>Case 1)     </h3><p>   <code>7,680 x 4,320</code>  <code>4.29mb</code>   24-bit color depth  .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/m7itaqy.png\" class=\"\" title=\"[one big image profiling]\">\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">Library</th>\n<th align=\"center\">CPU</th>\n<th align=\"center\">Memory</th>\n<th align=\"center\">Disk</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Coil</td>\n<td align=\"center\">38.3%</td>\n<td align=\"center\">4.26MB</td>\n<td align=\"center\">X</td>\n</tr>\n<tr>\n<td align=\"center\">Glide</td>\n<td align=\"center\">40.8%</td>\n<td align=\"center\">3.41MB</td>\n<td align=\"center\">0.21MB</td>\n</tr>\n<tr>\n<td align=\"center\">Fresco</td>\n<td align=\"center\">40.2%</td>\n<td align=\"center\">8.14MB</td>\n<td align=\"center\">X</td>\n</tr>\n</tbody></table>\n<p>1        .</p>\n<h3 id=\"Case-2------\"><a href=\"#Case-2------\" class=\"headerlink\" title=\"Case 2)      \"></a>Case 2)      </h3><p>Case 1  ScrollView 50  .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/BntHJ2Y.png\" class=\"\" title=\"[50 big image profiling]\">\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">Library</th>\n<th align=\"center\">CPU</th>\n<th align=\"center\">Memory</th>\n<th align=\"center\">Disk</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Coil</td>\n<td align=\"center\">93.6%</td>\n<td align=\"center\">350.8MB</td>\n<td align=\"center\">X</td>\n</tr>\n<tr>\n<td align=\"center\">Glide</td>\n<td align=\"center\">45.4%</td>\n<td align=\"center\">4.6MB</td>\n<td align=\"center\">0.21MB</td>\n</tr>\n<tr>\n<td align=\"center\">Fresco</td>\n<td align=\"center\">72.4%</td>\n<td align=\"center\">8.4MB</td>\n<td align=\"center\">X</td>\n</tr>\n</tbody></table>\n<p>Coil Cpu, Memory    .</p>\n<p>Glide              .</p>\n<p>    Coil Coroutine   CPU, Memory       .</p>\n<p> Coil    .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/rb1bMMt.png\" class=\"\" title=\"[50 big image profiling coil]\">\n\n<p> Glide    .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/0oDUU69.png\" class=\"\" title=\"[50 big image profiling glide]\">\n\n<p>Glide          .</p>\n<h3 id=\"Case-3------feat-ScrollView\"><a href=\"#Case-3------feat-ScrollView\" class=\"headerlink\" title=\"Case 3)      (feat_ ScrollView)\"></a>Case 3)      (feat_ ScrollView)</h3><p>2mb ~ 10mb       10 ScrollView  .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/TIrybR8.png\" class=\"\" title=\"[10 different image profiling]\">\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">Library</th>\n<th align=\"center\">CPU</th>\n<th align=\"center\">Memory</th>\n<th align=\"center\">Disk</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Coil</td>\n<td align=\"center\">88.6%</td>\n<td align=\"center\">800MB</td>\n<td align=\"center\">X</td>\n</tr>\n<tr>\n<td align=\"center\">Glide</td>\n<td align=\"center\">89%</td>\n<td align=\"center\">303.3MB</td>\n<td align=\"center\">4.6MB</td>\n</tr>\n<tr>\n<td align=\"center\">Fresco</td>\n<td align=\"center\">92.6%</td>\n<td align=\"center\">276MB</td>\n<td align=\"center\">X</td>\n</tr>\n</tbody></table>\n<p>       CPU, Memory .</p>\n<p>  Coil   Memory .</p>\n<h3 id=\"Case-4------feat-RecyclerView\"><a href=\"#Case-4------feat-RecyclerView\" class=\"headerlink\" title=\"Case 4)      (feat_ RecyclerView)\"></a>Case 4)      (feat_ RecyclerView)</h3><p>Case 3   RecyclerView  .</p>\n<img src=\"/Team-Blog/2021/06/24/2021-06-24%20Image%20Loading%20and%20Caching%20Library%20Part%203/QafKUB1.png\" class=\"\" title=\"[10 different image recyclerView profiling]\">\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">Library</th>\n<th align=\"center\">CPU</th>\n<th align=\"center\">Memory</th>\n<th align=\"center\">Disk</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Coil</td>\n<td align=\"center\">94%</td>\n<td align=\"center\">800MB</td>\n<td align=\"center\">X</td>\n</tr>\n<tr>\n<td align=\"center\">Glide</td>\n<td align=\"center\">94%</td>\n<td align=\"center\">270MB</td>\n<td align=\"center\">4.52MB</td>\n</tr>\n<tr>\n<td align=\"center\">Fresco</td>\n<td align=\"center\">94.6%</td>\n<td align=\"center\">281MB</td>\n<td align=\"center\">X</td>\n</tr>\n</tbody></table>\n<p>Coil  ScrollView   CPU      .</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Coil Coroutine        CPU, Memory  .</p>\n<p>Gilde          , Picasso      ,    .</p>\n<p>Fresco      .   Glide  .</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><h3 id=\"Members-of-Study\"><a href=\"#Members-of-Study\" class=\"headerlink\" title=\"Members of Study\"></a>Members of Study</h3><ul>\n<li><a href=\"https://namhoon.kim/2021/05/25/android_deep_dive/017_Image%20Loading%20and%20Caching%20Library%20Part%201/\">https://namhoon.kim/2021/05/25/android_deep_dive/017_Image%20Loading%20and%20Caching%20Library%20Part%201/</a></li>\n<li><a href=\"https://namhoon.kim/2021/06/01/android_deep_dive/018_Image%20Loading%20and%20Caching%20Library%20Part%202/\">https://namhoon.kim/2021/06/01/android_deep_dive/018_Image%20Loading%20and%20Caching%20Library%20Part%202/</a></li>\n<li><a href=\"https://velog.io/@jshme/Android-Image-Loader-Library\">https://velog.io/@jshme/Android-Image-Loader-Library</a></li>\n<li><a href=\"https://velog.io/@jshme/Android-Hello-Out-Of-Memory\">https://velog.io/@jshme/Android-Hello-Out-Of-Memory</a></li>\n<li><a href=\"https://www.charlezz.com/wordpress/wp-content/uploads/2020/10/www.charlezz.com-glide-v4-glide-v4--by-charlezz.pdf\">https://www.charlezz.com/wordpress/wp-content/uploads/2020/10/www.charlezz.com-glide-v4-glide-v4--by-charlezz.pdf</a></li>\n</ul>\n<h3 id=\"Official\"><a href=\"#Official\" class=\"headerlink\" title=\"Official\"></a>Official</h3><ul>\n<li><p><a href=\"https://developer.android.com/guide/topics/resources/drawable-resource.html\">Android Developers#Drawble Resources</a></p>\n</li>\n<li><p><a href=\"https://developer.android.com/topic/performance/graphics/index.html\">Android Developers#Handling bitmaps</a></p>\n</li>\n<li><p><a href=\"https://developer.android.com/reference/android/util/LruCache\">Android Developers#LruCache</a></p>\n</li>\n<li><p><a href=\"https://developer.android.com/reference/androidx/collection/LruCache\">androidx.collection.LruCache</a></p>\n</li>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)\">Cache replacement policies#recently used</a></p>\n</li>\n<li><p><a href=\"https://github.com/google/accompanist\">Google#Accompanist Repository</a></p>\n</li>\n<li><p><a href=\"https://square.github.io/picasso/\">https://square.github.io/picasso/</a></p>\n</li>\n<li><p><a href=\"https://bumptech.github.io/glide/\">https://bumptech.github.io/glide/</a></p>\n</li>\n<li><p><a href=\"https://github.com/coil-kt/coil\">https://github.com/coil-kt/coil</a></p>\n</li>\n<li><p><a href=\"https://frescolib.org/\">https://frescolib.org</a></p>\n</li>\n<li><p><a href=\"https://github.com/nostra13/Android-Universal-Image-Loader/wiki\">https://github.com/nostra13/Android-Universal-Image-Loader/wiki</a></p>\n</li>\n</ul>\n<h3 id=\"ETC\"><a href=\"#ETC\" class=\"headerlink\" title=\"ETC\"></a>ETC</h3><ul>\n<li><a href=\"https://futurestud.io/tutorials/glide-caching-basics\">https://futurestud.io/tutorials/glide-caching-basics</a></li>\n<li><a href=\"https://wooooooak.github.io/%EB%B2%88%EC%97%AD%ED%95%98%EB%A9%B0%20%EA%B3%B5%EB%B6%80%ED%95%98%EA%B8%B0/2021/02/21/How-The-Android-Image-Loading-Library-Glide-and-Fresco-Works/\">https://wooooooak.github.io/%EB%B2%88%EC%97%AD%ED%95%98%EB%A9%B0%20%EA%B3%B5%EB%B6%80%ED%95%98%EA%B8%B0/2021/02/21/How-The-Android-Image-Loading-Library-Glide-and-Fresco-Works/</a></li>\n</ul>"},{"title":"Kotlin Symbol Processing Api Part 1  Annotation KAPT","date":"2021-07-20T16:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_ksp.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n## Annotation\n\n`Annotation Processor`  ,       .\n\n```java\n@Overide\n@NonNull\n@Nallable\n```\n\n  **Annotation** . \n\n**Annotation**                 .\n\n         . Android   Spring Framework    .\n\n    Annotation  .\n\n> Annotations, a form of metadata, provide data about a program that is not part of the program itself. Annotations have no direct effect on the operation of the code they annotate.\n\n   \n\n> Annotation   ,       .\n> Annotation       .\n\nAnnotation Java 5  ,     .\n\n**1. Information for the compiler**\n  ,      .\n\n**2. Compile-time and deployment-time processing**\n xml        .\n\n**3. Runtime processing**\n annotation    .\n\n> **** [Oracle JavaDoc#Annotations](https://docs.oracle.com/javase/tutorial/java/annotations/index.html)\n\n###   Annotation \n\n`java.lang`    Annotation .      .\n\n- `@Deprecated` : deprecated          .  Annotation      .\n\n- `@SuppressWarnings` :  Annotation     .\n\n  ```java\n  @SuppressWarnings(\"deprecation\")\n  void useDeprecatedMethod() {\n    // deprecation warning\n    // - suppressed\n    objectOne.deprecatedMethod();\n  }\n  ```\n\n`java.lang`  `annotation`   `java.lang.annotation`  **Meta Annotation**    .\n\n- `@Retention` : Retention Annotation  Annotation   .\n  - `RetentionPolicy.SOURCE` :   ,  .\n  - `RetentionPolicy.CLASS` :     , JVM .\n  - `RetentionPolicy.RUNTIME` : JVM    .\n- `@Documented` : Annotation     element Javadoc    .\n- `@Target` : Annotation    Java Elements  .\n- `@Inherited` : super class     Annotation . class  .\n\n Meta Annotation   Annotation   Annotation .\n\nAndroid   `java.lang`  `androidx.annotation`    Annotation   .\n\n`androidx.annotation`   annotation    .\n\n> **** [Android Developers#androidx.annotation](https://developer.android.com/reference/androidx/annotation/package-summary)\n\n\n### Annotation Processor\n\n  Annotation    **Annotation Processor** . \n\nAnnotation Processor Java   ,   (, ,  ) annotation    .\n\n            ,           .\n\nAnnotation Processor    .\n\n-     .\n-         .\n-       .\n\n#### Annotation processor  \n\nAnnotation processor    .\n\n{% asset_img processing_rounds.png [Processing rounds] %}\n\n     .\n\n1.  Annotation processor   .\n2. Annotation processor  Annotation      .\n3.   Annotation processor   ,   2 .\n4.        . (   )\n\n#### Android Annotation Processor  \n\n**Room** \n\nAndroid SQLite    Room  Annotation Processor  .\n\n   User  .\n\n```kotlin\n// User.kt\n@Entity\ndata class User(\n    @PrimaryKey val uid: Int,\n    @ColumnInfo(name = \"first_name\") val firstName: String?,\n    @ColumnInfo(name = \"last_name\") val lastName: String?\n)\n```\n\n```kotlin\n// UserDao.kt\n@Dao\ninterface UserDao {\n    @Query(\"SELECT * FROM user\")\n    fun getAll(): List<User>\n\n    @Query(\"SELECT * FROM user WHERE uid IN (:userIds)\")\n    fun loadAllByIds(userIds: IntArray): List<User>\n\n    @Query(\"SELECT * FROM user WHERE first_name LIKE :first AND \" +\n            \"last_name LIKE :last LIMIT 1\")\n    fun findByName(first: String, last: String): User\n\n    @Insert\n    fun insertAll(vararg users: User)\n\n    @Delete\n    fun delete(user: User)\n}\n```\n\n```kotlin\n// AppDatabase.kt\n@Database(entities = arrayOf(User::class), version = 1)\nabstract class AppDatabase : RoomDatabase() {\n    abstract fun userDao(): UserDao\n}\n```\n\n   Annotation `@Entity`, `@PrimaryKey`, `@ColumnInfo`, `@Dao`, `@Query`, `@Insert`, `@Delete`.\n\n Annotation  .\n\n```java\n// Entity.java\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.CLASS)\npublic @interface Entity {\n    String tableName() default \"\";\n    Index[] indices() default {};\n    boolean inheritSuperIndices() default false;\n    String[] primaryKeys() default {};\n    ForeignKey[] foreignKeys() default {};\n    String[] ignoredColumns() default {};\n}\n```\n\n```java\n// PrimaryKey.java\n@Target({ElementType.FIELD, ElementType.METHOD})\n@Retention(RetentionPolicy.CLASS)\npublic @interface PrimaryKey {\n    boolean autoGenerate() default false;\n}\n```\n\n```java\n// ColumnInfo.java\n@Target({ElementType.FIELD, ElementType.METHOD})\n@Retention(RetentionPolicy.CLASS)\npublic @interface ColumnInfo {\n    String name() default INHERIT_FIELD_NAME;\n    @SuppressWarnings(\"unused\") @SQLiteTypeAffinity int typeAffinity() default UNDEFINED;\n    boolean index() default false;\n    String defaultValue() default VALUE_UNSPECIFIED;\n    String INHERIT_FIELD_NAME = \"[field-name]\";\n\n\n    int UNDEFINED = 1;\n    int TEXT = 2;\n    int INTEGER = 3;\n    int REAL = 4;\n    int BLOB = 5;\n    @IntDef({UNDEFINED, TEXT, INTEGER, REAL, BLOB})\n    @Retention(RetentionPolicy.CLASS)\n    @interface SQLiteTypeAffinity {\n    }\n\n    int UNSPECIFIED = 1;\n    int BINARY = 2;\n    int NOCASE = 3;\n    int RTRIM = 4;\n    @RequiresApi(21)\n    int LOCALIZED = 5;\n    @RequiresApi(21)\n    int UNICODE = 6;\n    @IntDef({UNSPECIFIED, BINARY, NOCASE, RTRIM, LOCALIZED, UNICODE})\n    @Retention(RetentionPolicy.CLASS)\n    @interface Collate {\n    }\n    String VALUE_UNSPECIFIED = \"[value-unspecified]\";\n}\n```\n\n  `@Dao`, `@Query`, `@Insert`, `@Delete`  Annotation  ,     .\n\n **Room**     **Dagger**, **Glide**   Annotation(Processor)  . \n\n<br>\n<br>\n<br>\n\n## KAPT (Kotlin Annotation Processing Tool)\n\n     javac  kotlinc    Java   (AbstractProcessor)  . \n\n      [KAPT(Kotlin Annotation Processing Tool)](https://kotlinlang.org/docs/kapt.html) . \n\nKAPT    build.gradle    .\n\n```groovy\n// Groovy DSL\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\n```\n\n  kotlin-android    kotlin-kapt   .\n\nAnnotation processor       .\n\n```groovy\ndependencies {\n //  annotationProcessor  kapt \n // annotationProcessor 'groupId:artifactId:version'\n    kapt 'groupId:artifactId:version'\n}\n```\n\nhilt    .\n\n```groovy\ndependencies{\n  //annotationProcessor \"com.google.dagger:hilt-android-compiler:$hilt_version\"\n  kapt \"com.google.dagger:hilt-android-compiler:$hilt_version\"\n}\n```\n\n### Pluggable Annotation Processing API (JSR#269)\n\n        .\n\n       API ,     JSR 269.\n\n> **** [JSR 269 : Pluggable Annotation Processing API in JCP](https://jcp.org/en/jsr/detail?id=269)\n\n  API    ,    , ,     \n\n        .\n\n    ,  (=Stub)  .\n\n     ,        `*.class` .\n\n          .\n\n,    Processor     ,       **KAPT**  .\n\n**KAPT**  APT  Stub          .\n\n    **KAPT**   Android DI   Dagger Databinding        .\n\n **KAPT**  APT   Stub             .\n\n  ,      **KSP**    .","source":"_posts/2021-07-21 Kotlin Symbol Processing Api Part 1.md","raw":"---\ntitle: Kotlin Symbol Processing Api Part 1  Annotation KAPT\ndate: 2021-07-21 01:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_ksp.png\ncategories:\n- KSP\ntags:\n- KSP\n- Kotlin\n- Symbol\n- Processing\n- KAPT\n- Annotation\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n## Annotation\n\n`Annotation Processor`  ,       .\n\n```java\n@Overide\n@NonNull\n@Nallable\n```\n\n  **Annotation** . \n\n**Annotation**                 .\n\n         . Android   Spring Framework    .\n\n    Annotation  .\n\n> Annotations, a form of metadata, provide data about a program that is not part of the program itself. Annotations have no direct effect on the operation of the code they annotate.\n\n   \n\n> Annotation   ,       .\n> Annotation       .\n\nAnnotation Java 5  ,     .\n\n**1. Information for the compiler**\n  ,      .\n\n**2. Compile-time and deployment-time processing**\n xml        .\n\n**3. Runtime processing**\n annotation    .\n\n> **** [Oracle JavaDoc#Annotations](https://docs.oracle.com/javase/tutorial/java/annotations/index.html)\n\n###   Annotation \n\n`java.lang`    Annotation .      .\n\n- `@Deprecated` : deprecated          .  Annotation      .\n\n- `@SuppressWarnings` :  Annotation     .\n\n  ```java\n  @SuppressWarnings(\"deprecation\")\n  void useDeprecatedMethod() {\n    // deprecation warning\n    // - suppressed\n    objectOne.deprecatedMethod();\n  }\n  ```\n\n`java.lang`  `annotation`   `java.lang.annotation`  **Meta Annotation**    .\n\n- `@Retention` : Retention Annotation  Annotation   .\n  - `RetentionPolicy.SOURCE` :   ,  .\n  - `RetentionPolicy.CLASS` :     , JVM .\n  - `RetentionPolicy.RUNTIME` : JVM    .\n- `@Documented` : Annotation     element Javadoc    .\n- `@Target` : Annotation    Java Elements  .\n- `@Inherited` : super class     Annotation . class  .\n\n Meta Annotation   Annotation   Annotation .\n\nAndroid   `java.lang`  `androidx.annotation`    Annotation   .\n\n`androidx.annotation`   annotation    .\n\n> **** [Android Developers#androidx.annotation](https://developer.android.com/reference/androidx/annotation/package-summary)\n\n\n### Annotation Processor\n\n  Annotation    **Annotation Processor** . \n\nAnnotation Processor Java   ,   (, ,  ) annotation    .\n\n            ,           .\n\nAnnotation Processor    .\n\n-     .\n-         .\n-       .\n\n#### Annotation processor  \n\nAnnotation processor    .\n\n{% asset_img processing_rounds.png [Processing rounds] %}\n\n     .\n\n1.  Annotation processor   .\n2. Annotation processor  Annotation      .\n3.   Annotation processor   ,   2 .\n4.        . (   )\n\n#### Android Annotation Processor  \n\n**Room** \n\nAndroid SQLite    Room  Annotation Processor  .\n\n   User  .\n\n```kotlin\n// User.kt\n@Entity\ndata class User(\n    @PrimaryKey val uid: Int,\n    @ColumnInfo(name = \"first_name\") val firstName: String?,\n    @ColumnInfo(name = \"last_name\") val lastName: String?\n)\n```\n\n```kotlin\n// UserDao.kt\n@Dao\ninterface UserDao {\n    @Query(\"SELECT * FROM user\")\n    fun getAll(): List<User>\n\n    @Query(\"SELECT * FROM user WHERE uid IN (:userIds)\")\n    fun loadAllByIds(userIds: IntArray): List<User>\n\n    @Query(\"SELECT * FROM user WHERE first_name LIKE :first AND \" +\n            \"last_name LIKE :last LIMIT 1\")\n    fun findByName(first: String, last: String): User\n\n    @Insert\n    fun insertAll(vararg users: User)\n\n    @Delete\n    fun delete(user: User)\n}\n```\n\n```kotlin\n// AppDatabase.kt\n@Database(entities = arrayOf(User::class), version = 1)\nabstract class AppDatabase : RoomDatabase() {\n    abstract fun userDao(): UserDao\n}\n```\n\n   Annotation `@Entity`, `@PrimaryKey`, `@ColumnInfo`, `@Dao`, `@Query`, `@Insert`, `@Delete`.\n\n Annotation  .\n\n```java\n// Entity.java\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.CLASS)\npublic @interface Entity {\n    String tableName() default \"\";\n    Index[] indices() default {};\n    boolean inheritSuperIndices() default false;\n    String[] primaryKeys() default {};\n    ForeignKey[] foreignKeys() default {};\n    String[] ignoredColumns() default {};\n}\n```\n\n```java\n// PrimaryKey.java\n@Target({ElementType.FIELD, ElementType.METHOD})\n@Retention(RetentionPolicy.CLASS)\npublic @interface PrimaryKey {\n    boolean autoGenerate() default false;\n}\n```\n\n```java\n// ColumnInfo.java\n@Target({ElementType.FIELD, ElementType.METHOD})\n@Retention(RetentionPolicy.CLASS)\npublic @interface ColumnInfo {\n    String name() default INHERIT_FIELD_NAME;\n    @SuppressWarnings(\"unused\") @SQLiteTypeAffinity int typeAffinity() default UNDEFINED;\n    boolean index() default false;\n    String defaultValue() default VALUE_UNSPECIFIED;\n    String INHERIT_FIELD_NAME = \"[field-name]\";\n\n\n    int UNDEFINED = 1;\n    int TEXT = 2;\n    int INTEGER = 3;\n    int REAL = 4;\n    int BLOB = 5;\n    @IntDef({UNDEFINED, TEXT, INTEGER, REAL, BLOB})\n    @Retention(RetentionPolicy.CLASS)\n    @interface SQLiteTypeAffinity {\n    }\n\n    int UNSPECIFIED = 1;\n    int BINARY = 2;\n    int NOCASE = 3;\n    int RTRIM = 4;\n    @RequiresApi(21)\n    int LOCALIZED = 5;\n    @RequiresApi(21)\n    int UNICODE = 6;\n    @IntDef({UNSPECIFIED, BINARY, NOCASE, RTRIM, LOCALIZED, UNICODE})\n    @Retention(RetentionPolicy.CLASS)\n    @interface Collate {\n    }\n    String VALUE_UNSPECIFIED = \"[value-unspecified]\";\n}\n```\n\n  `@Dao`, `@Query`, `@Insert`, `@Delete`  Annotation  ,     .\n\n **Room**     **Dagger**, **Glide**   Annotation(Processor)  . \n\n<br>\n<br>\n<br>\n\n## KAPT (Kotlin Annotation Processing Tool)\n\n     javac  kotlinc    Java   (AbstractProcessor)  . \n\n      [KAPT(Kotlin Annotation Processing Tool)](https://kotlinlang.org/docs/kapt.html) . \n\nKAPT    build.gradle    .\n\n```groovy\n// Groovy DSL\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\n```\n\n  kotlin-android    kotlin-kapt   .\n\nAnnotation processor       .\n\n```groovy\ndependencies {\n //  annotationProcessor  kapt \n // annotationProcessor 'groupId:artifactId:version'\n    kapt 'groupId:artifactId:version'\n}\n```\n\nhilt    .\n\n```groovy\ndependencies{\n  //annotationProcessor \"com.google.dagger:hilt-android-compiler:$hilt_version\"\n  kapt \"com.google.dagger:hilt-android-compiler:$hilt_version\"\n}\n```\n\n### Pluggable Annotation Processing API (JSR#269)\n\n        .\n\n       API ,     JSR 269.\n\n> **** [JSR 269 : Pluggable Annotation Processing API in JCP](https://jcp.org/en/jsr/detail?id=269)\n\n  API    ,    , ,     \n\n        .\n\n    ,  (=Stub)  .\n\n     ,        `*.class` .\n\n          .\n\n,    Processor     ,       **KAPT**  .\n\n**KAPT**  APT  Stub          .\n\n    **KAPT**   Android DI   Dagger Databinding        .\n\n **KAPT**  APT   Stub             .\n\n  ,      **KSP**    .","slug":"2021-07-21 Kotlin Symbol Processing Api Part 1","published":1,"updated":"2021-08-13T14:40:08.375Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7lw001w3lre4mfub16y","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<span id=\"more\"></span>\n\n<h2 id=\"Annotation\"><a href=\"#Annotation\" class=\"headerlink\" title=\"Annotation\"></a>Annotation</h2><p><code>Annotation Processor</code>  ,       .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Overide</span></span><br><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@Nallable</span></span><br></pre></td></tr></table></figure>\n\n<p>  <strong>Annotation</strong> . </p>\n<p><strong>Annotation</strong>                 .</p>\n<p>         . Android   Spring Framework    .</p>\n<p>    Annotation  .</p>\n<blockquote>\n<p>Annotations, a form of metadata, provide data about a program that is not part of the program itself. Annotations have no direct effect on the operation of the code they annotate.</p>\n</blockquote>\n<p>   </p>\n<blockquote>\n<p>Annotation   ,       .<br>Annotation       .</p>\n</blockquote>\n<p>Annotation Java 5  ,     .</p>\n<p><strong>1. Information for the compiler</strong><br>  ,      .</p>\n<p><strong>2. Compile-time and deployment-time processing</strong><br> xml        .</p>\n<p><strong>3. Runtime processing</strong><br> annotation    .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/index.html\">Oracle JavaDoc#Annotations</a></p>\n</blockquote>\n<h3 id=\"--Annotation-\"><a href=\"#--Annotation-\" class=\"headerlink\" title=\"  Annotation \"></a>  Annotation </h3><p><code>java.lang</code>    Annotation .      .</p>\n<ul>\n<li><p><code>@Deprecated</code> : deprecated          .  Annotation      .</p>\n</li>\n<li><p><code>@SuppressWarnings</code> :  Annotation     .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SuppressWarnings(&quot;deprecation&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">useDeprecatedMethod</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// deprecation warning</span></span><br><span class=\"line\">  <span class=\"comment\">// - suppressed</span></span><br><span class=\"line\">  objectOne.deprecatedMethod();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p><code>java.lang</code>  <code>annotation</code>   <code>java.lang.annotation</code>  <strong>Meta Annotation</strong>    .</p>\n<ul>\n<li><code>@Retention</code> : Retention Annotation  Annotation   .<ul>\n<li><code>RetentionPolicy.SOURCE</code> :   ,  .</li>\n<li><code>RetentionPolicy.CLASS</code> :     , JVM .</li>\n<li><code>RetentionPolicy.RUNTIME</code> : JVM    .</li>\n</ul>\n</li>\n<li><code>@Documented</code> : Annotation     element Javadoc    .</li>\n<li><code>@Target</code> : Annotation    Java Elements  .</li>\n<li><code>@Inherited</code> : super class     Annotation . class  .</li>\n</ul>\n<p> Meta Annotation   Annotation   Annotation .</p>\n<p>Android   <code>java.lang</code>  <code>androidx.annotation</code>    Annotation   .</p>\n<p><code>androidx.annotation</code>   annotation    .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/reference/androidx/annotation/package-summary\">Android Developers#androidx.annotation</a></p>\n</blockquote>\n<h3 id=\"Annotation-Processor\"><a href=\"#Annotation-Processor\" class=\"headerlink\" title=\"Annotation Processor\"></a>Annotation Processor</h3><p>  Annotation    <strong>Annotation Processor</strong> . </p>\n<p>Annotation Processor Java   ,   (, ,  ) annotation    .</p>\n<p>            ,           .</p>\n<p>Annotation Processor    .</p>\n<ul>\n<li>    .</li>\n<li>        .</li>\n<li>      .</li>\n</ul>\n<h4 id=\"Annotation-processor--\"><a href=\"#Annotation-processor--\" class=\"headerlink\" title=\"Annotation processor  \"></a>Annotation processor  </h4><p>Annotation processor    .</p>\n<img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%201/processing_rounds.png\" class=\"\" title=\"[Processing rounds]\">\n\n<p>     .</p>\n<ol>\n<li> Annotation processor   .</li>\n<li>Annotation processor  Annotation      .</li>\n<li>  Annotation processor   ,   2 .</li>\n<li>       . (   )</li>\n</ol>\n<h4 id=\"Android-Annotation-Processor--\"><a href=\"#Android-Annotation-Processor--\" class=\"headerlink\" title=\"Android Annotation Processor  \"></a>Android Annotation Processor  </h4><p><strong>Room</strong> </p>\n<p>Android SQLite    Room  Annotation Processor  .</p>\n<p>   User  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// User.kt</span></span><br><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">data</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span></span>(</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span> <span class=\"keyword\">val</span> uid: <span class=\"built_in\">Int</span>,</span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = <span class=\"meta-string\">&quot;first_name&quot;</span>)</span> <span class=\"keyword\">val</span> firstName: String?,</span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = <span class=\"meta-string\">&quot;last_name&quot;</span>)</span> <span class=\"keyword\">val</span> lastName: String?</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// UserDao.kt</span></span><br><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(<span class=\"meta-string\">&quot;SELECT * FROM user&quot;</span>)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getAll</span><span class=\"params\">()</span></span>: List&lt;User&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Query(<span class=\"meta-string\">&quot;SELECT * FROM user WHERE uid IN (:userIds)&quot;</span>)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">loadAllByIds</span><span class=\"params\">(userIds: <span class=\"type\">IntArray</span>)</span></span>: List&lt;User&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Query(<span class=\"meta-string\">&quot;SELECT * FROM user WHERE first_name LIKE :first AND &quot;</span> +</span></span><br><span class=\"line\"><span class=\"meta\">            <span class=\"meta-string\">&quot;last_name LIKE :last LIMIT 1&quot;</span>)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">findByName</span><span class=\"params\">(first: <span class=\"type\">String</span>, last: <span class=\"type\">String</span>)</span></span>: User</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Insert</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">insertAll</span><span class=\"params\">(<span class=\"keyword\">vararg</span> users: <span class=\"type\">User</span>)</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Delete</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">delete</span><span class=\"params\">(user: <span class=\"type\">User</span>)</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// AppDatabase.kt</span></span><br><span class=\"line\"><span class=\"meta\">@Database(entities = arrayOf(User::class)</span>, version = <span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppDatabase</span> : <span class=\"type\">RoomDatabase</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">userDao</span><span class=\"params\">()</span></span>: UserDao</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   Annotation <code>@Entity</code>, <code>@PrimaryKey</code>, <code>@ColumnInfo</code>, <code>@Dao</code>, <code>@Query</code>, <code>@Insert</code>, <code>@Delete</code>.</p>\n<p> Annotation  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Entity.java</span></span><br><span class=\"line\"><span class=\"meta\">@Target(ElementType.TYPE)</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(RetentionPolicy.CLASS)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> Entity &#123;</span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">tableName</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> &quot;&quot;</span>;</span><br><span class=\"line\">    Index[] indices() <span class=\"keyword\">default</span> &#123;&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">inheritSuperIndices</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> <span class=\"keyword\">false</span></span>;</span><br><span class=\"line\">    String[] primaryKeys() <span class=\"keyword\">default</span> &#123;&#125;;</span><br><span class=\"line\">    ForeignKey[] foreignKeys() <span class=\"keyword\">default</span> &#123;&#125;;</span><br><span class=\"line\">    String[] ignoredColumns() <span class=\"keyword\">default</span> &#123;&#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// PrimaryKey.java</span></span><br><span class=\"line\"><span class=\"meta\">@Target(&#123;ElementType.FIELD, ElementType.METHOD&#125;)</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(RetentionPolicy.CLASS)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> PrimaryKey &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">autoGenerate</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> <span class=\"keyword\">false</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ColumnInfo.java</span></span><br><span class=\"line\"><span class=\"meta\">@Target(&#123;ElementType.FIELD, ElementType.METHOD&#125;)</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(RetentionPolicy.CLASS)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> ColumnInfo &#123;</span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">name</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> INHERIT_FIELD_NAME</span>;</span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings(&quot;unused&quot;)</span> <span class=\"meta\">@SQLiteTypeAffinity</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">typeAffinity</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> UNDEFINED</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">index</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> <span class=\"keyword\">false</span></span>;</span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">defaultValue</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> VALUE_UNSPECIFIED</span>;</span><br><span class=\"line\">    String INHERIT_FIELD_NAME = <span class=\"string\">&quot;[field-name]&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> UNDEFINED = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> TEXT = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> INTEGER = <span class=\"number\">3</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> REAL = <span class=\"number\">4</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> BLOB = <span class=\"number\">5</span>;</span><br><span class=\"line\">    <span class=\"meta\">@IntDef(&#123;UNDEFINED, TEXT, INTEGER, REAL, BLOB&#125;)</span></span><br><span class=\"line\">    <span class=\"meta\">@Retention(RetentionPolicy.CLASS)</span></span><br><span class=\"line\">    <span class=\"meta\">@interface</span> SQLiteTypeAffinity &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> UNSPECIFIED = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> BINARY = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> NOCASE = <span class=\"number\">3</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> RTRIM = <span class=\"number\">4</span>;</span><br><span class=\"line\">    <span class=\"meta\">@RequiresApi(21)</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> LOCALIZED = <span class=\"number\">5</span>;</span><br><span class=\"line\">    <span class=\"meta\">@RequiresApi(21)</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> UNICODE = <span class=\"number\">6</span>;</span><br><span class=\"line\">    <span class=\"meta\">@IntDef(&#123;UNSPECIFIED, BINARY, NOCASE, RTRIM, LOCALIZED, UNICODE&#125;)</span></span><br><span class=\"line\">    <span class=\"meta\">@Retention(RetentionPolicy.CLASS)</span></span><br><span class=\"line\">    <span class=\"meta\">@interface</span> Collate &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    String VALUE_UNSPECIFIED = <span class=\"string\">&quot;[value-unspecified]&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>@Dao</code>, <code>@Query</code>, <code>@Insert</code>, <code>@Delete</code>  Annotation  ,     .</p>\n<p> <strong>Room</strong>     <strong>Dagger</strong>, <strong>Glide</strong>   Annotation(Processor)  . </p>\n<br>\n<br>\n<br>\n\n<h2 id=\"KAPT-Kotlin-Annotation-Processing-Tool\"><a href=\"#KAPT-Kotlin-Annotation-Processing-Tool\" class=\"headerlink\" title=\"KAPT (Kotlin Annotation Processing Tool)\"></a>KAPT (Kotlin Annotation Processing Tool)</h2><p>     javac  kotlinc    Java   (AbstractProcessor)  . </p>\n<p>      <a href=\"https://kotlinlang.org/docs/kapt.html\">KAPT(Kotlin Annotation Processing Tool)</a> . </p>\n<p>KAPT    build.gradle    .</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Groovy DSL</span></span><br><span class=\"line\">apply <span class=\"attr\">plugin:</span> <span class=\"string\">&#x27;kotlin-android&#x27;</span></span><br><span class=\"line\">apply <span class=\"attr\">plugin:</span> <span class=\"string\">&#x27;kotlin-kapt&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>  kotlin-android    kotlin-kapt   .</p>\n<p>Annotation processor       .</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies &#123;</span><br><span class=\"line\"> <span class=\"comment\">//  annotationProcessor  kapt </span></span><br><span class=\"line\"> <span class=\"comment\">// annotationProcessor &#x27;groupId:artifactId:version&#x27;</span></span><br><span class=\"line\">    kapt <span class=\"string\">&#x27;groupId:artifactId:version&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>hilt    .</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies&#123;</span><br><span class=\"line\">  <span class=\"comment\">//annotationProcessor &quot;com.google.dagger:hilt-android-compiler:$hilt_version&quot;</span></span><br><span class=\"line\">  kapt <span class=\"string\">&quot;com.google.dagger:hilt-android-compiler:$hilt_version&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Pluggable-Annotation-Processing-API-JSR-269\"><a href=\"#Pluggable-Annotation-Processing-API-JSR-269\" class=\"headerlink\" title=\"Pluggable Annotation Processing API (JSR#269)\"></a>Pluggable Annotation Processing API (JSR#269)</h3><p>        .</p>\n<p>       API ,     JSR 269.</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://jcp.org/en/jsr/detail?id=269\">JSR 269 : Pluggable Annotation Processing API in JCP</a></p>\n</blockquote>\n<p>  API    ,    , ,     </p>\n<p>        .</p>\n<p>    ,  (=Stub)  .</p>\n<p>     ,        <code>*.class</code> .</p>\n<p>          .</p>\n<p>,    Processor     ,       <strong>KAPT</strong>  .</p>\n<p><strong>KAPT</strong>  APT  Stub          .</p>\n<p>    <strong>KAPT</strong>   Android DI   Dagger Databinding        .</p>\n<p> <strong>KAPT</strong>  APT   Stub             .</p>\n<p>  ,      <strong>KSP</strong>    .</p>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<h2 id=\"Annotation\"><a href=\"#Annotation\" class=\"headerlink\" title=\"Annotation\"></a>Annotation</h2><p><code>Annotation Processor</code>  ,       .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Overide</span></span><br><span class=\"line\"><span class=\"meta\">@NonNull</span></span><br><span class=\"line\"><span class=\"meta\">@Nallable</span></span><br></pre></td></tr></table></figure>\n\n<p>  <strong>Annotation</strong> . </p>\n<p><strong>Annotation</strong>                 .</p>\n<p>         . Android   Spring Framework    .</p>\n<p>    Annotation  .</p>\n<blockquote>\n<p>Annotations, a form of metadata, provide data about a program that is not part of the program itself. Annotations have no direct effect on the operation of the code they annotate.</p>\n</blockquote>\n<p>   </p>\n<blockquote>\n<p>Annotation   ,       .<br>Annotation       .</p>\n</blockquote>\n<p>Annotation Java 5  ,     .</p>\n<p><strong>1. Information for the compiler</strong><br>  ,      .</p>\n<p><strong>2. Compile-time and deployment-time processing</strong><br> xml        .</p>\n<p><strong>3. Runtime processing</strong><br> annotation    .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/index.html\">Oracle JavaDoc#Annotations</a></p>\n</blockquote>\n<h3 id=\"--Annotation-\"><a href=\"#--Annotation-\" class=\"headerlink\" title=\"  Annotation \"></a>  Annotation </h3><p><code>java.lang</code>    Annotation .      .</p>\n<ul>\n<li><p><code>@Deprecated</code> : deprecated          .  Annotation      .</p>\n</li>\n<li><p><code>@SuppressWarnings</code> :  Annotation     .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SuppressWarnings(&quot;deprecation&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">useDeprecatedMethod</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// deprecation warning</span></span><br><span class=\"line\">  <span class=\"comment\">// - suppressed</span></span><br><span class=\"line\">  objectOne.deprecatedMethod();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p><code>java.lang</code>  <code>annotation</code>   <code>java.lang.annotation</code>  <strong>Meta Annotation</strong>    .</p>\n<ul>\n<li><code>@Retention</code> : Retention Annotation  Annotation   .<ul>\n<li><code>RetentionPolicy.SOURCE</code> :   ,  .</li>\n<li><code>RetentionPolicy.CLASS</code> :     , JVM .</li>\n<li><code>RetentionPolicy.RUNTIME</code> : JVM    .</li>\n</ul>\n</li>\n<li><code>@Documented</code> : Annotation     element Javadoc    .</li>\n<li><code>@Target</code> : Annotation    Java Elements  .</li>\n<li><code>@Inherited</code> : super class     Annotation . class  .</li>\n</ul>\n<p> Meta Annotation   Annotation   Annotation .</p>\n<p>Android   <code>java.lang</code>  <code>androidx.annotation</code>    Annotation   .</p>\n<p><code>androidx.annotation</code>   annotation    .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://developer.android.com/reference/androidx/annotation/package-summary\">Android Developers#androidx.annotation</a></p>\n</blockquote>\n<h3 id=\"Annotation-Processor\"><a href=\"#Annotation-Processor\" class=\"headerlink\" title=\"Annotation Processor\"></a>Annotation Processor</h3><p>  Annotation    <strong>Annotation Processor</strong> . </p>\n<p>Annotation Processor Java   ,   (, ,  ) annotation    .</p>\n<p>            ,           .</p>\n<p>Annotation Processor    .</p>\n<ul>\n<li>    .</li>\n<li>        .</li>\n<li>      .</li>\n</ul>\n<h4 id=\"Annotation-processor--\"><a href=\"#Annotation-processor--\" class=\"headerlink\" title=\"Annotation processor  \"></a>Annotation processor  </h4><p>Annotation processor    .</p>\n<img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%201/processing_rounds.png\" class=\"\" title=\"[Processing rounds]\">\n\n<p>     .</p>\n<ol>\n<li> Annotation processor   .</li>\n<li>Annotation processor  Annotation      .</li>\n<li>  Annotation processor   ,   2 .</li>\n<li>       . (   )</li>\n</ol>\n<h4 id=\"Android-Annotation-Processor--\"><a href=\"#Android-Annotation-Processor--\" class=\"headerlink\" title=\"Android Annotation Processor  \"></a>Android Annotation Processor  </h4><p><strong>Room</strong> </p>\n<p>Android SQLite    Room  Annotation Processor  .</p>\n<p>   User  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// User.kt</span></span><br><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"keyword\">data</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span></span>(</span><br><span class=\"line\">    <span class=\"meta\">@PrimaryKey</span> <span class=\"keyword\">val</span> uid: <span class=\"built_in\">Int</span>,</span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = <span class=\"meta-string\">&quot;first_name&quot;</span>)</span> <span class=\"keyword\">val</span> firstName: String?,</span><br><span class=\"line\">    <span class=\"meta\">@ColumnInfo(name = <span class=\"meta-string\">&quot;last_name&quot;</span>)</span> <span class=\"keyword\">val</span> lastName: String?</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// UserDao.kt</span></span><br><span class=\"line\"><span class=\"meta\">@Dao</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Query(<span class=\"meta-string\">&quot;SELECT * FROM user&quot;</span>)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getAll</span><span class=\"params\">()</span></span>: List&lt;User&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Query(<span class=\"meta-string\">&quot;SELECT * FROM user WHERE uid IN (:userIds)&quot;</span>)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">loadAllByIds</span><span class=\"params\">(userIds: <span class=\"type\">IntArray</span>)</span></span>: List&lt;User&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Query(<span class=\"meta-string\">&quot;SELECT * FROM user WHERE first_name LIKE :first AND &quot;</span> +</span></span><br><span class=\"line\"><span class=\"meta\">            <span class=\"meta-string\">&quot;last_name LIKE :last LIMIT 1&quot;</span>)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">findByName</span><span class=\"params\">(first: <span class=\"type\">String</span>, last: <span class=\"type\">String</span>)</span></span>: User</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Insert</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">insertAll</span><span class=\"params\">(<span class=\"keyword\">vararg</span> users: <span class=\"type\">User</span>)</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Delete</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">delete</span><span class=\"params\">(user: <span class=\"type\">User</span>)</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// AppDatabase.kt</span></span><br><span class=\"line\"><span class=\"meta\">@Database(entities = arrayOf(User::class)</span>, version = <span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppDatabase</span> : <span class=\"type\">RoomDatabase</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">userDao</span><span class=\"params\">()</span></span>: UserDao</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>   Annotation <code>@Entity</code>, <code>@PrimaryKey</code>, <code>@ColumnInfo</code>, <code>@Dao</code>, <code>@Query</code>, <code>@Insert</code>, <code>@Delete</code>.</p>\n<p> Annotation  .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Entity.java</span></span><br><span class=\"line\"><span class=\"meta\">@Target(ElementType.TYPE)</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(RetentionPolicy.CLASS)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> Entity &#123;</span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">tableName</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> &quot;&quot;</span>;</span><br><span class=\"line\">    Index[] indices() <span class=\"keyword\">default</span> &#123;&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">inheritSuperIndices</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> <span class=\"keyword\">false</span></span>;</span><br><span class=\"line\">    String[] primaryKeys() <span class=\"keyword\">default</span> &#123;&#125;;</span><br><span class=\"line\">    ForeignKey[] foreignKeys() <span class=\"keyword\">default</span> &#123;&#125;;</span><br><span class=\"line\">    String[] ignoredColumns() <span class=\"keyword\">default</span> &#123;&#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// PrimaryKey.java</span></span><br><span class=\"line\"><span class=\"meta\">@Target(&#123;ElementType.FIELD, ElementType.METHOD&#125;)</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(RetentionPolicy.CLASS)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> PrimaryKey &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">autoGenerate</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> <span class=\"keyword\">false</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ColumnInfo.java</span></span><br><span class=\"line\"><span class=\"meta\">@Target(&#123;ElementType.FIELD, ElementType.METHOD&#125;)</span></span><br><span class=\"line\"><span class=\"meta\">@Retention(RetentionPolicy.CLASS)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> ColumnInfo &#123;</span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">name</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> INHERIT_FIELD_NAME</span>;</span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings(&quot;unused&quot;)</span> <span class=\"meta\">@SQLiteTypeAffinity</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">typeAffinity</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> UNDEFINED</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">index</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> <span class=\"keyword\">false</span></span>;</span><br><span class=\"line\">    <span class=\"function\">String <span class=\"title\">defaultValue</span><span class=\"params\">()</span> <span class=\"keyword\">default</span> VALUE_UNSPECIFIED</span>;</span><br><span class=\"line\">    String INHERIT_FIELD_NAME = <span class=\"string\">&quot;[field-name]&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> UNDEFINED = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> TEXT = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> INTEGER = <span class=\"number\">3</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> REAL = <span class=\"number\">4</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> BLOB = <span class=\"number\">5</span>;</span><br><span class=\"line\">    <span class=\"meta\">@IntDef(&#123;UNDEFINED, TEXT, INTEGER, REAL, BLOB&#125;)</span></span><br><span class=\"line\">    <span class=\"meta\">@Retention(RetentionPolicy.CLASS)</span></span><br><span class=\"line\">    <span class=\"meta\">@interface</span> SQLiteTypeAffinity &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> UNSPECIFIED = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> BINARY = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> NOCASE = <span class=\"number\">3</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> RTRIM = <span class=\"number\">4</span>;</span><br><span class=\"line\">    <span class=\"meta\">@RequiresApi(21)</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> LOCALIZED = <span class=\"number\">5</span>;</span><br><span class=\"line\">    <span class=\"meta\">@RequiresApi(21)</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> UNICODE = <span class=\"number\">6</span>;</span><br><span class=\"line\">    <span class=\"meta\">@IntDef(&#123;UNSPECIFIED, BINARY, NOCASE, RTRIM, LOCALIZED, UNICODE&#125;)</span></span><br><span class=\"line\">    <span class=\"meta\">@Retention(RetentionPolicy.CLASS)</span></span><br><span class=\"line\">    <span class=\"meta\">@interface</span> Collate &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    String VALUE_UNSPECIFIED = <span class=\"string\">&quot;[value-unspecified]&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>@Dao</code>, <code>@Query</code>, <code>@Insert</code>, <code>@Delete</code>  Annotation  ,     .</p>\n<p> <strong>Room</strong>     <strong>Dagger</strong>, <strong>Glide</strong>   Annotation(Processor)  . </p>\n<br>\n<br>\n<br>\n\n<h2 id=\"KAPT-Kotlin-Annotation-Processing-Tool\"><a href=\"#KAPT-Kotlin-Annotation-Processing-Tool\" class=\"headerlink\" title=\"KAPT (Kotlin Annotation Processing Tool)\"></a>KAPT (Kotlin Annotation Processing Tool)</h2><p>     javac  kotlinc    Java   (AbstractProcessor)  . </p>\n<p>      <a href=\"https://kotlinlang.org/docs/kapt.html\">KAPT(Kotlin Annotation Processing Tool)</a> . </p>\n<p>KAPT    build.gradle    .</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Groovy DSL</span></span><br><span class=\"line\">apply <span class=\"attr\">plugin:</span> <span class=\"string\">&#x27;kotlin-android&#x27;</span></span><br><span class=\"line\">apply <span class=\"attr\">plugin:</span> <span class=\"string\">&#x27;kotlin-kapt&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>  kotlin-android    kotlin-kapt   .</p>\n<p>Annotation processor       .</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies &#123;</span><br><span class=\"line\"> <span class=\"comment\">//  annotationProcessor  kapt </span></span><br><span class=\"line\"> <span class=\"comment\">// annotationProcessor &#x27;groupId:artifactId:version&#x27;</span></span><br><span class=\"line\">    kapt <span class=\"string\">&#x27;groupId:artifactId:version&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>hilt    .</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies&#123;</span><br><span class=\"line\">  <span class=\"comment\">//annotationProcessor &quot;com.google.dagger:hilt-android-compiler:$hilt_version&quot;</span></span><br><span class=\"line\">  kapt <span class=\"string\">&quot;com.google.dagger:hilt-android-compiler:$hilt_version&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Pluggable-Annotation-Processing-API-JSR-269\"><a href=\"#Pluggable-Annotation-Processing-API-JSR-269\" class=\"headerlink\" title=\"Pluggable Annotation Processing API (JSR#269)\"></a>Pluggable Annotation Processing API (JSR#269)</h3><p>        .</p>\n<p>       API ,     JSR 269.</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://jcp.org/en/jsr/detail?id=269\">JSR 269 : Pluggable Annotation Processing API in JCP</a></p>\n</blockquote>\n<p>  API    ,    , ,     </p>\n<p>        .</p>\n<p>    ,  (=Stub)  .</p>\n<p>     ,        <code>*.class</code> .</p>\n<p>          .</p>\n<p>,    Processor     ,       <strong>KAPT</strong>  .</p>\n<p><strong>KAPT</strong>  APT  Stub          .</p>\n<p>    <strong>KAPT</strong>   Android DI   Dagger Databinding        .</p>\n<p> <strong>KAPT</strong>  APT   Stub             .</p>\n<p>  ,      <strong>KSP</strong>    .</p>"},{"title":"Kotlin Symbol Processing Api Part 2  What is it?","date":"2021-07-20T17:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_ksp.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n## KSP ?\n\n**KSP(Kotlin Symbol Processing)**  2021 2 10          API. \n\n  ,       API .     ,  1.4.30   . \n\nKSP      ,     . \n\n KSP   ,      . \n\nAPI    symbol      . \n\nKSP       ,  ,                . \n\n KSP Kotlin  KType . API           ,      .\n\nKAPT   KSP  [Annotation Processor](https://www.charlezz.com/?p=1167)  **2**     . \n\n  [Google KSP repository](https://github.com/google/ksp)      . \n\n###  KSP  ?\n\n           . \n\n                .. \n\n , Boiler Plate  Parcelble           . \n\n               . \n\n                      .\n\n     KSP             .\n\n JVM  ,     .\n\n KSP      .\n\nGlide    Processor  KSP KAPT     25%   .\n\n#### **kotlinc**   \n\n`kotlinc`        ,         .  KSP     api     .       `kotlinc`    ,        .\n\n#### **kotlin.reflect**  \n\nKSP `kotlin.reflect`  , KSP      .\n\n### KSP \n\nKSP  Annotation Processor           .\n\n   KSP    .\n\n1.      \n2.   \n3. Java Annotation Processing API 100% \n4. IDE  ( IDE     )\n\n 4  Android Studio KSP         .\n\n```kotlin\nbuild/generated/ksp/debug/kotlin\n```\n\nbuild.gradle.kts \n\n```kotlin\nandroid {\n    buildTypes {\n        getByName(\"debug\") {\n            sourceSets {\n                getByName(\"main\") {\n                    java.srcDir(File(\"build/generated/ksp/debug/kotlin\"))\n                }\n            }\n        }\n    }\n}\n```\n\n### KSP  \n\n{% asset_img ClassDiagram.svg [ClassDiagram] %}\n\n     ,     .\n\n> **** [KSP API definition](https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp)\n\n> **** [KSP Symbol definition](https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp/symbol)\n\nKSP    .\n\n KSP    .\n\n#### KSP   \n\nKSP         .\n\n `KS` prefix , kotlin        .\n\n\n```kotlin\nKSFile\n    /**\n     * File \n     * - Package Name / File Name /  Anootation \n     * - simpleName, qualifiedName    \n     */\n    packageName: KSName\n    fileName: String\n    annotations: List<KSAnnotation>  (File annotations)\n    declarations: List<KSDeclaration>\n   \n    /**\n     * Class / Interface / Object\n     */\n    KSClassDeclaration\n        simpleName: KSName\n        qualifiedName: KSName\n        containingFile: String\n        typeParameters: KSTypeParameter\n        parentDeclaration: KSDeclaration\n        classKind: ClassKind\n        primaryConstructor: KSFunctionDeclaration\n        superTypes: List<KSTypeReference>\n        declarations: List<KSDeclaration> // contains inner classes, member functions, properties, etc.\n\n    /**\n     * Top-Level Funtion\n     */\n    KSFunctionDeclaration\n        simpleName: KSName\n        qualifiedName: KSName\n        containingFile: String\n        typeParameters: KSTypeParameter\n        parentDeclaration: KSDeclaration\n        functionKind: FunctionKind\n        extensionReceiver: KSTypeReference?\n        returnType: KSTypeReference\n        parameters: List<KSValueParameter>\n        declarations: List<KSDeclaration> // contains local classes, local functions, local variables, etc.\n\n    /*\n     * Global Variable\n     */\n    KSPropertyDeclaration \n        simpleName: KSName\n    qualifiedName: KSName\n    containingFile: String\n    typeParameters: KSTypeParameter\n    parentDeclaration: KSDeclaration\n    extensionReceiver: KSTypeReference?\n    type: KSTypeReference\n    getter: KSPropertyGetter\n        returnType: KSTypeReference\n    setter: KSPropertySetter\n        parameter: KSValueParameter\n```\n\n      .\n\n`AppcompatActivity`  `SampleActivity`  , \n\nAnnotation  ` ` , ,   ,    .   Activity  .\n\n``` kotlin\n// KSFile\npackage com.jshme.kspsample\n\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\n\n@TestAnnotation //KClassDeclaration \nclass SampleActivity : AppCompatActivity() {\n\n    @Test //KSPropertyDeclaration\n    var number: Int = 0\n\n    @Test //KSPropertyDeclaration\n    var str: String = \"\"\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_sample)\n        \n        number = 2\n        str = \"Test Sample\"\n    }\n}\n```\n\n`@TestAnnotation`      KClassDeclaration  , \n\n@Test`    KSPropertyDeclaration  .    , ,   `KSDeclaration`   . \n\n    `KSClassDeclaration`, `KSFunctionDeclaration`, `KSPropertyDeclaration` \n\n    `KSDeclaration`       ,        .\n\n#### KSP   \n\nKSP          .\n\n`KSFunctionDeclaration.returnType`  `KSAnnotation.annotationType`    , \n\n  annotation modifier  `KSReferenceElement`  `KSTypeReference`.\n\n```kotlin\ninterface KSFunctionDeclaration : ... {\n    val returnType: KSTypeReference?\n    ...\n}\n\ninterface KSTypeReference : KSAnnotated, KSModifierListOwner {\n    val type: KSReferenceElement\n}\n```\n\n`KSTypeReference` Kotlin   `KSType` `resolve()`  , Kotlin   `KSReferenceElement`  .\n\n `KSReferenceElement`.\n\n\n```kotlin\ninterface KSReferenceElement : KSNode {\n    val typeArguments: List<KSTypeArgument>\n}\n```\n\n`KSReferenceElement`      `KSClassifierReference`  `KSCallableReference`   .\n\n```kotlin\ninterface KSClassifierReference : KSReferenceElement {\n    val qualifier: KSClassifierReference?\n    fun referencedName(): String\n\n    override fun <D, R> accept(visitor: KSVisitor<D, R>, data: D): R {\n        return visitor.visitClassifierReference(this, data)\n    }\n}\n```\n\n  `KSClassifierReference` `referencedName`   ,\n\n```kotlin\ninterface KSCallableReference : KSReferenceElement {\n    val receiverType: KSTypeReference?\n    val functionParameters: List<KSValueParameter>\n    val returnType: KSTypeReference\n\n    override fun <D, R> accept(visitor: KSVisitor<D, R>, data: D): R {\n        return visitor.visitCallableReference(this, data)\n    }\n}\n```\n\n`KSCallableReference` `receiverType` `functionArguments`  `returnType`  .\n\n`KSTypeReference`         .\n\n```kotlin\nKSTypeReference -> .resolve() -> KSType -> .declaration -> KSDeclaration\n```\n\n`resolve()`  `KSType` , `declaration`   `KSDeclaration`  .\n\n#### Java Annotation Processing  KSP \n\n Annotation processor        .    .\n\n> **** [Github ksp#references](https://github.com/google/ksp/blob/main/docs/reference.md)\n\n<br>\n<br>\n<br>\n\n## KSP  \n\nKSP repository playground ,  repo          .\n\n  ksp repository QuickStart  .\n\n> **** [Github ksp#quickstart](https://github.com/google/ksp/blob/main/docs/quickstart.md)\n\nKSP      .\n\n**Step 1**\nYou'll need to implement `com.google.devtools.ksp.processing.SymbolProcessor` and `com.google.devtools.ksp.processing.SymbolProcessorProvider`. \n\nYour implementation of `SymbolProcessorProvider` will be loaded as a service to instantiate the `SymbolProcessor` you implement.\n\n `SymbolProcessor`   .\n\n```kotlin\n// BuilderProcessor.kt\nclass BuilderProcessor(\n    val codeGenerator: CodeGenerator,\n    val logger: KSPLogger\n) : SymbolProcessor {\n    // ...\n}\n```\n\n `SymbolProcessorProvider`   .\n\n```kotlin\n// BuilderProcessorProvider.kt\nclass BuilderProcessorProvider : SymbolProcessorProvider {\n    // ...\n}\n```\n\n**Step 2**\nImplement `SymbolProcessorProvider.create()` to create a `SymbolProcessor`. \n\nDependencies your processor needs (e.g. `CodeGenerator`, processor options) are passed through the parameters of `SymbolProcessorProvider.create()`.\n\n`BuilderProcessorProvider`  `SymbolProcessorProvider.create()`  .\n\n```kotlin\n// BuilderProcessorProvider.kt\nclass BuilderProcessorProvider : SymbolProcessorProvider {\n    override fun create(environment: SymbolProcessorEnvironment): SymbolProcessor {\n        return BuilderProcessor(environment.codeGenerator, environment.logger)\n    }\n}\n```\n\n**Step 3**\nYour main logic should be in the SymbolProcessor.process() method.\n\n`BuilderProcessor`   `SymbolProcessor.process()`   .\n\n```kotlin\nclass BuilderProcessor : SymbolProcessor {\n\n    override fun process(resolver: Resolver): List<KSAnnotated> {\n        // ...\n    }\n    // ...\n}\n```\n\n**Step 4**\nUse resolver.getSymbolsWithAnnotation() to get the symbols you want to process, given the fully-qualified name of an annotation.\n\nStep 3  `BuilderProcessor`  `process()`   `resolver` `getSymbolsWithAnnotation()`   KSP .\n\n```kotlin\nclass BuilderProcessor(\n    val codeGenerator: CodeGenerator,\n    val logger: KSPLogger\n) : SymbolProcessor {\n\n    override fun process(resolver: Resolver): List<KSAnnotated> {\n        val symbols = resolver.getSymbolsWithAnnotation(\"android.deepdive.ksp.builder.Builder\")\n        val ret = symbols.filter { !it.validate() }.toList()\n\n        symbols\n            .filter { it is KSClassDeclaration && it.validate() }\n            .forEach { it.accept(BuilderVisitor(), Unit) }\n        return ret\n    }\n    // ...\n}\n```\n\n**Step 5**\nA common use case for KSP is to implement a customized visitor (interface com.google.devtools.ksp.symbol.KSVisitor) for operating on symbols. A simple template visitor is com.google.devtools.ksp.symbol.KSDefaultVisitor.\n\n`com.google.devtools.ksp.symbol.KSDefaultVisitor`  Visiter  .\n\n```kotlin\nclass BuilderProcessor(\n    val codeGenerator: CodeGenerator,\n    val logger: KSPLogger\n) : SymbolProcessor {\n    // ...\n    inner class BuilderVisitor : KSVisitorVoid() {\n        override fun visitClassDeclaration(classDeclaration: KSClassDeclaration, data: Unit) {\n            classDeclaration.primaryConstructor!!.accept(this, data)\n        }\n\n        override fun visitFunctionDeclaration(function: KSFunctionDeclaration, data: Unit) {\n            val parent = function.parentDeclaration as KSClassDeclaration\n            val packageName = parent.containingFile!!.packageName.asString()\n            val className = \"${parent.simpleName.asString()}Builder\"\n            val file = codeGenerator.createNewFile(Dependencies(true, function.containingFile!!), packageName, className)\n\n            file.appendText(\"package $packageName\\n\\n\")\n            file.appendText(\"import HELLO\\n\\n\")\n            file.appendText(\"class $className{\\n\")\n\n            function.parameters.forEach {\n                val name = it.name!!.asString()\n                val typeName = StringBuilder(it.type.resolve().declaration.qualifiedName?.asString() ?: \"<ERROR>\")\n                val typeArgs = it.type.element!!.typeArguments\n\n                if (it.type.element!!.typeArguments.isNotEmpty()) {\n                    typeName.append(\"<\")\n                    typeName.append(\n                        typeArgs.map {\n                            val type = it.type?.resolve()\n                            \"${it.variance.label} ${type?.declaration?.qualifiedName?.asString() ?: \"ERROR\"}\" +\n                                    if (type?.nullability == Nullability.NULLABLE) \"?\" else \"\"\n                        }.joinToString(\", \")\n                    )\n                    typeName.append(\">\")\n                }\n                file.appendText(\"    private var $name: $typeName? = null\\n\")\n                file.appendText(\"    internal fun with${name.capitalize()}($name: $typeName): $className {\\n\")\n                file.appendText(\"        this.$name = $name\\n\")\n                file.appendText(\"        return this\\n\")\n                file.appendText(\"    }\\n\\n\")\n            }\n\n            file.appendText(\"    internal fun build(): ${parent.qualifiedName!!.asString()} {\\n\")\n            file.appendText(\"        return ${parent.qualifiedName!!.asString()}(\")\n            file.appendText(\n                function.parameters.map {\n                    \"${it.name!!.asString()}!!\"\n                }.joinToString(\", \")\n            )\n            file.appendText(\")\\n\")\n            file.appendText(\"    }\\n\")\n            file.appendText(\"}\\n\")\n            file.close()\n        }\n    }\n    // ...\n}\n```\n\n**Step 6**\nFor sample implementations of the SymbolProcessorProvider and SymbolProcessor interfaces, see the following files in the sample project.\n- src/main/kotlin/BuilderProcessor.kt\n- src/main/kotlin/TestProcessor.kt\n\n   .\n\n- src/main/java/android/deepdive/ksp/builder/BuilderProcessor.kt\n- src/main/java/android/deepdive/ksp/builder/BuilderProcessorProvider.kt\n\n**Step 7**\nAfter writing your own processor, register your processor provider to the package by including its fully-qualified name in resources/META-INF/services/com.google.devtools.ksp.processing.SymbolProcessorProvider.\n\n`META-INF`  `BuilderProcessorProvider` path .\n\n```\n// path : src/main/resources/META-INF/services/com.google.devtools.ksp.processing.SymbolProcessorProvider\nandroid.deepdive.ksp.builder.BuilderProcessorProvider\n```\n\n    KSP     .\n\n- [Android Deep Dive#Kotlin-Symbol-Processing-Api](https://github.com/AndroidDeepDive/ADD-Kotlin-Symbol-Processing-Api)\n- [Charlezz#IntentBuilderSample](https://github.com/Charlezz/IntentBuilderSample)\n- [SODA1127#KSPImplementationExample](https://github.com/SODA1127/KSPImplementationExample)\n- [jsh-me#KSPWebViewLoader](https://github.com/jsh-me/KSPWebViewLoader)","source":"_posts/2021-07-21 Kotlin Symbol Processing Api Part 2.md","raw":"---\ntitle: Kotlin Symbol Processing Api Part 2  What is it?\ndate: 2021-07-21 02:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_ksp.png\ncategories:\n- KSP\ntags:\n- KSP\n- Kotlin\n- Symbol\n- Processing\n- KAPT\n- Annotation\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n## KSP ?\n\n**KSP(Kotlin Symbol Processing)**  2021 2 10          API. \n\n  ,       API .     ,  1.4.30   . \n\nKSP      ,     . \n\n KSP   ,      . \n\nAPI    symbol      . \n\nKSP       ,  ,                . \n\n KSP Kotlin  KType . API           ,      .\n\nKAPT   KSP  [Annotation Processor](https://www.charlezz.com/?p=1167)  **2**     . \n\n  [Google KSP repository](https://github.com/google/ksp)      . \n\n###  KSP  ?\n\n           . \n\n                .. \n\n , Boiler Plate  Parcelble           . \n\n               . \n\n                      .\n\n     KSP             .\n\n JVM  ,     .\n\n KSP      .\n\nGlide    Processor  KSP KAPT     25%   .\n\n#### **kotlinc**   \n\n`kotlinc`        ,         .  KSP     api     .       `kotlinc`    ,        .\n\n#### **kotlin.reflect**  \n\nKSP `kotlin.reflect`  , KSP      .\n\n### KSP \n\nKSP  Annotation Processor           .\n\n   KSP    .\n\n1.      \n2.   \n3. Java Annotation Processing API 100% \n4. IDE  ( IDE     )\n\n 4  Android Studio KSP         .\n\n```kotlin\nbuild/generated/ksp/debug/kotlin\n```\n\nbuild.gradle.kts \n\n```kotlin\nandroid {\n    buildTypes {\n        getByName(\"debug\") {\n            sourceSets {\n                getByName(\"main\") {\n                    java.srcDir(File(\"build/generated/ksp/debug/kotlin\"))\n                }\n            }\n        }\n    }\n}\n```\n\n### KSP  \n\n{% asset_img ClassDiagram.svg [ClassDiagram] %}\n\n     ,     .\n\n> **** [KSP API definition](https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp)\n\n> **** [KSP Symbol definition](https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp/symbol)\n\nKSP    .\n\n KSP    .\n\n#### KSP   \n\nKSP         .\n\n `KS` prefix , kotlin        .\n\n\n```kotlin\nKSFile\n    /**\n     * File \n     * - Package Name / File Name /  Anootation \n     * - simpleName, qualifiedName    \n     */\n    packageName: KSName\n    fileName: String\n    annotations: List<KSAnnotation>  (File annotations)\n    declarations: List<KSDeclaration>\n   \n    /**\n     * Class / Interface / Object\n     */\n    KSClassDeclaration\n        simpleName: KSName\n        qualifiedName: KSName\n        containingFile: String\n        typeParameters: KSTypeParameter\n        parentDeclaration: KSDeclaration\n        classKind: ClassKind\n        primaryConstructor: KSFunctionDeclaration\n        superTypes: List<KSTypeReference>\n        declarations: List<KSDeclaration> // contains inner classes, member functions, properties, etc.\n\n    /**\n     * Top-Level Funtion\n     */\n    KSFunctionDeclaration\n        simpleName: KSName\n        qualifiedName: KSName\n        containingFile: String\n        typeParameters: KSTypeParameter\n        parentDeclaration: KSDeclaration\n        functionKind: FunctionKind\n        extensionReceiver: KSTypeReference?\n        returnType: KSTypeReference\n        parameters: List<KSValueParameter>\n        declarations: List<KSDeclaration> // contains local classes, local functions, local variables, etc.\n\n    /*\n     * Global Variable\n     */\n    KSPropertyDeclaration \n        simpleName: KSName\n    qualifiedName: KSName\n    containingFile: String\n    typeParameters: KSTypeParameter\n    parentDeclaration: KSDeclaration\n    extensionReceiver: KSTypeReference?\n    type: KSTypeReference\n    getter: KSPropertyGetter\n        returnType: KSTypeReference\n    setter: KSPropertySetter\n        parameter: KSValueParameter\n```\n\n      .\n\n`AppcompatActivity`  `SampleActivity`  , \n\nAnnotation  ` ` , ,   ,    .   Activity  .\n\n``` kotlin\n// KSFile\npackage com.jshme.kspsample\n\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\n\n@TestAnnotation //KClassDeclaration \nclass SampleActivity : AppCompatActivity() {\n\n    @Test //KSPropertyDeclaration\n    var number: Int = 0\n\n    @Test //KSPropertyDeclaration\n    var str: String = \"\"\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_sample)\n        \n        number = 2\n        str = \"Test Sample\"\n    }\n}\n```\n\n`@TestAnnotation`      KClassDeclaration  , \n\n@Test`    KSPropertyDeclaration  .    , ,   `KSDeclaration`   . \n\n    `KSClassDeclaration`, `KSFunctionDeclaration`, `KSPropertyDeclaration` \n\n    `KSDeclaration`       ,        .\n\n#### KSP   \n\nKSP          .\n\n`KSFunctionDeclaration.returnType`  `KSAnnotation.annotationType`    , \n\n  annotation modifier  `KSReferenceElement`  `KSTypeReference`.\n\n```kotlin\ninterface KSFunctionDeclaration : ... {\n    val returnType: KSTypeReference?\n    ...\n}\n\ninterface KSTypeReference : KSAnnotated, KSModifierListOwner {\n    val type: KSReferenceElement\n}\n```\n\n`KSTypeReference` Kotlin   `KSType` `resolve()`  , Kotlin   `KSReferenceElement`  .\n\n `KSReferenceElement`.\n\n\n```kotlin\ninterface KSReferenceElement : KSNode {\n    val typeArguments: List<KSTypeArgument>\n}\n```\n\n`KSReferenceElement`      `KSClassifierReference`  `KSCallableReference`   .\n\n```kotlin\ninterface KSClassifierReference : KSReferenceElement {\n    val qualifier: KSClassifierReference?\n    fun referencedName(): String\n\n    override fun <D, R> accept(visitor: KSVisitor<D, R>, data: D): R {\n        return visitor.visitClassifierReference(this, data)\n    }\n}\n```\n\n  `KSClassifierReference` `referencedName`   ,\n\n```kotlin\ninterface KSCallableReference : KSReferenceElement {\n    val receiverType: KSTypeReference?\n    val functionParameters: List<KSValueParameter>\n    val returnType: KSTypeReference\n\n    override fun <D, R> accept(visitor: KSVisitor<D, R>, data: D): R {\n        return visitor.visitCallableReference(this, data)\n    }\n}\n```\n\n`KSCallableReference` `receiverType` `functionArguments`  `returnType`  .\n\n`KSTypeReference`         .\n\n```kotlin\nKSTypeReference -> .resolve() -> KSType -> .declaration -> KSDeclaration\n```\n\n`resolve()`  `KSType` , `declaration`   `KSDeclaration`  .\n\n#### Java Annotation Processing  KSP \n\n Annotation processor        .    .\n\n> **** [Github ksp#references](https://github.com/google/ksp/blob/main/docs/reference.md)\n\n<br>\n<br>\n<br>\n\n## KSP  \n\nKSP repository playground ,  repo          .\n\n  ksp repository QuickStart  .\n\n> **** [Github ksp#quickstart](https://github.com/google/ksp/blob/main/docs/quickstart.md)\n\nKSP      .\n\n**Step 1**\nYou'll need to implement `com.google.devtools.ksp.processing.SymbolProcessor` and `com.google.devtools.ksp.processing.SymbolProcessorProvider`. \n\nYour implementation of `SymbolProcessorProvider` will be loaded as a service to instantiate the `SymbolProcessor` you implement.\n\n `SymbolProcessor`   .\n\n```kotlin\n// BuilderProcessor.kt\nclass BuilderProcessor(\n    val codeGenerator: CodeGenerator,\n    val logger: KSPLogger\n) : SymbolProcessor {\n    // ...\n}\n```\n\n `SymbolProcessorProvider`   .\n\n```kotlin\n// BuilderProcessorProvider.kt\nclass BuilderProcessorProvider : SymbolProcessorProvider {\n    // ...\n}\n```\n\n**Step 2**\nImplement `SymbolProcessorProvider.create()` to create a `SymbolProcessor`. \n\nDependencies your processor needs (e.g. `CodeGenerator`, processor options) are passed through the parameters of `SymbolProcessorProvider.create()`.\n\n`BuilderProcessorProvider`  `SymbolProcessorProvider.create()`  .\n\n```kotlin\n// BuilderProcessorProvider.kt\nclass BuilderProcessorProvider : SymbolProcessorProvider {\n    override fun create(environment: SymbolProcessorEnvironment): SymbolProcessor {\n        return BuilderProcessor(environment.codeGenerator, environment.logger)\n    }\n}\n```\n\n**Step 3**\nYour main logic should be in the SymbolProcessor.process() method.\n\n`BuilderProcessor`   `SymbolProcessor.process()`   .\n\n```kotlin\nclass BuilderProcessor : SymbolProcessor {\n\n    override fun process(resolver: Resolver): List<KSAnnotated> {\n        // ...\n    }\n    // ...\n}\n```\n\n**Step 4**\nUse resolver.getSymbolsWithAnnotation() to get the symbols you want to process, given the fully-qualified name of an annotation.\n\nStep 3  `BuilderProcessor`  `process()`   `resolver` `getSymbolsWithAnnotation()`   KSP .\n\n```kotlin\nclass BuilderProcessor(\n    val codeGenerator: CodeGenerator,\n    val logger: KSPLogger\n) : SymbolProcessor {\n\n    override fun process(resolver: Resolver): List<KSAnnotated> {\n        val symbols = resolver.getSymbolsWithAnnotation(\"android.deepdive.ksp.builder.Builder\")\n        val ret = symbols.filter { !it.validate() }.toList()\n\n        symbols\n            .filter { it is KSClassDeclaration && it.validate() }\n            .forEach { it.accept(BuilderVisitor(), Unit) }\n        return ret\n    }\n    // ...\n}\n```\n\n**Step 5**\nA common use case for KSP is to implement a customized visitor (interface com.google.devtools.ksp.symbol.KSVisitor) for operating on symbols. A simple template visitor is com.google.devtools.ksp.symbol.KSDefaultVisitor.\n\n`com.google.devtools.ksp.symbol.KSDefaultVisitor`  Visiter  .\n\n```kotlin\nclass BuilderProcessor(\n    val codeGenerator: CodeGenerator,\n    val logger: KSPLogger\n) : SymbolProcessor {\n    // ...\n    inner class BuilderVisitor : KSVisitorVoid() {\n        override fun visitClassDeclaration(classDeclaration: KSClassDeclaration, data: Unit) {\n            classDeclaration.primaryConstructor!!.accept(this, data)\n        }\n\n        override fun visitFunctionDeclaration(function: KSFunctionDeclaration, data: Unit) {\n            val parent = function.parentDeclaration as KSClassDeclaration\n            val packageName = parent.containingFile!!.packageName.asString()\n            val className = \"${parent.simpleName.asString()}Builder\"\n            val file = codeGenerator.createNewFile(Dependencies(true, function.containingFile!!), packageName, className)\n\n            file.appendText(\"package $packageName\\n\\n\")\n            file.appendText(\"import HELLO\\n\\n\")\n            file.appendText(\"class $className{\\n\")\n\n            function.parameters.forEach {\n                val name = it.name!!.asString()\n                val typeName = StringBuilder(it.type.resolve().declaration.qualifiedName?.asString() ?: \"<ERROR>\")\n                val typeArgs = it.type.element!!.typeArguments\n\n                if (it.type.element!!.typeArguments.isNotEmpty()) {\n                    typeName.append(\"<\")\n                    typeName.append(\n                        typeArgs.map {\n                            val type = it.type?.resolve()\n                            \"${it.variance.label} ${type?.declaration?.qualifiedName?.asString() ?: \"ERROR\"}\" +\n                                    if (type?.nullability == Nullability.NULLABLE) \"?\" else \"\"\n                        }.joinToString(\", \")\n                    )\n                    typeName.append(\">\")\n                }\n                file.appendText(\"    private var $name: $typeName? = null\\n\")\n                file.appendText(\"    internal fun with${name.capitalize()}($name: $typeName): $className {\\n\")\n                file.appendText(\"        this.$name = $name\\n\")\n                file.appendText(\"        return this\\n\")\n                file.appendText(\"    }\\n\\n\")\n            }\n\n            file.appendText(\"    internal fun build(): ${parent.qualifiedName!!.asString()} {\\n\")\n            file.appendText(\"        return ${parent.qualifiedName!!.asString()}(\")\n            file.appendText(\n                function.parameters.map {\n                    \"${it.name!!.asString()}!!\"\n                }.joinToString(\", \")\n            )\n            file.appendText(\")\\n\")\n            file.appendText(\"    }\\n\")\n            file.appendText(\"}\\n\")\n            file.close()\n        }\n    }\n    // ...\n}\n```\n\n**Step 6**\nFor sample implementations of the SymbolProcessorProvider and SymbolProcessor interfaces, see the following files in the sample project.\n- src/main/kotlin/BuilderProcessor.kt\n- src/main/kotlin/TestProcessor.kt\n\n   .\n\n- src/main/java/android/deepdive/ksp/builder/BuilderProcessor.kt\n- src/main/java/android/deepdive/ksp/builder/BuilderProcessorProvider.kt\n\n**Step 7**\nAfter writing your own processor, register your processor provider to the package by including its fully-qualified name in resources/META-INF/services/com.google.devtools.ksp.processing.SymbolProcessorProvider.\n\n`META-INF`  `BuilderProcessorProvider` path .\n\n```\n// path : src/main/resources/META-INF/services/com.google.devtools.ksp.processing.SymbolProcessorProvider\nandroid.deepdive.ksp.builder.BuilderProcessorProvider\n```\n\n    KSP     .\n\n- [Android Deep Dive#Kotlin-Symbol-Processing-Api](https://github.com/AndroidDeepDive/ADD-Kotlin-Symbol-Processing-Api)\n- [Charlezz#IntentBuilderSample](https://github.com/Charlezz/IntentBuilderSample)\n- [SODA1127#KSPImplementationExample](https://github.com/SODA1127/KSPImplementationExample)\n- [jsh-me#KSPWebViewLoader](https://github.com/jsh-me/KSPWebViewLoader)","slug":"2021-07-21 Kotlin Symbol Processing Api Part 2","published":1,"updated":"2021-08-13T14:40:08.375Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7lx001x3lreg56deplf","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<span id=\"more\"></span>\n\n<h2 id=\"KSP-\"><a href=\"#KSP-\" class=\"headerlink\" title=\"KSP ?\"></a>KSP ?</h2><p><strong>KSP(Kotlin Symbol Processing)</strong>  2021 2 10          API. </p>\n<p>  ,       API .     ,  1.4.30   . </p>\n<p>KSP      ,     . </p>\n<p> KSP   ,      . </p>\n<p>API    symbol      . </p>\n<p>KSP       ,  ,                . </p>\n<p> KSP Kotlin  KType . API           ,      .</p>\n<p>KAPT   KSP  <a href=\"https://www.charlezz.com/?p=1167\">Annotation Processor</a>  <strong>2</strong>     . </p>\n<p>  <a href=\"https://github.com/google/ksp\">Google KSP repository</a>      . </p>\n<h3 id=\"-KSP--\"><a href=\"#-KSP--\" class=\"headerlink\" title=\" KSP  ?\"></a> KSP  ?</h3><p>           . </p>\n<p>                .. </p>\n<p> , Boiler Plate  Parcelble           . </p>\n<p>               . </p>\n<p>                      .</p>\n<p>     KSP             .</p>\n<p> JVM  ,     .</p>\n<p> KSP      .</p>\n<p>Glide    Processor  KSP KAPT     25%   .</p>\n<h4 id=\"kotlinc---\"><a href=\"#kotlinc---\" class=\"headerlink\" title=\"kotlinc   \"></a><strong>kotlinc</strong>   </h4><p><code>kotlinc</code>        ,         .  KSP     api     .       <code>kotlinc</code>    ,        .</p>\n<h4 id=\"kotlin-reflect--\"><a href=\"#kotlin-reflect--\" class=\"headerlink\" title=\"kotlin.reflect  \"></a><strong>kotlin.reflect</strong>  </h4><p>KSP <code>kotlin.reflect</code>  , KSP      .</p>\n<h3 id=\"KSP-\"><a href=\"#KSP-\" class=\"headerlink\" title=\"KSP \"></a>KSP </h3><p>KSP  Annotation Processor           .</p>\n<p>   KSP    .</p>\n<ol>\n<li>     </li>\n<li>  </li>\n<li>Java Annotation Processing API 100% </li>\n<li>IDE  ( IDE     )</li>\n</ol>\n<p> 4  Android Studio KSP         .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">build/generated/ksp/debug/kotlin</span><br></pre></td></tr></table></figure>\n\n<p>build.gradle.kts </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    buildTypes &#123;</span><br><span class=\"line\">        getByName(<span class=\"string\">&quot;debug&quot;</span>) &#123;</span><br><span class=\"line\">            sourceSets &#123;</span><br><span class=\"line\">                getByName(<span class=\"string\">&quot;main&quot;</span>) &#123;</span><br><span class=\"line\">                    java.srcDir(File(<span class=\"string\">&quot;build/generated/ksp/debug/kotlin&quot;</span>))</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"KSP--\"><a href=\"#KSP--\" class=\"headerlink\" title=\"KSP  \"></a>KSP  </h3><img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%202/ClassDiagram.svg\" class=\"\" title=\"[ClassDiagram]\">\n\n<p>     ,     .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp\">KSP API definition</a></p>\n</blockquote>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp/symbol\">KSP Symbol definition</a></p>\n</blockquote>\n<p>KSP    .</p>\n<p> KSP    .</p>\n<h4 id=\"KSP---\"><a href=\"#KSP---\" class=\"headerlink\" title=\"KSP   \"></a>KSP   </h4><p>KSP         .</p>\n<p> <code>KS</code> prefix , kotlin        .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KSFile</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * File </span></span><br><span class=\"line\"><span class=\"comment\">     * - Package Name / File Name /  Anootation </span></span><br><span class=\"line\"><span class=\"comment\">     * - simpleName, qualifiedName    </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    packageName: KSName</span><br><span class=\"line\">    fileName: String</span><br><span class=\"line\">    annotations: List&lt;KSAnnotation&gt;  (File annotations)</span><br><span class=\"line\">    declarations: List&lt;KSDeclaration&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Class / Interface / Object</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    KSClassDeclaration</span><br><span class=\"line\">        simpleName: KSName</span><br><span class=\"line\">        qualifiedName: KSName</span><br><span class=\"line\">        containingFile: String</span><br><span class=\"line\">        typeParameters: KSTypeParameter</span><br><span class=\"line\">        parentDeclaration: KSDeclaration</span><br><span class=\"line\">        classKind: ClassKind</span><br><span class=\"line\">        primaryConstructor: KSFunctionDeclaration</span><br><span class=\"line\">        superTypes: List&lt;KSTypeReference&gt;</span><br><span class=\"line\">        declarations: List&lt;KSDeclaration&gt; <span class=\"comment\">// contains inner classes, member functions, properties, etc.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Top-Level Funtion</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    KSFunctionDeclaration</span><br><span class=\"line\">        simpleName: KSName</span><br><span class=\"line\">        qualifiedName: KSName</span><br><span class=\"line\">        containingFile: String</span><br><span class=\"line\">        typeParameters: KSTypeParameter</span><br><span class=\"line\">        parentDeclaration: KSDeclaration</span><br><span class=\"line\">        functionKind: FunctionKind</span><br><span class=\"line\">        extensionReceiver: KSTypeReference?</span><br><span class=\"line\">        returnType: KSTypeReference</span><br><span class=\"line\">        parameters: List&lt;KSValueParameter&gt;</span><br><span class=\"line\">        declarations: List&lt;KSDeclaration&gt; <span class=\"comment\">// contains local classes, local functions, local variables, etc.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * Global Variable</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    KSPropertyDeclaration </span><br><span class=\"line\">        simpleName: KSName</span><br><span class=\"line\">    qualifiedName: KSName</span><br><span class=\"line\">    containingFile: String</span><br><span class=\"line\">    typeParameters: KSTypeParameter</span><br><span class=\"line\">    parentDeclaration: KSDeclaration</span><br><span class=\"line\">    extensionReceiver: KSTypeReference?</span><br><span class=\"line\">    type: KSTypeReference</span><br><span class=\"line\">    getter: KSPropertyGetter</span><br><span class=\"line\">        returnType: KSTypeReference</span><br><span class=\"line\">    setter: KSPropertySetter</span><br><span class=\"line\">        parameter: KSValueParameter</span><br></pre></td></tr></table></figure>\n\n<p>      .</p>\n<p><code>AppcompatActivity</code>  <code>SampleActivity</code>  , </p>\n<p>Annotation  <code> </code> , ,   ,    .   Activity  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// KSFile</span></span><br><span class=\"line\"><span class=\"keyword\">package</span> com.jshme.kspsample</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.os.Bundle</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@TestAnnotation</span> <span class=\"comment\">//KClassDeclaration </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SampleActivity</span> : <span class=\"type\">AppCompatActivity</span></span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span> <span class=\"comment\">//KSPropertyDeclaration</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> number: <span class=\"built_in\">Int</span> = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span> <span class=\"comment\">//KSPropertyDeclaration</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> str: String = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContentView(R.layout.activity_sample)</span><br><span class=\"line\">        </span><br><span class=\"line\">        number = <span class=\"number\">2</span></span><br><span class=\"line\">        str = <span class=\"string\">&quot;Test Sample&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>@TestAnnotation</code>      KClassDeclaration  , </p>\n<p>@Test<code>   KSPropertyDeclaration  .    , ,  </code>KSDeclaration`   . </p>\n<p>    <code>KSClassDeclaration</code>, <code>KSFunctionDeclaration</code>, <code>KSPropertyDeclaration</code> </p>\n<p>    <code>KSDeclaration</code>       ,        .</p>\n<h4 id=\"KSP---\"><a href=\"#KSP---\" class=\"headerlink\" title=\"KSP   \"></a>KSP   </h4><p>KSP          .</p>\n<p><code>KSFunctionDeclaration.returnType</code>  <code>KSAnnotation.annotationType</code>    , </p>\n<p>  annotation modifier  <code>KSReferenceElement</code>  <code>KSTypeReference</code>.</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KSFunctionDeclaration</span> : <span class=\"type\">... &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> returnType: KSTypeReference?</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KSTypeReference</span> : <span class=\"type\">KSAnnotated</span>, <span class=\"type\">KSModifierListOwner &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> type: KSReferenceElement</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>KSTypeReference</code> Kotlin   <code>KSType</code> <code>resolve()</code>  , Kotlin   <code>KSReferenceElement</code>  .</p>\n<p> <code>KSReferenceElement</code>.</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KSReferenceElement</span> : <span class=\"type\">KSNode &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> typeArguments: List&lt;KSTypeArgument&gt;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>KSReferenceElement</code>      <code>KSClassifierReference</code>  <code>KSCallableReference</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KSClassifierReference</span> : <span class=\"type\">KSReferenceElement &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> qualifier: KSClassifierReference?</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">referencedName</span><span class=\"params\">()</span></span>: String</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"type\">&lt;D, R&gt;</span> <span class=\"title\">accept</span><span class=\"params\">(visitor: <span class=\"type\">KSVisitor</span>&lt;<span class=\"type\">D</span>, R&gt;, <span class=\"keyword\">data</span>: <span class=\"type\">D</span>)</span></span>: R &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> visitor.visitClassifierReference(<span class=\"keyword\">this</span>, <span class=\"keyword\">data</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>KSClassifierReference</code> <code>referencedName</code>   ,</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KSCallableReference</span> : <span class=\"type\">KSReferenceElement &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> receiverType: KSTypeReference?</span><br><span class=\"line\">    <span class=\"keyword\">val</span> functionParameters: List&lt;KSValueParameter&gt;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> returnType: KSTypeReference</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"type\">&lt;D, R&gt;</span> <span class=\"title\">accept</span><span class=\"params\">(visitor: <span class=\"type\">KSVisitor</span>&lt;<span class=\"type\">D</span>, R&gt;, <span class=\"keyword\">data</span>: <span class=\"type\">D</span>)</span></span>: R &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> visitor.visitCallableReference(<span class=\"keyword\">this</span>, <span class=\"keyword\">data</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>KSCallableReference</code> <code>receiverType</code> <code>functionArguments</code>  <code>returnType</code>  .</p>\n<p><code>KSTypeReference</code>         .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KSTypeReference -&gt; .resolve() -&gt; KSType -&gt; .declaration -&gt; KSDeclaration</span><br></pre></td></tr></table></figure>\n\n<p><code>resolve()</code>  <code>KSType</code> , <code>declaration</code>   <code>KSDeclaration</code>  .</p>\n<h4 id=\"Java-Annotation-Processing--KSP-\"><a href=\"#Java-Annotation-Processing--KSP-\" class=\"headerlink\" title=\"Java Annotation Processing  KSP \"></a>Java Annotation Processing  KSP </h4><p> Annotation processor        .    .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/google/ksp/blob/main/docs/reference.md\">Github ksp#references</a></p>\n</blockquote>\n<br>\n<br>\n<br>\n\n<h2 id=\"KSP--\"><a href=\"#KSP--\" class=\"headerlink\" title=\"KSP  \"></a>KSP  </h2><p>KSP repository playground ,  repo          .</p>\n<p>  ksp repository QuickStart  .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/google/ksp/blob/main/docs/quickstart.md\">Github ksp#quickstart</a></p>\n</blockquote>\n<p>KSP      .</p>\n<p><strong>Step 1</strong><br>Youll need to implement <code>com.google.devtools.ksp.processing.SymbolProcessor</code> and <code>com.google.devtools.ksp.processing.SymbolProcessorProvider</code>. </p>\n<p>Your implementation of <code>SymbolProcessorProvider</code> will be loaded as a service to instantiate the <code>SymbolProcessor</code> you implement.</p>\n<p> <code>SymbolProcessor</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// BuilderProcessor.kt</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessor</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">val</span> codeGenerator: CodeGenerator,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> logger: KSPLogger</span><br><span class=\"line\">) : SymbolProcessor &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>SymbolProcessorProvider</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// BuilderProcessorProvider.kt</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessorProvider</span> : <span class=\"type\">SymbolProcessorProvider &#123;</span></span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 2</strong><br>Implement <code>SymbolProcessorProvider.create()</code> to create a <code>SymbolProcessor</code>. </p>\n<p>Dependencies your processor needs (e.g. <code>CodeGenerator</code>, processor options) are passed through the parameters of <code>SymbolProcessorProvider.create()</code>.</p>\n<p><code>BuilderProcessorProvider</code>  <code>SymbolProcessorProvider.create()</code>  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// BuilderProcessorProvider.kt</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessorProvider</span> : <span class=\"type\">SymbolProcessorProvider &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">create</span><span class=\"params\">(environment: <span class=\"type\">SymbolProcessorEnvironment</span>)</span></span>: SymbolProcessor &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> BuilderProcessor(environment.codeGenerator, environment.logger)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 3</strong><br>Your main logic should be in the SymbolProcessor.process() method.</p>\n<p><code>BuilderProcessor</code>   <code>SymbolProcessor.process()</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessor</span> : <span class=\"type\">SymbolProcessor &#123;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">process</span><span class=\"params\">(resolver: <span class=\"type\">Resolver</span>)</span></span>: List&lt;KSAnnotated&gt; &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 4</strong><br>Use resolver.getSymbolsWithAnnotation() to get the symbols you want to process, given the fully-qualified name of an annotation.</p>\n<p>Step 3  <code>BuilderProcessor</code>  <code>process()</code>   <code>resolver</code> <code>getSymbolsWithAnnotation()</code>   KSP .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessor</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">val</span> codeGenerator: CodeGenerator,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> logger: KSPLogger</span><br><span class=\"line\">) : SymbolProcessor &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">process</span><span class=\"params\">(resolver: <span class=\"type\">Resolver</span>)</span></span>: List&lt;KSAnnotated&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> symbols = resolver.getSymbolsWithAnnotation(<span class=\"string\">&quot;android.deepdive.ksp.builder.Builder&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">val</span> ret = symbols.filter &#123; !it.validate() &#125;.toList()</span><br><span class=\"line\"></span><br><span class=\"line\">        symbols</span><br><span class=\"line\">            .filter &#123; it <span class=\"keyword\">is</span> KSClassDeclaration &amp;&amp; it.validate() &#125;</span><br><span class=\"line\">            .forEach &#123; it.accept(BuilderVisitor(), <span class=\"built_in\">Unit</span>) &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 5</strong><br>A common use case for KSP is to implement a customized visitor (interface com.google.devtools.ksp.symbol.KSVisitor) for operating on symbols. A simple template visitor is com.google.devtools.ksp.symbol.KSDefaultVisitor.</p>\n<p><code>com.google.devtools.ksp.symbol.KSDefaultVisitor</code>  Visiter  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessor</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">val</span> codeGenerator: CodeGenerator,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> logger: KSPLogger</span><br><span class=\"line\">) : SymbolProcessor &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    <span class=\"keyword\">inner</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderVisitor</span> : <span class=\"type\">KSVisitorVoid</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">visitClassDeclaration</span><span class=\"params\">(classDeclaration: <span class=\"type\">KSClassDeclaration</span>, <span class=\"keyword\">data</span>: <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">            classDeclaration.primaryConstructor!!.accept(<span class=\"keyword\">this</span>, <span class=\"keyword\">data</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">visitFunctionDeclaration</span><span class=\"params\">(function: <span class=\"type\">KSFunctionDeclaration</span>, <span class=\"keyword\">data</span>: <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> parent = function.parentDeclaration <span class=\"keyword\">as</span> KSClassDeclaration</span><br><span class=\"line\">            <span class=\"keyword\">val</span> packageName = parent.containingFile!!.packageName.asString()</span><br><span class=\"line\">            <span class=\"keyword\">val</span> className = <span class=\"string\">&quot;<span class=\"subst\">$&#123;parent.simpleName.asString()&#125;</span>Builder&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">val</span> file = codeGenerator.createNewFile(Dependencies(<span class=\"literal\">true</span>, function.containingFile!!), packageName, className)</span><br><span class=\"line\"></span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;package <span class=\"variable\">$packageName</span>\\n\\n&quot;</span>)</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;import HELLO\\n\\n&quot;</span>)</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;class <span class=\"variable\">$className</span>&#123;\\n&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">            function.parameters.forEach &#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> name = it.name!!.asString()</span><br><span class=\"line\">                <span class=\"keyword\">val</span> typeName = StringBuilder(it.type.resolve().declaration.qualifiedName?.asString() ?: <span class=\"string\">&quot;&lt;ERROR&gt;&quot;</span>)</span><br><span class=\"line\">                <span class=\"keyword\">val</span> typeArgs = it.type.element!!.typeArguments</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (it.type.element!!.typeArguments.isNotEmpty()) &#123;</span><br><span class=\"line\">                    typeName.append(<span class=\"string\">&quot;&lt;&quot;</span>)</span><br><span class=\"line\">                    typeName.append(</span><br><span class=\"line\">                        typeArgs.map &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">val</span> type = it.type?.resolve()</span><br><span class=\"line\">                            <span class=\"string\">&quot;<span class=\"subst\">$&#123;it.variance.label&#125;</span> <span class=\"subst\">$&#123;type?.declaration?.qualifiedName?.asString() ?: <span class=\"string\">&quot;ERROR&quot;</span>&#125;</span>&quot;</span> +</span><br><span class=\"line\">                                    <span class=\"keyword\">if</span> (type?.nullability == Nullability.NULLABLE) <span class=\"string\">&quot;?&quot;</span> <span class=\"keyword\">else</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">                        &#125;.joinToString(<span class=\"string\">&quot;, &quot;</span>)</span><br><span class=\"line\">                    )</span><br><span class=\"line\">                    typeName.append(<span class=\"string\">&quot;&gt;&quot;</span>)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                file.appendText(<span class=\"string\">&quot;    private var <span class=\"variable\">$name</span>: <span class=\"variable\">$typeName</span>? = null\\n&quot;</span>)</span><br><span class=\"line\">                file.appendText(<span class=\"string\">&quot;    internal fun with<span class=\"subst\">$&#123;name.capitalize()&#125;</span>(<span class=\"variable\">$name</span>: <span class=\"variable\">$typeName</span>): <span class=\"variable\">$className</span> &#123;\\n&quot;</span>)</span><br><span class=\"line\">                file.appendText(<span class=\"string\">&quot;        this.<span class=\"variable\">$name</span> = <span class=\"variable\">$name</span>\\n&quot;</span>)</span><br><span class=\"line\">                file.appendText(<span class=\"string\">&quot;        return this\\n&quot;</span>)</span><br><span class=\"line\">                file.appendText(<span class=\"string\">&quot;    &#125;\\n\\n&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;    internal fun build(): <span class=\"subst\">$&#123;parent.qualifiedName!!.asString()&#125;</span> &#123;\\n&quot;</span>)</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;        return <span class=\"subst\">$&#123;parent.qualifiedName!!.asString()&#125;</span>(&quot;</span>)</span><br><span class=\"line\">            file.appendText(</span><br><span class=\"line\">                function.parameters.map &#123;</span><br><span class=\"line\">                    <span class=\"string\">&quot;<span class=\"subst\">$&#123;it.name!!.asString()&#125;</span>!!&quot;</span></span><br><span class=\"line\">                &#125;.joinToString(<span class=\"string\">&quot;, &quot;</span>)</span><br><span class=\"line\">            )</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;)\\n&quot;</span>)</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;    &#125;\\n&quot;</span>)</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;&#125;\\n&quot;</span>)</span><br><span class=\"line\">            file.close()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 6</strong><br>For sample implementations of the SymbolProcessorProvider and SymbolProcessor interfaces, see the following files in the sample project.</p>\n<ul>\n<li>src/main/kotlin/BuilderProcessor.kt</li>\n<li>src/main/kotlin/TestProcessor.kt</li>\n</ul>\n<p>   .</p>\n<ul>\n<li>src/main/java/android/deepdive/ksp/builder/BuilderProcessor.kt</li>\n<li>src/main/java/android/deepdive/ksp/builder/BuilderProcessorProvider.kt</li>\n</ul>\n<p><strong>Step 7</strong><br>After writing your own processor, register your processor provider to the package by including its fully-qualified name in resources/META-INF/services/com.google.devtools.ksp.processing.SymbolProcessorProvider.</p>\n<p><code>META-INF</code>  <code>BuilderProcessorProvider</code> path .</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// path : src/main/resources/META-INF/services/com.google.devtools.ksp.processing.SymbolProcessorProvider</span><br><span class=\"line\">android.deepdive.ksp.builder.BuilderProcessorProvider</span><br></pre></td></tr></table></figure>\n\n<p>    KSP     .</p>\n<ul>\n<li><a href=\"https://github.com/AndroidDeepDive/ADD-Kotlin-Symbol-Processing-Api\">Android Deep Dive#Kotlin-Symbol-Processing-Api</a></li>\n<li><a href=\"https://github.com/Charlezz/IntentBuilderSample\">Charlezz#IntentBuilderSample</a></li>\n<li><a href=\"https://github.com/SODA1127/KSPImplementationExample\">SODA1127#KSPImplementationExample</a></li>\n<li><a href=\"https://github.com/jsh-me/KSPWebViewLoader\">jsh-me#KSPWebViewLoader</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<h2 id=\"KSP-\"><a href=\"#KSP-\" class=\"headerlink\" title=\"KSP ?\"></a>KSP ?</h2><p><strong>KSP(Kotlin Symbol Processing)</strong>  2021 2 10          API. </p>\n<p>  ,       API .     ,  1.4.30   . </p>\n<p>KSP      ,     . </p>\n<p> KSP   ,      . </p>\n<p>API    symbol      . </p>\n<p>KSP       ,  ,                . </p>\n<p> KSP Kotlin  KType . API           ,      .</p>\n<p>KAPT   KSP  <a href=\"https://www.charlezz.com/?p=1167\">Annotation Processor</a>  <strong>2</strong>     . </p>\n<p>  <a href=\"https://github.com/google/ksp\">Google KSP repository</a>      . </p>\n<h3 id=\"-KSP--\"><a href=\"#-KSP--\" class=\"headerlink\" title=\" KSP  ?\"></a> KSP  ?</h3><p>           . </p>\n<p>                .. </p>\n<p> , Boiler Plate  Parcelble           . </p>\n<p>               . </p>\n<p>                      .</p>\n<p>     KSP             .</p>\n<p> JVM  ,     .</p>\n<p> KSP      .</p>\n<p>Glide    Processor  KSP KAPT     25%   .</p>\n<h4 id=\"kotlinc---\"><a href=\"#kotlinc---\" class=\"headerlink\" title=\"kotlinc   \"></a><strong>kotlinc</strong>   </h4><p><code>kotlinc</code>        ,         .  KSP     api     .       <code>kotlinc</code>    ,        .</p>\n<h4 id=\"kotlin-reflect--\"><a href=\"#kotlin-reflect--\" class=\"headerlink\" title=\"kotlin.reflect  \"></a><strong>kotlin.reflect</strong>  </h4><p>KSP <code>kotlin.reflect</code>  , KSP      .</p>\n<h3 id=\"KSP-\"><a href=\"#KSP-\" class=\"headerlink\" title=\"KSP \"></a>KSP </h3><p>KSP  Annotation Processor           .</p>\n<p>   KSP    .</p>\n<ol>\n<li>     </li>\n<li>  </li>\n<li>Java Annotation Processing API 100% </li>\n<li>IDE  ( IDE     )</li>\n</ol>\n<p> 4  Android Studio KSP         .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">build/generated/ksp/debug/kotlin</span><br></pre></td></tr></table></figure>\n\n<p>build.gradle.kts </p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    buildTypes &#123;</span><br><span class=\"line\">        getByName(<span class=\"string\">&quot;debug&quot;</span>) &#123;</span><br><span class=\"line\">            sourceSets &#123;</span><br><span class=\"line\">                getByName(<span class=\"string\">&quot;main&quot;</span>) &#123;</span><br><span class=\"line\">                    java.srcDir(File(<span class=\"string\">&quot;build/generated/ksp/debug/kotlin&quot;</span>))</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"KSP--\"><a href=\"#KSP--\" class=\"headerlink\" title=\"KSP  \"></a>KSP  </h3><img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%202/ClassDiagram.svg\" class=\"\" title=\"[ClassDiagram]\">\n\n<p>     ,     .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp\">KSP API definition</a></p>\n</blockquote>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp/symbol\">KSP Symbol definition</a></p>\n</blockquote>\n<p>KSP    .</p>\n<p> KSP    .</p>\n<h4 id=\"KSP---\"><a href=\"#KSP---\" class=\"headerlink\" title=\"KSP   \"></a>KSP   </h4><p>KSP         .</p>\n<p> <code>KS</code> prefix , kotlin        .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KSFile</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * File </span></span><br><span class=\"line\"><span class=\"comment\">     * - Package Name / File Name /  Anootation </span></span><br><span class=\"line\"><span class=\"comment\">     * - simpleName, qualifiedName    </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    packageName: KSName</span><br><span class=\"line\">    fileName: String</span><br><span class=\"line\">    annotations: List&lt;KSAnnotation&gt;  (File annotations)</span><br><span class=\"line\">    declarations: List&lt;KSDeclaration&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Class / Interface / Object</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    KSClassDeclaration</span><br><span class=\"line\">        simpleName: KSName</span><br><span class=\"line\">        qualifiedName: KSName</span><br><span class=\"line\">        containingFile: String</span><br><span class=\"line\">        typeParameters: KSTypeParameter</span><br><span class=\"line\">        parentDeclaration: KSDeclaration</span><br><span class=\"line\">        classKind: ClassKind</span><br><span class=\"line\">        primaryConstructor: KSFunctionDeclaration</span><br><span class=\"line\">        superTypes: List&lt;KSTypeReference&gt;</span><br><span class=\"line\">        declarations: List&lt;KSDeclaration&gt; <span class=\"comment\">// contains inner classes, member functions, properties, etc.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Top-Level Funtion</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    KSFunctionDeclaration</span><br><span class=\"line\">        simpleName: KSName</span><br><span class=\"line\">        qualifiedName: KSName</span><br><span class=\"line\">        containingFile: String</span><br><span class=\"line\">        typeParameters: KSTypeParameter</span><br><span class=\"line\">        parentDeclaration: KSDeclaration</span><br><span class=\"line\">        functionKind: FunctionKind</span><br><span class=\"line\">        extensionReceiver: KSTypeReference?</span><br><span class=\"line\">        returnType: KSTypeReference</span><br><span class=\"line\">        parameters: List&lt;KSValueParameter&gt;</span><br><span class=\"line\">        declarations: List&lt;KSDeclaration&gt; <span class=\"comment\">// contains local classes, local functions, local variables, etc.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * Global Variable</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    KSPropertyDeclaration </span><br><span class=\"line\">        simpleName: KSName</span><br><span class=\"line\">    qualifiedName: KSName</span><br><span class=\"line\">    containingFile: String</span><br><span class=\"line\">    typeParameters: KSTypeParameter</span><br><span class=\"line\">    parentDeclaration: KSDeclaration</span><br><span class=\"line\">    extensionReceiver: KSTypeReference?</span><br><span class=\"line\">    type: KSTypeReference</span><br><span class=\"line\">    getter: KSPropertyGetter</span><br><span class=\"line\">        returnType: KSTypeReference</span><br><span class=\"line\">    setter: KSPropertySetter</span><br><span class=\"line\">        parameter: KSValueParameter</span><br></pre></td></tr></table></figure>\n\n<p>      .</p>\n<p><code>AppcompatActivity</code>  <code>SampleActivity</code>  , </p>\n<p>Annotation  <code> </code> , ,   ,    .   Activity  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// KSFile</span></span><br><span class=\"line\"><span class=\"keyword\">package</span> com.jshme.kspsample</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> androidx.appcompat.app.AppCompatActivity</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.os.Bundle</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@TestAnnotation</span> <span class=\"comment\">//KClassDeclaration </span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SampleActivity</span> : <span class=\"type\">AppCompatActivity</span></span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span> <span class=\"comment\">//KSPropertyDeclaration</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> number: <span class=\"built_in\">Int</span> = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span> <span class=\"comment\">//KSPropertyDeclaration</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> str: String = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">        setContentView(R.layout.activity_sample)</span><br><span class=\"line\">        </span><br><span class=\"line\">        number = <span class=\"number\">2</span></span><br><span class=\"line\">        str = <span class=\"string\">&quot;Test Sample&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>@TestAnnotation</code>      KClassDeclaration  , </p>\n<p>@Test<code>   KSPropertyDeclaration  .    , ,  </code>KSDeclaration`   . </p>\n<p>    <code>KSClassDeclaration</code>, <code>KSFunctionDeclaration</code>, <code>KSPropertyDeclaration</code> </p>\n<p>    <code>KSDeclaration</code>       ,        .</p>\n<h4 id=\"KSP---\"><a href=\"#KSP---\" class=\"headerlink\" title=\"KSP   \"></a>KSP   </h4><p>KSP          .</p>\n<p><code>KSFunctionDeclaration.returnType</code>  <code>KSAnnotation.annotationType</code>    , </p>\n<p>  annotation modifier  <code>KSReferenceElement</code>  <code>KSTypeReference</code>.</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KSFunctionDeclaration</span> : <span class=\"type\">... &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> returnType: KSTypeReference?</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KSTypeReference</span> : <span class=\"type\">KSAnnotated</span>, <span class=\"type\">KSModifierListOwner &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> type: KSReferenceElement</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>KSTypeReference</code> Kotlin   <code>KSType</code> <code>resolve()</code>  , Kotlin   <code>KSReferenceElement</code>  .</p>\n<p> <code>KSReferenceElement</code>.</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KSReferenceElement</span> : <span class=\"type\">KSNode &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> typeArguments: List&lt;KSTypeArgument&gt;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>KSReferenceElement</code>      <code>KSClassifierReference</code>  <code>KSCallableReference</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KSClassifierReference</span> : <span class=\"type\">KSReferenceElement &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> qualifier: KSClassifierReference?</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">referencedName</span><span class=\"params\">()</span></span>: String</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"type\">&lt;D, R&gt;</span> <span class=\"title\">accept</span><span class=\"params\">(visitor: <span class=\"type\">KSVisitor</span>&lt;<span class=\"type\">D</span>, R&gt;, <span class=\"keyword\">data</span>: <span class=\"type\">D</span>)</span></span>: R &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> visitor.visitClassifierReference(<span class=\"keyword\">this</span>, <span class=\"keyword\">data</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  <code>KSClassifierReference</code> <code>referencedName</code>   ,</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KSCallableReference</span> : <span class=\"type\">KSReferenceElement &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> receiverType: KSTypeReference?</span><br><span class=\"line\">    <span class=\"keyword\">val</span> functionParameters: List&lt;KSValueParameter&gt;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> returnType: KSTypeReference</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"type\">&lt;D, R&gt;</span> <span class=\"title\">accept</span><span class=\"params\">(visitor: <span class=\"type\">KSVisitor</span>&lt;<span class=\"type\">D</span>, R&gt;, <span class=\"keyword\">data</span>: <span class=\"type\">D</span>)</span></span>: R &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> visitor.visitCallableReference(<span class=\"keyword\">this</span>, <span class=\"keyword\">data</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>KSCallableReference</code> <code>receiverType</code> <code>functionArguments</code>  <code>returnType</code>  .</p>\n<p><code>KSTypeReference</code>         .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KSTypeReference -&gt; .resolve() -&gt; KSType -&gt; .declaration -&gt; KSDeclaration</span><br></pre></td></tr></table></figure>\n\n<p><code>resolve()</code>  <code>KSType</code> , <code>declaration</code>   <code>KSDeclaration</code>  .</p>\n<h4 id=\"Java-Annotation-Processing--KSP-\"><a href=\"#Java-Annotation-Processing--KSP-\" class=\"headerlink\" title=\"Java Annotation Processing  KSP \"></a>Java Annotation Processing  KSP </h4><p> Annotation processor        .    .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/google/ksp/blob/main/docs/reference.md\">Github ksp#references</a></p>\n</blockquote>\n<br>\n<br>\n<br>\n\n<h2 id=\"KSP--\"><a href=\"#KSP--\" class=\"headerlink\" title=\"KSP  \"></a>KSP  </h2><p>KSP repository playground ,  repo          .</p>\n<p>  ksp repository QuickStart  .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/google/ksp/blob/main/docs/quickstart.md\">Github ksp#quickstart</a></p>\n</blockquote>\n<p>KSP      .</p>\n<p><strong>Step 1</strong><br>Youll need to implement <code>com.google.devtools.ksp.processing.SymbolProcessor</code> and <code>com.google.devtools.ksp.processing.SymbolProcessorProvider</code>. </p>\n<p>Your implementation of <code>SymbolProcessorProvider</code> will be loaded as a service to instantiate the <code>SymbolProcessor</code> you implement.</p>\n<p> <code>SymbolProcessor</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// BuilderProcessor.kt</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessor</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">val</span> codeGenerator: CodeGenerator,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> logger: KSPLogger</span><br><span class=\"line\">) : SymbolProcessor &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>SymbolProcessorProvider</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// BuilderProcessorProvider.kt</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessorProvider</span> : <span class=\"type\">SymbolProcessorProvider &#123;</span></span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 2</strong><br>Implement <code>SymbolProcessorProvider.create()</code> to create a <code>SymbolProcessor</code>. </p>\n<p>Dependencies your processor needs (e.g. <code>CodeGenerator</code>, processor options) are passed through the parameters of <code>SymbolProcessorProvider.create()</code>.</p>\n<p><code>BuilderProcessorProvider</code>  <code>SymbolProcessorProvider.create()</code>  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// BuilderProcessorProvider.kt</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessorProvider</span> : <span class=\"type\">SymbolProcessorProvider &#123;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">create</span><span class=\"params\">(environment: <span class=\"type\">SymbolProcessorEnvironment</span>)</span></span>: SymbolProcessor &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> BuilderProcessor(environment.codeGenerator, environment.logger)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 3</strong><br>Your main logic should be in the SymbolProcessor.process() method.</p>\n<p><code>BuilderProcessor</code>   <code>SymbolProcessor.process()</code>   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessor</span> : <span class=\"type\">SymbolProcessor &#123;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">process</span><span class=\"params\">(resolver: <span class=\"type\">Resolver</span>)</span></span>: List&lt;KSAnnotated&gt; &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 4</strong><br>Use resolver.getSymbolsWithAnnotation() to get the symbols you want to process, given the fully-qualified name of an annotation.</p>\n<p>Step 3  <code>BuilderProcessor</code>  <code>process()</code>   <code>resolver</code> <code>getSymbolsWithAnnotation()</code>   KSP .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessor</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">val</span> codeGenerator: CodeGenerator,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> logger: KSPLogger</span><br><span class=\"line\">) : SymbolProcessor &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">process</span><span class=\"params\">(resolver: <span class=\"type\">Resolver</span>)</span></span>: List&lt;KSAnnotated&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> symbols = resolver.getSymbolsWithAnnotation(<span class=\"string\">&quot;android.deepdive.ksp.builder.Builder&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">val</span> ret = symbols.filter &#123; !it.validate() &#125;.toList()</span><br><span class=\"line\"></span><br><span class=\"line\">        symbols</span><br><span class=\"line\">            .filter &#123; it <span class=\"keyword\">is</span> KSClassDeclaration &amp;&amp; it.validate() &#125;</span><br><span class=\"line\">            .forEach &#123; it.accept(BuilderVisitor(), <span class=\"built_in\">Unit</span>) &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 5</strong><br>A common use case for KSP is to implement a customized visitor (interface com.google.devtools.ksp.symbol.KSVisitor) for operating on symbols. A simple template visitor is com.google.devtools.ksp.symbol.KSDefaultVisitor.</p>\n<p><code>com.google.devtools.ksp.symbol.KSDefaultVisitor</code>  Visiter  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderProcessor</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">val</span> codeGenerator: CodeGenerator,</span><br><span class=\"line\">    <span class=\"keyword\">val</span> logger: KSPLogger</span><br><span class=\"line\">) : SymbolProcessor &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    <span class=\"keyword\">inner</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BuilderVisitor</span> : <span class=\"type\">KSVisitorVoid</span></span>() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">visitClassDeclaration</span><span class=\"params\">(classDeclaration: <span class=\"type\">KSClassDeclaration</span>, <span class=\"keyword\">data</span>: <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">            classDeclaration.primaryConstructor!!.accept(<span class=\"keyword\">this</span>, <span class=\"keyword\">data</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">visitFunctionDeclaration</span><span class=\"params\">(function: <span class=\"type\">KSFunctionDeclaration</span>, <span class=\"keyword\">data</span>: <span class=\"type\">Unit</span>)</span></span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> parent = function.parentDeclaration <span class=\"keyword\">as</span> KSClassDeclaration</span><br><span class=\"line\">            <span class=\"keyword\">val</span> packageName = parent.containingFile!!.packageName.asString()</span><br><span class=\"line\">            <span class=\"keyword\">val</span> className = <span class=\"string\">&quot;<span class=\"subst\">$&#123;parent.simpleName.asString()&#125;</span>Builder&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">val</span> file = codeGenerator.createNewFile(Dependencies(<span class=\"literal\">true</span>, function.containingFile!!), packageName, className)</span><br><span class=\"line\"></span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;package <span class=\"variable\">$packageName</span>\\n\\n&quot;</span>)</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;import HELLO\\n\\n&quot;</span>)</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;class <span class=\"variable\">$className</span>&#123;\\n&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">            function.parameters.forEach &#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> name = it.name!!.asString()</span><br><span class=\"line\">                <span class=\"keyword\">val</span> typeName = StringBuilder(it.type.resolve().declaration.qualifiedName?.asString() ?: <span class=\"string\">&quot;&lt;ERROR&gt;&quot;</span>)</span><br><span class=\"line\">                <span class=\"keyword\">val</span> typeArgs = it.type.element!!.typeArguments</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (it.type.element!!.typeArguments.isNotEmpty()) &#123;</span><br><span class=\"line\">                    typeName.append(<span class=\"string\">&quot;&lt;&quot;</span>)</span><br><span class=\"line\">                    typeName.append(</span><br><span class=\"line\">                        typeArgs.map &#123;</span><br><span class=\"line\">                            <span class=\"keyword\">val</span> type = it.type?.resolve()</span><br><span class=\"line\">                            <span class=\"string\">&quot;<span class=\"subst\">$&#123;it.variance.label&#125;</span> <span class=\"subst\">$&#123;type?.declaration?.qualifiedName?.asString() ?: <span class=\"string\">&quot;ERROR&quot;</span>&#125;</span>&quot;</span> +</span><br><span class=\"line\">                                    <span class=\"keyword\">if</span> (type?.nullability == Nullability.NULLABLE) <span class=\"string\">&quot;?&quot;</span> <span class=\"keyword\">else</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">                        &#125;.joinToString(<span class=\"string\">&quot;, &quot;</span>)</span><br><span class=\"line\">                    )</span><br><span class=\"line\">                    typeName.append(<span class=\"string\">&quot;&gt;&quot;</span>)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                file.appendText(<span class=\"string\">&quot;    private var <span class=\"variable\">$name</span>: <span class=\"variable\">$typeName</span>? = null\\n&quot;</span>)</span><br><span class=\"line\">                file.appendText(<span class=\"string\">&quot;    internal fun with<span class=\"subst\">$&#123;name.capitalize()&#125;</span>(<span class=\"variable\">$name</span>: <span class=\"variable\">$typeName</span>): <span class=\"variable\">$className</span> &#123;\\n&quot;</span>)</span><br><span class=\"line\">                file.appendText(<span class=\"string\">&quot;        this.<span class=\"variable\">$name</span> = <span class=\"variable\">$name</span>\\n&quot;</span>)</span><br><span class=\"line\">                file.appendText(<span class=\"string\">&quot;        return this\\n&quot;</span>)</span><br><span class=\"line\">                file.appendText(<span class=\"string\">&quot;    &#125;\\n\\n&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;    internal fun build(): <span class=\"subst\">$&#123;parent.qualifiedName!!.asString()&#125;</span> &#123;\\n&quot;</span>)</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;        return <span class=\"subst\">$&#123;parent.qualifiedName!!.asString()&#125;</span>(&quot;</span>)</span><br><span class=\"line\">            file.appendText(</span><br><span class=\"line\">                function.parameters.map &#123;</span><br><span class=\"line\">                    <span class=\"string\">&quot;<span class=\"subst\">$&#123;it.name!!.asString()&#125;</span>!!&quot;</span></span><br><span class=\"line\">                &#125;.joinToString(<span class=\"string\">&quot;, &quot;</span>)</span><br><span class=\"line\">            )</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;)\\n&quot;</span>)</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;    &#125;\\n&quot;</span>)</span><br><span class=\"line\">            file.appendText(<span class=\"string\">&quot;&#125;\\n&quot;</span>)</span><br><span class=\"line\">            file.close()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Step 6</strong><br>For sample implementations of the SymbolProcessorProvider and SymbolProcessor interfaces, see the following files in the sample project.</p>\n<ul>\n<li>src/main/kotlin/BuilderProcessor.kt</li>\n<li>src/main/kotlin/TestProcessor.kt</li>\n</ul>\n<p>   .</p>\n<ul>\n<li>src/main/java/android/deepdive/ksp/builder/BuilderProcessor.kt</li>\n<li>src/main/java/android/deepdive/ksp/builder/BuilderProcessorProvider.kt</li>\n</ul>\n<p><strong>Step 7</strong><br>After writing your own processor, register your processor provider to the package by including its fully-qualified name in resources/META-INF/services/com.google.devtools.ksp.processing.SymbolProcessorProvider.</p>\n<p><code>META-INF</code>  <code>BuilderProcessorProvider</code> path .</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// path : src/main/resources/META-INF/services/com.google.devtools.ksp.processing.SymbolProcessorProvider</span><br><span class=\"line\">android.deepdive.ksp.builder.BuilderProcessorProvider</span><br></pre></td></tr></table></figure>\n\n<p>    KSP     .</p>\n<ul>\n<li><a href=\"https://github.com/AndroidDeepDive/ADD-Kotlin-Symbol-Processing-Api\">Android Deep Dive#Kotlin-Symbol-Processing-Api</a></li>\n<li><a href=\"https://github.com/Charlezz/IntentBuilderSample\">Charlezz#IntentBuilderSample</a></li>\n<li><a href=\"https://github.com/SODA1127/KSPImplementationExample\">SODA1127#KSPImplementationExample</a></li>\n<li><a href=\"https://github.com/jsh-me/KSPWebViewLoader\">jsh-me#KSPWebViewLoader</a></li>\n</ul>"},{"title":"Kotlin Symbol Processing Api Part 3  KSP vs KAPT","date":"2021-07-20T18:00:00.000Z","cover":"https://androiddeepdive.github.io/Team-Blog/images/cover_ksp.png","_content":"\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n    **KAPT**  **KSP**   .\n\n  **KAPT**  **KSP**   .\n\n\n## Better than KAPT\n\n   KAPT Kotlin  Java Annotation Processor     Java  Stub  . \n\nStub   kotlinc   3 1 ,      . \n\nKAPT  KSP Java   Kotlin  , `top-level function`  Kotlin    .\n\nKAPT        .\n\n**1. **\n\n      , `javax.lang.model`   API    . \n\n    KAPT   ** Stub**   . \n\n Stub  KAPT    (symbol)  . Stub      1/3 . \n\n   KSP Glide    **Tachiyomi**    \n\n   21.55 KAPT   8.67, KSP   1.15  . \n\n> **** [Tachiyomi repository](https://github.com/tachiyomiorg/tachiyomi)\n\n**2. **\n\nKSP  . \n\nKSP     (extension function),    (Declaration-Site Variance),  (local functions)  . \n\n     (assign-comppatibility)      .\n\nKSP     ,  ,         . \n\n   KType    SymbolProcessor   AbstractProcessor      .\n\n  Part 2 .\n\n**3.   **\n\nKSP JVM            . \n\n             . \n\n<br>\n<br>\n<br>\n\n### KAPT vs KSP   (Feat_ Room)\n\nRooom     .\n\n   .\n\n1.     \n2. `RoomDatabase`   \n3. 3 DAO, 3 Entity \n\n#### KAPT \n\n  `kotlin-kapt` .\n\n```kotlin\n// build.gradle (app)\nplugins {\n  ...\n  id 'kotlin-kapt'\n  ...\n}\n```\n\n  Room  , kapt room  .\n\n   Room  Kotlin    SQLite     Stub   .\n\n```kotlin\ndependencies {\n  // ...\n  implementation \"androidx.room:room-runtime:2.3.0\"\n  kapt \"androidx.room:room-compiler:2.3.0\"\n  implementation \"androidx.room:room-ktx:2.3.0\"\n  // ...\n}\n```\n\n `RoomDatabase`  `ApplicationDatabase`  .\n\n```kotlin\n@Database(\n  entities = [AEntity::class, BEntity::class, CEntity::class],\n  version = 1,\n  exportSchema = false\n)\nabstract class ApplicationDatabase: RoomDatabase() {\n\n  companion object {\n    const val DB_NAME = \"ApplicationDataBase.db\"\n  }\n\n  abstract fun ADao(): ADao\n\n  abstract fun BDao(): BDao\n\n  abstract fun CDao(): CDao\n\n}\n```\n\nKotlin    Java Stub   .\n\n```java\n// ...\n  \n@SuppressWarnings({\"unchecked\", \"deprecation\"})\npublic final class ApplicationDatabase_Impl extends ApplicationDatabase {\n  private volatile ADao _aDao;\n\n  private volatile BDao _bDao;\n\n  private volatile CDao _cDao;\n\n  @Override\n  protected SupportSQLiteOpenHelper createOpenHelper(DatabaseConfiguration configuration) {\n    final SupportSQLiteOpenHelper.Callback _openCallback = new RoomOpenHelper(configuration, new RoomOpenHelper.Delegate(1) {\n      @Override\n      public void createAllTables(SupportSQLiteDatabase _db) {\n        // ...\n      }\n    }                              \n// ...                                                                              \n```\n\n**  **\n\n{% asset_img rcWvgv0.png [rcWvgv0] %}\n\n  \n\nkaptGenerateStubsDebugKotlin  **16.6s**  .\n\n#### KSP \n\n  KAPT  KSP .\n\n  build.gradle       .\n\n```kotlin\n// build.gradle (root)\nbuildscript {\n  ext.kotlin_version = \"1.4.21\"\n  repositories {\n    google()\n  }\n  dependencies {\n    ...\n    classpath(\"com.google.devtools.ksp:com.google.devtools.ksp.gradle.plugin:1.5.20-1.0.0-beta04\")\n  }\n}\n```\n\napp build.gradle `com.google.devtools.ksp`  .\n\n```kotlin\nplugins {\n  ...\n  id 'kotlin-kapt'\n  id 'com.google.devtools.ksp'\n  ...\n}\n```\n\n  kapt  `room-compiler`  ksp .\n\n```kotlin\ndependencies {\n  // ...\n  implementation \"androidx.room:room-runtime:2.3.0\"\n  // kapt \"androidx.room:room-compiler:2.3.0\"\n  ksp \"androidx.room:room-compiler:2.3.0\"\n  implementation \"androidx.room:room-ktx:2.3.0\"\n  // ...\n}\n```\n\n**  **\n\n{% asset_img HyjEy1l.png [HyjEy1l] %}\n\n   \n\nkaptGenerateStubsDebugKotlin **12.54s**\n\nkspDebugKotlin **5.49s**     **18.03s**   .\n\nKSP         ?\n\nAndroid Developer      .\n\n> **** [Announcing Kotlin Symbol Processing (KSP) Alpha](https://android-developers.googleblog.com/2021/02/announcing-kotlin-symbol-processing-ksp.html)\n\n      .\n\nThat said, using KAPT and KSP in the same module will likely slow down your build initially, so during this alpha period, it is best to use KSP and KAPT in separate modules.\n\n   kapt ksp        , \n\n  (ksp alpha ) kapt ksp      .\n\n  KAPT     , Room  KAPT, KSP       .\n\n**Compile Time By KAPT only using Room**\n{% asset_img NjWXyw6.png [Compile Time By KAPT only using Room] %}\n\n8.40s\n\n**Compile Time By KSP only using Room**\n\n{% asset_img 0HScWJk.png [Compile Time By KSP only using Room] %}\n\n0.71s\n\n         .\n\n<br>\n<br>\n<br>\n\n## References\n\n### Members of Study\n- [  - [Android] Annotation Processor ](https://www.charlezz.com/?p=1167)\n- [Namhoon Kims'Coding Log - KSP Api Part 1](https://namhoon.kim/2021/06/25/android_deep_dive/020_Kotlin%20Symbol%20Processing%20API%20Part%201/)\n- [Namhoon Kims'Coding Log - KSP Api Part 2](https://namhoon.kim/2021/06/27/android_deep_dive/021_Kotlin%20Symbol%20Processing%20API%20Part%202/)\n- [   - Introduce Kotlin Symbol Processing](https://soda1127.github.io/introduce-kotlin-symbol-processing/)\n- [   - Implement Kotlin Symbol Processing](https://soda1127.github.io/implement-kotlin-symbol-processing-example/)\n- [jsh-me.log - KSP(Kotlin Symbol Processor) ](https://velog.io/@jshme/KSP-Kotlin-Symbol-Processor-%ED%86%BA%EC%95%84%EB%B3%B4%EA%B8%B0)\n\n### Official\n- [Android Developers#androidx.annotation](https://developer.android.com/reference/androidx/annotation/package-summary)\n- [Google KSP Repository](https://github.com/google/ksp)\n- [KSP API definition](https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp)\n- [KSP Symbol definition](https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp/symbol)\n- [KAPT(Kotlin Annotation Processing Tool)](https://kotlinlang.org/docs/kapt.html)\n- [Announcing Kotlin Symbol Processing (KSP) Alpha](https://android-developers.googleblog.com/2021/02/announcing-kotlin-symbol-processing-ksp.html)\n- [Oracle JavaDoc#Annotations](https://docs.oracle.com/javase/tutorial/java/annotations/index.html)\n- [kapt: Annotation Processing for Kotlin](https://blog.jetbrains.com/kotlin/2015/05/kapt-annotation-processing-for-kotlin)\n- [Using kapt](https://kotlinlang.org/docs/kapt.html#using-in-gradle)\n\n### Etc\n- [Tachiyomi](https://github.com/tachiyomiorg/tachiyomi)\n- [My first Kotlin Symbol Processing Tool for Android](https://jsuch2362.medium.com/my-first-kotlin-symbol-processing-tool-for-android-4eb3a2cfd600)\n- [KSP: Fact or kapt?](https://proandroiddev.com/ksp-fact-or-kapt-7c7e9218c575)\n- [Annotation Processing 101](https://hannesdorfmann.com/annotation-processing/annotationprocessing101/)\n- [Kotlin : Kotlin plugin should be enabled before kotlin-kapt](https://imstudio.medium.com/kotlin-kotlin-plugin-should-be-enabled-before-kotlin-kapt-d5879f45f09d)\n- [Pushing the limits of Kotlin annotation processing](https://medium.com/@workingkills/pushing-the-limits-of-kotlin-annotation-processing-8611027b6711)\n","source":"_posts/2021-07-21 Kotlin Symbol Processing Api Part 3.md","raw":"---\ntitle: Kotlin Symbol Processing Api Part 3  KSP vs KAPT\ndate: 2021-07-21 03:00\ncover: https://androiddeepdive.github.io/Team-Blog/images/cover_ksp.png\ncategories:\n- KSP\ntags:\n- KSP\n- Kotlin\n- Symbol\n- Processing\n- KAPT\n- Annotation\n---\n\n<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<!-- more -->\n\n    **KAPT**  **KSP**   .\n\n  **KAPT**  **KSP**   .\n\n\n## Better than KAPT\n\n   KAPT Kotlin  Java Annotation Processor     Java  Stub  . \n\nStub   kotlinc   3 1 ,      . \n\nKAPT  KSP Java   Kotlin  , `top-level function`  Kotlin    .\n\nKAPT        .\n\n**1. **\n\n      , `javax.lang.model`   API    . \n\n    KAPT   ** Stub**   . \n\n Stub  KAPT    (symbol)  . Stub      1/3 . \n\n   KSP Glide    **Tachiyomi**    \n\n   21.55 KAPT   8.67, KSP   1.15  . \n\n> **** [Tachiyomi repository](https://github.com/tachiyomiorg/tachiyomi)\n\n**2. **\n\nKSP  . \n\nKSP     (extension function),    (Declaration-Site Variance),  (local functions)  . \n\n     (assign-comppatibility)      .\n\nKSP     ,  ,         . \n\n   KType    SymbolProcessor   AbstractProcessor      .\n\n  Part 2 .\n\n**3.   **\n\nKSP JVM            . \n\n             . \n\n<br>\n<br>\n<br>\n\n### KAPT vs KSP   (Feat_ Room)\n\nRooom     .\n\n   .\n\n1.     \n2. `RoomDatabase`   \n3. 3 DAO, 3 Entity \n\n#### KAPT \n\n  `kotlin-kapt` .\n\n```kotlin\n// build.gradle (app)\nplugins {\n  ...\n  id 'kotlin-kapt'\n  ...\n}\n```\n\n  Room  , kapt room  .\n\n   Room  Kotlin    SQLite     Stub   .\n\n```kotlin\ndependencies {\n  // ...\n  implementation \"androidx.room:room-runtime:2.3.0\"\n  kapt \"androidx.room:room-compiler:2.3.0\"\n  implementation \"androidx.room:room-ktx:2.3.0\"\n  // ...\n}\n```\n\n `RoomDatabase`  `ApplicationDatabase`  .\n\n```kotlin\n@Database(\n  entities = [AEntity::class, BEntity::class, CEntity::class],\n  version = 1,\n  exportSchema = false\n)\nabstract class ApplicationDatabase: RoomDatabase() {\n\n  companion object {\n    const val DB_NAME = \"ApplicationDataBase.db\"\n  }\n\n  abstract fun ADao(): ADao\n\n  abstract fun BDao(): BDao\n\n  abstract fun CDao(): CDao\n\n}\n```\n\nKotlin    Java Stub   .\n\n```java\n// ...\n  \n@SuppressWarnings({\"unchecked\", \"deprecation\"})\npublic final class ApplicationDatabase_Impl extends ApplicationDatabase {\n  private volatile ADao _aDao;\n\n  private volatile BDao _bDao;\n\n  private volatile CDao _cDao;\n\n  @Override\n  protected SupportSQLiteOpenHelper createOpenHelper(DatabaseConfiguration configuration) {\n    final SupportSQLiteOpenHelper.Callback _openCallback = new RoomOpenHelper(configuration, new RoomOpenHelper.Delegate(1) {\n      @Override\n      public void createAllTables(SupportSQLiteDatabase _db) {\n        // ...\n      }\n    }                              \n// ...                                                                              \n```\n\n**  **\n\n{% asset_img rcWvgv0.png [rcWvgv0] %}\n\n  \n\nkaptGenerateStubsDebugKotlin  **16.6s**  .\n\n#### KSP \n\n  KAPT  KSP .\n\n  build.gradle       .\n\n```kotlin\n// build.gradle (root)\nbuildscript {\n  ext.kotlin_version = \"1.4.21\"\n  repositories {\n    google()\n  }\n  dependencies {\n    ...\n    classpath(\"com.google.devtools.ksp:com.google.devtools.ksp.gradle.plugin:1.5.20-1.0.0-beta04\")\n  }\n}\n```\n\napp build.gradle `com.google.devtools.ksp`  .\n\n```kotlin\nplugins {\n  ...\n  id 'kotlin-kapt'\n  id 'com.google.devtools.ksp'\n  ...\n}\n```\n\n  kapt  `room-compiler`  ksp .\n\n```kotlin\ndependencies {\n  // ...\n  implementation \"androidx.room:room-runtime:2.3.0\"\n  // kapt \"androidx.room:room-compiler:2.3.0\"\n  ksp \"androidx.room:room-compiler:2.3.0\"\n  implementation \"androidx.room:room-ktx:2.3.0\"\n  // ...\n}\n```\n\n**  **\n\n{% asset_img HyjEy1l.png [HyjEy1l] %}\n\n   \n\nkaptGenerateStubsDebugKotlin **12.54s**\n\nkspDebugKotlin **5.49s**     **18.03s**   .\n\nKSP         ?\n\nAndroid Developer      .\n\n> **** [Announcing Kotlin Symbol Processing (KSP) Alpha](https://android-developers.googleblog.com/2021/02/announcing-kotlin-symbol-processing-ksp.html)\n\n      .\n\nThat said, using KAPT and KSP in the same module will likely slow down your build initially, so during this alpha period, it is best to use KSP and KAPT in separate modules.\n\n   kapt ksp        , \n\n  (ksp alpha ) kapt ksp      .\n\n  KAPT     , Room  KAPT, KSP       .\n\n**Compile Time By KAPT only using Room**\n{% asset_img NjWXyw6.png [Compile Time By KAPT only using Room] %}\n\n8.40s\n\n**Compile Time By KSP only using Room**\n\n{% asset_img 0HScWJk.png [Compile Time By KSP only using Room] %}\n\n0.71s\n\n         .\n\n<br>\n<br>\n<br>\n\n## References\n\n### Members of Study\n- [  - [Android] Annotation Processor ](https://www.charlezz.com/?p=1167)\n- [Namhoon Kims'Coding Log - KSP Api Part 1](https://namhoon.kim/2021/06/25/android_deep_dive/020_Kotlin%20Symbol%20Processing%20API%20Part%201/)\n- [Namhoon Kims'Coding Log - KSP Api Part 2](https://namhoon.kim/2021/06/27/android_deep_dive/021_Kotlin%20Symbol%20Processing%20API%20Part%202/)\n- [   - Introduce Kotlin Symbol Processing](https://soda1127.github.io/introduce-kotlin-symbol-processing/)\n- [   - Implement Kotlin Symbol Processing](https://soda1127.github.io/implement-kotlin-symbol-processing-example/)\n- [jsh-me.log - KSP(Kotlin Symbol Processor) ](https://velog.io/@jshme/KSP-Kotlin-Symbol-Processor-%ED%86%BA%EC%95%84%EB%B3%B4%EA%B8%B0)\n\n### Official\n- [Android Developers#androidx.annotation](https://developer.android.com/reference/androidx/annotation/package-summary)\n- [Google KSP Repository](https://github.com/google/ksp)\n- [KSP API definition](https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp)\n- [KSP Symbol definition](https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp/symbol)\n- [KAPT(Kotlin Annotation Processing Tool)](https://kotlinlang.org/docs/kapt.html)\n- [Announcing Kotlin Symbol Processing (KSP) Alpha](https://android-developers.googleblog.com/2021/02/announcing-kotlin-symbol-processing-ksp.html)\n- [Oracle JavaDoc#Annotations](https://docs.oracle.com/javase/tutorial/java/annotations/index.html)\n- [kapt: Annotation Processing for Kotlin](https://blog.jetbrains.com/kotlin/2015/05/kapt-annotation-processing-for-kotlin)\n- [Using kapt](https://kotlinlang.org/docs/kapt.html#using-in-gradle)\n\n### Etc\n- [Tachiyomi](https://github.com/tachiyomiorg/tachiyomi)\n- [My first Kotlin Symbol Processing Tool for Android](https://jsuch2362.medium.com/my-first-kotlin-symbol-processing-tool-for-android-4eb3a2cfd600)\n- [KSP: Fact or kapt?](https://proandroiddev.com/ksp-fact-or-kapt-7c7e9218c575)\n- [Annotation Processing 101](https://hannesdorfmann.com/annotation-processing/annotationprocessing101/)\n- [Kotlin : Kotlin plugin should be enabled before kotlin-kapt](https://imstudio.medium.com/kotlin-kotlin-plugin-should-be-enabled-before-kotlin-kapt-d5879f45f09d)\n- [Pushing the limits of Kotlin annotation processing](https://medium.com/@workingkills/pushing-the-limits-of-kotlin-annotation-processing-8611027b6711)\n","slug":"2021-07-21 Kotlin Symbol Processing Api Part 3","published":1,"updated":"2021-08-13T14:40:08.375Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cksagj7lz00203lre8lqf65qd","content":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>\n\n\n<span id=\"more\"></span>\n\n<p>    <strong>KAPT</strong>  <strong>KSP</strong>   .</p>\n<p>  <strong>KAPT</strong>  <strong>KSP</strong>   .</p>\n<h2 id=\"Better-than-KAPT\"><a href=\"#Better-than-KAPT\" class=\"headerlink\" title=\"Better than KAPT\"></a>Better than KAPT</h2><p>   KAPT Kotlin  Java Annotation Processor     Java  Stub  . </p>\n<p>Stub   kotlinc   3 1 ,      . </p>\n<p>KAPT  KSP Java   Kotlin  , <code>top-level function</code>  Kotlin    .</p>\n<p>KAPT        .</p>\n<p><strong>1. </strong></p>\n<p>      , <code>javax.lang.model</code>   API    . </p>\n<p>    KAPT   <strong> Stub</strong>   . </p>\n<p> Stub  KAPT    (symbol)  . Stub      1/3 . </p>\n<p>   KSP Glide    <strong>Tachiyomi</strong>    </p>\n<p>   21.55 KAPT   8.67, KSP   1.15  . </p>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/tachiyomiorg/tachiyomi\">Tachiyomi repository</a></p>\n</blockquote>\n<p><strong>2. </strong></p>\n<p>KSP  . </p>\n<p>KSP     (extension function),    (Declaration-Site Variance),  (local functions)  . </p>\n<p>     (assign-comppatibility)      .</p>\n<p>KSP     ,  ,         . </p>\n<p>   KType    SymbolProcessor   AbstractProcessor      .</p>\n<p>  Part 2 .</p>\n<p><strong>3.   </strong></p>\n<p>KSP JVM            . </p>\n<p>             . </p>\n<br>\n<br>\n<br>\n\n<h3 id=\"KAPT-vs-KSP---Feat-Room\"><a href=\"#KAPT-vs-KSP---Feat-Room\" class=\"headerlink\" title=\"KAPT vs KSP   (Feat_ Room)\"></a>KAPT vs KSP   (Feat_ Room)</h3><p>Rooom     .</p>\n<p>   .</p>\n<ol>\n<li>    </li>\n<li><code>RoomDatabase</code>   </li>\n<li>3 DAO, 3 Entity </li>\n</ol>\n<h4 id=\"KAPT-\"><a href=\"#KAPT-\" class=\"headerlink\" title=\"KAPT \"></a>KAPT </h4><p>  <code>kotlin-kapt</code> .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// build.gradle (app)</span></span><br><span class=\"line\">plugins &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  id <span class=\"string\">&#x27;kotlin-kapt&#x27;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  Room  , kapt room  .</p>\n<p>   Room  Kotlin    SQLite     Stub   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  implementation <span class=\"string\">&quot;androidx.room:room-runtime:2.3.0&quot;</span></span><br><span class=\"line\">  kapt <span class=\"string\">&quot;androidx.room:room-compiler:2.3.0&quot;</span></span><br><span class=\"line\">  implementation <span class=\"string\">&quot;androidx.room:room-ktx:2.3.0&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>RoomDatabase</code>  <code>ApplicationDatabase</code>  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Database(</span></span><br><span class=\"line\"><span class=\"meta\">  entities = [AEntity::class, BEntity::class, CEntity::class],</span></span><br><span class=\"line\"><span class=\"meta\">  version = 1,</span></span><br><span class=\"line\"><span class=\"meta\">  exportSchema = false</span></span><br><span class=\"line\"><span class=\"meta\">)</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationDatabase</span>: <span class=\"type\">RoomDatabase</span></span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">companion</span> <span class=\"keyword\">object</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">val</span> DB_NAME = <span class=\"string\">&quot;ApplicationDataBase.db&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ADao</span><span class=\"params\">()</span></span>: ADao</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">BDao</span><span class=\"params\">()</span></span>: BDao</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">CDao</span><span class=\"params\">()</span></span>: CDao</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Kotlin    Java Stub   .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"meta\">@SuppressWarnings(&#123;&quot;unchecked&quot;, &quot;deprecation&quot;&#125;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationDatabase_Impl</span> <span class=\"keyword\">extends</span> <span class=\"title\">ApplicationDatabase</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> ADao _aDao;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> BDao _bDao;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> CDao _cDao;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">protected</span> SupportSQLiteOpenHelper <span class=\"title\">createOpenHelper</span><span class=\"params\">(DatabaseConfiguration configuration)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> SupportSQLiteOpenHelper.Callback _openCallback = <span class=\"keyword\">new</span> RoomOpenHelper(configuration, <span class=\"keyword\">new</span> RoomOpenHelper.Delegate(<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">createAllTables</span><span class=\"params\">(SupportSQLiteDatabase _db)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;                              </span><br><span class=\"line\"><span class=\"comment\">// ...                                                                              </span></span><br></pre></td></tr></table></figure>\n\n<p><strong>  </strong></p>\n<img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%203/rcWvgv0.png\" class=\"\" title=\"[rcWvgv0]\">\n\n<p>  </p>\n<p>kaptGenerateStubsDebugKotlin  <strong>16.6s</strong>  .</p>\n<h4 id=\"KSP-\"><a href=\"#KSP-\" class=\"headerlink\" title=\"KSP \"></a>KSP </h4><p>  KAPT  KSP .</p>\n<p>  build.gradle       .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// build.gradle (root)</span></span><br><span class=\"line\">buildscript &#123;</span><br><span class=\"line\">  ext.kotlin_version = <span class=\"string\">&quot;1.4.21&quot;</span></span><br><span class=\"line\">  repositories &#123;</span><br><span class=\"line\">    google()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  dependencies &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    classpath(<span class=\"string\">&quot;com.google.devtools.ksp:com.google.devtools.ksp.gradle.plugin:1.5.20-1.0.0-beta04&quot;</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>app build.gradle <code>com.google.devtools.ksp</code>  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">plugins &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  id <span class=\"string\">&#x27;kotlin-kapt&#x27;</span></span><br><span class=\"line\">  id <span class=\"string\">&#x27;com.google.devtools.ksp&#x27;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  kapt  <code>room-compiler</code>  ksp .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  implementation <span class=\"string\">&quot;androidx.room:room-runtime:2.3.0&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">// kapt &quot;androidx.room:room-compiler:2.3.0&quot;</span></span><br><span class=\"line\">  ksp <span class=\"string\">&quot;androidx.room:room-compiler:2.3.0&quot;</span></span><br><span class=\"line\">  implementation <span class=\"string\">&quot;androidx.room:room-ktx:2.3.0&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>  </strong></p>\n<img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%203/HyjEy1l.png\" class=\"\" title=\"[HyjEy1l]\">\n\n<p>   </p>\n<p>kaptGenerateStubsDebugKotlin <strong>12.54s</strong></p>\n<p>kspDebugKotlin <strong>5.49s</strong>     <strong>18.03s</strong>   .</p>\n<p>KSP         ?</p>\n<p>Android Developer      .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://android-developers.googleblog.com/2021/02/announcing-kotlin-symbol-processing-ksp.html\">Announcing Kotlin Symbol Processing (KSP) Alpha</a></p>\n</blockquote>\n<p>      .</p>\n<p>That said, using KAPT and KSP in the same module will likely slow down your build initially, so during this alpha period, it is best to use KSP and KAPT in separate modules.</p>\n<p>   kapt ksp        , </p>\n<p>  (ksp alpha ) kapt ksp      .</p>\n<p>  KAPT     , Room  KAPT, KSP       .</p>\n<p><strong>Compile Time By KAPT only using Room</strong></p>\n<img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%203/NjWXyw6.png\" class=\"\" title=\"[Compile Time By KAPT only using Room]\">\n\n<p>8.40s</p>\n<p><strong>Compile Time By KSP only using Room</strong></p>\n<img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%203/0HScWJk.png\" class=\"\" title=\"[Compile Time By KSP only using Room]\">\n\n<p>0.71s</p>\n<p>         .</p>\n<br>\n<br>\n<br>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><h3 id=\"Members-of-Study\"><a href=\"#Members-of-Study\" class=\"headerlink\" title=\"Members of Study\"></a>Members of Study</h3><ul>\n<li><a href=\"https://www.charlezz.com/?p=1167\">  - [Android] Annotation Processor </a></li>\n<li><a href=\"https://namhoon.kim/2021/06/25/android_deep_dive/020_Kotlin%20Symbol%20Processing%20API%20Part%201/\">Namhoon KimsCoding Log - KSP Api Part 1</a></li>\n<li><a href=\"https://namhoon.kim/2021/06/27/android_deep_dive/021_Kotlin%20Symbol%20Processing%20API%20Part%202/\">Namhoon KimsCoding Log - KSP Api Part 2</a></li>\n<li><a href=\"https://soda1127.github.io/introduce-kotlin-symbol-processing/\">   - Introduce Kotlin Symbol Processing</a></li>\n<li><a href=\"https://soda1127.github.io/implement-kotlin-symbol-processing-example/\">   - Implement Kotlin Symbol Processing</a></li>\n<li><a href=\"https://velog.io/@jshme/KSP-Kotlin-Symbol-Processor-%ED%86%BA%EC%95%84%EB%B3%B4%EA%B8%B0\">jsh-me.log - KSP(Kotlin Symbol Processor) </a></li>\n</ul>\n<h3 id=\"Official\"><a href=\"#Official\" class=\"headerlink\" title=\"Official\"></a>Official</h3><ul>\n<li><a href=\"https://developer.android.com/reference/androidx/annotation/package-summary\">Android Developers#androidx.annotation</a></li>\n<li><a href=\"https://github.com/google/ksp\">Google KSP Repository</a></li>\n<li><a href=\"https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp\">KSP API definition</a></li>\n<li><a href=\"https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp/symbol\">KSP Symbol definition</a></li>\n<li><a href=\"https://kotlinlang.org/docs/kapt.html\">KAPT(Kotlin Annotation Processing Tool)</a></li>\n<li><a href=\"https://android-developers.googleblog.com/2021/02/announcing-kotlin-symbol-processing-ksp.html\">Announcing Kotlin Symbol Processing (KSP) Alpha</a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/index.html\">Oracle JavaDoc#Annotations</a></li>\n<li><a href=\"https://blog.jetbrains.com/kotlin/2015/05/kapt-annotation-processing-for-kotlin\">kapt: Annotation Processing for Kotlin</a></li>\n<li><a href=\"https://kotlinlang.org/docs/kapt.html#using-in-gradle\">Using kapt</a></li>\n</ul>\n<h3 id=\"Etc\"><a href=\"#Etc\" class=\"headerlink\" title=\"Etc\"></a>Etc</h3><ul>\n<li><a href=\"https://github.com/tachiyomiorg/tachiyomi\">Tachiyomi</a></li>\n<li><a href=\"https://jsuch2362.medium.com/my-first-kotlin-symbol-processing-tool-for-android-4eb3a2cfd600\">My first Kotlin Symbol Processing Tool for Android</a></li>\n<li><a href=\"https://proandroiddev.com/ksp-fact-or-kapt-7c7e9218c575\">KSP: Fact or kapt?</a></li>\n<li><a href=\"https://hannesdorfmann.com/annotation-processing/annotationprocessing101/\">Annotation Processing 101</a></li>\n<li><a href=\"https://imstudio.medium.com/kotlin-kotlin-plugin-should-be-enabled-before-kotlin-kapt-d5879f45f09d\">Kotlin : Kotlin plugin should be enabled before kotlin-kapt</a></li>\n<li><a href=\"https://medium.com/@workingkills/pushing-the-limits-of-kotlin-annotation-processing-8611027b6711\">Pushing the limits of Kotlin annotation processing</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<article class=\"message message-immersive is-primary\">\n    <div class=\"message-body\">\n        <i class=\"fas fa-pen-fancy mr-2\"></i>Writers<br>\n        by  @Knowre<br>\n        by  @Naver<br>\n        by  @SmartStudy<br>\n        by  @Naver<br>\n        by  @BankSalad<br>\n        by  @BankSalad\n    </div>\n</article>","more":"<p>    <strong>KAPT</strong>  <strong>KSP</strong>   .</p>\n<p>  <strong>KAPT</strong>  <strong>KSP</strong>   .</p>\n<h2 id=\"Better-than-KAPT\"><a href=\"#Better-than-KAPT\" class=\"headerlink\" title=\"Better than KAPT\"></a>Better than KAPT</h2><p>   KAPT Kotlin  Java Annotation Processor     Java  Stub  . </p>\n<p>Stub   kotlinc   3 1 ,      . </p>\n<p>KAPT  KSP Java   Kotlin  , <code>top-level function</code>  Kotlin    .</p>\n<p>KAPT        .</p>\n<p><strong>1. </strong></p>\n<p>      , <code>javax.lang.model</code>   API    . </p>\n<p>    KAPT   <strong> Stub</strong>   . </p>\n<p> Stub  KAPT    (symbol)  . Stub      1/3 . </p>\n<p>   KSP Glide    <strong>Tachiyomi</strong>    </p>\n<p>   21.55 KAPT   8.67, KSP   1.15  . </p>\n<blockquote>\n<p><strong></strong> <a href=\"https://github.com/tachiyomiorg/tachiyomi\">Tachiyomi repository</a></p>\n</blockquote>\n<p><strong>2. </strong></p>\n<p>KSP  . </p>\n<p>KSP     (extension function),    (Declaration-Site Variance),  (local functions)  . </p>\n<p>     (assign-comppatibility)      .</p>\n<p>KSP     ,  ,         . </p>\n<p>   KType    SymbolProcessor   AbstractProcessor      .</p>\n<p>  Part 2 .</p>\n<p><strong>3.   </strong></p>\n<p>KSP JVM            . </p>\n<p>             . </p>\n<br>\n<br>\n<br>\n\n<h3 id=\"KAPT-vs-KSP---Feat-Room\"><a href=\"#KAPT-vs-KSP---Feat-Room\" class=\"headerlink\" title=\"KAPT vs KSP   (Feat_ Room)\"></a>KAPT vs KSP   (Feat_ Room)</h3><p>Rooom     .</p>\n<p>   .</p>\n<ol>\n<li>    </li>\n<li><code>RoomDatabase</code>   </li>\n<li>3 DAO, 3 Entity </li>\n</ol>\n<h4 id=\"KAPT-\"><a href=\"#KAPT-\" class=\"headerlink\" title=\"KAPT \"></a>KAPT </h4><p>  <code>kotlin-kapt</code> .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// build.gradle (app)</span></span><br><span class=\"line\">plugins &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  id <span class=\"string\">&#x27;kotlin-kapt&#x27;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  Room  , kapt room  .</p>\n<p>   Room  Kotlin    SQLite     Stub   .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  implementation <span class=\"string\">&quot;androidx.room:room-runtime:2.3.0&quot;</span></span><br><span class=\"line\">  kapt <span class=\"string\">&quot;androidx.room:room-compiler:2.3.0&quot;</span></span><br><span class=\"line\">  implementation <span class=\"string\">&quot;androidx.room:room-ktx:2.3.0&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> <code>RoomDatabase</code>  <code>ApplicationDatabase</code>  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Database(</span></span><br><span class=\"line\"><span class=\"meta\">  entities = [AEntity::class, BEntity::class, CEntity::class],</span></span><br><span class=\"line\"><span class=\"meta\">  version = 1,</span></span><br><span class=\"line\"><span class=\"meta\">  exportSchema = false</span></span><br><span class=\"line\"><span class=\"meta\">)</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationDatabase</span>: <span class=\"type\">RoomDatabase</span></span>() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">companion</span> <span class=\"keyword\">object</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">val</span> DB_NAME = <span class=\"string\">&quot;ApplicationDataBase.db&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">ADao</span><span class=\"params\">()</span></span>: ADao</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">BDao</span><span class=\"params\">()</span></span>: BDao</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">CDao</span><span class=\"params\">()</span></span>: CDao</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Kotlin    Java Stub   .</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"meta\">@SuppressWarnings(&#123;&quot;unchecked&quot;, &quot;deprecation&quot;&#125;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApplicationDatabase_Impl</span> <span class=\"keyword\">extends</span> <span class=\"title\">ApplicationDatabase</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> ADao _aDao;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> BDao _bDao;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> CDao _cDao;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">protected</span> SupportSQLiteOpenHelper <span class=\"title\">createOpenHelper</span><span class=\"params\">(DatabaseConfiguration configuration)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> SupportSQLiteOpenHelper.Callback _openCallback = <span class=\"keyword\">new</span> RoomOpenHelper(configuration, <span class=\"keyword\">new</span> RoomOpenHelper.Delegate(<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">createAllTables</span><span class=\"params\">(SupportSQLiteDatabase _db)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;                              </span><br><span class=\"line\"><span class=\"comment\">// ...                                                                              </span></span><br></pre></td></tr></table></figure>\n\n<p><strong>  </strong></p>\n<img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%203/rcWvgv0.png\" class=\"\" title=\"[rcWvgv0]\">\n\n<p>  </p>\n<p>kaptGenerateStubsDebugKotlin  <strong>16.6s</strong>  .</p>\n<h4 id=\"KSP-\"><a href=\"#KSP-\" class=\"headerlink\" title=\"KSP \"></a>KSP </h4><p>  KAPT  KSP .</p>\n<p>  build.gradle       .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// build.gradle (root)</span></span><br><span class=\"line\">buildscript &#123;</span><br><span class=\"line\">  ext.kotlin_version = <span class=\"string\">&quot;1.4.21&quot;</span></span><br><span class=\"line\">  repositories &#123;</span><br><span class=\"line\">    google()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  dependencies &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    classpath(<span class=\"string\">&quot;com.google.devtools.ksp:com.google.devtools.ksp.gradle.plugin:1.5.20-1.0.0-beta04&quot;</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>app build.gradle <code>com.google.devtools.ksp</code>  .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">plugins &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  id <span class=\"string\">&#x27;kotlin-kapt&#x27;</span></span><br><span class=\"line\">  id <span class=\"string\">&#x27;com.google.devtools.ksp&#x27;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  kapt  <code>room-compiler</code>  ksp .</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  implementation <span class=\"string\">&quot;androidx.room:room-runtime:2.3.0&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">// kapt &quot;androidx.room:room-compiler:2.3.0&quot;</span></span><br><span class=\"line\">  ksp <span class=\"string\">&quot;androidx.room:room-compiler:2.3.0&quot;</span></span><br><span class=\"line\">  implementation <span class=\"string\">&quot;androidx.room:room-ktx:2.3.0&quot;</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>  </strong></p>\n<img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%203/HyjEy1l.png\" class=\"\" title=\"[HyjEy1l]\">\n\n<p>   </p>\n<p>kaptGenerateStubsDebugKotlin <strong>12.54s</strong></p>\n<p>kspDebugKotlin <strong>5.49s</strong>     <strong>18.03s</strong>   .</p>\n<p>KSP         ?</p>\n<p>Android Developer      .</p>\n<blockquote>\n<p><strong></strong> <a href=\"https://android-developers.googleblog.com/2021/02/announcing-kotlin-symbol-processing-ksp.html\">Announcing Kotlin Symbol Processing (KSP) Alpha</a></p>\n</blockquote>\n<p>      .</p>\n<p>That said, using KAPT and KSP in the same module will likely slow down your build initially, so during this alpha period, it is best to use KSP and KAPT in separate modules.</p>\n<p>   kapt ksp        , </p>\n<p>  (ksp alpha ) kapt ksp      .</p>\n<p>  KAPT     , Room  KAPT, KSP       .</p>\n<p><strong>Compile Time By KAPT only using Room</strong></p>\n<img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%203/NjWXyw6.png\" class=\"\" title=\"[Compile Time By KAPT only using Room]\">\n\n<p>8.40s</p>\n<p><strong>Compile Time By KSP only using Room</strong></p>\n<img src=\"/Team-Blog/2021/07/21/2021-07-21%20Kotlin%20Symbol%20Processing%20Api%20Part%203/0HScWJk.png\" class=\"\" title=\"[Compile Time By KSP only using Room]\">\n\n<p>0.71s</p>\n<p>         .</p>\n<br>\n<br>\n<br>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><h3 id=\"Members-of-Study\"><a href=\"#Members-of-Study\" class=\"headerlink\" title=\"Members of Study\"></a>Members of Study</h3><ul>\n<li><a href=\"https://www.charlezz.com/?p=1167\">  - [Android] Annotation Processor </a></li>\n<li><a href=\"https://namhoon.kim/2021/06/25/android_deep_dive/020_Kotlin%20Symbol%20Processing%20API%20Part%201/\">Namhoon KimsCoding Log - KSP Api Part 1</a></li>\n<li><a href=\"https://namhoon.kim/2021/06/27/android_deep_dive/021_Kotlin%20Symbol%20Processing%20API%20Part%202/\">Namhoon KimsCoding Log - KSP Api Part 2</a></li>\n<li><a href=\"https://soda1127.github.io/introduce-kotlin-symbol-processing/\">   - Introduce Kotlin Symbol Processing</a></li>\n<li><a href=\"https://soda1127.github.io/implement-kotlin-symbol-processing-example/\">   - Implement Kotlin Symbol Processing</a></li>\n<li><a href=\"https://velog.io/@jshme/KSP-Kotlin-Symbol-Processor-%ED%86%BA%EC%95%84%EB%B3%B4%EA%B8%B0\">jsh-me.log - KSP(Kotlin Symbol Processor) </a></li>\n</ul>\n<h3 id=\"Official\"><a href=\"#Official\" class=\"headerlink\" title=\"Official\"></a>Official</h3><ul>\n<li><a href=\"https://developer.android.com/reference/androidx/annotation/package-summary\">Android Developers#androidx.annotation</a></li>\n<li><a href=\"https://github.com/google/ksp\">Google KSP Repository</a></li>\n<li><a href=\"https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp\">KSP API definition</a></li>\n<li><a href=\"https://github.com/google/ksp/blob/main/api/src/main/kotlin/com/google/devtools/ksp/symbol\">KSP Symbol definition</a></li>\n<li><a href=\"https://kotlinlang.org/docs/kapt.html\">KAPT(Kotlin Annotation Processing Tool)</a></li>\n<li><a href=\"https://android-developers.googleblog.com/2021/02/announcing-kotlin-symbol-processing-ksp.html\">Announcing Kotlin Symbol Processing (KSP) Alpha</a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/index.html\">Oracle JavaDoc#Annotations</a></li>\n<li><a href=\"https://blog.jetbrains.com/kotlin/2015/05/kapt-annotation-processing-for-kotlin\">kapt: Annotation Processing for Kotlin</a></li>\n<li><a href=\"https://kotlinlang.org/docs/kapt.html#using-in-gradle\">Using kapt</a></li>\n</ul>\n<h3 id=\"Etc\"><a href=\"#Etc\" class=\"headerlink\" title=\"Etc\"></a>Etc</h3><ul>\n<li><a href=\"https://github.com/tachiyomiorg/tachiyomi\">Tachiyomi</a></li>\n<li><a href=\"https://jsuch2362.medium.com/my-first-kotlin-symbol-processing-tool-for-android-4eb3a2cfd600\">My first Kotlin Symbol Processing Tool for Android</a></li>\n<li><a href=\"https://proandroiddev.com/ksp-fact-or-kapt-7c7e9218c575\">KSP: Fact or kapt?</a></li>\n<li><a href=\"https://hannesdorfmann.com/annotation-processing/annotationprocessing101/\">Annotation Processing 101</a></li>\n<li><a href=\"https://imstudio.medium.com/kotlin-kotlin-plugin-should-be-enabled-before-kotlin-kapt-d5879f45f09d\">Kotlin : Kotlin plugin should be enabled before kotlin-kapt</a></li>\n<li><a href=\"https://medium.com/@workingkills/pushing-the-limits-of-kotlin-annotation-processing-8611027b6711\">Pushing the limits of Kotlin annotation processing</a></li>\n</ul>"}],"PostAsset":[{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 3/add_002_002.png","post":"cksagj7kw00043lre9kn363in","slug":"add_002_002.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/1_5gfrQWfxyEC7Oq6b2xlJ9w.png","post":"cksagj7km00003lre8y9f5bri","slug":"1_5gfrQWfxyEC7Oq6b2xlJ9w.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/VLTxB8C.png","post":"cksagj7km00003lre8y9f5bri","slug":"VLTxB8C.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/WprDTs1.png","post":"cksagj7km00003lre8y9f5bri","slug":"WprDTs1.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/aO6Jlsg.png","post":"cksagj7km00003lre8y9f5bri","slug":"aO6Jlsg.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/compose_animation.gif","post":"cksagj7km00003lre8y9f5bri","slug":"compose_animation.gif","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 1/qgQ6oY4.png","post":"cksagj7km00003lre8y9f5bri","slug":"qgQ6oY4.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_5RZOM7sWV0sXctJtTPdshQ.png","post":"cksagj7kt00013lree18reuhl","slug":"1_5RZOM7sWV0sXctJtTPdshQ.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_9IA2k2s5hAS9pSyzpmQ6Pw.png","post":"cksagj7kt00013lree18reuhl","slug":"1_9IA2k2s5hAS9pSyzpmQ6Pw.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_T9Pww7JyPMPhCJ_6yU8fyQ.png","post":"cksagj7kt00013lree18reuhl","slug":"1_T9Pww7JyPMPhCJ_6yU8fyQ.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_UoLVl1dbUjKh9kd4uY0ROA.png","post":"cksagj7kt00013lree18reuhl","slug":"1_UoLVl1dbUjKh9kd4uY0ROA.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_XVvr-CB2pn88Te7Gg52GPA.png","post":"cksagj7kt00013lree18reuhl","slug":"1_XVvr-CB2pn88Te7Gg52GPA.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_bSyX8yT7H2HevBNw9fbyYw.png","post":"cksagj7kt00013lree18reuhl","slug":"1_bSyX8yT7H2HevBNw9fbyYw.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_m7mSalYCza-SoJjmlYeWdA.png","post":"cksagj7kt00013lree18reuhl","slug":"1_m7mSalYCza-SoJjmlYeWdA.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_tPAf-Akf2IpDRrrZo1f1dg.png","post":"cksagj7kt00013lree18reuhl","slug":"1_tPAf-Akf2IpDRrrZo1f1dg.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_wFM4jF71V5aJog3lALaRKQ.png","post":"cksagj7kt00013lree18reuhl","slug":"1_wFM4jF71V5aJog3lALaRKQ.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/1_ybDWG4W2bPYNq79vr1gE8w.png","post":"cksagj7kt00013lree18reuhl","slug":"1_ybDWG4W2bPYNq79vr1gE8w.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-04-07 Jetpack Compose Part 2/add_002_001.png","post":"cksagj7kt00013lree18reuhl","slug":"add_002_001.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1/7AGranC.png","post":"cksagj7kx00053lre02i6f7pq","slug":"7AGranC.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1/EzHZMUm.png","post":"cksagj7kx00053lre02i6f7pq","slug":"EzHZMUm.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1/UntitledDiagram.png","post":"cksagj7kx00053lre02i6f7pq","slug":"UntitledDiagram.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1/image.png","post":"cksagj7kx00053lre02i6f7pq","slug":"image.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 1/qu5Mr6x.png","post":"cksagj7kx00053lre02i6f7pq","slug":"qu5Mr6x.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/1ZQEOg0.png","post":"cksagj7ky00063lreddjqc1bt","slug":"1ZQEOg0.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/4.png","post":"cksagj7ky00063lreddjqc1bt","slug":"4.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/7990Bf0.png","post":"cksagj7ky00063lreddjqc1bt","slug":"7990Bf0.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/JNfYVx7.png","post":"cksagj7ky00063lreddjqc1bt","slug":"JNfYVx7.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/cK00ybR.png","post":"cksagj7ky00063lreddjqc1bt","slug":"cK00ybR.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/ha7Eriy.png","post":"cksagj7ky00063lreddjqc1bt","slug":"ha7Eriy.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/image-1.png","post":"cksagj7ky00063lreddjqc1bt","slug":"image-1.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/image.png","post":"cksagj7ky00063lreddjqc1bt","slug":"image.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/n6fsbPA.png","post":"cksagj7ky00063lreddjqc1bt","slug":"n6fsbPA.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 2/ptHtNno.png","post":"cksagj7ky00063lreddjqc1bt","slug":"ptHtNno.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/after_merge.png","post":"cksagj7l400093lreh3dy7weh","slug":"after_merge.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/before_merge.png","post":"cksagj7l400093lreh3dy7weh","slug":"before_merge.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/example1.png","post":"cksagj7l400093lreh3dy7weh","slug":"example1.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/example2.png","post":"cksagj7l400093lreh3dy7weh","slug":"example2.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/gpu_profile.png","post":"cksagj7l400093lreh3dy7weh","slug":"gpu_profile.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/gpu_rendering_profile_1.png","post":"cksagj7l400093lreh3dy7weh","slug":"gpu_rendering_profile_1.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/gpu_rendering_profile_2.png","post":"cksagj7l400093lreh3dy7weh","slug":"gpu_rendering_profile_2.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/graph_color.png","post":"cksagj7l400093lreh3dy7weh","slug":"graph_color.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/image.png","post":"cksagj7l400093lreh3dy7weh","slug":"image.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_1.png","post":"cksagj7l400093lreh3dy7weh","slug":"overdrawn_1.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_2.png","post":"cksagj7l400093lreh3dy7weh","slug":"overdrawn_2.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_3.png","post":"cksagj7l400093lreh3dy7weh","slug":"overdrawn_3.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/overdrawn_4.png","post":"cksagj7l400093lreh3dy7weh","slug":"overdrawn_4.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-05-19 Android UI Rendering Optimization Part 3/zw3H5pZ.png","post":"cksagj7l400093lreh3dy7weh","slug":"zw3H5pZ.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 2/IMG_06A0242D2ABE-1.jpg","post":"cksagj7lt001s3lre6183g4z6","slug":"IMG_06A0242D2ABE-1.jpg","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 2/Screenshot_1624078627.png","post":"cksagj7lt001s3lre6183g4z6","slug":"Screenshot_1624078627.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 2/image.png","post":"cksagj7lt001s3lre6183g4z6","slug":"image.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/IMG_8FF7402ED110-1.jpg","post":"cksagj7ls001r3lrehr0p4cex","slug":"IMG_8FF7402ED110-1.jpg","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/IMG_9F5E046409C4-1.jpg","post":"cksagj7ls001r3lrehr0p4cex","slug":"IMG_9F5E046409C4-1.jpg","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/Screenshot_1623775512.png","post":"cksagj7ls001r3lrehr0p4cex","slug":"Screenshot_1623775512.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/coil_caching.gif","post":"cksagj7ls001r3lrehr0p4cex","slug":"coil_caching.gif","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/coil_heap_dump.png","post":"cksagj7ls001r3lrehr0p4cex","slug":"coil_heap_dump.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/coil_test.gif","post":"cksagj7ls001r3lrehr0p4cex","slug":"coil_test.gif","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/glide_caching.gif","post":"cksagj7ls001r3lrehr0p4cex","slug":"glide_caching.gif","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/glide_gif.gif","post":"cksagj7ls001r3lrehr0p4cex","slug":"glide_gif.gif","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/glide_heap_dump.png","post":"cksagj7ls001r3lrehr0p4cex","slug":"glide_heap_dump.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/glide_test.gif","post":"cksagj7ls001r3lrehr0p4cex","slug":"glide_test.gif","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/heap_dump.png","post":"cksagj7ls001r3lrehr0p4cex","slug":"heap_dump.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/picasso_caching.gif","post":"cksagj7ls001r3lrehr0p4cex","slug":"picasso_caching.gif","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 1/picasso_test.gif","post":"cksagj7ls001r3lrehr0p4cex","slug":"picasso_test.gif","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/0oDUU69.png","post":"cksagj7lv001v3lrebxc2cl09","slug":"0oDUU69.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/BntHJ2Y-1.png","post":"cksagj7lv001v3lrebxc2cl09","slug":"BntHJ2Y-1.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/BntHJ2Y.png","post":"cksagj7lv001v3lrebxc2cl09","slug":"BntHJ2Y.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/QafKUB1.png","post":"cksagj7lv001v3lrebxc2cl09","slug":"QafKUB1.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/TIrybR8.png","post":"cksagj7lv001v3lrebxc2cl09","slug":"TIrybR8.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/m7itaqy.png","post":"cksagj7lv001v3lrebxc2cl09","slug":"m7itaqy.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-06-24 Image Loading and Caching Library Part 3/rb1bMMt.png","post":"cksagj7lv001v3lrebxc2cl09","slug":"rb1bMMt.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 2/ClassDiagram.svg","post":"cksagj7lx001x3lreg56deplf","slug":"ClassDiagram.svg","modified":1,"renderable":1},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 3/0HScWJk.png","post":"cksagj7lz00203lre8lqf65qd","slug":"0HScWJk.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 3/HyjEy1l.png","post":"cksagj7lz00203lre8lqf65qd","slug":"HyjEy1l.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 3/NjWXyw6.png","post":"cksagj7lz00203lre8lqf65qd","slug":"NjWXyw6.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 3/rcWvgv0.png","post":"cksagj7lz00203lre8lqf65qd","slug":"rcWvgv0.png","modified":1,"renderable":1},{"_id":"source/_posts/2021-07-21 Kotlin Symbol Processing Api Part 1/processing_rounds.png","post":"cksagj7lw001w3lre4mfub16y","slug":"processing_rounds.png","modified":1,"renderable":1}],"PostCategory":[{"post_id":"cksagj7km00003lre8y9f5bri","category_id":"cksagj7ku00023lredvpg7r2d","_id":"cksagj7l6000b3lre4c3b5qvm"},{"post_id":"cksagj7kt00013lree18reuhl","category_id":"cksagj7ku00023lredvpg7r2d","_id":"cksagj7l7000e3lrecuk91js1"},{"post_id":"cksagj7kw00043lre9kn363in","category_id":"cksagj7ku00023lredvpg7r2d","_id":"cksagj7l9000h3lre8b8f6lx8"},{"post_id":"cksagj7kx00053lre02i6f7pq","category_id":"cksagj7l7000d3lre98av44g2","_id":"cksagj7la000n3lre1ogfbot4"},{"post_id":"cksagj7ky00063lreddjqc1bt","category_id":"cksagj7l7000d3lre98av44g2","_id":"cksagj7lc000p3lre0t5iaz07"},{"post_id":"cksagj7l400093lreh3dy7weh","category_id":"cksagj7l7000d3lre98av44g2","_id":"cksagj7ld000s3lreh5bg82mb"},{"post_id":"cksagj7ls001r3lrehr0p4cex","category_id":"cksagj7lv001t3lre61by7gxv","_id":"cksagj7m000223lrebuf7ds2h"},{"post_id":"cksagj7lt001s3lre6183g4z6","category_id":"cksagj7lv001t3lre61by7gxv","_id":"cksagj7m200263lre0d0dbxtk"},{"post_id":"cksagj7lv001v3lrebxc2cl09","category_id":"cksagj7lv001t3lre61by7gxv","_id":"cksagj7m2002a3lrec509f9cq"},{"post_id":"cksagj7lw001w3lre4mfub16y","category_id":"cksagj7m100253lre15wh1kot","_id":"cksagj7m4002g3lre5o64baks"},{"post_id":"cksagj7lx001x3lreg56deplf","category_id":"cksagj7m100253lre15wh1kot","_id":"cksagj7m6002j3lre0ptp62pg"},{"post_id":"cksagj7lz00203lre8lqf65qd","category_id":"cksagj7m100253lre15wh1kot","_id":"cksagj7m6002n3lre3sg0hx0v"}],"PostTag":[{"post_id":"cksagj7km00003lre8y9f5bri","tag_id":"cksagj7kw00033lreethh5z8y","_id":"cksagj7l9000g3lre477x633j"},{"post_id":"cksagj7km00003lre8y9f5bri","tag_id":"cksagj7kz00083lregnnl66v9","_id":"cksagj7l9000j3lre1borgbrg"},{"post_id":"cksagj7km00003lre8y9f5bri","tag_id":"cksagj7l6000c3lred9z54ods","_id":"cksagj7la000l3lrea25g0rf7"},{"post_id":"cksagj7kt00013lree18reuhl","tag_id":"cksagj7kw00033lreethh5z8y","_id":"cksagj7lc000r3lre49gkg30v"},{"post_id":"cksagj7kt00013lree18reuhl","tag_id":"cksagj7kz00083lregnnl66v9","_id":"cksagj7ld000t3lrebdye68sh"},{"post_id":"cksagj7kt00013lree18reuhl","tag_id":"cksagj7l6000c3lred9z54ods","_id":"cksagj7ld000v3lre3n4i2h9q"},{"post_id":"cksagj7kw00043lre9kn363in","tag_id":"cksagj7kw00033lreethh5z8y","_id":"cksagj7le000y3lre1j1refdv"},{"post_id":"cksagj7kw00043lre9kn363in","tag_id":"cksagj7kz00083lregnnl66v9","_id":"cksagj7le000z3lrebuwgefjs"},{"post_id":"cksagj7kw00043lre9kn363in","tag_id":"cksagj7l6000c3lred9z54ods","_id":"cksagj7lf00113lre7ovcdfth"},{"post_id":"cksagj7kx00053lre02i6f7pq","tag_id":"cksagj7kw00033lreethh5z8y","_id":"cksagj7lg00153lre1r9357aj"},{"post_id":"cksagj7kx00053lre02i6f7pq","tag_id":"cksagj7le000x3lreahsgh0t5","_id":"cksagj7lg00163lred06z2u1v"},{"post_id":"cksagj7kx00053lre02i6f7pq","tag_id":"cksagj7le00103lrehi3w4wbj","_id":"cksagj7lh00183lre73qrghet"},{"post_id":"cksagj7kx00053lre02i6f7pq","tag_id":"cksagj7lf00123lre45v41jyx","_id":"cksagj7lh00193lre2yw2h1d2"},{"post_id":"cksagj7kx00053lre02i6f7pq","tag_id":"cksagj7lf00133lre4nv30wmj","_id":"cksagj7lh001b3lre2lfi4iy1"},{"post_id":"cksagj7ky00063lreddjqc1bt","tag_id":"cksagj7kw00033lreethh5z8y","_id":"cksagj7lj001e3lreat3w3po9"},{"post_id":"cksagj7ky00063lreddjqc1bt","tag_id":"cksagj7le000x3lreahsgh0t5","_id":"cksagj7lj001f3lreaxfb3td6"},{"post_id":"cksagj7ky00063lreddjqc1bt","tag_id":"cksagj7le00103lrehi3w4wbj","_id":"cksagj7lk001h3lregk7ifwhr"},{"post_id":"cksagj7ky00063lreddjqc1bt","tag_id":"cksagj7lf00123lre45v41jyx","_id":"cksagj7lk001i3lrebp6096b1"},{"post_id":"cksagj7ky00063lreddjqc1bt","tag_id":"cksagj7lf00133lre4nv30wmj","_id":"cksagj7ll001k3lre2r3ne6nw"},{"post_id":"cksagj7l400093lreh3dy7weh","tag_id":"cksagj7kw00033lreethh5z8y","_id":"cksagj7ln001m3lre668ag60j"},{"post_id":"cksagj7l400093lreh3dy7weh","tag_id":"cksagj7le000x3lreahsgh0t5","_id":"cksagj7ln001n3lre23mk2axx"},{"post_id":"cksagj7l400093lreh3dy7weh","tag_id":"cksagj7le00103lrehi3w4wbj","_id":"cksagj7ln001o3lre21nmenfd"},{"post_id":"cksagj7l400093lreh3dy7weh","tag_id":"cksagj7lf00123lre45v41jyx","_id":"cksagj7ln001p3lre4bmjhwl8"},{"post_id":"cksagj7l400093lreh3dy7weh","tag_id":"cksagj7lf00133lre4nv30wmj","_id":"cksagj7ln001q3lre8d7f64ij"},{"post_id":"cksagj7ls001r3lrehr0p4cex","tag_id":"cksagj7kw00033lreethh5z8y","_id":"cksagj7m100243lre546l6qtm"},{"post_id":"cksagj7ls001r3lrehr0p4cex","tag_id":"cksagj7lv001u3lregycd00zi","_id":"cksagj7m200273lre0oi60vyn"},{"post_id":"cksagj7ls001r3lrehr0p4cex","tag_id":"cksagj7ly001z3lre4d20a63f","_id":"cksagj7m200293lre7eqzgzwd"},{"post_id":"cksagj7lt001s3lre6183g4z6","tag_id":"cksagj7kw00033lreethh5z8y","_id":"cksagj7m4002d3lre8k6g6pdu"},{"post_id":"cksagj7lt001s3lre6183g4z6","tag_id":"cksagj7lv001u3lregycd00zi","_id":"cksagj7m4002e3lredtrs5dt1"},{"post_id":"cksagj7lt001s3lre6183g4z6","tag_id":"cksagj7ly001z3lre4d20a63f","_id":"cksagj7m5002i3lre30v78c90"},{"post_id":"cksagj7lv001v3lrebxc2cl09","tag_id":"cksagj7kw00033lreethh5z8y","_id":"cksagj7m6002l3lre9395a3pc"},{"post_id":"cksagj7lv001v3lrebxc2cl09","tag_id":"cksagj7lv001u3lregycd00zi","_id":"cksagj7m6002m3lre47uj2wr7"},{"post_id":"cksagj7lv001v3lrebxc2cl09","tag_id":"cksagj7ly001z3lre4d20a63f","_id":"cksagj7m6002p3lre3s4b0zpw"},{"post_id":"cksagj7lw001w3lre4mfub16y","tag_id":"cksagj7m6002k3lredu421j4u","_id":"cksagj7m8002v3lrebxmedwdn"},{"post_id":"cksagj7lw001w3lre4mfub16y","tag_id":"cksagj7m6002o3lre4tch7s0q","_id":"cksagj7m8002w3lre9ggx75or"},{"post_id":"cksagj7lw001w3lre4mfub16y","tag_id":"cksagj7m7002q3lrea5d09i7p","_id":"cksagj7m9002y3lre8rs6deq7"},{"post_id":"cksagj7lw001w3lre4mfub16y","tag_id":"cksagj7m7002r3lre5l4i6jtk","_id":"cksagj7m9002z3lredtzo1kee"},{"post_id":"cksagj7lw001w3lre4mfub16y","tag_id":"cksagj7m7002s3lred1dmfuvf","_id":"cksagj7ma00313lre1fj70h2w"},{"post_id":"cksagj7lw001w3lre4mfub16y","tag_id":"cksagj7m7002t3lre6jkn260o","_id":"cksagj7ma00323lre41dib44z"},{"post_id":"cksagj7lx001x3lreg56deplf","tag_id":"cksagj7m6002k3lredu421j4u","_id":"cksagj7mc00373lrefkvfau9e"},{"post_id":"cksagj7lx001x3lreg56deplf","tag_id":"cksagj7m6002o3lre4tch7s0q","_id":"cksagj7mc00383lrebir9dx0f"},{"post_id":"cksagj7lx001x3lreg56deplf","tag_id":"cksagj7m7002q3lrea5d09i7p","_id":"cksagj7md003a3lre3mat88wl"},{"post_id":"cksagj7lx001x3lreg56deplf","tag_id":"cksagj7m7002r3lre5l4i6jtk","_id":"cksagj7md003b3lrehq515vv0"},{"post_id":"cksagj7lx001x3lreg56deplf","tag_id":"cksagj7m7002s3lred1dmfuvf","_id":"cksagj7me003d3lre60o63xkz"},{"post_id":"cksagj7lx001x3lreg56deplf","tag_id":"cksagj7m7002t3lre6jkn260o","_id":"cksagj7me003e3lre113thnna"},{"post_id":"cksagj7lz00203lre8lqf65qd","tag_id":"cksagj7m6002k3lredu421j4u","_id":"cksagj7mg003i3lrebr1w2vcs"},{"post_id":"cksagj7lz00203lre8lqf65qd","tag_id":"cksagj7m6002o3lre4tch7s0q","_id":"cksagj7mg003j3lre5ec786tr"},{"post_id":"cksagj7lz00203lre8lqf65qd","tag_id":"cksagj7m7002q3lrea5d09i7p","_id":"cksagj7mg003k3lre42tdc0jz"},{"post_id":"cksagj7lz00203lre8lqf65qd","tag_id":"cksagj7m7002r3lre5l4i6jtk","_id":"cksagj7mg003l3lrehk737dub"},{"post_id":"cksagj7lz00203lre8lqf65qd","tag_id":"cksagj7m7002s3lred1dmfuvf","_id":"cksagj7mg003m3lredhbvhl0a"},{"post_id":"cksagj7lz00203lre8lqf65qd","tag_id":"cksagj7m7002t3lre6jkn260o","_id":"cksagj7mg003n3lre39ad4l3b"}],"Tag":[{"name":"Android","_id":"cksagj7kw00033lreethh5z8y"},{"name":"Jetpack","_id":"cksagj7kz00083lregnnl66v9"},{"name":"Compose","_id":"cksagj7l6000c3lred9z54ods"},{"name":"Rendering","_id":"cksagj7le000x3lreahsgh0t5"},{"name":"Principle","_id":"cksagj7le00103lrehi3w4wbj"},{"name":"Optimize","_id":"cksagj7lf00123lre45v41jyx"},{"name":"UI","_id":"cksagj7lf00133lre4nv30wmj"},{"name":"Image","_id":"cksagj7lv001u3lregycd00zi"},{"name":"Library","_id":"cksagj7ly001z3lre4d20a63f"},{"name":"KSP","_id":"cksagj7m6002k3lredu421j4u"},{"name":"Kotlin","_id":"cksagj7m6002o3lre4tch7s0q"},{"name":"Symbol","_id":"cksagj7m7002q3lrea5d09i7p"},{"name":"Processing","_id":"cksagj7m7002r3lre5l4i6jtk"},{"name":"KAPT","_id":"cksagj7m7002s3lred1dmfuvf"},{"name":"Annotation","_id":"cksagj7m7002t3lre6jkn260o"}]}}